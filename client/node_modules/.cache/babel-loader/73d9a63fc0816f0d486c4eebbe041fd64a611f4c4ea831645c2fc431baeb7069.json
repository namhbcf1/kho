{"ast":null,"code":"import _objectSpread from\"C:/Users/ADMIN/Desktop/kho/kho/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{message}from'antd';import{Card,Table,Button,Modal,Input,Select,DatePicker,Space,Tag,Row,Col,Statistic,Tabs,InputNumber,Alert,Badge,Typography,Form}from'antd';import{PlusOutlined,UserOutlined,ShopOutlined,DollarOutlined,ExclamationCircleOutlined,CheckCircleOutlined,CreditCardOutlined,WalletOutlined}from'@ant-design/icons';import{customersAPI,suppliersAPI,financialAPI}from'../services/api';import dayjs from'dayjs';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const{Option}=Select;const{TabPane}=Tabs;const{Text}=Typography;const DebtPage=()=>{const[customerDebts,setCustomerDebts]=useState([]);const[supplierDebts,setSupplierDebts]=useState([]);const[customers,setCustomers]=useState([]);const[suppliers,setSuppliers]=useState([]);const[loading,setLoading]=useState(false);const[modalVisible,setModalVisible]=useState(false);const[activeTab,setActiveTab]=useState('customers');const[modalType,setModalType]=useState('payment');// 'payment' or 'debt'\nconst[submitting,setSubmitting]=useState(false);const[debtStats,setDebtStats]=useState({totalCustomerDebt:0,totalSupplierDebt:0,overduCustomerDebt:0,overdueSupplierDebt:0});// üÜï Ant Design Form instance\nconst[form]=Form.useForm();const paymentMethods=[{value:'cash',label:'Ti·ªÅn m·∫∑t',icon:/*#__PURE__*/_jsx(DollarOutlined,{})},{value:'card',label:'Th·∫ª',icon:/*#__PURE__*/_jsx(CreditCardOutlined,{})},{value:'transfer',label:'Chuy·ªÉn kho·∫£n',icon:/*#__PURE__*/_jsx(WalletOutlined,{})},{value:'ewallet',label:'V√≠ ƒëi·ªán t·ª≠',icon:/*#__PURE__*/_jsx(WalletOutlined,{})}];useEffect(()=>{console.log('üöÄ DebtPage mounted, fetching data...');fetchData();},[]);useEffect(()=>{console.log('üîÑ Customers state updated:',customers);},[customers]);useEffect(()=>{console.log('üîÑ Suppliers state updated:',suppliers);},[suppliers]);// Process debts when customers/suppliers data changes\nuseEffect(()=>{if(customers.length>0){fetchCustomerDebts();}},[customers]);// eslint-disable-line react-hooks/exhaustive-deps\nuseEffect(()=>{if(suppliers.length>0){fetchSupplierDebts();}},[suppliers]);// eslint-disable-line react-hooks/exhaustive-deps\nconst fetchData=async()=>{setLoading(true);try{// First fetch all customers and suppliers\nawait Promise.all([fetchCustomers(),fetchSuppliers()]);// Then process debts (this will be done in useEffect when customers/suppliers change)\n}catch(error){message.error('L·ªói khi t·∫£i d·ªØ li·ªáu');}finally{setLoading(false);}};const fetchCustomerDebts=async()=>{try{// Use customers data that's already fetched and enhanced\nconst customersWithDebt=customers.filter(c=>(c.current_debt||0)>0);setCustomerDebts(customersWithDebt);// Calculate debt stats\nconst totalDebt=customersWithDebt.reduce((sum,c)=>sum+(c.current_debt||0),0);setDebtStats(prev=>_objectSpread(_objectSpread({},prev),{},{totalCustomerDebt:totalDebt}));}catch(error){console.error('Error processing customer debts:',error);setCustomerDebts([]);}};const fetchSupplierDebts=async()=>{try{// Use suppliers data that's already fetched and enhanced\nconst suppliersWithDebt=suppliers.filter(s=>(s.current_debt||0)>0);setSupplierDebts(suppliersWithDebt);// Calculate debt stats\nconst totalDebt=suppliersWithDebt.reduce((sum,s)=>sum+(s.current_debt||0),0);setDebtStats(prev=>_objectSpread(_objectSpread({},prev),{},{totalSupplierDebt:totalDebt}));}catch(error){console.error('Error processing supplier debts:',error);setSupplierDebts([]);}};const fetchCustomers=async()=>{try{const response=await customersAPI.getAll();console.log('üë• Raw customers response:',response.data);if(response.data.success){// Calculate debt for each customer (mock calculation for now)\nconst customersWithDebt=response.data.data.map(customer=>_objectSpread(_objectSpread({},customer),{},{current_debt:customer.current_debt||Math.floor(Math.random()*5000000),// Mock debt for demo\ntotal_spent:customer.total_spent||Math.floor(Math.random()*20000000)}));console.log('üí∞ Customers with debt:',customersWithDebt);console.log('üìä Total customers for dropdown:',customersWithDebt.length);setCustomers(customersWithDebt);}}catch(error){console.error('Error fetching customers:',error);// Fallback: Set empty array to avoid crashes\nsetCustomers([]);}};const fetchSuppliers=async()=>{try{const response=await suppliersAPI.getAll();console.log('üè≠ Raw suppliers response:',response.data);if(response.data.success){// Calculate debt for each supplier (mock calculation for now)\nconst suppliersWithDebt=response.data.data.map(supplier=>_objectSpread(_objectSpread({},supplier),{},{current_debt:supplier.current_debt||Math.floor(Math.random()*10000000),// Mock debt for demo\ntotal_purchases:supplier.total_purchases||Math.floor(Math.random()*50000000)}));console.log('üí∞ Suppliers with debt:',suppliersWithDebt);console.log('üìä Total suppliers for dropdown:',suppliersWithDebt.length);setSuppliers(suppliersWithDebt);}}catch(error){console.error('Error fetching suppliers:',error);// Fallback: Set empty array to avoid crashes\nsetSuppliers([]);}};// üÜï Enhanced form submission with proper error handling\nconst handlePayDebt=async values=>{try{var _values$transaction_d;setSubmitting(true);console.log('üí∞ Submitting payment data:',values);const transactionData={type:activeTab==='customers'?'income':'expense',category:activeTab==='customers'?'Thu n·ª£ kh√°ch h√†ng':'Tr·∫£ n·ª£ nh√† cung c·∫•p',amount:values.amount,description:values.description||\"Thanh to\\xE1n n\\u1EE3 \".concat(activeTab==='customers'?'kh√°ch h√†ng':'nh√† cung c·∫•p'),customer_id:activeTab==='customers'?values.entity_id:null,supplier_id:activeTab==='suppliers'?values.entity_id:null,payment_method:values.payment_method,transaction_date:((_values$transaction_d=values.transaction_date)===null||_values$transaction_d===void 0?void 0:_values$transaction_d.toISOString())||new Date().toISOString(),user_id:1};console.log('üì§ Transaction data to send:',transactionData);const response=await financialAPI.create(transactionData);if(response.data.success){message.success('Ghi nh·∫≠n thanh to√°n th√†nh c√¥ng!');setModalVisible(false);form.resetFields();fetchData();}else{throw new Error(response.data.message||'L·ªói kh√¥ng x√°c ƒë·ªãnh');}}catch(error){console.error('‚ùå Payment submission error:',error);message.error(error.message||'L·ªói khi ghi nh·∫≠n thanh to√°n');}finally{setSubmitting(false);}};// üÜï Enhanced modal close handler\nconst handleModalClose=()=>{setModalVisible(false);form.resetFields();setSubmitting(false);};const customerColumns=[{title:'M√£ KH',dataIndex:'code',key:'code',width:100},{title:'T√™n kh√°ch h√†ng',dataIndex:'name',key:'name',render:(name,record)=>/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{children:name}),record.phone&&/*#__PURE__*/_jsx(Text,{type:\"secondary\",style:{fontSize:12},children:record.phone})]})},{title:'Lo·∫°i KH',dataIndex:'customer_type',key:'customer_type',render:type=>{const colors={regular:'default',vip:'gold',wholesale:'blue'};const labels={regular:'Th∆∞·ªùng',vip:'VIP',wholesale:'S·ªâ'};return/*#__PURE__*/_jsx(Tag,{color:colors[type],children:labels[type]});}},{title:'S·ªë n·ª£',dataIndex:'current_debt',key:'current_debt',render:debt=>/*#__PURE__*/_jsxs(Text,{strong:true,style:{color:debt>0?'#ff4d4f':'#52c41a'},children:[debt.toLocaleString('vi-VN'),\" \\u20AB\"]}),sorter:(a,b)=>a.current_debt-b.current_debt},{title:'T·ªïng chi ti√™u',dataIndex:'total_spent',key:'total_spent',render:spent=>/*#__PURE__*/_jsxs(Text,{type:\"secondary\",children:[spent?spent.toLocaleString('vi-VN'):0,\" \\u20AB\"]})},{title:'Tr·∫°ng th√°i',key:'status',render:(_,record)=>{const debt=record.current_debt||0;if(debt===0){return/*#__PURE__*/_jsx(Badge,{status:\"success\",text:\"\\u0110\\xE3 thanh to\\xE1n\"});}else if(debt>1000000){return/*#__PURE__*/_jsx(Badge,{status:\"error\",text:\"N\\u1EE3 l\\u1EDBn\"});}else{return/*#__PURE__*/_jsx(Badge,{status:\"warning\",text:\"C\\xF3 n\\u1EE3\"});}}},{title:'Thao t√°c',key:'actions',render:(_,record)=>/*#__PURE__*/_jsx(Space,{children:/*#__PURE__*/_jsx(Button,{type:\"primary\",size:\"small\",icon:/*#__PURE__*/_jsx(DollarOutlined,{}),onClick:()=>{setModalType('payment');setActiveTab('customers');setModalVisible(true);// üÜï Set form values v·ªõi Ant Design Form\nform.setFieldsValue({entity_id:record.id,payment_method:'cash',transaction_date:dayjs(),amount:record.current_debt||0,description:\"Thanh to\\xE1n n\\u1EE3 kh\\xE1ch h\\xE0ng \".concat(record.name)});},children:\"Thanh to\\xE1n\"})})}];const supplierColumns=[{title:'M√£ NCC',dataIndex:'code',key:'code',width:100},{title:'T√™n nh√† cung c·∫•p',dataIndex:'name',key:'name',render:(name,record)=>/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{children:name}),record.phone&&/*#__PURE__*/_jsx(Text,{type:\"secondary\",style:{fontSize:12},children:record.phone})]})},{title:'ƒê·ªãa ch·ªâ',dataIndex:'address',key:'address',ellipsis:true},{title:'S·ªë n·ª£',dataIndex:'current_debt',key:'current_debt',render:debt=>/*#__PURE__*/_jsxs(Text,{strong:true,style:{color:debt>0?'#ff4d4f':'#52c41a'},children:[debt.toLocaleString('vi-VN'),\" \\u20AB\"]}),sorter:(a,b)=>a.current_debt-b.current_debt},{title:'Tr·∫°ng th√°i',key:'status',render:(_,record)=>{const debt=record.current_debt||0;if(debt===0){return/*#__PURE__*/_jsx(Badge,{status:\"success\",text:\"\\u0110\\xE3 thanh to\\xE1n\"});}else if(debt>5000000){return/*#__PURE__*/_jsx(Badge,{status:\"error\",text:\"N\\u1EE3 l\\u1EDBn\"});}else{return/*#__PURE__*/_jsx(Badge,{status:\"warning\",text:\"C\\xF3 n\\u1EE3\"});}}},{title:'Thao t√°c',key:'actions',render:(_,record)=>/*#__PURE__*/_jsx(Space,{children:/*#__PURE__*/_jsx(Button,{type:\"primary\",size:\"small\",icon:/*#__PURE__*/_jsx(DollarOutlined,{}),onClick:()=>{setModalType('payment');setActiveTab('suppliers');setModalVisible(true);// üÜï Set form values v·ªõi Ant Design Form\nform.setFieldsValue({entity_id:record.id,payment_method:'cash',transaction_date:dayjs(),amount:record.current_debt||0,description:\"Thanh to\\xE1n n\\u1EE3 nh\\xE0 cung c\\u1EA5p \".concat(record.name)});},children:\"Thanh to\\xE1n\"})})}];const renderDebtSummary=()=>{return/*#__PURE__*/_jsxs(Row,{gutter:16,style:{marginBottom:24},children:[/*#__PURE__*/_jsx(Col,{span:6,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(Statistic,{title:\"T\\u1ED5ng n\\u1EE3 kh\\xE1ch h\\xE0ng\",value:debtStats.totalCustomerDebt,precision:0,valueStyle:{color:'#cf1322'},prefix:/*#__PURE__*/_jsx(UserOutlined,{}),suffix:\"\\u20AB\"})})}),/*#__PURE__*/_jsx(Col,{span:6,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(Statistic,{title:\"T\\u1ED5ng n\\u1EE3 nh\\xE0 cung c\\u1EA5p\",value:debtStats.totalSupplierDebt,precision:0,valueStyle:{color:'#cf1322'},prefix:/*#__PURE__*/_jsx(ShopOutlined,{}),suffix:\"\\u20AB\"})})}),/*#__PURE__*/_jsx(Col,{span:6,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(Statistic,{title:\"T\\u1ED5ng n\\u1EE3 ph\\u1EA3i thu\",value:debtStats.totalCustomerDebt+debtStats.totalSupplierDebt,precision:0,valueStyle:{color:'#1890ff'},prefix:/*#__PURE__*/_jsx(DollarOutlined,{}),suffix:\"\\u20AB\"})})}),/*#__PURE__*/_jsx(Col,{span:6,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(Statistic,{title:\"S\\u1ED1 kh\\xE1ch h\\xE0ng c\\xF3 n\\u1EE3\",value:customerDebts.length,valueStyle:{color:'#52c41a'},prefix:/*#__PURE__*/_jsx(UserOutlined,{})})})})]});};return/*#__PURE__*/_jsxs(\"div\",{style:{padding:24},children:[renderDebtSummary(),/*#__PURE__*/_jsx(Alert,{message:\"Qu\\u1EA3n l\\xFD n\\u1EE3\",description:\"Theo d\\xF5i v\\xE0 qu\\u1EA3n l\\xFD c\\xE1c kho\\u1EA3n n\\u1EE3 c\\u1EE7a kh\\xE1ch h\\xE0ng v\\xE0 nh\\xE0 cung c\\u1EA5p. H\\u1EC7 th\\u1ED1ng s\\u1EBD t\\u1EF1 \\u0111\\u1ED9ng c\\u1EADp nh\\u1EADt s\\u1ED1 d\\u01B0 n\\u1EE3 khi c\\xF3 giao d\\u1ECBch thanh to\\xE1n.\",type:\"info\",showIcon:true,style:{marginBottom:24}}),/*#__PURE__*/_jsxs(Tabs,{activeKey:activeTab,onChange:setActiveTab,children:[/*#__PURE__*/_jsx(TabPane,{tab:/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(UserOutlined,{}),\"N\\u1EE3 kh\\xE1ch h\\xE0ng (\",customerDebts.length,\")\"]}),children:/*#__PURE__*/_jsx(Card,{title:\"Danh s\\xE1ch kh\\xE1ch h\\xE0ng c\\xF3 n\\u1EE3\",extra:/*#__PURE__*/_jsx(Button,{type:\"primary\",icon:/*#__PURE__*/_jsx(PlusOutlined,{}),onClick:()=>{setModalType('payment');setActiveTab('customers');setModalVisible(true);// üÜï Reset form v·ªõi values m·∫∑c ƒë·ªãnh\nform.setFieldsValue({payment_method:'cash',transaction_date:dayjs(),entity_id:undefined,amount:undefined,description:''});},children:\"Ghi nh\\u1EADn thanh to\\xE1n\"}),children:/*#__PURE__*/_jsx(Table,{columns:customerColumns,dataSource:customerDebts,loading:loading,rowKey:\"id\",pagination:{showSizeChanger:true,showQuickJumper:true,showTotal:(total,range)=>\"\".concat(range[0],\"-\").concat(range[1],\" c\\u1EE7a \").concat(total,\" kh\\xE1ch h\\xE0ng\")}})})},\"customers\"),/*#__PURE__*/_jsx(TabPane,{tab:/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(ShopOutlined,{}),\"N\\u1EE3 nh\\xE0 cung c\\u1EA5p (\",supplierDebts.length,\")\"]}),children:/*#__PURE__*/_jsx(Card,{title:\"Danh s\\xE1ch nh\\xE0 cung c\\u1EA5p c\\xF3 n\\u1EE3\",extra:/*#__PURE__*/_jsx(Button,{type:\"primary\",icon:/*#__PURE__*/_jsx(PlusOutlined,{}),onClick:()=>{setModalType('payment');setActiveTab('suppliers');setModalVisible(true);// üÜï Reset form v·ªõi values m·∫∑c ƒë·ªãnh\nform.setFieldsValue({payment_method:'cash',transaction_date:dayjs(),entity_id:undefined,amount:undefined,description:''});},children:\"Ghi nh\\u1EADn thanh to\\xE1n\"}),children:/*#__PURE__*/_jsx(Table,{columns:supplierColumns,dataSource:supplierDebts,loading:loading,rowKey:\"id\",pagination:{showSizeChanger:true,showQuickJumper:true,showTotal:(total,range)=>\"\".concat(range[0],\"-\").concat(range[1],\" c\\u1EE7a \").concat(total,\" nh\\xE0 cung c\\u1EA5p\")}})})},\"suppliers\")]}),/*#__PURE__*/_jsx(Modal,{title:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'8px'},children:[/*#__PURE__*/_jsx(DollarOutlined,{style:{color:'#52c41a'}}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Ghi nh\\u1EADn thanh to\\xE1n \",activeTab==='customers'?'n·ª£ kh√°ch h√†ng':'n·ª£ nh√† cung c·∫•p']})]}),open:modalVisible,onCancel:handleModalClose,footer:null,width:700,destroyOnClose:true,children:/*#__PURE__*/_jsxs(Form,{form:form,layout:\"vertical\",onFinish:handlePayDebt,initialValues:{payment_method:'cash',transaction_date:dayjs()},children:[/*#__PURE__*/_jsx(Form.Item,{label:\"\".concat(activeTab==='customers'?'Kh√°ch h√†ng':'Nh√† cung c·∫•p'),name:\"entity_id\",rules:[{required:true,message:\"Vui l\\xF2ng ch\\u1ECDn \".concat(activeTab==='customers'?'kh√°ch h√†ng':'nh√† cung c·∫•p')}],children:/*#__PURE__*/_jsx(Select,{placeholder:\"Ch\\u1ECDn \".concat(activeTab==='customers'?'kh√°ch h√†ng':'nh√† cung c·∫•p'),style:{width:'100%'},showSearch:true,filterOption:(input,option)=>{const children=typeof option.children==='string'?option.children:'';return children.toLowerCase().indexOf(input.toLowerCase())>=0;},size:\"large\",children:(()=>{const entities=activeTab==='customers'?customers:suppliers;console.log(\"\\uD83D\\uDD0D Rendering dropdown for \".concat(activeTab,\":\"),entities);console.log(\"\\uD83D\\uDCCB Total entities to render: \".concat(entities.length));return entities&&entities.length>0?entities.map(entity=>{// üõ°Ô∏è Safety check ƒë·ªÉ tr√°nh undefined\nif(!entity||!entity.id||!entity.name){console.warn('‚ö†Ô∏è Invalid entity found:',entity);return null;}return/*#__PURE__*/_jsx(Option,{value:entity.id,children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:'bold'},children:entity.name}),entity.phone&&/*#__PURE__*/_jsxs(Text,{type:\"secondary\",style:{fontSize:12},children:[\"\\uD83D\\uDCDE \",entity.phone]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Text,{type:\"secondary\",style:{fontSize:12,color:'#ff4d4f'},children:[\"\\uD83D\\uDCB0 N\\u1EE3 hi\\u1EC7n t\\u1EA1i: \",(entity.current_debt||0).toLocaleString('vi-VN'),\" \\u20AB\"]})})]})},entity.id);}).filter(Boolean):[];// Filter out null entries\n})()})}),/*#__PURE__*/_jsxs(Row,{gutter:16,children:[/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(Form.Item,{label:\"S\\u1ED1 ti\\u1EC1n thanh to\\xE1n\",name:\"amount\",rules:[{required:true,message:'Vui l√≤ng nh·∫≠p s·ªë ti·ªÅn'},{type:'number',min:1,message:'S·ªë ti·ªÅn ph·∫£i l·ªõn h∆°n 0'}],children:/*#__PURE__*/_jsx(InputNumber,{placeholder:\"Nh\\u1EADp s\\u1ED1 ti\\u1EC1n\",style:{width:'100%'},formatter:value=>\"\".concat(value).replace(/\\B(?=(\\d{3})+(?!\\d))/g,','),parser:value=>value?value.replace(/\\$\\s?|(,*)/g,''):'',min:0,size:\"large\",addonAfter:\"\\u20AB\"})})}),/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(Form.Item,{label:\"Ph\\u01B0\\u01A1ng th\\u1EE9c thanh to\\xE1n\",name:\"payment_method\",rules:[{required:true,message:'Vui l√≤ng ch·ªçn ph∆∞∆°ng th·ª©c thanh to√°n'}],children:/*#__PURE__*/_jsx(Select,{placeholder:\"Ch\\u1ECDn ph\\u01B0\\u01A1ng th\\u1EE9c\",style:{width:'100%'},size:\"large\",children:paymentMethods.map(method=>/*#__PURE__*/_jsx(Option,{value:method.value,children:/*#__PURE__*/_jsxs(Space,{children:[method.icon,method.label]})},method.value))})})})]}),/*#__PURE__*/_jsx(Form.Item,{label:\"M\\xF4 t\\u1EA3\",name:\"description\",children:/*#__PURE__*/_jsx(Input.TextArea,{placeholder:\"Nh\\u1EADp m\\xF4 t\\u1EA3 thanh to\\xE1n (t\\xF9y ch\\u1ECDn)\",rows:3,showCount:true,maxLength:500})}),/*#__PURE__*/_jsx(Form.Item,{label:\"Ng\\xE0y thanh to\\xE1n\",name:\"transaction_date\",rules:[{required:true,message:'Vui l√≤ng ch·ªçn ng√†y thanh to√°n'}],children:/*#__PURE__*/_jsx(DatePicker,{style:{width:'100%'},size:\"large\",format:\"DD/MM/YYYY\",placeholder:\"Ch\\u1ECDn ng\\xE0y thanh to\\xE1n\"})}),/*#__PURE__*/_jsx(Form.Item,{style:{textAlign:'right',marginTop:24,marginBottom:0},children:/*#__PURE__*/_jsxs(Space,{children:[/*#__PURE__*/_jsx(Button,{onClick:handleModalClose,size:\"large\",children:\"H\\u1EE7y\"}),/*#__PURE__*/_jsx(Button,{type:\"primary\",htmlType:\"submit\",loading:submitting,icon:/*#__PURE__*/_jsx(DollarOutlined,{}),size:\"large\",children:\"Ghi nh\\u1EADn thanh to\\xE1n\"})]})})]})})]});};export default DebtPage;","map":{"version":3,"names":["React","useState","useEffect","message","Card","Table","Button","Modal","Input","Select","DatePicker","Space","Tag","Row","Col","Statistic","Tabs","InputNumber","Alert","Badge","Typography","Form","PlusOutlined","UserOutlined","ShopOutlined","DollarOutlined","ExclamationCircleOutlined","CheckCircleOutlined","CreditCardOutlined","WalletOutlined","customersAPI","suppliersAPI","financialAPI","dayjs","jsx","_jsx","jsxs","_jsxs","Option","TabPane","Text","DebtPage","customerDebts","setCustomerDebts","supplierDebts","setSupplierDebts","customers","setCustomers","suppliers","setSuppliers","loading","setLoading","modalVisible","setModalVisible","activeTab","setActiveTab","modalType","setModalType","submitting","setSubmitting","debtStats","setDebtStats","totalCustomerDebt","totalSupplierDebt","overduCustomerDebt","overdueSupplierDebt","form","useForm","paymentMethods","value","label","icon","console","log","fetchData","length","fetchCustomerDebts","fetchSupplierDebts","Promise","all","fetchCustomers","fetchSuppliers","error","customersWithDebt","filter","c","current_debt","totalDebt","reduce","sum","prev","_objectSpread","suppliersWithDebt","s","response","getAll","data","success","map","customer","Math","floor","random","total_spent","supplier","total_purchases","handlePayDebt","values","_values$transaction_d","transactionData","type","category","amount","description","concat","customer_id","entity_id","supplier_id","payment_method","transaction_date","toISOString","Date","user_id","create","resetFields","Error","handleModalClose","customerColumns","title","dataIndex","key","width","render","name","record","children","phone","style","fontSize","colors","regular","vip","wholesale","labels","color","debt","strong","toLocaleString","sorter","a","b","spent","_","status","text","size","onClick","setFieldsValue","id","supplierColumns","ellipsis","renderDebtSummary","gutter","marginBottom","span","precision","valueStyle","prefix","suffix","padding","showIcon","activeKey","onChange","tab","extra","undefined","columns","dataSource","rowKey","pagination","showSizeChanger","showQuickJumper","showTotal","total","range","display","alignItems","gap","open","onCancel","footer","destroyOnClose","layout","onFinish","initialValues","Item","rules","required","placeholder","showSearch","filterOption","input","option","toLowerCase","indexOf","entities","entity","warn","fontWeight","Boolean","min","formatter","replace","parser","addonAfter","method","TextArea","rows","showCount","maxLength","format","textAlign","marginTop","htmlType"],"sources":["C:/Users/ADMIN/Desktop/kho/kho/client/src/pages/DebtPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { message } from 'antd';\r\nimport {\r\n  Card,\r\n  Table,\r\n  Button,\r\n  Modal,\r\n  Input,\r\n  Select,\r\n  DatePicker,\r\n  Space,\r\n  Tag,\r\n  Row,\r\n  Col,\r\n  Statistic,\r\n  Tabs,\r\n  InputNumber,\r\n  Alert,\r\n  Badge,\r\n  Typography,\r\n  Form,\r\n} from 'antd';\r\nimport {\r\n  PlusOutlined,\r\n  UserOutlined,\r\n  ShopOutlined,\r\n  DollarOutlined,\r\n  ExclamationCircleOutlined,\r\n  CheckCircleOutlined,\r\n  CreditCardOutlined,\r\n  WalletOutlined,\r\n} from '@ant-design/icons';\r\nimport { customersAPI, suppliersAPI, financialAPI } from '../services/api';\r\nimport dayjs from 'dayjs';\r\n\r\nconst { Option } = Select;\r\nconst { TabPane } = Tabs;\r\nconst { Text } = Typography;\r\n\r\nconst DebtPage = () => {\r\n  const [customerDebts, setCustomerDebts] = useState([]);\r\n  const [supplierDebts, setSupplierDebts] = useState([]);\r\n  const [customers, setCustomers] = useState([]);\r\n  const [suppliers, setSuppliers] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [modalVisible, setModalVisible] = useState(false);\r\n  const [activeTab, setActiveTab] = useState('customers');\r\n  const [modalType, setModalType] = useState('payment'); // 'payment' or 'debt'\r\n  const [submitting, setSubmitting] = useState(false);\r\n  const [debtStats, setDebtStats] = useState({\r\n    totalCustomerDebt: 0,\r\n    totalSupplierDebt: 0,\r\n    overduCustomerDebt: 0,\r\n    overdueSupplierDebt: 0,\r\n  });\r\n\r\n  // üÜï Ant Design Form instance\r\n  const [form] = Form.useForm();\r\n\r\n  const paymentMethods = [\r\n    { value: 'cash', label: 'Ti·ªÅn m·∫∑t', icon: <DollarOutlined /> },\r\n    { value: 'card', label: 'Th·∫ª', icon: <CreditCardOutlined /> },\r\n    { value: 'transfer', label: 'Chuy·ªÉn kho·∫£n', icon: <WalletOutlined /> },\r\n    { value: 'ewallet', label: 'V√≠ ƒëi·ªán t·ª≠', icon: <WalletOutlined /> },\r\n  ];\r\n\r\n  useEffect(() => {\r\n    console.log('üöÄ DebtPage mounted, fetching data...');\r\n    fetchData();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    console.log('üîÑ Customers state updated:', customers);\r\n  }, [customers]);\r\n\r\n  useEffect(() => {\r\n    console.log('üîÑ Suppliers state updated:', suppliers);\r\n  }, [suppliers]);\r\n\r\n  // Process debts when customers/suppliers data changes\r\n  useEffect(() => {\r\n    if (customers.length > 0) {\r\n      fetchCustomerDebts();\r\n    }\r\n  }, [customers]); // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n  useEffect(() => {\r\n    if (suppliers.length > 0) {\r\n      fetchSupplierDebts();\r\n    }\r\n  }, [suppliers]); // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n  const fetchData = async () => {\r\n    setLoading(true);\r\n    try {\r\n      // First fetch all customers and suppliers\r\n      await Promise.all([\r\n        fetchCustomers(),\r\n        fetchSuppliers(),\r\n      ]);\r\n      \r\n      // Then process debts (this will be done in useEffect when customers/suppliers change)\r\n    } catch (error) {\r\n      message.error('L·ªói khi t·∫£i d·ªØ li·ªáu');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const fetchCustomerDebts = async () => {\r\n    try {\r\n      // Use customers data that's already fetched and enhanced\r\n      const customersWithDebt = customers.filter(c => (c.current_debt || 0) > 0);\r\n      setCustomerDebts(customersWithDebt);\r\n      \r\n      // Calculate debt stats\r\n      const totalDebt = customersWithDebt.reduce((sum, c) => sum + (c.current_debt || 0), 0);\r\n      setDebtStats(prev => ({ ...prev, totalCustomerDebt: totalDebt }));\r\n    } catch (error) {\r\n      console.error('Error processing customer debts:', error);\r\n      setCustomerDebts([]);\r\n    }\r\n  };\r\n\r\n  const fetchSupplierDebts = async () => {\r\n    try {\r\n      // Use suppliers data that's already fetched and enhanced\r\n      const suppliersWithDebt = suppliers.filter(s => (s.current_debt || 0) > 0);\r\n      setSupplierDebts(suppliersWithDebt);\r\n      \r\n      // Calculate debt stats\r\n      const totalDebt = suppliersWithDebt.reduce((sum, s) => sum + (s.current_debt || 0), 0);\r\n      setDebtStats(prev => ({ ...prev, totalSupplierDebt: totalDebt }));\r\n    } catch (error) {\r\n      console.error('Error processing supplier debts:', error);\r\n      setSupplierDebts([]);\r\n    }\r\n  };\r\n\r\n  const fetchCustomers = async () => {\r\n    try {\r\n      const response = await customersAPI.getAll();\r\n      console.log('üë• Raw customers response:', response.data);\r\n      \r\n      if (response.data.success) {\r\n        // Calculate debt for each customer (mock calculation for now)\r\n        const customersWithDebt = response.data.data.map(customer => ({\r\n          ...customer,\r\n          current_debt: customer.current_debt || Math.floor(Math.random() * 5000000), // Mock debt for demo\r\n          total_spent: customer.total_spent || Math.floor(Math.random() * 20000000)\r\n        }));\r\n        \r\n        console.log('üí∞ Customers with debt:', customersWithDebt);\r\n        console.log('üìä Total customers for dropdown:', customersWithDebt.length);\r\n        setCustomers(customersWithDebt);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching customers:', error);\r\n      // Fallback: Set empty array to avoid crashes\r\n      setCustomers([]);\r\n    }\r\n  };\r\n\r\n  const fetchSuppliers = async () => {\r\n    try {\r\n      const response = await suppliersAPI.getAll();\r\n      console.log('üè≠ Raw suppliers response:', response.data);\r\n      \r\n      if (response.data.success) {\r\n        // Calculate debt for each supplier (mock calculation for now)\r\n        const suppliersWithDebt = response.data.data.map(supplier => ({\r\n          ...supplier,\r\n          current_debt: supplier.current_debt || Math.floor(Math.random() * 10000000), // Mock debt for demo\r\n          total_purchases: supplier.total_purchases || Math.floor(Math.random() * 50000000)\r\n        }));\r\n        \r\n        console.log('üí∞ Suppliers with debt:', suppliersWithDebt);\r\n        console.log('üìä Total suppliers for dropdown:', suppliersWithDebt.length);\r\n        setSuppliers(suppliersWithDebt);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching suppliers:', error);\r\n      // Fallback: Set empty array to avoid crashes\r\n      setSuppliers([]);\r\n    }\r\n  };\r\n\r\n  // üÜï Enhanced form submission with proper error handling\r\n  const handlePayDebt = async (values) => {\r\n    try {\r\n      setSubmitting(true);\r\n      console.log('üí∞ Submitting payment data:', values);\r\n      \r\n      const transactionData = {\r\n        type: activeTab === 'customers' ? 'income' : 'expense',\r\n        category: activeTab === 'customers' ? 'Thu n·ª£ kh√°ch h√†ng' : 'Tr·∫£ n·ª£ nh√† cung c·∫•p',\r\n        amount: values.amount,\r\n        description: values.description || `Thanh to√°n n·ª£ ${activeTab === 'customers' ? 'kh√°ch h√†ng' : 'nh√† cung c·∫•p'}`,\r\n        customer_id: activeTab === 'customers' ? values.entity_id : null,\r\n        supplier_id: activeTab === 'suppliers' ? values.entity_id : null,\r\n        payment_method: values.payment_method,\r\n        transaction_date: values.transaction_date?.toISOString() || new Date().toISOString(),\r\n        user_id: 1,\r\n      };\r\n\r\n      console.log('üì§ Transaction data to send:', transactionData);\r\n\r\n      const response = await financialAPI.create(transactionData);\r\n      if (response.data.success) {\r\n        message.success('Ghi nh·∫≠n thanh to√°n th√†nh c√¥ng!');\r\n        setModalVisible(false);\r\n        form.resetFields();\r\n        fetchData();\r\n      } else {\r\n        throw new Error(response.data.message || 'L·ªói kh√¥ng x√°c ƒë·ªãnh');\r\n      }\r\n    } catch (error) {\r\n      console.error('‚ùå Payment submission error:', error);\r\n      message.error(error.message || 'L·ªói khi ghi nh·∫≠n thanh to√°n');\r\n    } finally {\r\n      setSubmitting(false);\r\n    }\r\n  };\r\n\r\n  // üÜï Enhanced modal close handler\r\n  const handleModalClose = () => {\r\n    setModalVisible(false);\r\n    form.resetFields();\r\n    setSubmitting(false);\r\n  };\r\n\r\n  const customerColumns = [\r\n    {\r\n      title: 'M√£ KH',\r\n      dataIndex: 'code',\r\n      key: 'code',\r\n      width: 100,\r\n    },\r\n    {\r\n      title: 'T√™n kh√°ch h√†ng',\r\n      dataIndex: 'name',\r\n      key: 'name',\r\n      render: (name, record) => (\r\n        <div>\r\n          <div>{name}</div>\r\n          {record.phone && (\r\n            <Text type=\"secondary\" style={{ fontSize: 12 }}>\r\n              {record.phone}\r\n            </Text>\r\n          )}\r\n        </div>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Lo·∫°i KH',\r\n      dataIndex: 'customer_type',\r\n      key: 'customer_type',\r\n      render: (type) => {\r\n        const colors = {\r\n          regular: 'default',\r\n          vip: 'gold',\r\n          wholesale: 'blue',\r\n        };\r\n        const labels = {\r\n          regular: 'Th∆∞·ªùng',\r\n          vip: 'VIP',\r\n          wholesale: 'S·ªâ',\r\n        };\r\n        return <Tag color={colors[type]}>{labels[type]}</Tag>;\r\n      },\r\n    },\r\n    {\r\n      title: 'S·ªë n·ª£',\r\n      dataIndex: 'current_debt',\r\n      key: 'current_debt',\r\n      render: (debt) => (\r\n        <Text strong style={{ color: debt > 0 ? '#ff4d4f' : '#52c41a' }}>\r\n          {debt.toLocaleString('vi-VN')} ‚Ç´\r\n        </Text>\r\n      ),\r\n      sorter: (a, b) => a.current_debt - b.current_debt,\r\n    },\r\n    {\r\n      title: 'T·ªïng chi ti√™u',\r\n      dataIndex: 'total_spent',\r\n      key: 'total_spent',\r\n      render: (spent) => (\r\n        <Text type=\"secondary\">\r\n          {spent ? spent.toLocaleString('vi-VN') : 0} ‚Ç´\r\n        </Text>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Tr·∫°ng th√°i',\r\n      key: 'status',\r\n      render: (_, record) => {\r\n        const debt = record.current_debt || 0;\r\n        if (debt === 0) {\r\n          return <Badge status=\"success\" text=\"ƒê√£ thanh to√°n\" />;\r\n        } else if (debt > 1000000) {\r\n          return <Badge status=\"error\" text=\"N·ª£ l·ªõn\" />;\r\n        } else {\r\n          return <Badge status=\"warning\" text=\"C√≥ n·ª£\" />;\r\n        }\r\n      },\r\n    },\r\n    {\r\n      title: 'Thao t√°c',\r\n      key: 'actions',\r\n      render: (_, record) => (\r\n        <Space>\r\n          <Button\r\n            type=\"primary\"\r\n            size=\"small\"\r\n            icon={<DollarOutlined />}\r\n            onClick={() => {\r\n              setModalType('payment');\r\n              setActiveTab('customers');\r\n              setModalVisible(true);\r\n              // üÜï Set form values v·ªõi Ant Design Form\r\n              form.setFieldsValue({\r\n                entity_id: record.id,\r\n                payment_method: 'cash',\r\n                transaction_date: dayjs(),\r\n                amount: record.current_debt || 0,\r\n                description: `Thanh to√°n n·ª£ kh√°ch h√†ng ${record.name}`\r\n              });\r\n            }}\r\n          >\r\n            Thanh to√°n\r\n          </Button>\r\n        </Space>\r\n      ),\r\n    },\r\n  ];\r\n\r\n  const supplierColumns = [\r\n    {\r\n      title: 'M√£ NCC',\r\n      dataIndex: 'code',\r\n      key: 'code',\r\n      width: 100,\r\n    },\r\n    {\r\n      title: 'T√™n nh√† cung c·∫•p',\r\n      dataIndex: 'name',\r\n      key: 'name',\r\n      render: (name, record) => (\r\n        <div>\r\n          <div>{name}</div>\r\n          {record.phone && (\r\n            <Text type=\"secondary\" style={{ fontSize: 12 }}>\r\n              {record.phone}\r\n            </Text>\r\n          )}\r\n        </div>\r\n      ),\r\n    },\r\n    {\r\n      title: 'ƒê·ªãa ch·ªâ',\r\n      dataIndex: 'address',\r\n      key: 'address',\r\n      ellipsis: true,\r\n    },\r\n    {\r\n      title: 'S·ªë n·ª£',\r\n      dataIndex: 'current_debt',\r\n      key: 'current_debt',\r\n      render: (debt) => (\r\n        <Text strong style={{ color: debt > 0 ? '#ff4d4f' : '#52c41a' }}>\r\n          {debt.toLocaleString('vi-VN')} ‚Ç´\r\n        </Text>\r\n      ),\r\n      sorter: (a, b) => a.current_debt - b.current_debt,\r\n    },\r\n    {\r\n      title: 'Tr·∫°ng th√°i',\r\n      key: 'status',\r\n      render: (_, record) => {\r\n        const debt = record.current_debt || 0;\r\n        if (debt === 0) {\r\n          return <Badge status=\"success\" text=\"ƒê√£ thanh to√°n\" />;\r\n        } else if (debt > 5000000) {\r\n          return <Badge status=\"error\" text=\"N·ª£ l·ªõn\" />;\r\n        } else {\r\n          return <Badge status=\"warning\" text=\"C√≥ n·ª£\" />;\r\n        }\r\n      },\r\n    },\r\n    {\r\n      title: 'Thao t√°c',\r\n      key: 'actions',\r\n      render: (_, record) => (\r\n        <Space>\r\n          <Button\r\n            type=\"primary\"\r\n            size=\"small\"\r\n            icon={<DollarOutlined />}\r\n            onClick={() => {\r\n              setModalType('payment');\r\n              setActiveTab('suppliers');\r\n              setModalVisible(true);\r\n              // üÜï Set form values v·ªõi Ant Design Form\r\n              form.setFieldsValue({\r\n                entity_id: record.id,\r\n                payment_method: 'cash',\r\n                transaction_date: dayjs(),\r\n                amount: record.current_debt || 0,\r\n                description: `Thanh to√°n n·ª£ nh√† cung c·∫•p ${record.name}`\r\n              });\r\n            }}\r\n          >\r\n            Thanh to√°n\r\n          </Button>\r\n        </Space>\r\n      ),\r\n    },\r\n  ];\r\n\r\n  const renderDebtSummary = () => {\r\n    return (\r\n      <Row gutter={16} style={{ marginBottom: 24 }}>\r\n        <Col span={6}>\r\n          <Card>\r\n            <Statistic\r\n              title=\"T·ªïng n·ª£ kh√°ch h√†ng\"\r\n              value={debtStats.totalCustomerDebt}\r\n              precision={0}\r\n              valueStyle={{ color: '#cf1322' }}\r\n              prefix={<UserOutlined />}\r\n              suffix=\"‚Ç´\"\r\n            />\r\n          </Card>\r\n        </Col>\r\n        <Col span={6}>\r\n          <Card>\r\n            <Statistic\r\n              title=\"T·ªïng n·ª£ nh√† cung c·∫•p\"\r\n              value={debtStats.totalSupplierDebt}\r\n              precision={0}\r\n              valueStyle={{ color: '#cf1322' }}\r\n              prefix={<ShopOutlined />}\r\n              suffix=\"‚Ç´\"\r\n            />\r\n          </Card>\r\n        </Col>\r\n        <Col span={6}>\r\n          <Card>\r\n            <Statistic\r\n              title=\"T·ªïng n·ª£ ph·∫£i thu\"\r\n              value={debtStats.totalCustomerDebt + debtStats.totalSupplierDebt}\r\n              precision={0}\r\n              valueStyle={{ color: '#1890ff' }}\r\n              prefix={<DollarOutlined />}\r\n              suffix=\"‚Ç´\"\r\n            />\r\n          </Card>\r\n        </Col>\r\n        <Col span={6}>\r\n          <Card>\r\n            <Statistic\r\n              title=\"S·ªë kh√°ch h√†ng c√≥ n·ª£\"\r\n              value={customerDebts.length}\r\n              valueStyle={{ color: '#52c41a' }}\r\n              prefix={<UserOutlined />}\r\n            />\r\n          </Card>\r\n        </Col>\r\n      </Row>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div style={{ padding: 24 }}>\r\n      {renderDebtSummary()}\r\n\r\n      <Alert\r\n        message=\"Qu·∫£n l√Ω n·ª£\"\r\n        description=\"Theo d√µi v√† qu·∫£n l√Ω c√°c kho·∫£n n·ª£ c·ªßa kh√°ch h√†ng v√† nh√† cung c·∫•p. H·ªá th·ªëng s·∫Ω t·ª± ƒë·ªông c·∫≠p nh·∫≠t s·ªë d∆∞ n·ª£ khi c√≥ giao d·ªãch thanh to√°n.\"\r\n        type=\"info\"\r\n        showIcon\r\n        style={{ marginBottom: 24 }}\r\n      />\r\n\r\n      <Tabs activeKey={activeTab} onChange={setActiveTab}>\r\n        <TabPane\r\n          tab={\r\n            <span>\r\n              <UserOutlined />\r\n              N·ª£ kh√°ch h√†ng ({customerDebts.length})\r\n            </span>\r\n          }\r\n          key=\"customers\"\r\n        >\r\n          <Card\r\n            title=\"Danh s√°ch kh√°ch h√†ng c√≥ n·ª£\"\r\n            extra={\r\n              <Button\r\n                type=\"primary\"\r\n                icon={<PlusOutlined />}\r\n                onClick={() => {\r\n                  setModalType('payment');\r\n                  setActiveTab('customers');\r\n                  setModalVisible(true);\r\n                  // üÜï Reset form v·ªõi values m·∫∑c ƒë·ªãnh\r\n                  form.setFieldsValue({\r\n                    payment_method: 'cash',\r\n                    transaction_date: dayjs(),\r\n                    entity_id: undefined,\r\n                    amount: undefined,\r\n                    description: ''\r\n                  });\r\n                }}\r\n              >\r\n                Ghi nh·∫≠n thanh to√°n\r\n              </Button>\r\n            }\r\n          >\r\n            <Table\r\n              columns={customerColumns}\r\n              dataSource={customerDebts}\r\n              loading={loading}\r\n              rowKey=\"id\"\r\n              pagination={{\r\n                showSizeChanger: true,\r\n                showQuickJumper: true,\r\n                showTotal: (total, range) =>\r\n                  `${range[0]}-${range[1]} c·ªßa ${total} kh√°ch h√†ng`,\r\n              }}\r\n            />\r\n          </Card>\r\n        </TabPane>\r\n\r\n        <TabPane\r\n          tab={\r\n            <span>\r\n              <ShopOutlined />\r\n              N·ª£ nh√† cung c·∫•p ({supplierDebts.length})\r\n            </span>\r\n          }\r\n          key=\"suppliers\"\r\n        >\r\n          <Card\r\n            title=\"Danh s√°ch nh√† cung c·∫•p c√≥ n·ª£\"\r\n            extra={\r\n              <Button\r\n                type=\"primary\"\r\n                icon={<PlusOutlined />}\r\n                onClick={() => {\r\n                  setModalType('payment');\r\n                  setActiveTab('suppliers');\r\n                  setModalVisible(true);\r\n                  // üÜï Reset form v·ªõi values m·∫∑c ƒë·ªãnh\r\n                  form.setFieldsValue({\r\n                    payment_method: 'cash',\r\n                    transaction_date: dayjs(),\r\n                    entity_id: undefined,\r\n                    amount: undefined,\r\n                    description: ''\r\n                  });\r\n                }}\r\n              >\r\n                Ghi nh·∫≠n thanh to√°n\r\n              </Button>\r\n            }\r\n          >\r\n            <Table\r\n              columns={supplierColumns}\r\n              dataSource={supplierDebts}\r\n              loading={loading}\r\n              rowKey=\"id\"\r\n              pagination={{\r\n                showSizeChanger: true,\r\n                showQuickJumper: true,\r\n                showTotal: (total, range) =>\r\n                  `${range[0]}-${range[1]} c·ªßa ${total} nh√† cung c·∫•p`,\r\n              }}\r\n            />\r\n          </Card>\r\n        </TabPane>\r\n      </Tabs>\r\n\r\n      {/* üÜï Enhanced Modal with Ant Design Form */}\r\n      <Modal\r\n        title={\r\n          <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\r\n            <DollarOutlined style={{ color: '#52c41a' }} />\r\n            <span>Ghi nh·∫≠n thanh to√°n {activeTab === 'customers' ? 'n·ª£ kh√°ch h√†ng' : 'n·ª£ nh√† cung c·∫•p'}</span>\r\n          </div>\r\n        }\r\n        open={modalVisible}\r\n        onCancel={handleModalClose}\r\n        footer={null}\r\n        width={700}\r\n        destroyOnClose={true}\r\n      >\r\n        <Form\r\n          form={form}\r\n          layout=\"vertical\"\r\n          onFinish={handlePayDebt}\r\n          initialValues={{\r\n            payment_method: 'cash',\r\n            transaction_date: dayjs(),\r\n          }}\r\n        >\r\n          <Form.Item\r\n            label={`${activeTab === 'customers' ? 'Kh√°ch h√†ng' : 'Nh√† cung c·∫•p'}`}\r\n            name=\"entity_id\"\r\n            rules={[\r\n              { required: true, message: `Vui l√≤ng ch·ªçn ${activeTab === 'customers' ? 'kh√°ch h√†ng' : 'nh√† cung c·∫•p'}` }\r\n            ]}\r\n          >\r\n            <Select\r\n              placeholder={`Ch·ªçn ${activeTab === 'customers' ? 'kh√°ch h√†ng' : 'nh√† cung c·∫•p'}`}\r\n              style={{ width: '100%' }}\r\n              showSearch\r\n              filterOption={(input, option) => {\r\n                const children = typeof option.children === 'string' ? option.children : '';\r\n                return children.toLowerCase().indexOf(input.toLowerCase()) >= 0;\r\n              }}\r\n              size=\"large\"\r\n            >\r\n              {(() => {\r\n                const entities = activeTab === 'customers' ? customers : suppliers;\r\n                console.log(`üîç Rendering dropdown for ${activeTab}:`, entities);\r\n                console.log(`üìã Total entities to render: ${entities.length}`);\r\n                \r\n                return entities && entities.length > 0 ? entities.map((entity) => {\r\n                  // üõ°Ô∏è Safety check ƒë·ªÉ tr√°nh undefined\r\n                  if (!entity || !entity.id || !entity.name) {\r\n                    console.warn('‚ö†Ô∏è Invalid entity found:', entity);\r\n                    return null;\r\n                  }\r\n                  \r\n                  return (\r\n                    <Option key={entity.id} value={entity.id}>\r\n                      <div>\r\n                        <div style={{ fontWeight: 'bold' }}>{entity.name}</div>\r\n                        {entity.phone && (\r\n                          <Text type=\"secondary\" style={{ fontSize: 12 }}>\r\n                            üìû {entity.phone}\r\n                          </Text>\r\n                        )}\r\n                        <div>\r\n                          <Text type=\"secondary\" style={{ fontSize: 12, color: '#ff4d4f' }}>\r\n                            üí∞ N·ª£ hi·ªán t·∫°i: {(entity.current_debt || 0).toLocaleString('vi-VN')} ‚Ç´\r\n                          </Text>\r\n                        </div>\r\n                      </div>\r\n                    </Option>\r\n                  );\r\n                }).filter(Boolean) : []; // Filter out null entries\r\n              })()}\r\n            </Select>\r\n          </Form.Item>\r\n\r\n          <Row gutter={16}>\r\n            <Col span={12}>\r\n              <Form.Item\r\n                label=\"S·ªë ti·ªÅn thanh to√°n\"\r\n                name=\"amount\"\r\n                rules={[\r\n                  { required: true, message: 'Vui l√≤ng nh·∫≠p s·ªë ti·ªÅn' },\r\n                  { type: 'number', min: 1, message: 'S·ªë ti·ªÅn ph·∫£i l·ªõn h∆°n 0' }\r\n                ]}\r\n              >\r\n                <InputNumber\r\n                  placeholder=\"Nh·∫≠p s·ªë ti·ªÅn\"\r\n                  style={{ width: '100%' }}\r\n                  formatter={(value) => `${value}`.replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',')}\r\n                  parser={(value) => value ? value.replace(/\\$\\s?|(,*)/g, '') : ''}\r\n                  min={0}\r\n                  size=\"large\"\r\n                  addonAfter=\"‚Ç´\"\r\n                />\r\n              </Form.Item>\r\n            </Col>\r\n            <Col span={12}>\r\n              <Form.Item\r\n                label=\"Ph∆∞∆°ng th·ª©c thanh to√°n\"\r\n                name=\"payment_method\"\r\n                rules={[{ required: true, message: 'Vui l√≤ng ch·ªçn ph∆∞∆°ng th·ª©c thanh to√°n' }]}\r\n              >\r\n                <Select\r\n                  placeholder=\"Ch·ªçn ph∆∞∆°ng th·ª©c\"\r\n                  style={{ width: '100%' }}\r\n                  size=\"large\"\r\n                >\r\n                  {paymentMethods.map((method) => (\r\n                    <Option key={method.value} value={method.value}>\r\n                      <Space>\r\n                        {method.icon}\r\n                        {method.label}\r\n                      </Space>\r\n                    </Option>\r\n                  ))}\r\n                </Select>\r\n              </Form.Item>\r\n            </Col>\r\n          </Row>\r\n\r\n          <Form.Item\r\n            label=\"M√¥ t·∫£\"\r\n            name=\"description\"\r\n          >\r\n            <Input.TextArea\r\n              placeholder=\"Nh·∫≠p m√¥ t·∫£ thanh to√°n (t√πy ch·ªçn)\"\r\n              rows={3}\r\n              showCount\r\n              maxLength={500}\r\n            />\r\n          </Form.Item>\r\n\r\n          <Form.Item\r\n            label=\"Ng√†y thanh to√°n\"\r\n            name=\"transaction_date\"\r\n            rules={[{ required: true, message: 'Vui l√≤ng ch·ªçn ng√†y thanh to√°n' }]}\r\n          >\r\n            <DatePicker\r\n              style={{ width: '100%' }}\r\n              size=\"large\"\r\n              format=\"DD/MM/YYYY\"\r\n              placeholder=\"Ch·ªçn ng√†y thanh to√°n\"\r\n            />\r\n          </Form.Item>\r\n\r\n          <Form.Item style={{ textAlign: 'right', marginTop: 24, marginBottom: 0 }}>\r\n            <Space>\r\n              <Button onClick={handleModalClose} size=\"large\">\r\n                H·ªßy\r\n              </Button>\r\n              <Button\r\n                type=\"primary\"\r\n                htmlType=\"submit\"\r\n                loading={submitting}\r\n                icon={<DollarOutlined />}\r\n                size=\"large\"\r\n              >\r\n                Ghi nh·∫≠n thanh to√°n\r\n              </Button>\r\n            </Space>\r\n          </Form.Item>\r\n        </Form>\r\n      </Modal>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DebtPage; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}