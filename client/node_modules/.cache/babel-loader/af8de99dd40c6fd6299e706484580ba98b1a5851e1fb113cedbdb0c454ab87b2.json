{"ast":null,"code":"import React,{useEffect,useRef,useState,useCallback}from'react';import{Modal,Button,Space,message,Alert,Typography,Divider}from'antd';import{CameraOutlined,CloseOutlined,ReloadOutlined,CheckCircleOutlined}from'@ant-design/icons';import{Html5Qrcode}from'html5-qrcode';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const{Text}=Typography;const QRScanner=_ref=>{let{visible,onClose,onScan,title=\"Qu√©t Serial Number\",placeholder=\"ƒê∆∞a camera v√†o m√£ QR ho·∫∑c Barcode\"}=_ref;const videoRef=useRef(null);const[isScanning,setIsScanning]=useState(false);const[error,setError]=useState(null);const[scannerInstance,setScannerInstance]=useState(null);const[permissionState,setPermissionState]=useState('unknown');const[isClosing,setIsClosing]=useState(false);const[cameraDevices,setCameraDevices]=useState([]);const[selectedCameraId,setSelectedCameraId]=useState(null);// Safe cleanup function\nconst stopScanner=useCallback(async()=>{try{if(scannerInstance&&scannerInstance.isScanning){await scannerInstance.stop();}setScannerInstance(null);setIsScanning(false);}catch(err){setScannerInstance(null);setIsScanning(false);}},[scannerInstance]);// Main effect for lifecycle management\nuseEffect(()=>{let isMounted=true;if(visible&&!isClosing){initializeScanner();}else if(!visible){stopScanner();}return()=>{isMounted=false;stopScanner();};},[visible,isClosing,stopScanner]);// Initialize scanner\nconst initializeScanner=async()=>{try{setError(null);await checkCameraPermission();await getCameraDevices();await startScanner();}catch(err){handleCameraError(err);}};// Check camera permission\nconst checkCameraPermission=async()=>{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){throw new Error('Tr√¨nh duy·ªát kh√¥ng h·ªó tr·ª£ truy c·∫≠p camera');}if(navigator.permissions){try{const permission=await navigator.permissions.query({name:'camera'});setPermissionState(permission.state);permission.onchange=()=>setPermissionState(permission.state);}catch(_unused){}}};// Get camera devices\nconst getCameraDevices=async()=>{try{const devices=await navigator.mediaDevices.enumerateDevices();const videoDevices=devices.filter(device=>device.kind==='videoinput');setCameraDevices(videoDevices);const backCamera=videoDevices.find(device=>device.label.toLowerCase().includes('back')||device.label.toLowerCase().includes('rear')||device.label.toLowerCase().includes('environment'));if(backCamera){setSelectedCameraId(backCamera.deviceId);}else if(videoDevices.length>0){setSelectedCameraId(videoDevices[0].deviceId);}}catch(err){// ignore\n}};// Request camera permission\nconst requestCameraPermission=async()=>{try{setError(null);const stream=await navigator.mediaDevices.getUserMedia({video:{facingMode:'environment'}});stream.getTracks().forEach(track=>track.stop());setPermissionState('granted');message.success('‚úÖ ƒê√£ c·∫•p quy·ªÅn truy c·∫≠p camera!');await startScanner();}catch(err){setPermissionState('denied');handleCameraError(err);}};// Handle camera errors\nconst handleCameraError=err=>{if(err.name==='NotAllowedError'||err.name==='PermissionDeniedError'){setError('Quy·ªÅn truy c·∫≠p camera b·ªã t·ª´ ch·ªëi. Vui l√≤ng cho ph√©p truy c·∫≠p camera trong c√†i ƒë·∫∑t tr√¨nh duy·ªát.');setPermissionState('denied');}else if(err.name==='NotFoundError'||err.name==='DevicesNotFoundError'){setError('Kh√¥ng t√¨m th·∫•y camera. Vui l√≤ng ki·ªÉm tra k·∫øt n·ªëi camera.');}else if(err.name==='NotSupportedError'){setError('Tr√¨nh duy·ªát kh√¥ng h·ªó tr·ª£ truy c·∫≠p camera.');}else if(err.name==='NotReadableError'){setError('Camera ƒëang ƒë∆∞·ª£c s·ª≠ d·ª•ng b·ªüi ·ª©ng d·ª•ng kh√°c.');}else{setError(\"L\\u1ED7i camera: \".concat(err.message||'Kh√¥ng th·ªÉ truy c·∫≠p camera'));}};// Start scanner with only QR code (default)\nconst startScanner=async()=>{try{if(scannerInstance){await stopScanner();await new Promise(resolve=>setTimeout(resolve,100));}const videoElement=videoRef.current;if(!videoElement){throw new Error('Video element not found');}const html5QrCode=new Html5Qrcode(\"qr-reader\");const config={fps:10,qrbox:{width:250,height:250},aspectRatio:1.0,disableFlip:false,videoConstraints:{facingMode:'environment',deviceId:selectedCameraId?{exact:selectedCameraId}:undefined}};await html5QrCode.start({facingMode:'environment'},config,async decodedText=>{message.success(\"\\uD83D\\uDCF1 \\u0110\\xE3 qu\\xE9t th\\xE0nh c\\xF4ng: \".concat(decodedText));onScan(decodedText);await handleClose();},error=>{if(error&&!error.includes('NotFoundException')){console.warn(\"QR scan error: \".concat(error));}});// Try to play video (catch AbortError)\ntry{if(videoElement&&videoElement.play){await videoElement.play();}}catch(e){// Ignore AbortError\n}setScannerInstance(html5QrCode);setIsScanning(true);setPermissionState('granted');}catch(err){handleCameraError(err);setIsScanning(false);}};// Handle close with proper cleanup\nconst handleClose=async()=>{setIsClosing(true);try{await stopScanner();setError(null);setPermissionState('unknown');setIsClosing(false);onClose();}catch(err){setIsClosing(false);onClose();}};// Handle restart\nconst handleRestart=async()=>{setError(null);await stopScanner();setTimeout(()=>{initializeScanner();},500);};// Render permission request UI\nconst renderPermissionRequest=()=>/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center',padding:'40px 20px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'64px',marginBottom:'20px'},children:\"\\uD83D\\uDCF1\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'18px',fontWeight:'bold',marginBottom:'12px'},children:\"C\\u1EA7n quy\\u1EC1n truy c\\u1EADp Camera\"}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'14px',color:'#666',marginBottom:'24px',lineHeight:'1.5'},children:[\"\\u0110\\u1EC3 qu\\xE9t m\\xE3 QR/Barcode, \\u1EE9ng d\\u1EE5ng c\\u1EA7n quy\\u1EC1n truy c\\u1EADp camera c\\u1EE7a thi\\u1EBFt b\\u1ECB.\",/*#__PURE__*/_jsx(\"br\",{}),\"Vui l\\xF2ng b\\u1EA5m \\\"Cho ph\\xE9p\\\" khi tr\\xECnh duy\\u1EC7t h\\u1ECFi.\"]}),/*#__PURE__*/_jsx(Button,{type:\"primary\",size:\"large\",icon:/*#__PURE__*/_jsx(CameraOutlined,{}),onClick:requestCameraPermission,style:{background:'#52c41a',borderColor:'#52c41a',height:'48px',fontSize:'16px',fontWeight:'bold'},disabled:isClosing,children:\"\\uD83D\\uDD13 C\\u1EA5p quy\\u1EC1n Camera\"}),/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'12px',color:'#999',textAlign:'left'},children:[/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:'8px',fontWeight:'bold'},children:\"\\uD83D\\uDCA1 L\\u01B0u \\xFD:\"}),/*#__PURE__*/_jsxs(\"div\",{children:[\"\\u2022 Tr\\xEAn \",/*#__PURE__*/_jsx(\"strong\",{children:\"iPhone/iPad\"}),\": B\\u1EA5m \\\"Cho ph\\xE9p\\\" khi Safari h\\u1ECFi\"]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"\\u2022 Tr\\xEAn \",/*#__PURE__*/_jsx(\"strong\",{children:\"Android\"}),\": B\\u1EA5m \\\"Allow\\\" khi Chrome h\\u1ECFi\"]}),/*#__PURE__*/_jsx(\"div\",{children:\"\\u2022 N\\u1EBFu \\u0111\\xE3 t\\u1EEB ch\\u1ED1i: V\\xE0o Settings \\u2192 Camera \\u2192 Cho ph\\xE9p trang web n\\xE0y\"})]})]});return/*#__PURE__*/_jsx(Modal,{title:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'8px'},children:[/*#__PURE__*/_jsx(CameraOutlined,{style:{color:'#1890ff'}}),/*#__PURE__*/_jsx(\"span\",{children:title}),permissionState==='granted'&&/*#__PURE__*/_jsx(CheckCircleOutlined,{style:{color:'#52c41a',marginLeft:'8px'}})]}),open:visible,onCancel:handleClose,width:Math.min(600,window.innerWidth-32),footer:/*#__PURE__*/_jsxs(Space,{children:[/*#__PURE__*/_jsx(Button,{onClick:handleRestart,icon:/*#__PURE__*/_jsx(ReloadOutlined,{}),disabled:isClosing,children:\"Th\\u1EED l\\u1EA1i\"}),/*#__PURE__*/_jsx(Button,{onClick:handleClose,icon:/*#__PURE__*/_jsx(CloseOutlined,{}),disabled:isClosing,children:\"\\u0110\\xF3ng\"})]}),centered:true,style:{top:20},confirmLoading:isClosing,maskClosable:!isClosing,closable:!isClosing,forceRender:true,children:/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center',padding:'20px 0'},children:[(permissionState==='denied'||permissionState==='prompt'||permissionState==='unknown')&&!scannerInstance&&renderPermissionRequest(),error&&/*#__PURE__*/_jsx(Alert,{message:\"L\\u1ED7i Camera\",description:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{children:error}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'12px',fontSize:'12px'},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"C\\xE1ch kh\\u1EAFc ph\\u1EE5c:\"}),/*#__PURE__*/_jsx(\"br\",{}),\"\\u2022 \\u0110\\u1EA3m b\\u1EA3o trang web \\u0111\\u01B0\\u1EE3c truy c\\u1EADp qua HTTPS\",/*#__PURE__*/_jsx(\"br\",{}),\"\\u2022 Ki\\u1EC3m tra c\\xE0i \\u0111\\u1EB7t quy\\u1EC1n camera trong tr\\xECnh duy\\u1EC7t\",/*#__PURE__*/_jsx(\"br\",{}),\"\\u2022 Th\\u1EED t\\u1EA3i l\\u1EA1i trang v\\xE0 c\\u1EA5p quy\\u1EC1n l\\u1EA1i\"]})]}),type:\"error\",showIcon:true,style:{marginBottom:16,textAlign:'left'},action:/*#__PURE__*/_jsx(Button,{size:\"small\",onClick:requestCameraPermission,disabled:isClosing,children:\"Th\\u1EED l\\u1EA1i\"})}),permissionState==='granted'&&!error&&/*#__PURE__*/_jsx(Alert,{message:\"Camera \\u0111\\xE3 s\\u1EB5n s\\xE0ng\",description:placeholder,type:\"success\",showIcon:true,style:{marginBottom:16}}),permissionState==='granted'&&!error&&/*#__PURE__*/_jsxs(\"div\",{id:\"qr-reader\",style:{width:'100%',maxWidth:'500px',margin:'0 auto',border:'2px dashed #52c41a',borderRadius:'8px',minHeight:'300px',display:'flex',alignItems:'center',justifyContent:'center',position:'relative'},children:[isScanning&&visible&&!isClosing&&/*#__PURE__*/_jsx(\"video\",{ref:videoRef,style:{width:'100%',height:'100%',objectFit:'cover',borderRadius:'6px',display:'block'},autoPlay:true,playsInline:true,muted:true}),(!isScanning||isClosing)&&/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center',color:'#999'},children:[/*#__PURE__*/_jsx(CameraOutlined,{style:{fontSize:'48px',marginBottom:'16px'}}),/*#__PURE__*/_jsx(\"div\",{children:\"\\u0110ang kh\\u1EDFi t\\u1EA1o camera...\"})]})]}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:16,fontSize:'12px',color:'#666'},children:/*#__PURE__*/_jsx(Text,{type:\"secondary\",children:\"\\uD83D\\uDCA1 H\\u1ED7 tr\\u1EE3 qu\\xE9t: QR Code\"})})]})});};export default QRScanner;","map":{"version":3,"names":["React","useEffect","useRef","useState","useCallback","Modal","Button","Space","message","Alert","Typography","Divider","CameraOutlined","CloseOutlined","ReloadOutlined","CheckCircleOutlined","Html5Qrcode","jsx","_jsx","jsxs","_jsxs","Text","QRScanner","_ref","visible","onClose","onScan","title","placeholder","videoRef","isScanning","setIsScanning","error","setError","scannerInstance","setScannerInstance","permissionState","setPermissionState","isClosing","setIsClosing","cameraDevices","setCameraDevices","selectedCameraId","setSelectedCameraId","stopScanner","stop","err","isMounted","initializeScanner","checkCameraPermission","getCameraDevices","startScanner","handleCameraError","navigator","mediaDevices","getUserMedia","Error","permissions","permission","query","name","state","onchange","_unused","devices","enumerateDevices","videoDevices","filter","device","kind","backCamera","find","label","toLowerCase","includes","deviceId","length","requestCameraPermission","stream","video","facingMode","getTracks","forEach","track","success","concat","Promise","resolve","setTimeout","videoElement","current","html5QrCode","config","fps","qrbox","width","height","aspectRatio","disableFlip","videoConstraints","exact","undefined","start","decodedText","handleClose","console","warn","play","e","handleRestart","renderPermissionRequest","style","textAlign","padding","children","fontSize","marginBottom","fontWeight","color","lineHeight","type","size","icon","onClick","background","borderColor","disabled","display","alignItems","gap","marginLeft","open","onCancel","Math","min","window","innerWidth","footer","centered","top","confirmLoading","maskClosable","closable","forceRender","description","marginTop","showIcon","action","id","maxWidth","margin","border","borderRadius","minHeight","justifyContent","position","ref","objectFit","autoPlay","playsInline","muted"],"sources":["C:/Users/ADMIN/Desktop/kho/kho/client/src/components/QRScanner.js"],"sourcesContent":["import React, { useEffect, useRef, useState, useCallback } from 'react';\r\nimport { Modal, Button, Space, message, Alert, Typography, Divider } from 'antd';\r\nimport { CameraOutlined, CloseOutlined, ReloadOutlined, CheckCircleOutlined } from '@ant-design/icons';\r\nimport { Html5Qrcode } from 'html5-qrcode';\r\n\r\nconst { Text } = Typography;\r\n\r\nconst QRScanner = ({ \r\n  visible, \r\n  onClose, \r\n  onScan, \r\n  title = \"Qu√©t Serial Number\",\r\n  placeholder = \"ƒê∆∞a camera v√†o m√£ QR ho·∫∑c Barcode\" \r\n}) => {\r\n  const videoRef = useRef(null);\r\n  const [isScanning, setIsScanning] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [scannerInstance, setScannerInstance] = useState(null);\r\n  const [permissionState, setPermissionState] = useState('unknown');\r\n  const [isClosing, setIsClosing] = useState(false);\r\n  const [cameraDevices, setCameraDevices] = useState([]);\r\n  const [selectedCameraId, setSelectedCameraId] = useState(null);\r\n\r\n  // Safe cleanup function\r\n  const stopScanner = useCallback(async () => {\r\n    try {\r\n      if (scannerInstance && scannerInstance.isScanning) {\r\n        await scannerInstance.stop();\r\n      }\r\n      setScannerInstance(null);\r\n      setIsScanning(false);\r\n    } catch (err) {\r\n      setScannerInstance(null);\r\n      setIsScanning(false);\r\n    }\r\n  }, [scannerInstance]);\r\n\r\n  // Main effect for lifecycle management\r\n  useEffect(() => {\r\n    let isMounted = true;\r\n    if (visible && !isClosing) {\r\n      initializeScanner();\r\n    } else if (!visible) {\r\n      stopScanner();\r\n    }\r\n    return () => {\r\n      isMounted = false;\r\n      stopScanner();\r\n    };\r\n  }, [visible, isClosing, stopScanner]);\r\n\r\n  // Initialize scanner\r\n  const initializeScanner = async () => {\r\n    try {\r\n      setError(null);\r\n      await checkCameraPermission();\r\n      await getCameraDevices();\r\n      await startScanner();\r\n    } catch (err) {\r\n      handleCameraError(err);\r\n    }\r\n  };\r\n\r\n  // Check camera permission\r\n  const checkCameraPermission = async () => {\r\n    if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {\r\n      throw new Error('Tr√¨nh duy·ªát kh√¥ng h·ªó tr·ª£ truy c·∫≠p camera');\r\n    }\r\n    if (navigator.permissions) {\r\n      try {\r\n        const permission = await navigator.permissions.query({ name: 'camera' });\r\n        setPermissionState(permission.state);\r\n        permission.onchange = () => setPermissionState(permission.state);\r\n      } catch {}\r\n    }\r\n  };\r\n\r\n  // Get camera devices\r\n  const getCameraDevices = async () => {\r\n    try {\r\n      const devices = await navigator.mediaDevices.enumerateDevices();\r\n      const videoDevices = devices.filter(device => device.kind === 'videoinput');\r\n      setCameraDevices(videoDevices);\r\n      const backCamera = videoDevices.find(device =>\r\n        device.label.toLowerCase().includes('back') ||\r\n        device.label.toLowerCase().includes('rear') ||\r\n        device.label.toLowerCase().includes('environment')\r\n      );\r\n      if (backCamera) {\r\n        setSelectedCameraId(backCamera.deviceId);\r\n      } else if (videoDevices.length > 0) {\r\n        setSelectedCameraId(videoDevices[0].deviceId);\r\n      }\r\n    } catch (err) {\r\n      // ignore\r\n    }\r\n  };\r\n\r\n  // Request camera permission\r\n  const requestCameraPermission = async () => {\r\n    try {\r\n      setError(null);\r\n      const stream = await navigator.mediaDevices.getUserMedia({ \r\n        video: { facingMode: 'environment' } \r\n      });\r\n      stream.getTracks().forEach(track => track.stop());\r\n      setPermissionState('granted');\r\n      message.success('‚úÖ ƒê√£ c·∫•p quy·ªÅn truy c·∫≠p camera!');\r\n      await startScanner();\r\n    } catch (err) {\r\n      setPermissionState('denied');\r\n      handleCameraError(err);\r\n    }\r\n  };\r\n\r\n  // Handle camera errors\r\n  const handleCameraError = (err) => {\r\n    if (err.name === 'NotAllowedError' || err.name === 'PermissionDeniedError') {\r\n      setError('Quy·ªÅn truy c·∫≠p camera b·ªã t·ª´ ch·ªëi. Vui l√≤ng cho ph√©p truy c·∫≠p camera trong c√†i ƒë·∫∑t tr√¨nh duy·ªát.');\r\n      setPermissionState('denied');\r\n    } else if (err.name === 'NotFoundError' || err.name === 'DevicesNotFoundError') {\r\n      setError('Kh√¥ng t√¨m th·∫•y camera. Vui l√≤ng ki·ªÉm tra k·∫øt n·ªëi camera.');\r\n    } else if (err.name === 'NotSupportedError') {\r\n      setError('Tr√¨nh duy·ªát kh√¥ng h·ªó tr·ª£ truy c·∫≠p camera.');\r\n    } else if (err.name === 'NotReadableError') {\r\n      setError('Camera ƒëang ƒë∆∞·ª£c s·ª≠ d·ª•ng b·ªüi ·ª©ng d·ª•ng kh√°c.');\r\n    } else {\r\n      setError(`L·ªói camera: ${err.message || 'Kh√¥ng th·ªÉ truy c·∫≠p camera'}`);\r\n    }\r\n  };\r\n\r\n  // Start scanner with only QR code (default)\r\n  const startScanner = async () => {\r\n    try {\r\n      if (scannerInstance) {\r\n        await stopScanner();\r\n        await new Promise(resolve => setTimeout(resolve, 100));\r\n      }\r\n      const videoElement = videoRef.current;\r\n      if (!videoElement) {\r\n        throw new Error('Video element not found');\r\n      }\r\n      const html5QrCode = new Html5Qrcode(\"qr-reader\");\r\n      const config = {\r\n        fps: 10,\r\n        qrbox: { width: 250, height: 250 },\r\n        aspectRatio: 1.0,\r\n        disableFlip: false,\r\n        videoConstraints: {\r\n          facingMode: 'environment',\r\n          deviceId: selectedCameraId ? { exact: selectedCameraId } : undefined\r\n        }\r\n      };\r\n      await html5QrCode.start(\r\n        { facingMode: 'environment' },\r\n        config,\r\n        async (decodedText) => {\r\n          message.success(`üì± ƒê√£ qu√©t th√†nh c√¥ng: ${decodedText}`);\r\n          onScan(decodedText);\r\n          await handleClose();\r\n        },\r\n        (error) => {\r\n          if (error && !error.includes('NotFoundException')) {\r\n            console.warn(`QR scan error: ${error}`);\r\n          }\r\n        }\r\n      );\r\n      // Try to play video (catch AbortError)\r\n      try {\r\n        if (videoElement && videoElement.play) {\r\n          await videoElement.play();\r\n        }\r\n      } catch (e) {\r\n        // Ignore AbortError\r\n      }\r\n      setScannerInstance(html5QrCode);\r\n      setIsScanning(true);\r\n      setPermissionState('granted');\r\n    } catch (err) {\r\n      handleCameraError(err);\r\n      setIsScanning(false);\r\n    }\r\n  };\r\n\r\n  // Handle close with proper cleanup\r\n  const handleClose = async () => {\r\n    setIsClosing(true);\r\n    try {\r\n      await stopScanner();\r\n      setError(null);\r\n      setPermissionState('unknown');\r\n      setIsClosing(false);\r\n      onClose();\r\n    } catch (err) {\r\n      setIsClosing(false);\r\n      onClose();\r\n    }\r\n  };\r\n\r\n  // Handle restart\r\n  const handleRestart = async () => {\r\n    setError(null);\r\n    await stopScanner();\r\n    setTimeout(() => {\r\n      initializeScanner();\r\n    }, 500);\r\n  };\r\n\r\n  // Render permission request UI\r\n  const renderPermissionRequest = () => (\r\n    <div style={{ textAlign: 'center', padding: '40px 20px' }}>\r\n      <div style={{ fontSize: '64px', marginBottom: '20px' }}>üì±</div>\r\n      <div style={{ fontSize: '18px', fontWeight: 'bold', marginBottom: '12px' }}>\r\n        C·∫ßn quy·ªÅn truy c·∫≠p Camera\r\n      </div>\r\n      <div style={{ fontSize: '14px', color: '#666', marginBottom: '24px', lineHeight: '1.5' }}>\r\n        ƒê·ªÉ qu√©t m√£ QR/Barcode, ·ª©ng d·ª•ng c·∫ßn quy·ªÅn truy c·∫≠p camera c·ªßa thi·∫øt b·ªã.\r\n        <br />\r\n        Vui l√≤ng b·∫•m \"Cho ph√©p\" khi tr√¨nh duy·ªát h·ªèi.\r\n      </div>\r\n      <Button \r\n        type=\"primary\" \r\n        size=\"large\"\r\n        icon={<CameraOutlined />}\r\n        onClick={requestCameraPermission}\r\n        style={{ \r\n          background: '#52c41a',\r\n          borderColor: '#52c41a',\r\n          height: '48px',\r\n          fontSize: '16px',\r\n          fontWeight: 'bold'\r\n        }}\r\n        disabled={isClosing}\r\n      >\r\n        üîì C·∫•p quy·ªÅn Camera\r\n      </Button>\r\n      <Divider />\r\n      <div style={{ fontSize: '12px', color: '#999', textAlign: 'left' }}>\r\n        <div style={{ marginBottom: '8px', fontWeight: 'bold' }}>üí° L∆∞u √Ω:</div>\r\n        <div>‚Ä¢ Tr√™n <strong>iPhone/iPad</strong>: B·∫•m \"Cho ph√©p\" khi Safari h·ªèi</div>\r\n        <div>‚Ä¢ Tr√™n <strong>Android</strong>: B·∫•m \"Allow\" khi Chrome h·ªèi</div>\r\n        <div>‚Ä¢ N·∫øu ƒë√£ t·ª´ ch·ªëi: V√†o Settings ‚Üí Camera ‚Üí Cho ph√©p trang web n√†y</div>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <Modal\r\n      title={\r\n        <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\r\n          <CameraOutlined style={{ color: '#1890ff' }} />\r\n          <span>{title}</span>\r\n          {permissionState === 'granted' && (\r\n            <CheckCircleOutlined style={{ color: '#52c41a', marginLeft: '8px' }} />\r\n          )}\r\n        </div>\r\n      }\r\n      open={visible}\r\n      onCancel={handleClose}\r\n      width={Math.min(600, window.innerWidth - 32)}\r\n      footer={\r\n        <Space>\r\n          <Button onClick={handleRestart} icon={<ReloadOutlined />} disabled={isClosing}>\r\n            Th·ª≠ l·∫°i\r\n          </Button>\r\n          <Button onClick={handleClose} icon={<CloseOutlined />} disabled={isClosing}>\r\n            ƒê√≥ng\r\n          </Button>\r\n        </Space>\r\n      }\r\n      centered\r\n      style={{ top: 20 }}\r\n      confirmLoading={isClosing}\r\n      maskClosable={!isClosing}\r\n      closable={!isClosing}\r\n      forceRender={true}\r\n    >\r\n      <div style={{ textAlign: 'center', padding: '20px 0' }}>\r\n        {/* Permission request UI */}\r\n        {(permissionState === 'denied' || permissionState === 'prompt' || permissionState === 'unknown') && !scannerInstance && (\r\n          renderPermissionRequest()\r\n        )}\r\n        {/* Error display */}\r\n        {error && (\r\n          <Alert\r\n            message=\"L·ªói Camera\"\r\n            description={\r\n              <div>\r\n                <div>{error}</div>\r\n                <div style={{ marginTop: '12px', fontSize: '12px' }}>\r\n                  <strong>C√°ch kh·∫Øc ph·ª•c:</strong>\r\n                  <br />‚Ä¢ ƒê·∫£m b·∫£o trang web ƒë∆∞·ª£c truy c·∫≠p qua HTTPS\r\n                  <br />‚Ä¢ Ki·ªÉm tra c√†i ƒë·∫∑t quy·ªÅn camera trong tr√¨nh duy·ªát\r\n                  <br />‚Ä¢ Th·ª≠ t·∫£i l·∫°i trang v√† c·∫•p quy·ªÅn l·∫°i\r\n                </div>\r\n              </div>\r\n            }\r\n            type=\"error\"\r\n            showIcon\r\n            style={{ marginBottom: 16, textAlign: 'left' }}\r\n            action={\r\n              <Button size=\"small\" onClick={requestCameraPermission} disabled={isClosing}>\r\n                Th·ª≠ l·∫°i\r\n              </Button>\r\n            }\r\n          />\r\n        )}\r\n        {/* Success message when camera is ready */}\r\n        {permissionState === 'granted' && !error && (\r\n          <Alert\r\n            message=\"Camera ƒë√£ s·∫µn s√†ng\"\r\n            description={placeholder}\r\n            type=\"success\"\r\n            showIcon\r\n            style={{ marginBottom: 16 }}\r\n          />\r\n        )}\r\n        {/* Scanner container with controlled video element */}\r\n        {permissionState === 'granted' && !error && (\r\n          <div \r\n            id=\"qr-reader\"\r\n            style={{ \r\n              width: '100%',\r\n              maxWidth: '500px',\r\n              margin: '0 auto',\r\n              border: '2px dashed #52c41a',\r\n              borderRadius: '8px',\r\n              minHeight: '300px',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              justifyContent: 'center',\r\n              position: 'relative'\r\n            }}\r\n          >\r\n            {isScanning && visible && !isClosing && (\r\n              <video\r\n                ref={videoRef}\r\n                style={{\r\n                  width: '100%',\r\n                  height: '100%',\r\n                  objectFit: 'cover',\r\n                  borderRadius: '6px',\r\n                  display: 'block'\r\n                }}\r\n                autoPlay\r\n                playsInline\r\n                muted\r\n              />\r\n            )}\r\n            {(!isScanning || isClosing) && (\r\n              <div style={{ textAlign: 'center', color: '#999' }}>\r\n                <CameraOutlined style={{ fontSize: '48px', marginBottom: '16px' }} />\r\n                <div>ƒêang kh·ªüi t·∫°o camera...</div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n        <div style={{ marginTop: 16, fontSize: '12px', color: '#666' }}>\r\n          <Text type=\"secondary\">\r\n            üí° H·ªó tr·ª£ qu√©t: QR Code\r\n          </Text>\r\n        </div>\r\n      </div>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default QRScanner; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}