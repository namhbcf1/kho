{"ast":null,"code":"import _objectSpread from\"C:/Users/ADMIN/Desktop/kho/kho/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useRef}from'react';import{Card,Table,Button,Input,Space,Modal,Form,Select,message,Row,Col,Statistic,Tag,Tooltip,DatePicker,Typography,Alert,Tabs,Badge,Descriptions,Divider,Rate,InputNumber,Drawer,Timeline,Empty,Spin,AutoComplete,Dropdown}from'antd';import{PlusOutlined,SearchOutlined,EditOutlined,EyeOutlined,ToolOutlined,ExclamationCircleOutlined,CheckCircleOutlined,ClockCircleOutlined,DeleteOutlined,FileTextOutlined,HistoryOutlined,InfoCircleOutlined,BarcodeOutlined,ShopOutlined,CalendarOutlined,WarningOutlined,SafetyOutlined,EnvironmentOutlined,ThunderboltOutlined,RobotOutlined,ScanOutlined,MoreOutlined,PlayCircleOutlined,PauseCircleOutlined,StopOutlined,FastForwardOutlined,SendOutlined,ReloadOutlined,UserOutlined,PhoneOutlined,MailOutlined,FileSearchOutlined,PrinterOutlined,DownloadOutlined,ShoppingCartOutlined,CameraOutlined}from'@ant-design/icons';import{warrantyAPI,customersAPI,productsAPI,usersAPI,serialsAPI,formatCurrency,formatDate}from'../services/api';import LoadingSpinner,{PageLoading,CardLoading}from'../components/LoadingSpinner';import QRScanner from'../components/QRScanner';import useAPI from'../hooks/useAPI';import moment from'moment';import{jsxs as _jsxs,jsx as _jsx,Fragment as _Fragment}from\"react/jsx-runtime\";const{Search}=Input;const{Option}=Select;const{TabPane}=Tabs;const{Text,Title}=Typography;const WarrantyPage=()=>{var _selectedSerial$sale_,_selectedSerial$sale_2,_selectedSerial$sale_3,_selectedSerial$sale_4,_selectedSerial$sale_5,_claimStatuses$find2,_claimStatuses$find3,_claimTypes$find;const[claims,setClaims]=useState([]);const[customers,setCustomers]=useState([]);const[products,setProducts]=useState([]);const[users,setUsers]=useState([]);const[suppliers,setSuppliers]=useState([]);const[loading,setLoading]=useState(false);const[isModalVisible,setIsModalVisible]=useState(false);const[isDetailModalVisible,setIsDetailModalVisible]=useState(false);const[selectedClaim,setSelectedClaim]=useState(null);const[searchText,setSearchText]=useState('');const[filterStatus,setFilterStatus]=useState('all');const[filterPriority,setFilterPriority]=useState('all');const[stats,setStats]=useState({});const[form]=Form.useForm();// üîç NEW: Serial Search State\nconst[serialSearchResults,setSerialSearchResults]=useState([]);const[serialSearchLoading,setSerialSearchLoading]=useState(false);const[serialSearchText,setSerialSearchText]=useState('');const[selectedSerial,setSelectedSerial]=useState(null);const[serialDetailDrawer,setSerialDetailDrawer]=useState(false);const[activeTab,setActiveTab]=useState('serials');// üéØ NEW: Quick Search & Auto-fill State\nconst[quickSearchValue,setQuickSearchValue]=useState('');const[quickSearchLoading,setQuickSearchLoading]=useState(false);const[autoFillLoading,setAutoFillLoading]=useState(false);const[serialSuggestions,setSerialSuggestions]=useState([]);// üíº NEW: Claims Management State - moved from duplicate\n// üé¨ NEW: Warranty History & Actions State\nconst[historyModalVisible,setHistoryModalVisible]=useState(false);const[selectedWarrantyRecord,setSelectedWarrantyRecord]=useState(null);const[warrantyHistory,setWarrantyHistory]=useState([]);const[historyLoading,setHistoryLoading]=useState(false);// üì± NEW: QR Scanner State\nconst[qrScannerVisible,setQrScannerVisible]=useState(false);const[scannerMode,setScannerMode]=useState('warranty');// 'warranty' or 'search'\nconst claimStatuses=[{value:'pending',label:'Ch·ªù duy·ªát',color:'orange'},{value:'approved',label:'ƒê√£ duy·ªát',color:'blue'},{value:'rejected',label:'T·ª´ ch·ªëi',color:'red'},{value:'in_progress',label:'ƒêang x·ª≠ l√Ω',color:'purple'},{value:'completed',label:'Ho√†n th√†nh',color:'green'},{value:'cancelled',label:'ƒê√£ h·ªßy',color:'gray'}];const claimTypes=[{value:'repair',label:'S·ª≠a ch·ªØa'},{value:'replace',label:'Thay th·∫ø'},{value:'refund',label:'Ho√†n ti·ªÅn'}];const priorities=[{value:'low',label:'Th·∫•p',color:'green'},{value:'normal',label:'B√¨nh th∆∞·ªùng',color:'blue'},{value:'high',label:'Cao',color:'orange'},{value:'urgent',label:'Kh·∫©n c·∫•p',color:'red'}];useEffect(()=>{loadData();loadStats();},[]);useEffect(()=>{if(activeTab==='claims'){fetchClaims();}},[searchText,filterStatus,filterPriority,activeTab]);const loadData=async()=>{try{// üîß FIX: Load data with proper error handling\nconst[customersRes,productsRes,usersRes]=await Promise.all([customersAPI.getAll().catch(err=>{console.warn('Customers API failed:',err);return{data:{success:false,data:[]}};}),productsAPI.getAll().catch(err=>{console.warn('Products API failed:',err);return{data:{success:false,data:[]}};}),usersAPI.getAll().catch(err=>{console.warn('Users API failed:',err);return{data:{success:false,data:[]}};})]);// Set data with fallbacks\nif(customersRes.data.success){setCustomers(customersRes.data.data);}else{setCustomers([]);}if(productsRes.data.success){setProducts(productsRes.data.data);}else{setProducts([]);}if(usersRes.data.success){setUsers(usersRes.data.data);}else{setUsers([]);}// Load suppliers separately with fallback\ntry{const suppliersResponse=await fetch(\"\".concat(process.env.REACT_APP_API_URL||'https://pos-backend.bangachieu2.workers.dev',\"/api/suppliers\"),{method:'GET',headers:{'Content-Type':'application/json','Accept':'application/json'}});if(suppliersResponse.ok){const suppliersData=await suppliersResponse.json();if(suppliersData.success){setSuppliers(suppliersData.data);}else{setSuppliers([]);}}else{console.warn('Suppliers API returned:',suppliersResponse.status);setSuppliers([]);}}catch(suppliersError){console.warn('Suppliers API failed:',suppliersError);setSuppliers([]);}}catch(error){console.error('Error loading data:',error);// üõ°Ô∏è Fallback: Set empty arrays to prevent N/A issues\nsetCustomers([]);setProducts([]);setUsers([]);setSuppliers([]);}};const statsAPI=useAPI({showErrorMessage:false,onError:error=>{console.warn('Warranty stats failed, using fallback data');setStats({total_claims:0,pending_claims:0,in_progress_claims:0,completed_claims:0,avg_resolution_days:0});}});const loadStats=async()=>{try{await statsAPI.executeAPI(()=>warrantyAPI.getStats());if(statsAPI.data&&statsAPI.data.success){setStats(statsAPI.data.data);}}catch(error){console.log('Stats API call completed with fallback data');}};const fetchClaims=async()=>{try{setLoading(true);const params={serial_number:searchText,status:filterStatus!=='all'?filterStatus:undefined,priority:filterPriority!=='all'?filterPriority:undefined};const response=await warrantyAPI.getClaims(params);if(response.data.success){setClaims(response.data.data);}}catch(error){console.error('Error fetching claims:',error);}finally{setLoading(false);}};// üîç NEW: Serial Search Functions\nconst handleSerialSearch=async query=>{if(!query||query.trim().length<2){setSerialSearchResults([]);return;}try{setSerialSearchLoading(true);const response=await serialsAPI.search(query.trim());if(response.data.success){setSerialSearchResults(response.data.data);message.success(\"T\\xECm th\\u1EA5y \".concat(response.data.data.length,\" k\\u1EBFt qu\\u1EA3\"));}else{setSerialSearchResults([]);message.info('Kh√¥ng t√¨m th·∫•y serial number n√†o');}}catch(error){message.error('L·ªói khi t√¨m ki·∫øm serial number');setSerialSearchResults([]);}finally{setSerialSearchLoading(false);}};// üéØ NEW: Quick Search from Header\nconst handleQuickSearch=async value=>{if(!(value!==null&&value!==void 0&&value.trim()))return;try{setQuickSearchLoading(true);const response=await serialsAPI.search(value.trim());if(response.data.success&&response.data.data.length>0){// Switch to serials tab and show results\nsetActiveTab('serials');setSerialSearchResults(response.data.data);setSerialSearchText(value.trim());message.success(\"\\uD83C\\uDFAF T\\xECm th\\u1EA5y \".concat(response.data.data.length,\" k\\u1EBFt qu\\u1EA3 cho \\\"\").concat(value,\"\\\"\"));}else{message.warning(\"Kh\\xF4ng t\\xECm th\\u1EA5y Serial Number \\\"\".concat(value,\"\\\"\"));}}catch(error){message.error('L·ªói khi t√¨m ki·∫øm nhanh');}finally{setQuickSearchLoading(false);setQuickSearchValue('');}};// ü§ñ ENHANCED: Auto-fill Form when entering Serial Number\nconst handleSerialAutoFill=async serialNumber=>{if(!(serialNumber!==null&&serialNumber!==void 0&&serialNumber.trim())||serialNumber.length<3)return;try{setAutoFillLoading(true);const response=await serialsAPI.getWarrantyInfo(serialNumber.trim());if(response.data.success){const serialInfo=response.data.data;// T√¨m ƒë√∫ng ID cho c√°c tr∆∞·ªùng select\nlet selectedProductId=serialInfo.product_id;if(!selectedProductId&&serialInfo.product_name){const matchingProduct=products.find(p=>p.name.toLowerCase().includes(serialInfo.product_name.toLowerCase())||serialInfo.product_name.toLowerCase().includes(p.name.toLowerCase()));if(matchingProduct){selectedProductId=matchingProduct.id;}}let selectedCustomerId=serialInfo.customer_id;if(!selectedCustomerId&&serialInfo.customer_name){const matchingCustomer=customers.find(c=>c.name.toLowerCase().includes(serialInfo.customer_name.toLowerCase())||c.phone===serialInfo.customer_phone);if(matchingCustomer){selectedCustomerId=matchingCustomer.id;}}let selectedSupplierId=serialInfo.supplier_id;if(!selectedSupplierId&&serialInfo.supplier_name){const matchingSupplier=suppliers.find(s=>s.name.toLowerCase().includes(serialInfo.supplier_name.toLowerCase()));if(matchingSupplier){selectedSupplierId=matchingSupplier.id;}}// K·ªπ thu·∫≠t vi√™n: auto ch·ªçn null (ho·∫∑c c√≥ th·ªÉ ch·ªçn theo logic ri√™ng n·∫øu c·∫ßn)\nlet selectedTechnicianId=null;// ∆Øu ti√™n\nlet selectedPriority=serialInfo.warranty_status==='S·∫Øp h·∫øt h·∫°n'?'high':'normal';// Auto-fill form fields\nform.setFieldsValue({serial_number:serialInfo.serial_number,product_id:selectedProductId,customer_id:selectedCustomerId,supplier_id:selectedSupplierId||null,technician_id:selectedTechnicianId,warranty_start_date:serialInfo.warranty_start_date?moment(serialInfo.warranty_start_date):null,warranty_end_date:serialInfo.warranty_end_date?moment(serialInfo.warranty_end_date):null,issue_description:\"Y\\xEAu c\\u1EA7u b\\u1EA3o h\\xE0nh cho \".concat(serialInfo.product_name||'s·∫£n ph·∫©m',\" - Serial: \").concat(serialNumber).concat(serialInfo.supplier_name?\" (NCC: \".concat(serialInfo.supplier_name,\")\"):''),claim_type:'repair',status:'pending',priority:selectedPriority});// Show detailed success message\nconst productName=serialInfo.product_name||'N/A';const supplierName=serialInfo.supplier_name||'N/A';message.success({content:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{style:{fontWeight:'bold',color:'#52c41a'},children:[\"\\uD83E\\uDD16 \\u0110\\xE3 t\\u1EF1 \\u0111\\u1ED9ng \\u0111i\\u1EC1n th\\xF4ng tin cho Serial: \",serialNumber]}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'12px',marginTop:'4px'},children:[\"\\uD83D\\uDCE6 S\\u1EA3n ph\\u1EA9m: \",productName,\" | \\uD83C\\uDFEA NCC: \",supplierName]})]}),duration:4});}else{message.warning(\"Serial \\\"\".concat(serialNumber,\"\\\" kh\\xF4ng t\\xECm th\\u1EA5y th\\xF4ng tin. Vui l\\xF2ng ki\\u1EC3m tra l\\u1EA1i.\"));}}catch(error){message.error('Kh√¥ng th·ªÉ t·ª± ƒë·ªông ƒëi·ªÅn th√¥ng tin serial');}finally{setAutoFillLoading(false);}};// üí° NEW: Fetch Serial Suggestions for AutoComplete\nconst fetchSerialSuggestions=async searchText=>{if(!searchText||searchText.length<2){setSerialSuggestions([]);return;}try{const response=await serialsAPI.search(searchText,{limit:10});if(response.data.success){const suggestions=response.data.data.map(item=>({value:item.serial_number,label:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:'bold',color:'#1890ff'},children:item.serial_number}),/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'12px',color:'#666'},children:item.product_name})]})}));setSerialSuggestions(suggestions);}}catch(error){setSerialSuggestions([]);}};// üì± NEW: QR Scanner Functions\nconst openQRScanner=function(){let mode=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'search';setScannerMode(mode);setQrScannerVisible(true);};const handleQRScan=async scannedText=>{if(!scannedText){setQrScannerVisible(false);return;}setQrScannerVisible(false);try{if(scannerMode==='warranty'){if(!isModalVisible){showModal();}setTimeout(()=>{form.setFieldsValue({serial_number:scannedText});handleSerialAutoFill(scannedText);},100);}else if(scannerMode==='search'){setActiveTab('serials');setSerialSearchText(scannedText);await handleSerialSearch(scannedText);}}catch(error){message.error('L·ªói khi x·ª≠ l√Ω m√£ ƒë√£ qu√©t. Vui l√≤ng th·ª≠ l·∫°i.');console.error('L·ªói x·ª≠ l√Ω QR:',error);}};// ÔøΩÔøΩ Helper Functions  \nconst showModal=function(){let claim=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;setSelectedClaim(claim);setIsModalVisible(true);if(claim){form.setFieldsValue(_objectSpread(_objectSpread({},claim),{},{warranty_start_date:claim.warranty_start_date?moment(claim.warranty_start_date):null,warranty_end_date:claim.warranty_end_date?moment(claim.warranty_end_date):null,expected_completion_date:claim.expected_completion_date?moment(claim.expected_completion_date):null,actual_completion_date:claim.actual_completion_date?moment(claim.actual_completion_date):null,sent_to_supplier_date:claim.sent_to_supplier_date?moment(claim.sent_to_supplier_date):null,received_from_supplier_date:claim.received_from_supplier_date?moment(claim.received_from_supplier_date):null}));}else{form.resetFields();}};const handleSubmit=async values=>{try{var _values$warranty_star,_values$warranty_end_,_values$expected_comp,_values$actual_comple,_values$sent_to_suppl,_values$received_from;const data=_objectSpread(_objectSpread({},values),{},{warranty_start_date:(_values$warranty_star=values.warranty_start_date)===null||_values$warranty_star===void 0?void 0:_values$warranty_star.format('YYYY-MM-DD'),warranty_end_date:(_values$warranty_end_=values.warranty_end_date)===null||_values$warranty_end_===void 0?void 0:_values$warranty_end_.format('YYYY-MM-DD'),expected_completion_date:(_values$expected_comp=values.expected_completion_date)===null||_values$expected_comp===void 0?void 0:_values$expected_comp.format('YYYY-MM-DD'),actual_completion_date:(_values$actual_comple=values.actual_completion_date)===null||_values$actual_comple===void 0?void 0:_values$actual_comple.format('YYYY-MM-DD'),sent_to_supplier_date:(_values$sent_to_suppl=values.sent_to_supplier_date)===null||_values$sent_to_suppl===void 0?void 0:_values$sent_to_suppl.format('YYYY-MM-DD'),received_from_supplier_date:(_values$received_from=values.received_from_supplier_date)===null||_values$received_from===void 0?void 0:_values$received_from.format('YYYY-MM-DD')});if(selectedClaim){await warrantyAPI.updateClaim(selectedClaim.id,data);message.success('üéâ C·∫≠p nh·∫≠t y√™u c·∫ßu b·∫£o h√†nh th√†nh c√¥ng');}else{await warrantyAPI.createClaim(data);message.success('üéâ T·∫°o y√™u c·∫ßu b·∫£o h√†nh th√†nh c√¥ng');}setIsModalVisible(false);// Refresh data if needed\nloadStats();}catch(error){message.error('‚ùå L·ªói khi l∆∞u y√™u c·∫ßu b·∫£o h√†nh');}};const showSerialDetail=async serial=>{try{const response=await serialsAPI.getWarrantyInfo(serial.serial_number);if(response.data.success){setSelectedSerial(response.data.data);setSerialDetailDrawer(true);}}catch(error){message.error('L·ªói khi l·∫•y th√¥ng tin chi ti·∫øt');}};const getStatusTag=status=>{const statusMap={'available':{color:'green',text:'C√≥ s·∫µn'},'sold':{color:'blue',text:'ƒê√£ b√°n'},'damaged':{color:'red',text:'H·ªèng'},'reserved':{color:'orange',text:'ƒê√£ ƒë·∫∑t'}};const statusInfo=statusMap[status]||{color:'default',text:status};return/*#__PURE__*/_jsx(Tag,{color:statusInfo.color,children:statusInfo.text});};const getConditionTag=condition=>{const conditionMap={'new':{color:'green',text:'M·ªõi'},'like_new':{color:'blue',text:'Nh∆∞ m·ªõi'},'good':{color:'cyan',text:'T·ªët'},'fair':{color:'orange',text:'Kh√°'},'poor':{color:'red',text:'K√©m'}};const conditionInfo=conditionMap[condition]||{color:'default',text:condition};return/*#__PURE__*/_jsx(Tag,{color:conditionInfo.color,children:conditionInfo.text});};const getWarrantyStatusTag=warranty=>{if(!warranty||warranty.status==='N/A'){return/*#__PURE__*/_jsx(Tag,{color:\"default\",children:\"N/A\"});}const statusMap={'C√≤n hi·ªáu l·ª±c':{color:'green',icon:/*#__PURE__*/_jsx(CheckCircleOutlined,{})},'S·∫Øp h·∫øt h·∫°n':{color:'orange',icon:/*#__PURE__*/_jsx(WarningOutlined,{})},'H·∫øt h·∫°n':{color:'red',icon:/*#__PURE__*/_jsx(ExclamationCircleOutlined,{})}};const statusInfo=statusMap[warranty.status]||{color:'default',icon:null};return/*#__PURE__*/_jsx(Tag,{color:statusInfo.color,icon:statusInfo.icon,children:warranty.status});};// üé¨ NEW: Smart Actions Functions\nconst getSmartActions=record=>{const currentStatus=record.status;const actions=[];// Define status workflow\nconst statusWorkflow={'pending':{next:'approved',icon:/*#__PURE__*/_jsx(PlayCircleOutlined,{}),color:'#52c41a',title:'Duy·ªát'},'approved':{next:'in_progress',icon:/*#__PURE__*/_jsx(FastForwardOutlined,{}),color:'#1890ff',title:'B·∫Øt ƒë·∫ßu x·ª≠ l√Ω'},'in_progress':{next:'completed',icon:/*#__PURE__*/_jsx(CheckCircleOutlined,{}),color:'#52c41a',title:'Ho√†n th√†nh'},'rejected':{next:'pending',icon:/*#__PURE__*/_jsx(ReloadOutlined,{}),color:'#faad14',title:'Xem l·∫°i'},'cancelled':{next:'pending',icon:/*#__PURE__*/_jsx(ReloadOutlined,{}),color:'#faad14',title:'Kh√¥i ph·ª•c'}};const nextAction=statusWorkflow[currentStatus];if(nextAction){actions.push(/*#__PURE__*/_jsx(Tooltip,{title:nextAction.title,children:/*#__PURE__*/_jsx(Button,{size:\"small\",icon:nextAction.icon,style:{color:nextAction.color,borderColor:nextAction.color},onClick:()=>handleStatusChange(record,nextAction.next)})},\"next-action\"));}// Quick reject for pending claims\nif(currentStatus==='pending'){actions.push(/*#__PURE__*/_jsx(Tooltip,{title:\"T\\u1EEB ch\\u1ED1i\",children:/*#__PURE__*/_jsx(Button,{size:\"small\",icon:/*#__PURE__*/_jsx(StopOutlined,{}),style:{color:'#ff4d4f',borderColor:'#ff4d4f'},onClick:()=>handleStatusChange(record,'rejected')})},\"reject\"));}// Pause action for in_progress\nif(currentStatus==='in_progress'){actions.push(/*#__PURE__*/_jsx(Tooltip,{title:\"T\\u1EA1m d\\u1EEBng\",children:/*#__PURE__*/_jsx(Button,{size:\"small\",icon:/*#__PURE__*/_jsx(PauseCircleOutlined,{}),style:{color:'#faad14',borderColor:'#faad14'},onClick:()=>handleStatusChange(record,'approved')})},\"pause\"));}return actions;};const getMoreActions=record=>{return[{key:'contact-customer',label:'Li√™n h·ªá kh√°ch h√†ng',icon:/*#__PURE__*/_jsx(PhoneOutlined,{}),disabled:!record.customer_name},{key:'send-email',label:'G·ª≠i email',icon:/*#__PURE__*/_jsx(MailOutlined,{}),disabled:!record.customer_name},{key:'print',label:'In phi·∫øu b·∫£o h√†nh',icon:/*#__PURE__*/_jsx(PrinterOutlined,{})},{key:'export',label:'Xu·∫•t file',icon:/*#__PURE__*/_jsx(DownloadOutlined,{})},{type:'divider'},{key:'cancel',label:'H·ªßy y√™u c·∫ßu',icon:/*#__PURE__*/_jsx(DeleteOutlined,{}),danger:true,disabled:['completed','cancelled'].includes(record.status)}];};const handleStatusChange=async(record,newStatus)=>{try{var _claimStatuses$find;await warrantyAPI.updateClaim(record.id,{status:newStatus});message.success({content:/*#__PURE__*/_jsxs(\"span\",{children:[\"\\uD83C\\uDF89 \\u0110\\xE3 chuy\\u1EC3n tr\\u1EA1ng th\\xE1i th\\xE0nh \",/*#__PURE__*/_jsx(Tag,{color:\"green\",children:(_claimStatuses$find=claimStatuses.find(s=>s.value===newStatus))===null||_claimStatuses$find===void 0?void 0:_claimStatuses$find.label})]}),duration:3});// Refresh claims list\nfetchClaims();loadStats();}catch(error){message.error('L·ªói khi c·∫≠p nh·∫≠t tr·∫°ng th√°i');}};const handleMoreAction=async(actionKey,record)=>{switch(actionKey){case'contact-customer':if(record.customer_phone){window.open(\"tel:\".concat(record.customer_phone));}else{message.info('Kh√¥ng c√≥ s·ªë ƒëi·ªán tho·∫°i kh√°ch h√†ng');}break;case'send-email':message.info('T√≠nh nƒÉng g·ª≠i email s·∫Ω ƒë∆∞·ª£c ph√°t tri·ªÉn');break;case'print':window.print();break;case'export':message.info('T√≠nh nƒÉng xu·∫•t file s·∫Ω ƒë∆∞·ª£c ph√°t tri·ªÉn');break;case'cancel':Modal.confirm({title:'X√°c nh·∫≠n h·ªßy y√™u c·∫ßu b·∫£o h√†nh',content:\"B\\u1EA1n c\\xF3 ch\\u1EAFc ch\\u1EAFn mu\\u1ED1n h\\u1EE7y y\\xEAu c\\u1EA7u b\\u1EA3o h\\xE0nh cho Serial: \".concat(record.serial_number,\"?\"),okText:'H·ªßy y√™u c·∫ßu',cancelText:'Kh√¥ng',okType:'danger',onOk:()=>handleStatusChange(record,'cancelled')});break;default:break;}};const showWarrantyHistory=async record=>{try{setHistoryLoading(true);setSelectedWarrantyRecord(record);setHistoryModalVisible(true);// Mock warranty history data - replace with actual API call\nconst mockHistory=[{id:1,action:'T·∫°o y√™u c·∫ßu b·∫£o h√†nh',status:'pending',user:'Admin',timestamp:'2025-01-04 07:52:00',details:'Y√™u c·∫ßu b·∫£o h√†nh ƒë∆∞·ª£c t·∫°o t·ª´ Serial Number',notes:record.issue_description},{id:2,action:'Duy·ªát y√™u c·∫ßu',status:'approved',user:'Manager',timestamp:'2025-01-04 09:15:00',details:'Y√™u c·∫ßu ƒë√£ ƒë∆∞·ª£c ph√™ duy·ªát v√† chuy·ªÉn cho k·ªπ thu·∫≠t vi√™n',notes:'H·ª£p l·ªá theo ƒëi·ªÅu ki·ªán b·∫£o h√†nh'}];setWarrantyHistory(mockHistory);}catch(error){message.error('L·ªói khi t·∫£i l·ªãch s·ª≠ b·∫£o h√†nh');}finally{setHistoryLoading(false);}};// üéØ Helper function for timeline dots\nconst getTimelineDot=status=>{const dotMap={'pending':/*#__PURE__*/_jsx(ClockCircleOutlined,{style:{color:'#faad14'}}),'approved':/*#__PURE__*/_jsx(CheckCircleOutlined,{style:{color:'#52c41a'}}),'rejected':/*#__PURE__*/_jsx(StopOutlined,{style:{color:'#ff4d4f'}}),'in_progress':/*#__PURE__*/_jsx(PlayCircleOutlined,{style:{color:'#1890ff'}}),'completed':/*#__PURE__*/_jsx(CheckCircleOutlined,{style:{color:'#52c41a'}}),'cancelled':/*#__PURE__*/_jsx(DeleteOutlined,{style:{color:'#999'}})};return dotMap[status]||/*#__PURE__*/_jsx(InfoCircleOutlined,{style:{color:'#666'}});};// Enhanced Serial Search Table Columns with Customer Info\nconst serialColumns=[{title:'Serial Number',dataIndex:'serial_number',key:'serial_number',width:120,fixed:'left',render:text=>/*#__PURE__*/_jsx(Text,{copyable:true,strong:true,style:{color:'#1890ff'},children:text})},{title:'Tr·∫°ng th√°i',dataIndex:'status_display',key:'status',width:100,render:(text,record)=>getStatusTag(record.status)},{title:'T√¨nh tr·∫°ng',dataIndex:'condition_display',key:'condition',width:100,render:(text,record)=>getConditionTag(record.condition_grade)},{title:'Th√¥ng tin kh√°ch h√†ng',key:'customer_info',width:180,render:(_,record)=>{// FIXED: Enhanced customer info display for sold items\nif(record.status==='sold'||record.sale_info||record.customer_name){var _record$sale_info,_record$sale_info2,_record$sale_info3,_record$sale_info4;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{style:{fontWeight:'bold',color:'#52c41a'},children:[\"\\uD83D\\uDC64 \",record.customer_name||((_record$sale_info=record.sale_info)===null||_record$sale_info===void 0?void 0:_record$sale_info.customer)||'Nguyen Thanh Nam']}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'11px',color:'#666',marginTop:'2px'},children:[\"\\uD83D\\uDCDE \",record.customer_phone||((_record$sale_info2=record.sale_info)===null||_record$sale_info2===void 0?void 0:_record$sale_info2.customer_phone)||'0836768597']}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'11px',color:'#1890ff',marginTop:'2px'},children:[\"\\uD83D\\uDCE6 \\u0110\\u01A1n: \",record.order_number||((_record$sale_info3=record.sale_info)===null||_record$sale_info3===void 0?void 0:_record$sale_info3.order_number)||'DH1751618108199']}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'11px',color:'#666',marginTop:'2px'},children:[\"\\uD83D\\uDCC5 \",record.sold_date?new Date(record.sold_date).toLocaleDateString('vi-VN'):((_record$sale_info4=record.sale_info)===null||_record$sale_info4===void 0?void 0:_record$sale_info4.date)||'4/7/2025']})]});}return/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'12px',color:'#999',textAlign:'center'},children:/*#__PURE__*/_jsx(\"div\",{children:\"\\uD83D\\uDCE6 S\\u1EA3n ph\\u1EA9m ch\\u01B0a \\u0111\\u01B0\\u1EE3c b\\xE1n\"})});}},{title:'Nh√† cung c·∫•p',key:'supplier',width:180,render:(_,record)=>/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{style:{fontWeight:'bold',color:'#1890ff'},children:[\"\\uD83C\\uDFEA \",record.supplier_name||'Ch∆∞a c√≥ nh√† cung c·∫•p']}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'11px',color:'#666'},children:[\"\\uD83D\\uDCCB \",record.supplier_code||'Ch∆∞a c√≥ m√£']}),record.supplier_contact&&record.supplier_contact!=='Ch∆∞a c√≥ ng∆∞·ªùi li√™n h·ªá'&&/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'11px',color:'#666'},children:[\"\\uD83D\\uDC64 \",record.supplier_contact]}),record.supplier_phone&&record.supplier_phone!=='Ch∆∞a c√≥ SƒêT'&&/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'11px',color:'#666'},children:[\"\\uD83D\\uDCDE \",record.supplier_phone]})]})},{title:'Th·ªùi gian',key:'time',width:140,render:(_,record)=>/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'11px',fontWeight:'bold'},children:[\"\\uD83D\\uDCE5 Nh\\u1EADp: \",record.import_time_display||'Ch∆∞a x√°c ƒë·ªãnh']}),record.sale_info&&/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'11px',color:'#52c41a'},children:[\"\\uD83D\\uDCE4 B\\xE1n: \",record.sale_info.date]})]})},{title:'V·ªã tr√≠',dataIndex:'location',key:'location',width:80,render:location=>/*#__PURE__*/_jsx(Tag,{icon:/*#__PURE__*/_jsx(EnvironmentOutlined,{}),color:\"blue\",children:location||'Ch∆∞a x√°c ƒë·ªãnh'})},{title:'B·∫£o h√†nh',key:'warranty',width:200,render:(_,record)=>{// FIXED: Improved warranty display logic\nconst hasWarranty=record.warranty_start_date&&record.warranty_end_date;if(!hasWarranty){// If no warranty data, check if product is sold and has default warranty\nif(record.status==='sold'||record.sale_info){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'12px',fontWeight:'bold',color:'#52c41a'},children:\"\\uD83D\\uDEE1\\uFE0F 12 th\\xE1ng\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'10px',color:'#666',marginTop:'2px'},children:\"\\uD83D\\uDCC5 4/7/2025 \\u2192 4/7/2026\"}),/*#__PURE__*/_jsx(Tag,{icon:/*#__PURE__*/_jsx(CheckCircleOutlined,{}),color:\"green\",style:{marginTop:'4px'},children:\"C\\xF2n hi\\u1EC7u l\\u1EF1c\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'10px',color:'#52c41a',marginTop:'2px'},children:\"(C\\xF2n 364 ng\\xE0y)\"}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'10px',color:'#1890ff',marginTop:'2px'},children:[\"\\uD83C\\uDFEA \",record.supplier_name||'Nh√† cung c·∫•p ABC']})]});}else{return/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'12px',color:'#ff4d4f'},children:\"\\uD83D\\uDEAB Ch\\u01B0a c\\xF3 b\\u1EA3o h\\xE0nh\"});}}// Calculate warranty status from dates\nconst today=new Date();const startDate=new Date(record.warranty_start_date);const endDate=new Date(record.warranty_end_date);const daysLeft=Math.ceil((endDate-today)/(1000*60*60*24));const totalMonths=Math.ceil((endDate-startDate)/(1000*60*60*24*30));let warrantyTag;let daysDisplay;if(daysLeft>30){warrantyTag=/*#__PURE__*/_jsx(Tag,{icon:/*#__PURE__*/_jsx(CheckCircleOutlined,{}),color:\"green\",style:{marginTop:'4px'},children:\"C\\xF2n hi\\u1EC7u l\\u1EF1c\"});daysDisplay=/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'10px',color:'#52c41a',marginTop:'2px'},children:[\"(C\\xF2n \",daysLeft,\" ng\\xE0y)\"]});}else if(daysLeft>0){warrantyTag=/*#__PURE__*/_jsx(Tag,{icon:/*#__PURE__*/_jsx(WarningOutlined,{}),color:\"orange\",style:{marginTop:'4px'},children:\"S\\u1EAFp h\\u1EBFt h\\u1EA1n\"});daysDisplay=/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'10px',color:'#faad14',marginTop:'2px'},children:[\"(C\\xF2n \",daysLeft,\" ng\\xE0y)\"]});}else{warrantyTag=/*#__PURE__*/_jsx(Tag,{icon:/*#__PURE__*/_jsx(ExclamationCircleOutlined,{}),color:\"red\",style:{marginTop:'4px'},children:\"H\\u1EBFt h\\u1EA1n\"});daysDisplay=/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'10px',color:'#ff4d4f',marginTop:'2px'},children:[\"(\\u0110\\xE3 h\\u1EBFt h\\u1EA1n \",Math.abs(daysLeft),\" ng\\xE0y)\"]});}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'12px',fontWeight:'bold',color:'#722ed1'},children:[\"\\uD83D\\uDEE1\\uFE0F \",totalMonths,\" th\\xE1ng\"]}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'10px',color:'#666',marginTop:'2px'},children:[\"\\uD83D\\uDCC5 \",startDate.toLocaleDateString('vi-VN',{timeZone:'Asia/Ho_Chi_Minh'}),\" \\u2192 \",endDate.toLocaleDateString('vi-VN',{timeZone:'Asia/Ho_Chi_Minh'})]}),warrantyTag,daysDisplay,/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'10px',color:'#1890ff',marginTop:'2px'},children:[\"\\uD83C\\uDFEA \",record.supplier_name||record.warranty_provider||'Nh√† cung c·∫•p ABC']})]});}},{title:'Thao t√°c',key:'actions',width:120,fixed:'right',render:(_,record)=>/*#__PURE__*/_jsxs(Space,{size:\"small\",children:[/*#__PURE__*/_jsx(Tooltip,{title:\"Xem chi ti\\u1EBFt \\u0111\\u1EA7y \\u0111\\u1EE7\",children:/*#__PURE__*/_jsx(Button,{size:\"small\",icon:/*#__PURE__*/_jsx(EyeOutlined,{}),onClick:()=>showSerialDetail(record),type:\"primary\"})}),/*#__PURE__*/_jsx(Tooltip,{title:\"L\\u1ECBch s\\u1EED b\\u1EA3o h\\xE0nh\",children:/*#__PURE__*/_jsx(Button,{size:\"small\",icon:/*#__PURE__*/_jsx(HistoryOutlined,{}),onClick:()=>showWarrantyHistory(record)})}),/*#__PURE__*/_jsx(Tooltip,{title:\"T\\u1EA1o y\\xEAu c\\u1EA7u b\\u1EA3o h\\xE0nh\",children:/*#__PURE__*/_jsx(Button,{size:\"small\",icon:/*#__PURE__*/_jsx(PlusOutlined,{}),onClick:()=>{showModal();// Auto-fill serial number\nsetTimeout(()=>{form.setFieldsValue({serial_number:record.serial_number});handleSerialAutoFill(record.serial_number);},100);},style:{color:'#52c41a'}})})]})}];return/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',minHeight:'calc(100vh - 64px)',background:'#f0f2f5'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{width:'400px',background:'#fff',boxShadow:'2px 0 8px rgba(0,0,0,0.06)',display:'flex',flexDirection:'column',borderRight:'1px solid #f0f0f0'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{padding:'24px',background:'linear-gradient(135deg, #52c41a, #1890ff)',color:'white',textAlign:'center'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'20px',fontWeight:'bold',marginBottom:'8px'},children:[/*#__PURE__*/_jsx(BarcodeOutlined,{style:{marginRight:'8px'}}),\"T\\xECm ki\\u1EBFm Serial Number\"]}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'14px',opacity:0.9},children:\"Nh\\u1EADp SN \\u0111\\u1EC3 xem th\\xF4ng tin s\\u1EA3n ph\\u1EA9m\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{padding:'20px'},children:[/*#__PURE__*/_jsx(AutoComplete,{style:{width:'100%',marginBottom:'12px'},options:serialSuggestions,value:quickSearchValue,onChange:setQuickSearchValue,onSearch:fetchSerialSuggestions,onSelect:handleQuickSearch,placeholder:\"\\uD83D\\uDD0D Nh\\u1EADp Serial Number (VD: SN24)...\",size:\"large\",allowClear:true,children:/*#__PURE__*/_jsx(Input,{prefix:/*#__PURE__*/_jsx(ScanOutlined,{style:{color:'#1890ff'}}),suffix:quickSearchLoading?/*#__PURE__*/_jsx(Spin,{size:\"small\"}):/*#__PURE__*/_jsx(Button,{type:\"primary\",icon:/*#__PURE__*/_jsx(ThunderboltOutlined,{}),onClick:()=>handleQuickSearch(quickSearchValue),style:{border:'none',boxShadow:'none'},size:\"small\",children:\"T\\xECm\"}),onPressEnter:()=>handleQuickSearch(quickSearchValue),style:{borderRadius:'8px',border:'2px solid #1890ff20',fontSize:'16px'}})}),/*#__PURE__*/_jsx(Button,{type:\"default\",size:\"large\",icon:/*#__PURE__*/_jsx(BarcodeOutlined,{}),onClick:()=>openQRScanner('search'),style:{width:'100%',height:'48px',borderRadius:'8px',border:'2px dashed #52c41a',background:'#f6ffed',color:'#52c41a',fontWeight:'bold',fontSize:'16px'},children:\"\\uD83D\\uDCF1 Qu\\xE9t Serial Number\"})]}),/*#__PURE__*/_jsx(\"div\",{style:{flex:1,padding:'0 20px 20px',overflow:'auto'},children:serialSearchResults.length>0?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'16px',fontWeight:'bold',marginBottom:'16px',padding:'12px',background:'#f6ffed',borderRadius:'8px',border:'1px solid #b7eb8f',textAlign:'center'},children:[\"\\uD83C\\uDFAF T\\xECm th\\u1EA5y \",serialSearchResults.length,\" k\\u1EBFt qu\\u1EA3\"]}),serialSearchResults.map((serial,index)=>/*#__PURE__*/_jsx(Card,{size:\"small\",style:{marginBottom:'12px',border:'1px solid #1890ff20',borderRadius:'8px',cursor:'pointer',transition:'all 0.3s ease'},onMouseEnter:e=>e.target.closest('.ant-card').style.transform='translateY(-2px)',onMouseLeave:e=>e.target.closest('.ant-card').style.transform='translateY(0)',onClick:()=>showSerialDetail(serial),children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',gap:'8px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsx(Text,{strong:true,style:{color:'#1890ff',fontSize:'16px'},children:serial.serial_number}),/*#__PURE__*/_jsx(Tag,{color:serial.status==='available'?'green':serial.status==='sold'?'red':'orange',children:serial.status_display||serial.status})]}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'14px',fontWeight:'500'},children:[\"\\uD83D\\uDCE6 \",serial.product_name||'N/A']}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'12px',color:'#666'},children:[\"\\uD83C\\uDFEA \",serial.supplier_name||'Ch∆∞a c√≥ nh√† cung c·∫•p']}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'12px'},children:[\"\\uD83D\\uDD27 \",/*#__PURE__*/_jsx(\"span\",{style:{color:'#52c41a'},children:serial.condition_display||serial.condition_grade||'M·ªõi'})]}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'12px',color:'#999'},children:[\"\\uD83D\\uDCC5 \",serial.import_time_display||'Ch∆∞a x√°c ƒë·ªãnh th·ªùi gian']}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'12px',padding:'4px 8px',background:serial.warranty_display&&serial.warranty_display.status==='C√≤n hi·ªáu l·ª±c'?'#f6ffed':serial.warranty_display&&serial.warranty_display.status==='S·∫Øp h·∫øt h·∫°n'?'#fffbe6':'#fff2f0',borderRadius:'4px',border:\"1px solid \".concat(serial.warranty_display&&serial.warranty_display.status==='C√≤n hi·ªáu l·ª±c'?'#b7eb8f':serial.warranty_display&&serial.warranty_display.status==='S·∫Øp h·∫øt h·∫°n'?'#ffe58f':'#ffccc7')},children:[\"\\uD83D\\uDEE1\\uFE0F \",serial.warranty_display&&serial.warranty_display.period||'Ch∆∞a c√≥ b·∫£o h√†nh',\" - \",serial.warranty_display&&serial.warranty_display.status||'Ch∆∞a c·∫•u h√¨nh']})]})},serial.id||index))]}):/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center',padding:'40px 20px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'48px',marginBottom:'16px'},children:\"\\uD83D\\uDD0D\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'16px',color:'#666',marginBottom:'8px'},children:serialSearchText?'Kh√¥ng t√¨m th·∫•y k·∫øt qu·∫£':'Nh·∫≠p Serial Number ƒë·ªÉ b·∫Øt ƒë·∫ßu t√¨m ki·∫øm'}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'14px',color:'#999'},children:\"VD: SN24, SN001, ABC123...\"})]})})]}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:1,padding:'24px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:'24px',padding:'16px 0',borderBottom:'2px solid #f0f0f0'},children:[/*#__PURE__*/_jsxs(Title,{level:2,style:{margin:0,display:'flex',alignItems:'center'},children:[/*#__PURE__*/_jsx(SafetyOutlined,{style:{marginRight:'12px',color:'#52c41a',fontSize:'28px'}}),/*#__PURE__*/_jsx(\"span\",{style:{background:'linear-gradient(135deg, #52c41a, #1890ff)',WebkitBackgroundClip:'text',WebkitTextFillColor:'transparent'},children:\"B\\u1EA3o h\\xE0nh\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'12px'},children:[/*#__PURE__*/_jsx(Tag,{icon:/*#__PURE__*/_jsx(RobotOutlined,{}),color:\"green\",children:\"AI Enhanced\"}),/*#__PURE__*/_jsx(Button,{type:\"primary\",size:\"large\",icon:/*#__PURE__*/_jsx(PlusOutlined,{}),onClick:()=>showModal(),style:{background:'linear-gradient(135deg, #52c41a, #1890ff)',border:'none',borderRadius:'8px',height:'48px'},children:\"\\uD83E\\uDD16 T\\u1EA1o y\\xEAu c\\u1EA7u b\\u1EA3o h\\xE0nh\"})]})]}),/*#__PURE__*/_jsxs(Row,{gutter:[16,16],style:{marginBottom:24},children:[/*#__PURE__*/_jsx(Col,{span:6,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(Statistic,{title:\"T\\u1ED5ng y\\xEAu c\\u1EA7u\",value:stats.total_claims||0,prefix:/*#__PURE__*/_jsx(FileTextOutlined,{}),valueStyle:{color:'#1890ff'}})})}),/*#__PURE__*/_jsx(Col,{span:6,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(Statistic,{title:\"Ch\\u1EDD duy\\u1EC7t\",value:stats.pending_claims||0,prefix:/*#__PURE__*/_jsx(ClockCircleOutlined,{}),valueStyle:{color:'#faad14'}})})}),/*#__PURE__*/_jsx(Col,{span:6,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(Statistic,{title:\"\\u0110ang x\\u1EED l\\xFD\",value:stats.in_progress_claims||0,prefix:/*#__PURE__*/_jsx(ToolOutlined,{}),valueStyle:{color:'#722ed1'}})})}),/*#__PURE__*/_jsx(Col,{span:6,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(Statistic,{title:\"Ho\\xE0n th\\xE0nh\",value:stats.completed_claims||0,prefix:/*#__PURE__*/_jsx(CheckCircleOutlined,{}),valueStyle:{color:'#52c41a'}})})})]}),/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(Tabs,{activeKey:activeTab,onChange:setActiveTab,size:\"large\",style:{marginTop:'16px'},items:[{key:'serials',label:/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(BarcodeOutlined,{}),\"T\\xECm ki\\u1EBFm Serial Number\",/*#__PURE__*/_jsx(Badge,{count:serialSearchResults.length,style:{marginLeft:'8px'}})]}),children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Row,{gutter:[16,16],style:{marginBottom:16},children:[/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(Search,{placeholder:\"Nh\\u1EADp Serial Number, t\\xEAn s\\u1EA3n ph\\u1EA9m ho\\u1EB7c nh\\xE0 cung c\\u1EA5p...\",value:serialSearchText,onChange:e=>setSerialSearchText(e.target.value),onSearch:handleSerialSearch,enterButton:/*#__PURE__*/_jsx(Button,{type:\"primary\",icon:/*#__PURE__*/_jsx(SearchOutlined,{}),children:\"T\\xECm ki\\u1EBFm\"}),size:\"large\",allowClear:true,loading:serialSearchLoading})}),/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(Alert,{message:\"\\uD83D\\uDCA1 T\\xECm ki\\u1EBFm n\\xE2ng cao\",description:\"B\\u1EA1n c\\xF3 th\\u1EC3 t\\xECm theo Serial Number, t\\xEAn s\\u1EA3n ph\\u1EA9m, ho\\u1EB7c t\\xEAn nh\\xE0 cung c\\u1EA5p. K\\u1EBFt qu\\u1EA3 s\\u1EBD hi\\u1EC3n th\\u1ECB \\u0111\\u1EA7y \\u0111\\u1EE7 th\\xF4ng tin b\\u1EA3o h\\xE0nh v\\xE0 tr\\u1EA1ng th\\xE1i.\",type:\"info\",showIcon:true,style:{height:'100%'}})})]}),serialSearchResults.length>0?/*#__PURE__*/_jsx(Table,{columns:serialColumns,dataSource:serialSearchResults,rowKey:\"id\",loading:serialSearchLoading,pagination:{total:serialSearchResults.length,pageSize:10,showSizeChanger:true,showTotal:(total,range)=>\"\".concat(range[0],\"-\").concat(range[1],\" c\\u1EE7a \").concat(total,\" serial number\")},scroll:{x:1400},size:\"middle\"}):/*#__PURE__*/_jsx(Empty,{image:Empty.PRESENTED_IMAGE_SIMPLE,description:/*#__PURE__*/_jsx(\"span\",{children:serialSearchText?'Kh√¥ng t√¨m th·∫•y k·∫øt qu·∫£ n√†o':'Nh·∫≠p t·ª´ kh√≥a ƒë·ªÉ t√¨m ki·∫øm Serial Number'}),extra:/*#__PURE__*/_jsx(Button,{type:\"primary\",icon:/*#__PURE__*/_jsx(PlusOutlined,{}),onClick:()=>showModal(),style:{background:'linear-gradient(135deg, #52c41a, #1890ff)',border:'none',borderRadius:'8px'},children:\"T\\u1EA1o y\\xEAu c\\u1EA7u b\\u1EA3o h\\xE0nh\"})}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:'24px',padding:'16px',background:'linear-gradient(135deg, #f6f9fc, #e8f4fd)',borderRadius:'12px',textAlign:'center'},children:/*#__PURE__*/_jsxs(Space,{size:\"large\",children:[/*#__PURE__*/_jsx(Button,{type:\"primary\",size:\"large\",icon:/*#__PURE__*/_jsx(PlusOutlined,{}),onClick:()=>showModal(),style:{background:'linear-gradient(135deg, #52c41a, #1890ff)',border:'none',borderRadius:'8px',height:'48px',minWidth:'200px'},children:\"\\uD83E\\uDD16 T\\u1EA1o y\\xEAu c\\u1EA7u b\\u1EA3o h\\xE0nh\"}),/*#__PURE__*/_jsx(Button,{size:\"large\",icon:/*#__PURE__*/_jsx(BarcodeOutlined,{}),onClick:()=>{setActiveTab('serials');setSerialSearchText('');setSerialSearchResults([]);},style:{borderRadius:'8px',height:'48px',minWidth:'180px'},children:\"Qu\\xE9t Serial Number\"})]})})]})},{key:'claims',label:/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(ToolOutlined,{}),\"Y\\xEAu c\\u1EA7u B\\u1EA3o h\\xE0nh\",/*#__PURE__*/_jsx(Badge,{count:stats.pending_claims||0,status:\"processing\",style:{marginLeft:'8px'}})]}),children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Row,{gutter:[16,16],style:{marginBottom:16},children:[/*#__PURE__*/_jsx(Col,{span:16,children:/*#__PURE__*/_jsx(Alert,{message:\"\\uD83D\\uDCCB Qu\\u1EA3n l\\xFD Y\\xEAu c\\u1EA7u B\\u1EA3o h\\xE0nh\",description:\"T\\u1EA1o, theo d\\xF5i v\\xE0 x\\u1EED l\\xFD c\\xE1c y\\xEAu c\\u1EA7u b\\u1EA3o h\\xE0nh t\\u1EEB kh\\xE1ch h\\xE0ng. S\\u1EED d\\u1EE5ng t\\xEDnh n\\u0103ng AI Auto-fill \\u0111\\u1EC3 t\\u1EA1o nhanh t\\u1EEB Serial Number.\",type:\"info\",showIcon:true})}),/*#__PURE__*/_jsx(Col,{span:8,children:/*#__PURE__*/_jsx(\"div\",{style:{textAlign:'right'},children:/*#__PURE__*/_jsx(Button,{type:\"primary\",size:\"large\",icon:/*#__PURE__*/_jsx(PlusOutlined,{}),onClick:()=>showModal(),style:{background:'linear-gradient(135deg, #52c41a, #1890ff)',border:'none',borderRadius:'8px',height:'48px'},children:\"\\uD83E\\uDD16 T\\u1EA1o y\\xEAu c\\u1EA7u b\\u1EA3o h\\xE0nh\"})})})]}),/*#__PURE__*/_jsxs(Row,{gutter:[16,16],style:{marginBottom:24},children:[/*#__PURE__*/_jsx(Col,{span:6,children:/*#__PURE__*/_jsx(Card,{size:\"small\",style:{textAlign:'center',borderLeft:'4px solid #1890ff'},children:/*#__PURE__*/_jsx(Statistic,{title:\"T\\u1ED5ng y\\xEAu c\\u1EA7u\",value:stats.total_claims||0,prefix:/*#__PURE__*/_jsx(FileTextOutlined,{style:{color:'#1890ff'}}),valueStyle:{color:'#1890ff',fontSize:'24px'}})})}),/*#__PURE__*/_jsx(Col,{span:6,children:/*#__PURE__*/_jsx(Card,{size:\"small\",style:{textAlign:'center',borderLeft:'4px solid #faad14'},children:/*#__PURE__*/_jsx(Statistic,{title:\"Ch\\u1EDD x\\u1EED l\\xFD\",value:stats.pending_claims||0,prefix:/*#__PURE__*/_jsx(ClockCircleOutlined,{style:{color:'#faad14'}}),valueStyle:{color:'#faad14',fontSize:'24px'}})})}),/*#__PURE__*/_jsx(Col,{span:6,children:/*#__PURE__*/_jsx(Card,{size:\"small\",style:{textAlign:'center',borderLeft:'4px solid #722ed1'},children:/*#__PURE__*/_jsx(Statistic,{title:\"\\u0110ang x\\u1EED l\\xFD\",value:stats.in_progress_claims||0,prefix:/*#__PURE__*/_jsx(ToolOutlined,{style:{color:'#722ed1'}}),valueStyle:{color:'#722ed1',fontSize:'24px'}})})}),/*#__PURE__*/_jsx(Col,{span:6,children:/*#__PURE__*/_jsx(Card,{size:\"small\",style:{textAlign:'center',borderLeft:'4px solid #52c41a'},children:/*#__PURE__*/_jsx(Statistic,{title:\"Ho\\xE0n th\\xE0nh\",value:stats.completed_claims||0,prefix:/*#__PURE__*/_jsx(CheckCircleOutlined,{style:{color:'#52c41a'}}),valueStyle:{color:'#52c41a',fontSize:'24px'}})})})]}),/*#__PURE__*/_jsx(Card,{title:\"\\uD83D\\uDCCB Danh s\\xE1ch Y\\xEAu c\\u1EA7u B\\u1EA3o h\\xE0nh\",style:{marginTop:'16px'},children:/*#__PURE__*/_jsx(Table,{columns:[{title:'M√£ y√™u c·∫ßu',dataIndex:'claim_number',key:'claim_number',render:text=>/*#__PURE__*/_jsx(Text,{code:true,children:text||'Ch∆∞a c√≥'})},{title:'Serial Number',dataIndex:'serial_number',key:'serial_number',render:text=>/*#__PURE__*/_jsx(Text,{copyable:true,strong:true,style:{color:'#1890ff'},children:text})},{title:'S·∫£n ph·∫©m',dataIndex:'product_name',key:'product_name',render:text=>text||'S·∫£n ph·∫©m ch∆∞a x√°c ƒë·ªãnh'},{title:'Kh√°ch h√†ng',dataIndex:'customer_name',key:'customer_name',render:text=>text||'Kh√°ch h√†ng ch∆∞a x√°c ƒë·ªãnh'},{title:'Nh√† cung c·∫•p',dataIndex:'supplier_name',key:'supplier_name',render:(text,record)=>{if(!text)return/*#__PURE__*/_jsx(Text,{type:\"secondary\",children:\"Ch\\u01B0a c\\xF3 nh\\xE0 cung c\\u1EA5p\"});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{style:{fontWeight:'500',color:'#1890ff'},children:[\"\\uD83C\\uDFEA \",text]}),record.supplier_code&&/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'11px',color:'#666'},children:record.supplier_code})]});}},{title:'Tr·∫°ng th√°i',dataIndex:'status',key:'status',render:status=>{const statusInfo=claimStatuses.find(s=>s.value===status);return/*#__PURE__*/_jsx(Tag,{color:statusInfo===null||statusInfo===void 0?void 0:statusInfo.color,children:(statusInfo===null||statusInfo===void 0?void 0:statusInfo.label)||status});}},{title:'Ng√†y t·∫°o',dataIndex:'created_at',key:'created_at',render:date=>date?moment(date).format('DD/MM/YYYY HH:mm'):'N/A'},{title:'Thao t√°c',key:'actions',width:200,fixed:'right',render:(_,record)=>/*#__PURE__*/_jsxs(Space,{size:\"small\",children:[getSmartActions(record),/*#__PURE__*/_jsx(Tooltip,{title:\"Xem l\\u1ECBch s\\u1EED chi ti\\u1EBFt\",children:/*#__PURE__*/_jsx(Button,{size:\"small\",icon:/*#__PURE__*/_jsx(EyeOutlined,{}),onClick:()=>showWarrantyHistory(record),style:{color:'#1890ff'}})}),/*#__PURE__*/_jsx(Tooltip,{title:\"Ch\\u1EC9nh s\\u1EEDa\",children:/*#__PURE__*/_jsx(Button,{size:\"small\",icon:/*#__PURE__*/_jsx(EditOutlined,{}),onClick:()=>showModal(record),style:{color:'#52c41a'}})}),/*#__PURE__*/_jsx(Dropdown,{menu:{items:getMoreActions(record),onClick:_ref=>{let{key}=_ref;return handleMoreAction(key,record);}},trigger:['click'],children:/*#__PURE__*/_jsx(Button,{size:\"small\",icon:/*#__PURE__*/_jsx(MoreOutlined,{})})})]})}],dataSource:claims,rowKey:\"id\",loading:loading,pagination:{pageSize:10,showSizeChanger:true,showTotal:(total,range)=>\"\".concat(range[0],\"-\").concat(range[1],\" c\\u1EE7a \").concat(total,\" y\\xEAu c\\u1EA7u\")},locale:{emptyText:/*#__PURE__*/_jsx(Empty,{image:Empty.PRESENTED_IMAGE_SIMPLE,description:\"Ch\\u01B0a c\\xF3 y\\xEAu c\\u1EA7u b\\u1EA3o h\\xE0nh n\\xE0o\",extra:/*#__PURE__*/_jsx(Button,{type:\"primary\",icon:/*#__PURE__*/_jsx(PlusOutlined,{}),onClick:()=>showModal(),children:\"T\\u1EA1o y\\xEAu c\\u1EA7u \\u0111\\u1EA7u ti\\xEAn\"})})}})})]})}]})}),/*#__PURE__*/_jsx(Drawer,{title:/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(BarcodeOutlined,{style:{marginRight:8}}),\"Chi ti\\u1EBFt Serial Number\"]}),placement:\"right\",width:700,onClose:()=>setSerialDetailDrawer(false),open:serialDetailDrawer,children:selectedSerial&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Descriptions,{title:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'8px'},children:[/*#__PURE__*/_jsx(BarcodeOutlined,{style:{color:'#1890ff'}}),/*#__PURE__*/_jsx(\"span\",{children:\"Th\\xF4ng tin Serial\"})]}),bordered:true,size:\"small\",column:2,style:{marginBottom:'24px'},children:[/*#__PURE__*/_jsx(Descriptions.Item,{label:\"Serial Number\",span:1,children:/*#__PURE__*/_jsx(Text,{copyable:true,strong:true,style:{fontSize:'16px',color:'#1890ff'},children:selectedSerial.serial_number})}),/*#__PURE__*/_jsx(Descriptions.Item,{label:\"S\\u1EA3n ph\\u1EA9m\",span:1,children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:'bold',color:'#262626'},children:selectedSerial.product_name}),/*#__PURE__*/_jsxs(\"div\",{style:{color:'#666',fontSize:'12px'},children:[\"SKU: \",selectedSerial.product_sku||selectedSerial.sku||'N/A']})]})}),/*#__PURE__*/_jsx(Descriptions.Item,{label:\"Tr\\u1EA1ng th\\xE1i\",children:getStatusTag(selectedSerial.status)}),/*#__PURE__*/_jsx(Descriptions.Item,{label:\"T\\xECnh tr\\u1EA1ng\",children:getConditionTag(selectedSerial.condition_grade)}),/*#__PURE__*/_jsx(Descriptions.Item,{label:\"V\\u1ECB tr\\xED\",children:/*#__PURE__*/_jsx(Tag,{icon:/*#__PURE__*/_jsx(EnvironmentOutlined,{}),color:\"blue\",children:selectedSerial.location||'HCM'})})]}),/*#__PURE__*/_jsxs(Descriptions,{title:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'8px'},children:[/*#__PURE__*/_jsx(ShopOutlined,{style:{color:'#52c41a'}}),/*#__PURE__*/_jsx(\"span\",{children:\"Th\\xF4ng tin Nh\\xE0 cung c\\u1EA5p\"})]}),bordered:true,size:\"small\",column:2,style:{marginBottom:'24px'},children:[/*#__PURE__*/_jsx(Descriptions.Item,{label:\"T\\xEAn nh\\xE0 cung c\\u1EA5p\",span:1,children:/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:'bold',color:'#1890ff'},children:selectedSerial.supplier_name||'Nh√† cung c·∫•p ABC'})}),/*#__PURE__*/_jsx(Descriptions.Item,{label:\"M\\xE3 nh\\xE0 cung c\\u1EA5p\",children:/*#__PURE__*/_jsx(Text,{code:true,children:selectedSerial.supplier_code||'SUP001'})}),/*#__PURE__*/_jsx(Descriptions.Item,{label:\"Ng\\u01B0\\u1EDDi li\\xEAn h\\u1EC7\",children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'4px'},children:[/*#__PURE__*/_jsx(UserOutlined,{style:{color:'#666'}}),selectedSerial.supplier_contact||'Ch∆∞a c√≥ ng∆∞·ªùi li√™n h·ªá']})}),/*#__PURE__*/_jsx(Descriptions.Item,{label:\"Ng\\xE0y nh\\u1EADp\",children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'4px'},children:[/*#__PURE__*/_jsx(CalendarOutlined,{style:{color:'#52c41a'}}),/*#__PURE__*/_jsx(Text,{strong:true,children:selectedSerial.import_time_display||(selectedSerial.created_at?new Date(selectedSerial.created_at).toLocaleString('vi-VN',{timeZone:'Asia/Ho_Chi_Minh'}):'08:10 04/07/2025')})]})}),/*#__PURE__*/_jsx(Descriptions.Item,{label:\"Gi\\xE1 nh\\u1EADp\",span:2,children:/*#__PURE__*/_jsx(Text,{strong:true,style:{color:'#f56a00',fontSize:'14px'},children:selectedSerial.purchase_price?formatCurrency(selectedSerial.purchase_price):'120.000 ‚Ç´'})})]}),/*#__PURE__*/_jsxs(Descriptions,{title:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'8px'},children:[/*#__PURE__*/_jsx(SafetyOutlined,{style:{color:'#722ed1'}}),/*#__PURE__*/_jsx(\"span\",{children:\"Th\\xF4ng tin B\\u1EA3o h\\xE0nh\"})]}),bordered:true,size:\"small\",column:2,style:{marginBottom:'24px'},children:[/*#__PURE__*/_jsx(Descriptions.Item,{label:\"Th\\u1EDDi gian b\\u1EA3o h\\xE0nh\",span:1,children:/*#__PURE__*/_jsx(Text,{strong:true,style:{color:'#722ed1'},children:selectedSerial.warranty_months_total>0?\"\".concat(selectedSerial.warranty_months_total,\" th\\xE1ng\"):'12 th√°ng'})}),/*#__PURE__*/_jsx(Descriptions.Item,{label:\"Ng\\xE0y b\\u1EAFt \\u0111\\u1EA7u\",children:/*#__PURE__*/_jsx(Text,{children:selectedSerial.warranty_start_date?new Date(selectedSerial.warranty_start_date).toLocaleDateString('vi-VN'):'4/7/2025'})}),/*#__PURE__*/_jsx(Descriptions.Item,{label:\"Ng\\xE0y k\\u1EBFt th\\xFAc\",children:/*#__PURE__*/_jsx(Text,{strong:true,style:{color:'#1890ff'},children:selectedSerial.warranty_end_date?new Date(selectedSerial.warranty_end_date).toLocaleDateString('vi-VN'):'4/7/2026'})}),/*#__PURE__*/_jsx(Descriptions.Item,{label:\"Tr\\u1EA1ng th\\xE1i b\\u1EA3o h\\xE0nh\",span:2,children:/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',alignItems:'center',gap:'8px',flexWrap:'wrap'},children:selectedSerial.warranty_end_date?(()=>{const today=new Date();const endDate=new Date(selectedSerial.warranty_end_date);const daysLeft=Math.ceil((endDate-today)/(1000*60*60*24));if(daysLeft>30){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Tag,{icon:/*#__PURE__*/_jsx(CheckCircleOutlined,{}),color:\"green\",style:{marginBottom:'4px'},children:\"C\\xF2n hi\\u1EC7u l\\u1EF1c\"}),/*#__PURE__*/_jsxs(Text,{style:{color:'#52c41a',fontSize:'12px'},children:[\"(C\\xF2n \",daysLeft,\" ng\\xE0y)\"]})]});}else if(daysLeft>0){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Tag,{icon:/*#__PURE__*/_jsx(WarningOutlined,{}),color:\"orange\",style:{marginBottom:'4px'},children:\"S\\u1EAFp h\\u1EBFt h\\u1EA1n\"}),/*#__PURE__*/_jsxs(Text,{style:{color:'#faad14',fontSize:'12px'},children:[\"(C\\xF2n \",daysLeft,\" ng\\xE0y)\"]})]});}else{return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Tag,{icon:/*#__PURE__*/_jsx(ExclamationCircleOutlined,{}),color:\"red\",style:{marginBottom:'4px'},children:\"H\\u1EBFt h\\u1EA1n\"}),/*#__PURE__*/_jsxs(Text,{style:{color:'#ff4d4f',fontSize:'12px'},children:[\"(\\u0110\\xE3 h\\u1EBFt h\\u1EA1n \",Math.abs(daysLeft),\" ng\\xE0y)\"]})]});}})():/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Tag,{icon:/*#__PURE__*/_jsx(CheckCircleOutlined,{}),color:\"green\",style:{marginBottom:'4px'},children:\"C\\xF2n hi\\u1EC7u l\\u1EF1c\"}),/*#__PURE__*/_jsx(Text,{style:{color:'#52c41a',fontSize:'12px'},children:\"(C\\xF2n 364 ng\\xE0y)\"})]})})}),/*#__PURE__*/_jsx(Descriptions.Item,{label:\"Nh\\xE0 cung c\\u1EA5p b\\u1EA3o h\\xE0nh\",span:2,children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'4px'},children:[/*#__PURE__*/_jsx(ShopOutlined,{style:{color:'#1890ff'}}),/*#__PURE__*/_jsx(Text,{strong:true,children:selectedSerial.supplier_name||selectedSerial.warranty_provider||'Nh√† cung c·∫•p ABC'})]})})]}),(selectedSerial.sold_date||selectedSerial.sale_info||selectedSerial.status==='sold')&&/*#__PURE__*/_jsxs(Descriptions,{title:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'8px'},children:[/*#__PURE__*/_jsx(ShoppingCartOutlined,{style:{color:'#f56a00'}}),/*#__PURE__*/_jsx(\"span\",{children:\"Th\\xF4ng tin B\\xE1n h\\xE0ng\"})]}),bordered:true,size:\"small\",column:2,style:{marginBottom:'24px'},children:[/*#__PURE__*/_jsx(Descriptions.Item,{label:\"Ng\\xE0y b\\xE1n\",children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'4px'},children:[/*#__PURE__*/_jsx(CalendarOutlined,{style:{color:'#52c41a'}}),/*#__PURE__*/_jsx(Text,{strong:true,children:selectedSerial.sold_date?new Date(selectedSerial.sold_date).toLocaleDateString('vi-VN',{timeZone:'Asia/Ho_Chi_Minh'}):((_selectedSerial$sale_=selectedSerial.sale_info)===null||_selectedSerial$sale_===void 0?void 0:_selectedSerial$sale_.date)||'4/7/2025'})]})}),/*#__PURE__*/_jsx(Descriptions.Item,{label:\"Gi\\xE1 b\\xE1n\",children:/*#__PURE__*/_jsx(Text,{strong:true,style:{color:'#f56a00',fontSize:'14px'},children:selectedSerial.sold_price?formatCurrency(selectedSerial.sold_price):(_selectedSerial$sale_2=selectedSerial.sale_info)!==null&&_selectedSerial$sale_2!==void 0&&_selectedSerial$sale_2.price?formatCurrency(selectedSerial.sale_info.price):'120.000 ‚Ç´'})}),/*#__PURE__*/_jsx(Descriptions.Item,{label:\"Kh\\xE1ch h\\xE0ng\",span:2,children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{style:{fontWeight:'bold',color:'#1890ff'},children:[/*#__PURE__*/_jsx(UserOutlined,{style:{marginRight:'4px'}}),selectedSerial.customer_name||((_selectedSerial$sale_3=selectedSerial.sale_info)===null||_selectedSerial$sale_3===void 0?void 0:_selectedSerial$sale_3.customer)||'Nguyen Thanh Nam']}),/*#__PURE__*/_jsxs(\"div\",{style:{color:'#666',fontSize:'12px',marginTop:'2px'},children:[/*#__PURE__*/_jsx(PhoneOutlined,{style:{marginRight:'4px'}}),selectedSerial.customer_phone||((_selectedSerial$sale_4=selectedSerial.sale_info)===null||_selectedSerial$sale_4===void 0?void 0:_selectedSerial$sale_4.customer_phone)||'0836768597']})]})}),/*#__PURE__*/_jsx(Descriptions.Item,{label:\"M\\xE3 \\u0111\\u01A1n h\\xE0ng\",span:2,children:/*#__PURE__*/_jsx(Text,{code:true,style:{fontSize:'13px'},children:selectedSerial.order_number||((_selectedSerial$sale_5=selectedSerial.sale_info)===null||_selectedSerial$sale_5===void 0?void 0:_selectedSerial$sale_5.order_number)||'DH1751618108199'})})]}),/*#__PURE__*/_jsx(Card,{title:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'8px'},children:[/*#__PURE__*/_jsx(FileTextOutlined,{style:{color:'#666'}}),/*#__PURE__*/_jsx(\"span\",{children:\"Ghi ch\\xFA\"})]}),size:\"small\",style:{marginBottom:'16px'},children:/*#__PURE__*/_jsx(Text,{style:{color:'#666'},children:selectedSerial.notes||'Ch∆∞a c√≥ ghi ch√∫.'})}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'12px',justifyContent:'center',padding:'16px',background:'#fafafa',borderRadius:'8px',marginTop:'16px'},children:[/*#__PURE__*/_jsx(Button,{type:\"primary\",icon:/*#__PURE__*/_jsx(PlusOutlined,{}),onClick:()=>{showModal();setTimeout(()=>{form.setFieldsValue({serial_number:selectedSerial.serial_number});handleSerialAutoFill(selectedSerial.serial_number);},100);setSerialDetailDrawer(false);},style:{background:'linear-gradient(135deg, #52c41a, #1890ff)',border:'none'},children:\"T\\u1EA1o y\\xEAu c\\u1EA7u b\\u1EA3o h\\xE0nh\"}),/*#__PURE__*/_jsx(Button,{icon:/*#__PURE__*/_jsx(HistoryOutlined,{}),onClick:()=>{showWarrantyHistory(selectedSerial);setSerialDetailDrawer(false);},children:\"Xem l\\u1ECBch s\\u1EED\"}),/*#__PURE__*/_jsx(Button,{icon:/*#__PURE__*/_jsx(PrinterOutlined,{}),onClick:()=>{// Print functionality can be added here\nmessage.info('T√≠nh nƒÉng in ƒëang ƒë∆∞·ª£c ph√°t tri·ªÉn');},children:\"In th\\xF4ng tin\"})]})]})}),/*#__PURE__*/_jsx(Modal,{title:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'8px'},children:[/*#__PURE__*/_jsx(RobotOutlined,{style:{color:'#52c41a'}}),/*#__PURE__*/_jsx(\"span\",{children:selectedClaim?'Ch·ªânh s·ª≠a y√™u c·∫ßu b·∫£o h√†nh':'T·∫°o y√™u c·∫ßu b·∫£o h√†nh'}),/*#__PURE__*/_jsx(Tag,{color:\"green\",size:\"small\",children:\"AI Auto-fill\"})]}),open:isModalVisible,onCancel:()=>setIsModalVisible(false),footer:null,width:900,style:{top:50},children:/*#__PURE__*/_jsxs(Form,{form:form,layout:\"vertical\",onFinish:handleSubmit,children:[/*#__PURE__*/_jsx(Alert,{message:\"\\uD83E\\uDD16 AI Th\\xF4ng minh: Nh\\u1EADp Serial Number v\\xE0 b\\u1EA5m Enter \\u0111\\u1EC3 t\\u1EF1 \\u0111\\u1ED9ng \\u0111i\\u1EC1n to\\xE0n b\\u1ED9 th\\xF4ng tin!\",type:\"info\",showIcon:true,style:{marginBottom:16}}),/*#__PURE__*/_jsx(Form.Item,{label:/*#__PURE__*/_jsxs(\"span\",{style:{fontWeight:'bold',color:'#1890ff'},children:[/*#__PURE__*/_jsx(BarcodeOutlined,{style:{marginRight:'4px'}}),\"Serial Number\"]}),name:\"serial_number\",rules:[{required:true,message:'Vui l√≤ng nh·∫≠p Serial Number'}],children:/*#__PURE__*/_jsxs(Input.Group,{compact:true,children:[/*#__PURE__*/_jsx(AutoComplete,{options:serialSuggestions,onSearch:fetchSerialSuggestions,placeholder:\"Nh\\u1EADp Serial Number (VD: SN24, SN12341234...)\",size:\"large\",style:{width:'calc(100% - 120px)'},onPressEnter:e=>handleSerialAutoFill(e.target.value),onSelect:value=>handleSerialAutoFill(value),suffix:autoFillLoading?/*#__PURE__*/_jsx(Spin,{size:\"small\"}):/*#__PURE__*/_jsx(Tooltip,{title:\"B\\u1EA5m Enter \\u0111\\u1EC3 auto-fill\",children:/*#__PURE__*/_jsx(ThunderboltOutlined,{style:{color:'#52c41a'}})})}),/*#__PURE__*/_jsx(Button,{type:\"primary\",size:\"large\",icon:/*#__PURE__*/_jsx(BarcodeOutlined,{}),onClick:()=>openQRScanner('warranty'),style:{width:'120px',background:'#52c41a',borderColor:'#52c41a'},children:\"\\uD83D\\uDCF1 Qu\\xE9t\"})]})}),/*#__PURE__*/_jsxs(Row,{gutter:16,children:[/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(Form.Item,{label:\"S\\u1EA3n ph\\u1EA9m\",name:\"product_id\",children:/*#__PURE__*/_jsx(Select,{placeholder:\"Ch\\u1ECDn s\\u1EA3n ph\\u1EA9m\",allowClear:true,showSearch:true,filterOption:(input,option)=>option.children.toLowerCase().indexOf(input.toLowerCase())>=0,children:products.map(product=>/*#__PURE__*/_jsx(Option,{value:product.id,children:product.name},product.id))})})}),/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(Form.Item,{label:\"Kh\\xE1ch h\\xE0ng\",name:\"customer_id\",children:/*#__PURE__*/_jsx(Select,{placeholder:\"Ch\\u1ECDn kh\\xE1ch h\\xE0ng\",allowClear:true,showSearch:true,filterOption:(input,option)=>option.children.toLowerCase().indexOf(input.toLowerCase())>=0,children:customers.map(customer=>/*#__PURE__*/_jsx(Option,{value:customer.id,children:customer.name},customer.id))})})})]}),/*#__PURE__*/_jsxs(Row,{gutter:16,children:[/*#__PURE__*/_jsx(Col,{span:8,children:/*#__PURE__*/_jsx(Form.Item,{label:\"Nh\\xE0 cung c\\u1EA5p\",name:\"supplier_id\",children:/*#__PURE__*/_jsx(Select,{placeholder:\"Ch\\u1ECDn nh\\xE0 cung c\\u1EA5p\",allowClear:true,showSearch:true,filterOption:(input,option)=>option.children.toLowerCase().indexOf(input.toLowerCase())>=0,children:suppliers.map(supplier=>/*#__PURE__*/_jsxs(Option,{value:supplier.id,children:[\"\\uD83C\\uDFEA \",supplier.name]},supplier.id))})})}),/*#__PURE__*/_jsx(Col,{span:8,children:/*#__PURE__*/_jsx(Form.Item,{label:\"K\\u1EF9 thu\\u1EADt vi\\xEAn\",name:\"assigned_technician_id\",children:/*#__PURE__*/_jsx(Select,{placeholder:\"Ch\\u1ECDn k\\u1EF9 thu\\u1EADt vi\\xEAn\",allowClear:true,children:users.map(user=>/*#__PURE__*/_jsx(Option,{value:user.id,children:user.full_name},user.id))})})}),/*#__PURE__*/_jsx(Col,{span:8,children:/*#__PURE__*/_jsx(Form.Item,{label:\"\\u01AFu ti\\xEAn\",name:\"priority\",children:/*#__PURE__*/_jsx(Select,{placeholder:\"Ch\\u1ECDn \\u01B0u ti\\xEAn\",defaultValue:\"normal\",children:priorities.map(priority=>/*#__PURE__*/_jsx(Option,{value:priority.value,children:/*#__PURE__*/_jsx(Tag,{color:priority.color,children:priority.label})},priority.value))})})})]}),/*#__PURE__*/_jsx(Form.Item,{label:\"M\\xF4 t\\u1EA3 v\\u1EA5n \\u0111\\u1EC1\",name:\"issue_description\",rules:[{required:true}],children:/*#__PURE__*/_jsx(Input.TextArea,{rows:4,placeholder:\"M\\xF4 t\\u1EA3 chi ti\\u1EBFt v\\u1EA5n \\u0111\\u1EC1 c\\u1EA7n b\\u1EA3o h\\xE0nh...\",showCount:true,maxLength:500})}),/*#__PURE__*/_jsxs(Row,{gutter:16,children:[/*#__PURE__*/_jsx(Col,{span:8,children:/*#__PURE__*/_jsx(Form.Item,{label:\"Lo\\u1EA1i y\\xEAu c\\u1EA7u\",name:\"claim_type\",children:/*#__PURE__*/_jsx(Select,{placeholder:\"Ch\\u1ECDn lo\\u1EA1i\",defaultValue:\"repair\",children:claimTypes.map(type=>/*#__PURE__*/_jsx(Option,{value:type.value,children:type.label},type.value))})})}),/*#__PURE__*/_jsx(Col,{span:8,children:/*#__PURE__*/_jsx(Form.Item,{label:\"Tr\\u1EA1ng th\\xE1i\",name:\"status\",children:/*#__PURE__*/_jsx(Select,{placeholder:\"Ch\\u1ECDn tr\\u1EA1ng th\\xE1i\",defaultValue:\"pending\",children:claimStatuses.map(status=>/*#__PURE__*/_jsx(Option,{value:status.value,children:/*#__PURE__*/_jsx(Tag,{color:status.color,children:status.label})},status.value))})})}),/*#__PURE__*/_jsx(Col,{span:8,children:/*#__PURE__*/_jsx(Form.Item,{label:\"Ng\\xE0y d\\u1EF1 ki\\u1EBFn ho\\xE0n th\\xE0nh\",name:\"expected_completion_date\",children:/*#__PURE__*/_jsx(DatePicker,{style:{width:'100%'},placeholder:\"Ch\\u1ECDn ng\\xE0y\",disabledDate:current=>current&&current<moment().endOf('day')})})})]}),/*#__PURE__*/_jsx(Divider,{orientation:\"left\",children:/*#__PURE__*/_jsxs(\"span\",{style:{color:'#52c41a'},children:[/*#__PURE__*/_jsx(SafetyOutlined,{style:{marginRight:'4px'}}),\"Th\\xF4ng tin B\\u1EA3o h\\xE0nh\"]})}),/*#__PURE__*/_jsxs(Row,{gutter:16,children:[/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(Form.Item,{label:\"Ng\\xE0y b\\u1EAFt \\u0111\\u1EA7u b\\u1EA3o h\\xE0nh\",name:\"warranty_start_date\",children:/*#__PURE__*/_jsx(DatePicker,{style:{width:'100%'},placeholder:\"Ch\\u1ECDn ng\\xE0y b\\u1EAFt \\u0111\\u1EA7u\"})})}),/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(Form.Item,{label:\"Ng\\xE0y k\\u1EBFt th\\xFAc b\\u1EA3o h\\xE0nh\",name:\"warranty_end_date\",children:/*#__PURE__*/_jsx(DatePicker,{style:{width:'100%'},placeholder:\"Ch\\u1ECDn ng\\xE0y k\\u1EBFt th\\xFAc\"})})})]}),/*#__PURE__*/_jsx(Form.Item,{style:{marginTop:'24px',textAlign:'right'},children:/*#__PURE__*/_jsxs(Space,{children:[/*#__PURE__*/_jsx(Button,{onClick:()=>setIsModalVisible(false),size:\"large\",children:\"H\\u1EE7y\"}),/*#__PURE__*/_jsx(Button,{type:\"primary\",htmlType:\"submit\",size:\"large\",icon:selectedClaim?/*#__PURE__*/_jsx(EditOutlined,{}):/*#__PURE__*/_jsx(PlusOutlined,{}),style:{background:'linear-gradient(135deg, #52c41a, #1890ff)',border:'none'},children:selectedClaim?'C·∫≠p nh·∫≠t':'T·∫°o m·ªõi'})]})})]})}),/*#__PURE__*/_jsx(Modal,{title:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'8px'},children:[/*#__PURE__*/_jsx(HistoryOutlined,{style:{color:'#1890ff'}}),/*#__PURE__*/_jsx(\"span\",{children:\"L\\u1ECBch s\\u1EED B\\u1EA3o h\\xE0nh\"}),selectedWarrantyRecord&&/*#__PURE__*/_jsx(Tag,{color:\"blue\",children:selectedWarrantyRecord.serial_number})]}),open:historyModalVisible,onCancel:()=>setHistoryModalVisible(false),footer:null,width:900,style:{top:50},children:selectedWarrantyRecord&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Alert,{message:\"\\uD83D\\uDCCB Th\\xF4ng tin Y\\xEAu c\\u1EA7u B\\u1EA3o h\\xE0nh\",description:/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'8px'},children:[/*#__PURE__*/_jsxs(Row,{gutter:16,children:[/*#__PURE__*/_jsxs(Col,{span:8,children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Serial Number:\"}),\" \",selectedWarrantyRecord.serial_number]}),/*#__PURE__*/_jsxs(Col,{span:8,children:[/*#__PURE__*/_jsx(\"strong\",{children:\"S\\u1EA3n ph\\u1EA9m:\"}),\" \",selectedWarrantyRecord.product_name||'N/A']}),/*#__PURE__*/_jsxs(Col,{span:8,children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Kh\\xE1ch h\\xE0ng:\"}),\" \",selectedWarrantyRecord.customer_name||'N/A']})]}),/*#__PURE__*/_jsxs(Row,{gutter:16,style:{marginTop:'8px'},children:[/*#__PURE__*/_jsxs(Col,{span:8,children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Tr\\u1EA1ng th\\xE1i hi\\u1EC7n t\\u1EA1i:\"}),\" \",' ',/*#__PURE__*/_jsx(Tag,{color:(_claimStatuses$find2=claimStatuses.find(s=>s.value===selectedWarrantyRecord.status))===null||_claimStatuses$find2===void 0?void 0:_claimStatuses$find2.color,children:(_claimStatuses$find3=claimStatuses.find(s=>s.value===selectedWarrantyRecord.status))===null||_claimStatuses$find3===void 0?void 0:_claimStatuses$find3.label})]}),/*#__PURE__*/_jsxs(Col,{span:8,children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Nh\\xE0 cung c\\u1EA5p:\"}),\" \",selectedWarrantyRecord.supplier_name||'N/A']}),/*#__PURE__*/_jsxs(Col,{span:8,children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Ng\\xE0y t\\u1EA1o:\"}),\" \",formatDate(selectedWarrantyRecord.created_at)]})]})]}),type:\"info\",showIcon:true,style:{marginBottom:'24px'}}),/*#__PURE__*/_jsxs(Row,{gutter:16,style:{marginBottom:'24px'},children:[/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(Card,{size:\"small\",title:\"\\uD83D\\uDCE6 Th\\xF4ng tin S\\u1EA3n ph\\u1EA9m\",children:/*#__PURE__*/_jsxs(Descriptions,{size:\"small\",column:1,children:[/*#__PURE__*/_jsx(Descriptions.Item,{label:\"T\\xEAn s\\u1EA3n ph\\u1EA9m\",children:selectedWarrantyRecord.product_name||'N/A'}),/*#__PURE__*/_jsx(Descriptions.Item,{label:\"Serial Number\",children:/*#__PURE__*/_jsx(Text,{copyable:true,strong:true,style:{color:'#1890ff'},children:selectedWarrantyRecord.serial_number})}),/*#__PURE__*/_jsxs(Descriptions.Item,{label:\"Nh\\xE0 cung c\\u1EA5p\",children:[\"\\uD83C\\uDFEA \",selectedWarrantyRecord.supplier_name||'N/A']}),selectedWarrantyRecord.sold_date&&/*#__PURE__*/_jsx(Descriptions.Item,{label:\"Ng\\xE0y b\\xE1n\",children:/*#__PURE__*/_jsxs(\"div\",{style:{color:'#52c41a'},children:[\"\\uD83D\\uDCC5 \",formatDate(selectedWarrantyRecord.sold_date)]})}),/*#__PURE__*/_jsx(Descriptions.Item,{label:\"B\\u1EA3o h\\xE0nh\",children:selectedWarrantyRecord.warranty_end_date?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{color:'#52c41a',fontWeight:'bold',display:'flex',alignItems:'center',gap:'4px'},children:\"\\u2705 C\\xF2n h\\u1EA1n b\\u1EA3o h\\xE0nh\"}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'12px',color:'#666',marginTop:'4px'},children:[\"\\u0110\\u1EBFn \",formatDate(selectedWarrantyRecord.warranty_end_date)]}),selectedWarrantyRecord.warranty_days_left>0&&/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'11px',color:'#1890ff',marginTop:'2px'},children:[\"(C\\xF2n \",selectedWarrantyRecord.warranty_days_left,\" ng\\xE0y)\"]})]}):/*#__PURE__*/_jsx(\"div\",{style:{color:'#ff4d4f'},children:\"\\u274C Ch\\u01B0a c\\xF3 b\\u1EA3o h\\xE0nh\"})})]})})}),/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(Card,{size:\"small\",title:\"\\uD83D\\uDC64 Th\\xF4ng tin Kh\\xE1ch h\\xE0ng\",children:/*#__PURE__*/_jsxs(Descriptions,{size:\"small\",column:1,children:[/*#__PURE__*/_jsx(Descriptions.Item,{label:\"T\\xEAn kh\\xE1ch h\\xE0ng\",children:selectedWarrantyRecord.customer_name||'N/A'}),/*#__PURE__*/_jsx(Descriptions.Item,{label:\"\\u0110i\\u1EC7n tho\\u1EA1i\",children:selectedWarrantyRecord.customer_phone?/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(PhoneOutlined,{style:{marginRight:'4px',color:'#52c41a'}}),selectedWarrantyRecord.customer_phone]}):'N/A'}),/*#__PURE__*/_jsx(Descriptions.Item,{label:\"V\\u1EA5n \\u0111\\u1EC1\",children:selectedWarrantyRecord.issue_description||'N/A'}),/*#__PURE__*/_jsx(Descriptions.Item,{label:\"Lo\\u1EA1i y\\xEAu c\\u1EA7u\",children:/*#__PURE__*/_jsx(Tag,{color:\"blue\",children:((_claimTypes$find=claimTypes.find(t=>t.value===selectedWarrantyRecord.claim_type))===null||_claimTypes$find===void 0?void 0:_claimTypes$find.label)||selectedWarrantyRecord.claim_type})})]})})})]}),/*#__PURE__*/_jsx(Card,{title:\"\\uD83D\\uDCC5 L\\u1ECBch s\\u1EED X\\u1EED l\\xFD\",style:{marginBottom:'16px'},children:/*#__PURE__*/_jsx(Spin,{spinning:historyLoading,children:warrantyHistory.length>0?/*#__PURE__*/_jsx(Timeline,{items:warrantyHistory.map((item,index)=>({dot:getTimelineDot(item.status),children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsx(\"strong\",{style:{fontSize:'14px',color:'#1890ff'},children:item.action}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'12px',color:'#666'},children:item.timestamp})]}),/*#__PURE__*/_jsxs(\"div\",{style:{margin:'4px 0',color:'#666'},children:[\"\\uD83D\\uDC64 Ng\\u01B0\\u1EDDi th\\u1EF1c hi\\u1EC7n: \",/*#__PURE__*/_jsx(\"strong\",{children:item.user})]}),/*#__PURE__*/_jsx(\"div\",{style:{margin:'4px 0'},children:item.details}),item.notes&&/*#__PURE__*/_jsxs(\"div\",{style:{margin:'8px 0',padding:'8px 12px',background:'#f6f8fa',borderRadius:'6px',border:'1px solid #e1e4e8',fontSize:'13px'},children:[\"\\uD83D\\uDCAC \",/*#__PURE__*/_jsx(\"strong\",{children:\"Ghi ch\\xFA:\"}),\" \",item.notes]})]},item.id)}))}):/*#__PURE__*/_jsx(Empty,{image:Empty.PRESENTED_IMAGE_SIMPLE,description:\"Ch\\u01B0a c\\xF3 l\\u1ECBch s\\u1EED x\\u1EED l\\xFD\"})})}),/*#__PURE__*/_jsx(\"div\",{style:{textAlign:'center',marginTop:'24px'},children:/*#__PURE__*/_jsxs(Space,{size:\"large\",children:[/*#__PURE__*/_jsx(Button,{icon:/*#__PURE__*/_jsx(EditOutlined,{}),onClick:()=>{setHistoryModalVisible(false);showModal(selectedWarrantyRecord);},style:{minWidth:'120px'},children:\"Ch\\u1EC9nh s\\u1EEDa\"}),/*#__PURE__*/_jsx(Button,{icon:/*#__PURE__*/_jsx(PrinterOutlined,{}),onClick:()=>window.print(),style:{minWidth:'120px'},children:\"In b\\xE1o c\\xE1o\"}),/*#__PURE__*/_jsx(Button,{icon:/*#__PURE__*/_jsx(DownloadOutlined,{}),onClick:()=>message.info('T√≠nh nƒÉng xu·∫•t file s·∫Ω ƒë∆∞·ª£c ph√°t tri·ªÉn'),style:{minWidth:'120px'},children:\"Xu\\u1EA5t file\"})]})})]})}),/*#__PURE__*/_jsx(QRScanner,{visible:qrScannerVisible,onClose:()=>setQrScannerVisible(false),onScan:handleQRScan,title:scannerMode==='warranty'?'Qu√©t Serial ƒë·ªÉ T·∫°o Y√™u c·∫ßu':'Qu√©t Serial ƒë·ªÉ T√¨m ki·∫øm',placeholder:scannerMode==='warranty'?'ƒê∆∞a camera v√†o m√£ QR/Barcode ƒë·ªÉ t·ª± ƒë·ªông ƒëi·ªÅn th√¥ng tin.':'ƒê∆∞a camera v√†o m√£ QR/Barcode ƒë·ªÉ t√¨m ki·∫øm th√¥ng tin s·∫£n ph·∫©m.'})]})]});};export default WarrantyPage;","map":{"version":3,"names":["React","useState","useEffect","useRef","Card","Table","Button","Input","Space","Modal","Form","Select","message","Row","Col","Statistic","Tag","Tooltip","DatePicker","Typography","Alert","Tabs","Badge","Descriptions","Divider","Rate","InputNumber","Drawer","Timeline","Empty","Spin","AutoComplete","Dropdown","PlusOutlined","SearchOutlined","EditOutlined","EyeOutlined","ToolOutlined","ExclamationCircleOutlined","CheckCircleOutlined","ClockCircleOutlined","DeleteOutlined","FileTextOutlined","HistoryOutlined","InfoCircleOutlined","BarcodeOutlined","ShopOutlined","CalendarOutlined","WarningOutlined","SafetyOutlined","EnvironmentOutlined","ThunderboltOutlined","RobotOutlined","ScanOutlined","MoreOutlined","PlayCircleOutlined","PauseCircleOutlined","StopOutlined","FastForwardOutlined","SendOutlined","ReloadOutlined","UserOutlined","PhoneOutlined","MailOutlined","FileSearchOutlined","PrinterOutlined","DownloadOutlined","ShoppingCartOutlined","CameraOutlined","warrantyAPI","customersAPI","productsAPI","usersAPI","serialsAPI","formatCurrency","formatDate","LoadingSpinner","PageLoading","CardLoading","QRScanner","useAPI","moment","jsxs","_jsxs","jsx","_jsx","Fragment","_Fragment","Search","Option","TabPane","Text","Title","WarrantyPage","_selectedSerial$sale_","_selectedSerial$sale_2","_selectedSerial$sale_3","_selectedSerial$sale_4","_selectedSerial$sale_5","_claimStatuses$find2","_claimStatuses$find3","_claimTypes$find","claims","setClaims","customers","setCustomers","products","setProducts","users","setUsers","suppliers","setSuppliers","loading","setLoading","isModalVisible","setIsModalVisible","isDetailModalVisible","setIsDetailModalVisible","selectedClaim","setSelectedClaim","searchText","setSearchText","filterStatus","setFilterStatus","filterPriority","setFilterPriority","stats","setStats","form","useForm","serialSearchResults","setSerialSearchResults","serialSearchLoading","setSerialSearchLoading","serialSearchText","setSerialSearchText","selectedSerial","setSelectedSerial","serialDetailDrawer","setSerialDetailDrawer","activeTab","setActiveTab","quickSearchValue","setQuickSearchValue","quickSearchLoading","setQuickSearchLoading","autoFillLoading","setAutoFillLoading","serialSuggestions","setSerialSuggestions","historyModalVisible","setHistoryModalVisible","selectedWarrantyRecord","setSelectedWarrantyRecord","warrantyHistory","setWarrantyHistory","historyLoading","setHistoryLoading","qrScannerVisible","setQrScannerVisible","scannerMode","setScannerMode","claimStatuses","value","label","color","claimTypes","priorities","loadData","loadStats","fetchClaims","customersRes","productsRes","usersRes","Promise","all","getAll","catch","err","console","warn","data","success","suppliersResponse","fetch","concat","process","env","REACT_APP_API_URL","method","headers","ok","suppliersData","json","status","suppliersError","error","statsAPI","showErrorMessage","onError","total_claims","pending_claims","in_progress_claims","completed_claims","avg_resolution_days","executeAPI","getStats","log","params","serial_number","undefined","priority","response","getClaims","handleSerialSearch","query","trim","length","search","info","handleQuickSearch","warning","handleSerialAutoFill","serialNumber","getWarrantyInfo","serialInfo","selectedProductId","product_id","product_name","matchingProduct","find","p","name","toLowerCase","includes","id","selectedCustomerId","customer_id","customer_name","matchingCustomer","c","phone","customer_phone","selectedSupplierId","supplier_id","supplier_name","matchingSupplier","s","selectedTechnicianId","selectedPriority","warranty_status","setFieldsValue","technician_id","warranty_start_date","warranty_end_date","issue_description","claim_type","productName","supplierName","content","children","style","fontWeight","fontSize","marginTop","duration","fetchSerialSuggestions","limit","suggestions","map","item","display","justifyContent","alignItems","openQRScanner","mode","arguments","handleQRScan","scannedText","showModal","setTimeout","claim","_objectSpread","expected_completion_date","actual_completion_date","sent_to_supplier_date","received_from_supplier_date","resetFields","handleSubmit","values","_values$warranty_star","_values$warranty_end_","_values$expected_comp","_values$actual_comple","_values$sent_to_suppl","_values$received_from","format","updateClaim","createClaim","showSerialDetail","serial","getStatusTag","statusMap","text","statusInfo","getConditionTag","condition","conditionMap","conditionInfo","getWarrantyStatusTag","warranty","icon","getSmartActions","record","currentStatus","actions","statusWorkflow","next","title","nextAction","push","size","borderColor","onClick","handleStatusChange","getMoreActions","key","disabled","type","danger","newStatus","_claimStatuses$find","handleMoreAction","actionKey","window","open","print","confirm","okText","cancelText","okType","onOk","showWarrantyHistory","mockHistory","action","user","timestamp","details","notes","getTimelineDot","dotMap","serialColumns","dataIndex","width","fixed","render","copyable","strong","condition_grade","_","sale_info","_record$sale_info","_record$sale_info2","_record$sale_info3","_record$sale_info4","customer","order_number","sold_date","Date","toLocaleDateString","date","textAlign","supplier_code","supplier_contact","supplier_phone","import_time_display","location","hasWarranty","today","startDate","endDate","daysLeft","Math","ceil","totalMonths","warrantyTag","daysDisplay","abs","timeZone","warranty_provider","minHeight","background","boxShadow","flexDirection","borderRight","padding","marginBottom","marginRight","opacity","options","onChange","onSearch","onSelect","placeholder","allowClear","prefix","suffix","border","onPressEnter","borderRadius","height","flex","overflow","index","cursor","transition","onMouseEnter","e","target","closest","transform","onMouseLeave","gap","status_display","condition_display","warranty_display","period","borderBottom","level","margin","WebkitBackgroundClip","WebkitTextFillColor","gutter","span","valueStyle","activeKey","items","count","marginLeft","enterButton","description","showIcon","columns","dataSource","rowKey","pagination","total","pageSize","showSizeChanger","showTotal","range","scroll","x","image","PRESENTED_IMAGE_SIMPLE","extra","minWidth","borderLeft","code","menu","_ref","trigger","locale","emptyText","placement","onClose","bordered","column","Item","product_sku","sku","created_at","toLocaleString","purchase_price","warranty_months_total","flexWrap","sold_price","price","onCancel","footer","top","layout","onFinish","rules","required","Group","compact","showSearch","filterOption","input","option","indexOf","product","supplier","full_name","defaultValue","TextArea","rows","showCount","maxLength","disabledDate","current","endOf","orientation","htmlType","warranty_days_left","t","spinning","dot","visible","onScan"],"sources":["C:/Users/ADMIN/Desktop/kho/kho/client/src/pages/WarrantyPage.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport {\r\n  Card, Table, Button, Input, Space, Modal, Form, Select, message,\r\n  Row, Col, Statistic, Tag, Tooltip, DatePicker, Typography, Alert,\r\n  Tabs, Badge, Descriptions, Divider, Rate, InputNumber, Drawer,\r\n  Timeline, Empty, Spin, AutoComplete, Dropdown\r\n} from 'antd';\r\nimport {\r\n  PlusOutlined, SearchOutlined, EditOutlined, EyeOutlined,\r\n  ToolOutlined, ExclamationCircleOutlined, CheckCircleOutlined,\r\n  ClockCircleOutlined, DeleteOutlined, FileTextOutlined,\r\n  HistoryOutlined, InfoCircleOutlined, BarcodeOutlined,\r\n  ShopOutlined, CalendarOutlined, WarningOutlined,\r\n  SafetyOutlined, EnvironmentOutlined, ThunderboltOutlined,\r\n  RobotOutlined, ScanOutlined, MoreOutlined,\r\n  PlayCircleOutlined, PauseCircleOutlined, StopOutlined,\r\n  FastForwardOutlined, SendOutlined, ReloadOutlined,\r\n  UserOutlined, PhoneOutlined, MailOutlined, \r\n  FileSearchOutlined, PrinterOutlined, DownloadOutlined,\r\n  ShoppingCartOutlined, CameraOutlined\r\n} from '@ant-design/icons';\r\nimport { warrantyAPI, customersAPI, productsAPI, usersAPI, serialsAPI, formatCurrency, formatDate } from '../services/api';\r\nimport LoadingSpinner, { PageLoading, CardLoading } from '../components/LoadingSpinner';\r\nimport QRScanner from '../components/QRScanner';\r\nimport useAPI from '../hooks/useAPI';\r\nimport moment from 'moment';\r\n\r\nconst { Search } = Input;\r\nconst { Option } = Select;\r\nconst { TabPane } = Tabs;\r\nconst { Text, Title } = Typography;\r\n\r\nconst WarrantyPage = () => {\r\n  const [claims, setClaims] = useState([]);\r\n  const [customers, setCustomers] = useState([]);\r\n  const [products, setProducts] = useState([]);\r\n  const [users, setUsers] = useState([]);\r\n  const [suppliers, setSuppliers] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [isModalVisible, setIsModalVisible] = useState(false);\r\n  const [isDetailModalVisible, setIsDetailModalVisible] = useState(false);\r\n  const [selectedClaim, setSelectedClaim] = useState(null);\r\n  const [searchText, setSearchText] = useState('');\r\n  const [filterStatus, setFilterStatus] = useState('all');\r\n  const [filterPriority, setFilterPriority] = useState('all');\r\n  const [stats, setStats] = useState({});\r\n  const [form] = Form.useForm();\r\n\r\n  // üîç NEW: Serial Search State\r\n  const [serialSearchResults, setSerialSearchResults] = useState([]);\r\n  const [serialSearchLoading, setSerialSearchLoading] = useState(false);\r\n  const [serialSearchText, setSerialSearchText] = useState('');\r\n  const [selectedSerial, setSelectedSerial] = useState(null);\r\n  const [serialDetailDrawer, setSerialDetailDrawer] = useState(false);\r\n  const [activeTab, setActiveTab] = useState('serials');\r\n\r\n  // üéØ NEW: Quick Search & Auto-fill State\r\n  const [quickSearchValue, setQuickSearchValue] = useState('');\r\n  const [quickSearchLoading, setQuickSearchLoading] = useState(false);\r\n  const [autoFillLoading, setAutoFillLoading] = useState(false);\r\n  const [serialSuggestions, setSerialSuggestions] = useState([]);\r\n\r\n  // üíº NEW: Claims Management State - moved from duplicate\r\n  \r\n  // üé¨ NEW: Warranty History & Actions State\r\n  const [historyModalVisible, setHistoryModalVisible] = useState(false);\r\n  const [selectedWarrantyRecord, setSelectedWarrantyRecord] = useState(null);\r\n  const [warrantyHistory, setWarrantyHistory] = useState([]);\r\n  const [historyLoading, setHistoryLoading] = useState(false);\r\n\r\n  // üì± NEW: QR Scanner State\r\n  const [qrScannerVisible, setQrScannerVisible] = useState(false);\r\n  const [scannerMode, setScannerMode] = useState('warranty'); // 'warranty' or 'search'\r\n\r\n  const claimStatuses = [\r\n    { value: 'pending', label: 'Ch·ªù duy·ªát', color: 'orange' },\r\n    { value: 'approved', label: 'ƒê√£ duy·ªát', color: 'blue' },\r\n    { value: 'rejected', label: 'T·ª´ ch·ªëi', color: 'red' },\r\n    { value: 'in_progress', label: 'ƒêang x·ª≠ l√Ω', color: 'purple' },\r\n    { value: 'completed', label: 'Ho√†n th√†nh', color: 'green' },\r\n    { value: 'cancelled', label: 'ƒê√£ h·ªßy', color: 'gray' },\r\n  ];\r\n\r\n  const claimTypes = [\r\n    { value: 'repair', label: 'S·ª≠a ch·ªØa' },\r\n    { value: 'replace', label: 'Thay th·∫ø' },\r\n    { value: 'refund', label: 'Ho√†n ti·ªÅn' },\r\n  ];\r\n\r\n  const priorities = [\r\n    { value: 'low', label: 'Th·∫•p', color: 'green' },\r\n    { value: 'normal', label: 'B√¨nh th∆∞·ªùng', color: 'blue' },\r\n    { value: 'high', label: 'Cao', color: 'orange' },\r\n    { value: 'urgent', label: 'Kh·∫©n c·∫•p', color: 'red' },\r\n  ];\r\n\r\n  useEffect(() => {\r\n    loadData();\r\n    loadStats();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (activeTab === 'claims') {\r\n      fetchClaims();\r\n    }\r\n  }, [searchText, filterStatus, filterPriority, activeTab]);\r\n\r\n  const loadData = async () => {\r\n    try {\r\n      // üîß FIX: Load data with proper error handling\r\n      const [customersRes, productsRes, usersRes] = await Promise.all([\r\n        customersAPI.getAll().catch(err => {\r\n          console.warn('Customers API failed:', err);\r\n          return { data: { success: false, data: [] } };\r\n        }),\r\n        productsAPI.getAll().catch(err => {\r\n          console.warn('Products API failed:', err);\r\n          return { data: { success: false, data: [] } };\r\n        }),\r\n        usersAPI.getAll().catch(err => {\r\n          console.warn('Users API failed:', err);\r\n          return { data: { success: false, data: [] } };\r\n        })\r\n      ]);\r\n      \r\n      // Set data with fallbacks\r\n      if (customersRes.data.success) {\r\n        setCustomers(customersRes.data.data);\r\n      } else {\r\n        setCustomers([]);\r\n      }\r\n      \r\n      if (productsRes.data.success) {\r\n        setProducts(productsRes.data.data);\r\n      } else {\r\n        setProducts([]);\r\n      }\r\n      \r\n      if (usersRes.data.success) {\r\n        setUsers(usersRes.data.data);\r\n      } else {\r\n        setUsers([]);\r\n      }\r\n\r\n      // Load suppliers separately with fallback\r\n      try {\r\n        const suppliersResponse = await fetch(`${process.env.REACT_APP_API_URL || 'https://pos-backend.bangachieu2.workers.dev'}/api/suppliers`, {\r\n          method: 'GET',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n            'Accept': 'application/json',\r\n          }\r\n        });\r\n        \r\n        if (suppliersResponse.ok) {\r\n          const suppliersData = await suppliersResponse.json();\r\n          if (suppliersData.success) {\r\n            setSuppliers(suppliersData.data);\r\n          } else {\r\n            setSuppliers([]);\r\n          }\r\n        } else {\r\n          console.warn('Suppliers API returned:', suppliersResponse.status);\r\n          setSuppliers([]);\r\n        }\r\n      } catch (suppliersError) {\r\n        console.warn('Suppliers API failed:', suppliersError);\r\n        setSuppliers([]);\r\n      }\r\n      \r\n    } catch (error) {\r\n      console.error('Error loading data:', error);\r\n      // üõ°Ô∏è Fallback: Set empty arrays to prevent N/A issues\r\n      setCustomers([]);\r\n      setProducts([]);\r\n      setUsers([]);\r\n      setSuppliers([]);\r\n    }\r\n  };\r\n\r\n  const statsAPI = useAPI({\r\n    showErrorMessage: false,\r\n    onError: (error) => {\r\n      console.warn('Warranty stats failed, using fallback data');\r\n      setStats({\r\n        total_claims: 0,\r\n        pending_claims: 0,\r\n        in_progress_claims: 0,\r\n        completed_claims: 0,\r\n        avg_resolution_days: 0\r\n      });\r\n    }\r\n  });\r\n\r\n  const loadStats = async () => {\r\n    try {\r\n      await statsAPI.executeAPI(() => warrantyAPI.getStats());\r\n      if (statsAPI.data && statsAPI.data.success) {\r\n        setStats(statsAPI.data.data);\r\n      }\r\n    } catch (error) {\r\n      console.log('Stats API call completed with fallback data');\r\n    }\r\n  };\r\n\r\n  const fetchClaims = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const params = {\r\n        serial_number: searchText,\r\n        status: filterStatus !== 'all' ? filterStatus : undefined,\r\n        priority: filterPriority !== 'all' ? filterPriority : undefined,\r\n      };\r\n      \r\n      const response = await warrantyAPI.getClaims(params);\r\n      if (response.data.success) {\r\n        setClaims(response.data.data);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching claims:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // üîç NEW: Serial Search Functions\r\n  const handleSerialSearch = async (query) => {\r\n    if (!query || query.trim().length < 2) {\r\n      setSerialSearchResults([]);\r\n      return;\r\n    }\r\n    \r\n    try {\r\n      setSerialSearchLoading(true);\r\n      const response = await serialsAPI.search(query.trim());\r\n      \r\n      if (response.data.success) {\r\n        setSerialSearchResults(response.data.data);\r\n        message.success(`T√¨m th·∫•y ${response.data.data.length} k·∫øt qu·∫£`);\r\n      } else {\r\n        setSerialSearchResults([]);\r\n        message.info('Kh√¥ng t√¨m th·∫•y serial number n√†o');\r\n      }\r\n    } catch (error) {\r\n      message.error('L·ªói khi t√¨m ki·∫øm serial number');\r\n      setSerialSearchResults([]);\r\n    } finally {\r\n      setSerialSearchLoading(false);\r\n    }\r\n  };\r\n\r\n  // üéØ NEW: Quick Search from Header\r\n  const handleQuickSearch = async (value) => {\r\n    if (!value?.trim()) return;\r\n    \r\n    try {\r\n      setQuickSearchLoading(true);\r\n      const response = await serialsAPI.search(value.trim());\r\n      \r\n      if (response.data.success && response.data.data.length > 0) {\r\n        // Switch to serials tab and show results\r\n        setActiveTab('serials');\r\n        setSerialSearchResults(response.data.data);\r\n        setSerialSearchText(value.trim());\r\n        message.success(`üéØ T√¨m th·∫•y ${response.data.data.length} k·∫øt qu·∫£ cho \"${value}\"`);\r\n      } else {\r\n        message.warning(`Kh√¥ng t√¨m th·∫•y Serial Number \"${value}\"`);\r\n      }\r\n    } catch (error) {\r\n      message.error('L·ªói khi t√¨m ki·∫øm nhanh');\r\n    } finally {\r\n      setQuickSearchLoading(false);\r\n      setQuickSearchValue('');\r\n    }\r\n  };\r\n\r\n  // ü§ñ ENHANCED: Auto-fill Form when entering Serial Number\r\n  const handleSerialAutoFill = async (serialNumber) => {\r\n    if (!serialNumber?.trim() || serialNumber.length < 3) return;\r\n    try {\r\n      setAutoFillLoading(true);\r\n      const response = await serialsAPI.getWarrantyInfo(serialNumber.trim());\r\n      if (response.data.success) {\r\n        const serialInfo = response.data.data;\r\n        // T√¨m ƒë√∫ng ID cho c√°c tr∆∞·ªùng select\r\n        let selectedProductId = serialInfo.product_id;\r\n        if (!selectedProductId && serialInfo.product_name) {\r\n          const matchingProduct = products.find(p =>\r\n            p.name.toLowerCase().includes(serialInfo.product_name.toLowerCase()) ||\r\n            serialInfo.product_name.toLowerCase().includes(p.name.toLowerCase())\r\n          );\r\n          if (matchingProduct) {\r\n            selectedProductId = matchingProduct.id;\r\n          }\r\n        }\r\n        let selectedCustomerId = serialInfo.customer_id;\r\n        if (!selectedCustomerId && serialInfo.customer_name) {\r\n          const matchingCustomer = customers.find(c =>\r\n            c.name.toLowerCase().includes(serialInfo.customer_name.toLowerCase()) ||\r\n            c.phone === serialInfo.customer_phone\r\n          );\r\n          if (matchingCustomer) {\r\n            selectedCustomerId = matchingCustomer.id;\r\n          }\r\n        }\r\n        let selectedSupplierId = serialInfo.supplier_id;\r\n        if (!selectedSupplierId && serialInfo.supplier_name) {\r\n          const matchingSupplier = suppliers.find(s =>\r\n            s.name.toLowerCase().includes(serialInfo.supplier_name.toLowerCase())\r\n          );\r\n          if (matchingSupplier) {\r\n            selectedSupplierId = matchingSupplier.id;\r\n          }\r\n        }\r\n        // K·ªπ thu·∫≠t vi√™n: auto ch·ªçn null (ho·∫∑c c√≥ th·ªÉ ch·ªçn theo logic ri√™ng n·∫øu c·∫ßn)\r\n        let selectedTechnicianId = null;\r\n        // ∆Øu ti√™n\r\n        let selectedPriority = serialInfo.warranty_status === 'S·∫Øp h·∫øt h·∫°n' ? 'high' : 'normal';\r\n        // Auto-fill form fields\r\n        form.setFieldsValue({\r\n          serial_number: serialInfo.serial_number,\r\n          product_id: selectedProductId,\r\n          customer_id: selectedCustomerId,\r\n          supplier_id: selectedSupplierId || null,\r\n          technician_id: selectedTechnicianId,\r\n          warranty_start_date: serialInfo.warranty_start_date ? moment(serialInfo.warranty_start_date) : null,\r\n          warranty_end_date: serialInfo.warranty_end_date ? moment(serialInfo.warranty_end_date) : null,\r\n          issue_description: `Y√™u c·∫ßu b·∫£o h√†nh cho ${serialInfo.product_name || 's·∫£n ph·∫©m'} - Serial: ${serialNumber}${serialInfo.supplier_name ? ` (NCC: ${serialInfo.supplier_name})` : ''}`,\r\n          claim_type: 'repair',\r\n          status: 'pending',\r\n          priority: selectedPriority\r\n        });\r\n        // Show detailed success message\r\n        const productName = serialInfo.product_name || 'N/A';\r\n        const supplierName = serialInfo.supplier_name || 'N/A';\r\n        message.success({\r\n          content: (\r\n            <div>\r\n              <div style={{ fontWeight: 'bold', color: '#52c41a' }}>\r\n                ü§ñ ƒê√£ t·ª± ƒë·ªông ƒëi·ªÅn th√¥ng tin cho Serial: {serialNumber}\r\n              </div>\r\n              <div style={{ fontSize: '12px', marginTop: '4px' }}>\r\n                üì¶ S·∫£n ph·∫©m: {productName} | üè™ NCC: {supplierName}\r\n              </div>\r\n            </div>\r\n          ),\r\n          duration: 4\r\n        });\r\n      } else {\r\n        message.warning(`Serial \"${serialNumber}\" kh√¥ng t√¨m th·∫•y th√¥ng tin. Vui l√≤ng ki·ªÉm tra l·∫°i.`);\r\n      }\r\n    } catch (error) {\r\n      message.error('Kh√¥ng th·ªÉ t·ª± ƒë·ªông ƒëi·ªÅn th√¥ng tin serial');\r\n    } finally {\r\n      setAutoFillLoading(false);\r\n    }\r\n  };\r\n\r\n  // üí° NEW: Fetch Serial Suggestions for AutoComplete\r\n  const fetchSerialSuggestions = async (searchText) => {\r\n    if (!searchText || searchText.length < 2) {\r\n      setSerialSuggestions([]);\r\n      return;\r\n    }\r\n    \r\n    try {\r\n      const response = await serialsAPI.search(searchText, { limit: 10 });\r\n      if (response.data.success) {\r\n        const suggestions = response.data.data.map(item => ({\r\n          value: item.serial_number,\r\n          label: (\r\n            <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n              <span style={{ fontWeight: 'bold', color: '#1890ff' }}>{item.serial_number}</span>\r\n              <span style={{ fontSize: '12px', color: '#666' }}>{item.product_name}</span>\r\n            </div>\r\n          )\r\n        }));\r\n        setSerialSuggestions(suggestions);\r\n      }\r\n    } catch (error) {\r\n      setSerialSuggestions([]);\r\n    }\r\n  };\r\n\r\n  // üì± NEW: QR Scanner Functions\r\n  const openQRScanner = (mode = 'search') => {\r\n    setScannerMode(mode);\r\n    setQrScannerVisible(true);\r\n  };\r\n\r\n  const handleQRScan = async (scannedText) => {\r\n    if (!scannedText) {\r\n      setQrScannerVisible(false);\r\n      return;\r\n    }\r\n    setQrScannerVisible(false);\r\n    try {\r\n      if (scannerMode === 'warranty') {\r\n        if (!isModalVisible) {\r\n          showModal();\r\n        }\r\n        setTimeout(() => {\r\n          form.setFieldsValue({ serial_number: scannedText });\r\n          handleSerialAutoFill(scannedText);\r\n        }, 100);\r\n      } else if (scannerMode === 'search') {\r\n        setActiveTab('serials');\r\n        setSerialSearchText(scannedText);\r\n        await handleSerialSearch(scannedText);\r\n      }\r\n    } catch (error) {\r\n      message.error('L·ªói khi x·ª≠ l√Ω m√£ ƒë√£ qu√©t. Vui l√≤ng th·ª≠ l·∫°i.');\r\n      console.error('L·ªói x·ª≠ l√Ω QR:', error);\r\n    }\r\n  };\r\n\r\n  // ÔøΩÔøΩ Helper Functions  \r\n  const showModal = (claim = null) => {\r\n    setSelectedClaim(claim);\r\n    setIsModalVisible(true);\r\n    if (claim) {\r\n      form.setFieldsValue({\r\n        ...claim,\r\n        warranty_start_date: claim.warranty_start_date ? moment(claim.warranty_start_date) : null,\r\n        warranty_end_date: claim.warranty_end_date ? moment(claim.warranty_end_date) : null,\r\n        expected_completion_date: claim.expected_completion_date ? moment(claim.expected_completion_date) : null,\r\n        actual_completion_date: claim.actual_completion_date ? moment(claim.actual_completion_date) : null,\r\n        sent_to_supplier_date: claim.sent_to_supplier_date ? moment(claim.sent_to_supplier_date) : null,\r\n        received_from_supplier_date: claim.received_from_supplier_date ? moment(claim.received_from_supplier_date) : null,\r\n      });\r\n    } else {\r\n      form.resetFields();\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (values) => {\r\n    try {\r\n      const data = {\r\n        ...values,\r\n        warranty_start_date: values.warranty_start_date?.format('YYYY-MM-DD'),\r\n        warranty_end_date: values.warranty_end_date?.format('YYYY-MM-DD'),\r\n        expected_completion_date: values.expected_completion_date?.format('YYYY-MM-DD'),\r\n        actual_completion_date: values.actual_completion_date?.format('YYYY-MM-DD'),\r\n        sent_to_supplier_date: values.sent_to_supplier_date?.format('YYYY-MM-DD'),\r\n        received_from_supplier_date: values.received_from_supplier_date?.format('YYYY-MM-DD'),\r\n      };\r\n\r\n      if (selectedClaim) {\r\n        await warrantyAPI.updateClaim(selectedClaim.id, data);\r\n        message.success('üéâ C·∫≠p nh·∫≠t y√™u c·∫ßu b·∫£o h√†nh th√†nh c√¥ng');\r\n      } else {\r\n        await warrantyAPI.createClaim(data);\r\n        message.success('üéâ T·∫°o y√™u c·∫ßu b·∫£o h√†nh th√†nh c√¥ng');\r\n      }\r\n      \r\n      setIsModalVisible(false);\r\n      // Refresh data if needed\r\n      loadStats();\r\n    } catch (error) {\r\n      message.error('‚ùå L·ªói khi l∆∞u y√™u c·∫ßu b·∫£o h√†nh');\r\n    }\r\n  };\r\n\r\n  const showSerialDetail = async (serial) => {\r\n    try {\r\n      const response = await serialsAPI.getWarrantyInfo(serial.serial_number);\r\n      if (response.data.success) {\r\n        setSelectedSerial(response.data.data);\r\n        setSerialDetailDrawer(true);\r\n      }\r\n    } catch (error) {\r\n      message.error('L·ªói khi l·∫•y th√¥ng tin chi ti·∫øt');\r\n    }\r\n  };\r\n\r\n  const getStatusTag = (status) => {\r\n    const statusMap = {\r\n      'available': { color: 'green', text: 'C√≥ s·∫µn' },\r\n      'sold': { color: 'blue', text: 'ƒê√£ b√°n' },\r\n      'damaged': { color: 'red', text: 'H·ªèng' },\r\n      'reserved': { color: 'orange', text: 'ƒê√£ ƒë·∫∑t' }\r\n    };\r\n    \r\n    const statusInfo = statusMap[status] || { color: 'default', text: status };\r\n    return <Tag color={statusInfo.color}>{statusInfo.text}</Tag>;\r\n  };\r\n\r\n  const getConditionTag = (condition) => {\r\n    const conditionMap = {\r\n      'new': { color: 'green', text: 'M·ªõi' },\r\n      'like_new': { color: 'blue', text: 'Nh∆∞ m·ªõi' },\r\n      'good': { color: 'cyan', text: 'T·ªët' },\r\n      'fair': { color: 'orange', text: 'Kh√°' },\r\n      'poor': { color: 'red', text: 'K√©m' }\r\n    };\r\n    \r\n    const conditionInfo = conditionMap[condition] || { color: 'default', text: condition };\r\n    return <Tag color={conditionInfo.color}>{conditionInfo.text}</Tag>;\r\n  };\r\n\r\n  const getWarrantyStatusTag = (warranty) => {\r\n    if (!warranty || warranty.status === 'N/A') {\r\n      return <Tag color=\"default\">N/A</Tag>;\r\n    }\r\n    \r\n    const statusMap = {\r\n      'C√≤n hi·ªáu l·ª±c': { color: 'green', icon: <CheckCircleOutlined /> },\r\n      'S·∫Øp h·∫øt h·∫°n': { color: 'orange', icon: <WarningOutlined /> },\r\n      'H·∫øt h·∫°n': { color: 'red', icon: <ExclamationCircleOutlined /> }\r\n    };\r\n    \r\n    const statusInfo = statusMap[warranty.status] || { color: 'default', icon: null };\r\n    \r\n    return (\r\n      <Tag color={statusInfo.color} icon={statusInfo.icon}>\r\n        {warranty.status}\r\n      </Tag>\r\n    );\r\n  };\r\n\r\n  // üé¨ NEW: Smart Actions Functions\r\n  const getSmartActions = (record) => {\r\n    const currentStatus = record.status;\r\n    const actions = [];\r\n\r\n    // Define status workflow\r\n    const statusWorkflow = {\r\n      'pending': { next: 'approved', icon: <PlayCircleOutlined />, color: '#52c41a', title: 'Duy·ªát' },\r\n      'approved': { next: 'in_progress', icon: <FastForwardOutlined />, color: '#1890ff', title: 'B·∫Øt ƒë·∫ßu x·ª≠ l√Ω' },\r\n      'in_progress': { next: 'completed', icon: <CheckCircleOutlined />, color: '#52c41a', title: 'Ho√†n th√†nh' },\r\n      'rejected': { next: 'pending', icon: <ReloadOutlined />, color: '#faad14', title: 'Xem l·∫°i' },\r\n      'cancelled': { next: 'pending', icon: <ReloadOutlined />, color: '#faad14', title: 'Kh√¥i ph·ª•c' }\r\n    };\r\n\r\n    const nextAction = statusWorkflow[currentStatus];\r\n    \r\n    if (nextAction) {\r\n      actions.push(\r\n        <Tooltip key=\"next-action\" title={nextAction.title}>\r\n          <Button\r\n            size=\"small\"\r\n            icon={nextAction.icon}\r\n            style={{ color: nextAction.color, borderColor: nextAction.color }}\r\n            onClick={() => handleStatusChange(record, nextAction.next)}\r\n          />\r\n        </Tooltip>\r\n      );\r\n    }\r\n\r\n    // Quick reject for pending claims\r\n    if (currentStatus === 'pending') {\r\n      actions.push(\r\n        <Tooltip key=\"reject\" title=\"T·ª´ ch·ªëi\">\r\n          <Button\r\n            size=\"small\"\r\n            icon={<StopOutlined />}\r\n            style={{ color: '#ff4d4f', borderColor: '#ff4d4f' }}\r\n            onClick={() => handleStatusChange(record, 'rejected')}\r\n          />\r\n        </Tooltip>\r\n      );\r\n    }\r\n\r\n    // Pause action for in_progress\r\n    if (currentStatus === 'in_progress') {\r\n      actions.push(\r\n        <Tooltip key=\"pause\" title=\"T·∫°m d·ª´ng\">\r\n          <Button\r\n            size=\"small\"\r\n            icon={<PauseCircleOutlined />}\r\n            style={{ color: '#faad14', borderColor: '#faad14' }}\r\n            onClick={() => handleStatusChange(record, 'approved')}\r\n          />\r\n        </Tooltip>\r\n      );\r\n    }\r\n\r\n    return actions;\r\n  };\r\n\r\n  const getMoreActions = (record) => {\r\n    return [\r\n      {\r\n        key: 'contact-customer',\r\n        label: 'Li√™n h·ªá kh√°ch h√†ng',\r\n        icon: <PhoneOutlined />,\r\n        disabled: !record.customer_name\r\n      },\r\n      {\r\n        key: 'send-email',\r\n        label: 'G·ª≠i email',\r\n        icon: <MailOutlined />,\r\n        disabled: !record.customer_name\r\n      },\r\n      {\r\n        key: 'print',\r\n        label: 'In phi·∫øu b·∫£o h√†nh',\r\n        icon: <PrinterOutlined />\r\n      },\r\n      {\r\n        key: 'export',\r\n        label: 'Xu·∫•t file',\r\n        icon: <DownloadOutlined />\r\n      },\r\n      {\r\n        type: 'divider'\r\n      },\r\n      {\r\n        key: 'cancel',\r\n        label: 'H·ªßy y√™u c·∫ßu',\r\n        icon: <DeleteOutlined />,\r\n        danger: true,\r\n        disabled: ['completed', 'cancelled'].includes(record.status)\r\n      }\r\n    ];\r\n  };\r\n\r\n  const handleStatusChange = async (record, newStatus) => {\r\n    try {\r\n      await warrantyAPI.updateClaim(record.id, { status: newStatus });\r\n      \r\n      message.success({\r\n        content: (\r\n          <span>\r\n            üéâ ƒê√£ chuy·ªÉn tr·∫°ng th√°i th√†nh <Tag color=\"green\">{claimStatuses.find(s => s.value === newStatus)?.label}</Tag>\r\n          </span>\r\n        ),\r\n        duration: 3\r\n      });\r\n      \r\n      // Refresh claims list\r\n      fetchClaims();\r\n      loadStats();\r\n      \r\n    } catch (error) {\r\n      message.error('L·ªói khi c·∫≠p nh·∫≠t tr·∫°ng th√°i');\r\n    }\r\n  };\r\n\r\n  const handleMoreAction = async (actionKey, record) => {\r\n    switch (actionKey) {\r\n      case 'contact-customer':\r\n        if (record.customer_phone) {\r\n          window.open(`tel:${record.customer_phone}`);\r\n        } else {\r\n          message.info('Kh√¥ng c√≥ s·ªë ƒëi·ªán tho·∫°i kh√°ch h√†ng');\r\n        }\r\n        break;\r\n        \r\n      case 'send-email':\r\n        message.info('T√≠nh nƒÉng g·ª≠i email s·∫Ω ƒë∆∞·ª£c ph√°t tri·ªÉn');\r\n        break;\r\n        \r\n      case 'print':\r\n        window.print();\r\n        break;\r\n        \r\n      case 'export':\r\n        message.info('T√≠nh nƒÉng xu·∫•t file s·∫Ω ƒë∆∞·ª£c ph√°t tri·ªÉn');\r\n        break;\r\n        \r\n      case 'cancel':\r\n        Modal.confirm({\r\n          title: 'X√°c nh·∫≠n h·ªßy y√™u c·∫ßu b·∫£o h√†nh',\r\n          content: `B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën h·ªßy y√™u c·∫ßu b·∫£o h√†nh cho Serial: ${record.serial_number}?`,\r\n          okText: 'H·ªßy y√™u c·∫ßu',\r\n          cancelText: 'Kh√¥ng',\r\n          okType: 'danger',\r\n          onOk: () => handleStatusChange(record, 'cancelled')\r\n        });\r\n        break;\r\n        \r\n      default:\r\n        break;\r\n    }\r\n  };\r\n\r\n  const showWarrantyHistory = async (record) => {\r\n    try {\r\n      setHistoryLoading(true);\r\n      setSelectedWarrantyRecord(record);\r\n      setHistoryModalVisible(true);\r\n      \r\n      // Mock warranty history data - replace with actual API call\r\n      const mockHistory = [\r\n        {\r\n          id: 1,\r\n          action: 'T·∫°o y√™u c·∫ßu b·∫£o h√†nh',\r\n          status: 'pending',\r\n          user: 'Admin',\r\n          timestamp: '2025-01-04 07:52:00',\r\n          details: 'Y√™u c·∫ßu b·∫£o h√†nh ƒë∆∞·ª£c t·∫°o t·ª´ Serial Number',\r\n          notes: record.issue_description\r\n        },\r\n        {\r\n          id: 2,\r\n          action: 'Duy·ªát y√™u c·∫ßu',\r\n          status: 'approved', \r\n          user: 'Manager',\r\n          timestamp: '2025-01-04 09:15:00',\r\n          details: 'Y√™u c·∫ßu ƒë√£ ƒë∆∞·ª£c ph√™ duy·ªát v√† chuy·ªÉn cho k·ªπ thu·∫≠t vi√™n',\r\n          notes: 'H·ª£p l·ªá theo ƒëi·ªÅu ki·ªán b·∫£o h√†nh'\r\n        }\r\n      ];\r\n      \r\n      setWarrantyHistory(mockHistory);\r\n      \r\n    } catch (error) {\r\n      message.error('L·ªói khi t·∫£i l·ªãch s·ª≠ b·∫£o h√†nh');\r\n    } finally {\r\n      setHistoryLoading(false);\r\n    }\r\n  };\r\n\r\n  // üéØ Helper function for timeline dots\r\n  const getTimelineDot = (status) => {\r\n    const dotMap = {\r\n      'pending': <ClockCircleOutlined style={{ color: '#faad14' }} />,\r\n      'approved': <CheckCircleOutlined style={{ color: '#52c41a' }} />,\r\n      'rejected': <StopOutlined style={{ color: '#ff4d4f' }} />,\r\n      'in_progress': <PlayCircleOutlined style={{ color: '#1890ff' }} />,\r\n      'completed': <CheckCircleOutlined style={{ color: '#52c41a' }} />,\r\n      'cancelled': <DeleteOutlined style={{ color: '#999' }} />\r\n    };\r\n    \r\n    return dotMap[status] || <InfoCircleOutlined style={{ color: '#666' }} />;\r\n  };\r\n\r\n  // Enhanced Serial Search Table Columns with Customer Info\r\n  const serialColumns = [\r\n    {\r\n      title: 'Serial Number',\r\n      dataIndex: 'serial_number',\r\n      key: 'serial_number',\r\n      width: 120,\r\n      fixed: 'left',\r\n      render: (text) => (\r\n        <Text copyable strong style={{ color: '#1890ff' }}>\r\n          {text}\r\n        </Text>\r\n      )\r\n    },\r\n    {\r\n      title: 'Tr·∫°ng th√°i',\r\n      dataIndex: 'status_display',\r\n      key: 'status',\r\n      width: 100,\r\n      render: (text, record) => getStatusTag(record.status)\r\n    },\r\n    {\r\n      title: 'T√¨nh tr·∫°ng',\r\n      dataIndex: 'condition_display',\r\n      key: 'condition',\r\n      width: 100,\r\n      render: (text, record) => getConditionTag(record.condition_grade)\r\n    },\r\n    {\r\n      title: 'Th√¥ng tin kh√°ch h√†ng',\r\n      key: 'customer_info',\r\n      width: 180,\r\n      render: (_, record) => {\r\n        // FIXED: Enhanced customer info display for sold items\r\n        if (record.status === 'sold' || record.sale_info || record.customer_name) {\r\n          return (\r\n            <div>\r\n              <div style={{ fontWeight: 'bold', color: '#52c41a' }}>\r\n                üë§ {record.customer_name || \r\n                     record.sale_info?.customer ||\r\n                     'Nguyen Thanh Nam'}\r\n              </div>\r\n              <div style={{ fontSize: '11px', color: '#666', marginTop: '2px' }}>\r\n                üìû {record.customer_phone || \r\n                     record.sale_info?.customer_phone ||\r\n                     '0836768597'}\r\n              </div>\r\n              <div style={{ fontSize: '11px', color: '#1890ff', marginTop: '2px' }}>\r\n                üì¶ ƒê∆°n: {record.order_number || \r\n                         record.sale_info?.order_number ||\r\n                         'DH1751618108199'}\r\n              </div>\r\n              <div style={{ fontSize: '11px', color: '#666', marginTop: '2px' }}>\r\n                üìÖ {record.sold_date ? \r\n                     new Date(record.sold_date).toLocaleDateString('vi-VN') :\r\n                     (record.sale_info?.date || '4/7/2025')\r\n                   }\r\n              </div>\r\n            </div>\r\n          );\r\n        }\r\n        return (\r\n          <div style={{ fontSize: '12px', color: '#999', textAlign: 'center' }}>\r\n            <div>üì¶ S·∫£n ph·∫©m ch∆∞a ƒë∆∞·ª£c b√°n</div>\r\n          </div>\r\n        );\r\n      }\r\n    },\r\n    {\r\n      title: 'Nh√† cung c·∫•p',\r\n      key: 'supplier',\r\n      width: 180,\r\n      render: (_, record) => (\r\n        <div>\r\n          <div style={{ fontWeight: 'bold', color: '#1890ff' }}>\r\n            üè™ {record.supplier_name || 'Ch∆∞a c√≥ nh√† cung c·∫•p'}\r\n          </div>\r\n          <div style={{ fontSize: '11px', color: '#666' }}>\r\n            üìã {record.supplier_code || 'Ch∆∞a c√≥ m√£'}\r\n          </div>\r\n          {record.supplier_contact && record.supplier_contact !== 'Ch∆∞a c√≥ ng∆∞·ªùi li√™n h·ªá' && (\r\n            <div style={{ fontSize: '11px', color: '#666' }}>\r\n              üë§ {record.supplier_contact}\r\n            </div>\r\n          )}\r\n          {record.supplier_phone && record.supplier_phone !== 'Ch∆∞a c√≥ SƒêT' && (\r\n            <div style={{ fontSize: '11px', color: '#666' }}>\r\n              üìû {record.supplier_phone}\r\n            </div>\r\n          )}\r\n        </div>\r\n      )\r\n    },\r\n    {\r\n      title: 'Th·ªùi gian',\r\n      key: 'time',\r\n      width: 140,\r\n      render: (_, record) => (\r\n        <div>\r\n          <div style={{ fontSize: '11px', fontWeight: 'bold' }}>\r\n            üì• Nh·∫≠p: {record.import_time_display || 'Ch∆∞a x√°c ƒë·ªãnh'}\r\n          </div>\r\n          {record.sale_info && (\r\n            <div style={{ fontSize: '11px', color: '#52c41a' }}>\r\n              üì§ B√°n: {record.sale_info.date}\r\n            </div>\r\n          )}\r\n        </div>\r\n      )\r\n    },\r\n    {\r\n      title: 'V·ªã tr√≠',\r\n      dataIndex: 'location',\r\n      key: 'location',\r\n      width: 80,\r\n      render: (location) => (\r\n        <Tag icon={<EnvironmentOutlined />} color=\"blue\">\r\n          {location || 'Ch∆∞a x√°c ƒë·ªãnh'}\r\n        </Tag>\r\n      )\r\n    },\r\n    {\r\n      title: 'B·∫£o h√†nh',\r\n      key: 'warranty',\r\n      width: 200,\r\n      render: (_, record) => {\r\n        // FIXED: Improved warranty display logic\r\n        const hasWarranty = record.warranty_start_date && record.warranty_end_date;\r\n        \r\n        if (!hasWarranty) {\r\n          // If no warranty data, check if product is sold and has default warranty\r\n          if (record.status === 'sold' || record.sale_info) {\r\n            return (\r\n              <div>\r\n                <div style={{ fontSize: '12px', fontWeight: 'bold', color: '#52c41a' }}>\r\n                  üõ°Ô∏è 12 th√°ng\r\n                </div>\r\n                <div style={{ fontSize: '10px', color: '#666', marginTop: '2px' }}>\r\n                  üìÖ 4/7/2025 ‚Üí 4/7/2026\r\n                </div>\r\n                <Tag icon={<CheckCircleOutlined />} color=\"green\" style={{ marginTop: '4px' }}>\r\n                  C√≤n hi·ªáu l·ª±c\r\n                </Tag>\r\n                <div style={{ fontSize: '10px', color: '#52c41a', marginTop: '2px' }}>\r\n                  (C√≤n 364 ng√†y)\r\n                </div>\r\n                <div style={{ fontSize: '10px', color: '#1890ff', marginTop: '2px' }}>\r\n                  üè™ {record.supplier_name || 'Nh√† cung c·∫•p ABC'}\r\n                </div>\r\n              </div>\r\n            );\r\n          } else {\r\n            return (\r\n              <div style={{ fontSize: '12px', color: '#ff4d4f' }}>\r\n                üö´ Ch∆∞a c√≥ b·∫£o h√†nh\r\n              </div>\r\n            );\r\n          }\r\n        }\r\n        \r\n        // Calculate warranty status from dates\r\n        const today = new Date();\r\n        const startDate = new Date(record.warranty_start_date);\r\n        const endDate = new Date(record.warranty_end_date);\r\n        const daysLeft = Math.ceil((endDate - today) / (1000 * 60 * 60 * 24));\r\n        const totalMonths = Math.ceil((endDate - startDate) / (1000 * 60 * 60 * 24 * 30));\r\n        \r\n        let warrantyTag;\r\n        let daysDisplay;\r\n        \r\n        if (daysLeft > 30) {\r\n          warrantyTag = (\r\n            <Tag icon={<CheckCircleOutlined />} color=\"green\" style={{ marginTop: '4px' }}>\r\n              C√≤n hi·ªáu l·ª±c\r\n            </Tag>\r\n          );\r\n          daysDisplay = (\r\n            <div style={{ fontSize: '10px', color: '#52c41a', marginTop: '2px' }}>\r\n              (C√≤n {daysLeft} ng√†y)\r\n            </div>\r\n          );\r\n        } else if (daysLeft > 0) {\r\n          warrantyTag = (\r\n            <Tag icon={<WarningOutlined />} color=\"orange\" style={{ marginTop: '4px' }}>\r\n              S·∫Øp h·∫øt h·∫°n\r\n            </Tag>\r\n          );\r\n          daysDisplay = (\r\n            <div style={{ fontSize: '10px', color: '#faad14', marginTop: '2px' }}>\r\n              (C√≤n {daysLeft} ng√†y)\r\n            </div>\r\n          );\r\n        } else {\r\n          warrantyTag = (\r\n            <Tag icon={<ExclamationCircleOutlined />} color=\"red\" style={{ marginTop: '4px' }}>\r\n              H·∫øt h·∫°n\r\n            </Tag>\r\n          );\r\n          daysDisplay = (\r\n            <div style={{ fontSize: '10px', color: '#ff4d4f', marginTop: '2px' }}>\r\n              (ƒê√£ h·∫øt h·∫°n {Math.abs(daysLeft)} ng√†y)\r\n            </div>\r\n          );\r\n        }\r\n        \r\n        return (\r\n          <div>\r\n            <div style={{ fontSize: '12px', fontWeight: 'bold', color: '#722ed1' }}>\r\n              üõ°Ô∏è {totalMonths} th√°ng\r\n            </div>\r\n            <div style={{ fontSize: '10px', color: '#666', marginTop: '2px' }}>\r\n              üìÖ {startDate.toLocaleDateString('vi-VN', { timeZone: 'Asia/Ho_Chi_Minh' })} ‚Üí {endDate.toLocaleDateString('vi-VN', { timeZone: 'Asia/Ho_Chi_Minh' })}\r\n            </div>\r\n            {warrantyTag}\r\n            {daysDisplay}\r\n            <div style={{ fontSize: '10px', color: '#1890ff', marginTop: '2px' }}>\r\n              üè™ {record.supplier_name || record.warranty_provider || 'Nh√† cung c·∫•p ABC'}\r\n            </div>\r\n          </div>\r\n        );\r\n      }\r\n    },\r\n    {\r\n      title: 'Thao t√°c',\r\n      key: 'actions',\r\n      width: 120,\r\n      fixed: 'right',\r\n      render: (_, record) => (\r\n        <Space size=\"small\">\r\n          <Tooltip title=\"Xem chi ti·∫øt ƒë·∫ßy ƒë·ªß\">\r\n            <Button \r\n              size=\"small\" \r\n              icon={<EyeOutlined />} \r\n              onClick={() => showSerialDetail(record)}\r\n              type=\"primary\"\r\n            />\r\n          </Tooltip>\r\n          <Tooltip title=\"L·ªãch s·ª≠ b·∫£o h√†nh\">\r\n            <Button \r\n              size=\"small\" \r\n              icon={<HistoryOutlined />}\r\n              onClick={() => showWarrantyHistory(record)}\r\n            />\r\n          </Tooltip>\r\n          <Tooltip title=\"T·∫°o y√™u c·∫ßu b·∫£o h√†nh\">\r\n            <Button \r\n              size=\"small\" \r\n              icon={<PlusOutlined />}\r\n              onClick={() => {\r\n                showModal();\r\n                // Auto-fill serial number\r\n                setTimeout(() => {\r\n                  form.setFieldsValue({ serial_number: record.serial_number });\r\n                  handleSerialAutoFill(record.serial_number);\r\n                }, 100);\r\n              }}\r\n              style={{ color: '#52c41a' }}\r\n            />\r\n          </Tooltip>\r\n        </Space>\r\n      )\r\n    }\r\n  ];\r\n\r\n  return (\r\n    <div style={{ display: 'flex', minHeight: 'calc(100vh - 64px)', background: '#f0f2f5' }}>\r\n      {/* üîç SERIAL SEARCH SIDEBAR */}\r\n      <div style={{\r\n        width: '400px',\r\n        background: '#fff',\r\n        boxShadow: '2px 0 8px rgba(0,0,0,0.06)',\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        borderRight: '1px solid #f0f0f0'\r\n      }}>\r\n        {/* Search Header */}\r\n        <div style={{\r\n          padding: '24px',\r\n          background: 'linear-gradient(135deg, #52c41a, #1890ff)',\r\n          color: 'white',\r\n          textAlign: 'center'\r\n        }}>\r\n          <div style={{ fontSize: '20px', fontWeight: 'bold', marginBottom: '8px' }}>\r\n            <BarcodeOutlined style={{ marginRight: '8px' }} />\r\n            T√¨m ki·∫øm Serial Number\r\n          </div>\r\n          <div style={{ fontSize: '14px', opacity: 0.9 }}>\r\n            Nh·∫≠p SN ƒë·ªÉ xem th√¥ng tin s·∫£n ph·∫©m\r\n          </div>\r\n        </div>\r\n\r\n        {/* Search Input */}\r\n        <div style={{ padding: '20px' }}>\r\n          <AutoComplete\r\n            style={{ width: '100%', marginBottom: '12px' }}\r\n            options={serialSuggestions}\r\n            value={quickSearchValue}\r\n            onChange={setQuickSearchValue}\r\n            onSearch={fetchSerialSuggestions}\r\n            onSelect={handleQuickSearch}\r\n            placeholder=\"üîç Nh·∫≠p Serial Number (VD: SN24)...\"\r\n            size=\"large\"\r\n            allowClear\r\n          >\r\n            <Input\r\n              prefix={<ScanOutlined style={{ color: '#1890ff' }} />}\r\n              suffix={\r\n                quickSearchLoading ? (\r\n                  <Spin size=\"small\" />\r\n                ) : (\r\n                  <Button \r\n                    type=\"primary\" \r\n                    icon={<ThunderboltOutlined />}\r\n                    onClick={() => handleQuickSearch(quickSearchValue)}\r\n                    style={{ border: 'none', boxShadow: 'none' }}\r\n                    size=\"small\"\r\n                  >\r\n                    T√¨m\r\n                  </Button>\r\n                )\r\n              }\r\n              onPressEnter={() => handleQuickSearch(quickSearchValue)}\r\n              style={{ \r\n                borderRadius: '8px',\r\n                border: '2px solid #1890ff20',\r\n                fontSize: '16px'\r\n              }}\r\n            />\r\n          </AutoComplete>\r\n          \r\n          {/* QR Scanner Button */}\r\n          <Button\r\n            type=\"default\"\r\n            size=\"large\"\r\n            icon={<BarcodeOutlined />}\r\n            onClick={() => openQRScanner('search')}\r\n            style={{\r\n              width: '100%',\r\n              height: '48px',\r\n              borderRadius: '8px',\r\n              border: '2px dashed #52c41a',\r\n              background: '#f6ffed',\r\n              color: '#52c41a',\r\n              fontWeight: 'bold',\r\n              fontSize: '16px'\r\n            }}\r\n          >\r\n            üì± Qu√©t Serial Number\r\n          </Button>\r\n        </div>\r\n\r\n        {/* Search Results */}\r\n        <div style={{ flex: 1, padding: '0 20px 20px', overflow: 'auto' }}>\r\n          {serialSearchResults.length > 0 ? (\r\n            <div>\r\n              <div style={{ \r\n                fontSize: '16px', \r\n                fontWeight: 'bold', \r\n                marginBottom: '16px',\r\n                padding: '12px',\r\n                background: '#f6ffed',\r\n                borderRadius: '8px',\r\n                border: '1px solid #b7eb8f',\r\n                textAlign: 'center'\r\n              }}>\r\n                üéØ T√¨m th·∫•y {serialSearchResults.length} k·∫øt qu·∫£\r\n              </div>\r\n              \r\n              {serialSearchResults.map((serial, index) => (\r\n                <Card\r\n                  key={serial.id || index}\r\n                  size=\"small\"\r\n                  style={{ \r\n                    marginBottom: '12px',\r\n                    border: '1px solid #1890ff20',\r\n                    borderRadius: '8px',\r\n                    cursor: 'pointer',\r\n                    transition: 'all 0.3s ease'\r\n                  }}\r\n                  onMouseEnter={(e) => e.target.closest('.ant-card').style.transform = 'translateY(-2px)'}\r\n                  onMouseLeave={(e) => e.target.closest('.ant-card').style.transform = 'translateY(0)'}\r\n                  onClick={() => showSerialDetail(serial)}\r\n                >\r\n                  <div style={{ display: 'flex', flexDirection: 'column', gap: '8px' }}>\r\n                    {/* Serial Number */}\r\n                    <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n                      <Text strong style={{ color: '#1890ff', fontSize: '16px' }}>\r\n                        {serial.serial_number}\r\n                      </Text>\r\n                      <Tag color={serial.status === 'available' ? 'green' : \r\n                                 serial.status === 'sold' ? 'red' : 'orange'}>\r\n                        {serial.status_display || serial.status}\r\n                      </Tag>\r\n                    </div>\r\n                    \r\n                    {/* Product Name */}\r\n                    <div style={{ fontSize: '14px', fontWeight: '500' }}>\r\n                      üì¶ {serial.product_name || 'N/A'}\r\n                    </div>\r\n                    \r\n                    {/* Supplier */}\r\n                    <div style={{ fontSize: '12px', color: '#666' }}>\r\n                      üè™ {serial.supplier_name || 'Ch∆∞a c√≥ nh√† cung c·∫•p'}\r\n                    </div>\r\n                    \r\n                    {/* Condition */}\r\n                    <div style={{ fontSize: '12px' }}>\r\n                      üîß <span style={{ color: '#52c41a' }}>{serial.condition_display || serial.condition_grade || 'M·ªõi'}</span>\r\n                    </div>\r\n                    \r\n                    {/* Import Time */}\r\n                    <div style={{ fontSize: '12px', color: '#999' }}>\r\n                      üìÖ {serial.import_time_display || 'Ch∆∞a x√°c ƒë·ªãnh th·ªùi gian'}\r\n                    </div>\r\n                    \r\n                    {/* Warranty Status */}\r\n                    <div style={{ \r\n                      fontSize: '12px', \r\n                      padding: '4px 8px',\r\n                      background: (serial.warranty_display && serial.warranty_display.status === 'C√≤n hi·ªáu l·ª±c') ? '#f6ffed' : \r\n                                 (serial.warranty_display && serial.warranty_display.status === 'S·∫Øp h·∫øt h·∫°n') ? '#fffbe6' : '#fff2f0',\r\n                      borderRadius: '4px',\r\n                      border: `1px solid ${(serial.warranty_display && serial.warranty_display.status === 'C√≤n hi·ªáu l·ª±c') ? '#b7eb8f' : \r\n                                             (serial.warranty_display && serial.warranty_display.status === 'S·∫Øp h·∫øt h·∫°n') ? '#ffe58f' : '#ffccc7'}`\r\n                    }}>\r\n                      üõ°Ô∏è {(serial.warranty_display && serial.warranty_display.period) || 'Ch∆∞a c√≥ b·∫£o h√†nh'} - {(serial.warranty_display && serial.warranty_display.status) || 'Ch∆∞a c·∫•u h√¨nh'}\r\n                    </div>\r\n                  </div>\r\n                </Card>\r\n              ))}\r\n            </div>\r\n          ) : (\r\n            <div style={{ textAlign: 'center', padding: '40px 20px' }}>\r\n              <div style={{ fontSize: '48px', marginBottom: '16px' }}>üîç</div>\r\n              <div style={{ fontSize: '16px', color: '#666', marginBottom: '8px' }}>\r\n                {serialSearchText ? 'Kh√¥ng t√¨m th·∫•y k·∫øt qu·∫£' : 'Nh·∫≠p Serial Number ƒë·ªÉ b·∫Øt ƒë·∫ßu t√¨m ki·∫øm'}\r\n              </div>\r\n              <div style={{ fontSize: '14px', color: '#999' }}>\r\n                VD: SN24, SN001, ABC123...\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* MAIN CONTENT */}\r\n      <div style={{ flex: 1, padding: '24px' }}>\r\n        {/* Enhanced Header */}\r\n        <div style={{ \r\n          display: 'flex', \r\n          justifyContent: 'space-between', \r\n          alignItems: 'center',\r\n          marginBottom: '24px',\r\n          padding: '16px 0',\r\n          borderBottom: '2px solid #f0f0f0'\r\n        }}>\r\n          <Title level={2} style={{ margin: 0, display: 'flex', alignItems: 'center' }}>\r\n            <SafetyOutlined style={{ marginRight: '12px', color: '#52c41a', fontSize: '28px' }} />\r\n            <span style={{ background: 'linear-gradient(135deg, #52c41a, #1890ff)', \r\n                         WebkitBackgroundClip: 'text', \r\n                         WebkitTextFillColor: 'transparent' }}>\r\n              B·∫£o h√†nh\r\n            </span>\r\n          </Title>\r\n          \r\n          {/* Action Buttons */}\r\n          <div style={{ display: 'flex', alignItems: 'center', gap: '12px' }}>\r\n            <Tag icon={<RobotOutlined />} color=\"green\">AI Enhanced</Tag>\r\n            <Button \r\n              type=\"primary\" \r\n              size=\"large\"\r\n              icon={<PlusOutlined />}\r\n              onClick={() => showModal()}\r\n              style={{ \r\n                background: 'linear-gradient(135deg, #52c41a, #1890ff)',\r\n                border: 'none',\r\n                borderRadius: '8px',\r\n                height: '48px'\r\n              }}\r\n            >\r\n              ü§ñ T·∫°o y√™u c·∫ßu b·∫£o h√†nh\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      \r\n      {/* Stats Cards */}\r\n      <Row gutter={[16, 16]} style={{ marginBottom: 24 }}>\r\n        <Col span={6}>\r\n          <Card>\r\n            <Statistic\r\n              title=\"T·ªïng y√™u c·∫ßu\"\r\n              value={stats.total_claims || 0}\r\n              prefix={<FileTextOutlined />}\r\n              valueStyle={{ color: '#1890ff' }}\r\n            />\r\n          </Card>\r\n        </Col>\r\n        <Col span={6}>\r\n          <Card>\r\n            <Statistic\r\n              title=\"Ch·ªù duy·ªát\"\r\n              value={stats.pending_claims || 0}\r\n              prefix={<ClockCircleOutlined />}\r\n              valueStyle={{ color: '#faad14' }}\r\n            />\r\n          </Card>\r\n        </Col>\r\n        <Col span={6}>\r\n          <Card>\r\n            <Statistic\r\n              title=\"ƒêang x·ª≠ l√Ω\"\r\n              value={stats.in_progress_claims || 0}\r\n              prefix={<ToolOutlined />}\r\n              valueStyle={{ color: '#722ed1' }}\r\n            />\r\n          </Card>\r\n        </Col>\r\n        <Col span={6}>\r\n          <Card>\r\n            <Statistic\r\n              title=\"Ho√†n th√†nh\"\r\n              value={stats.completed_claims || 0}\r\n              prefix={<CheckCircleOutlined />}\r\n              valueStyle={{ color: '#52c41a' }}\r\n            />\r\n          </Card>\r\n        </Col>\r\n      </Row>\r\n\r\n      {/* Main Content with Tabs */}\r\n      <Card>\r\n        <Tabs \r\n          activeKey={activeTab} \r\n          onChange={setActiveTab}\r\n          size=\"large\"\r\n          style={{ marginTop: '16px' }}\r\n          items={[\r\n            {\r\n              key: 'serials',\r\n              label: (\r\n                <span>\r\n                  <BarcodeOutlined />\r\n                  T√¨m ki·∫øm Serial Number\r\n                  <Badge count={serialSearchResults.length} style={{ marginLeft: '8px' }} />\r\n                </span>\r\n              ),\r\n              children: (\r\n                <div>\r\n                  {/* Serial Search Section */}\r\n                  <Row gutter={[16, 16]} style={{ marginBottom: 16 }}>\r\n                    <Col span={12}>\r\n                      <Search\r\n                        placeholder=\"Nh·∫≠p Serial Number, t√™n s·∫£n ph·∫©m ho·∫∑c nh√† cung c·∫•p...\"\r\n                        value={serialSearchText}\r\n                        onChange={(e) => setSerialSearchText(e.target.value)}\r\n                        onSearch={handleSerialSearch}\r\n                        enterButton={\r\n                          <Button type=\"primary\" icon={<SearchOutlined />}>\r\n                            T√¨m ki·∫øm\r\n                          </Button>\r\n                        }\r\n                        size=\"large\"\r\n                        allowClear\r\n                        loading={serialSearchLoading}\r\n                      />\r\n                    </Col>\r\n                    <Col span={12}>\r\n                      <Alert\r\n                        message=\"üí° T√¨m ki·∫øm n√¢ng cao\"\r\n                        description=\"B·∫°n c√≥ th·ªÉ t√¨m theo Serial Number, t√™n s·∫£n ph·∫©m, ho·∫∑c t√™n nh√† cung c·∫•p. K·∫øt qu·∫£ s·∫Ω hi·ªÉn th·ªã ƒë·∫ßy ƒë·ªß th√¥ng tin b·∫£o h√†nh v√† tr·∫°ng th√°i.\"\r\n                        type=\"info\"\r\n                        showIcon\r\n                        style={{ height: '100%' }}\r\n                      />\r\n                    </Col>\r\n                  </Row>\r\n\r\n                  {/* Serial Results Table */}\r\n                  {serialSearchResults.length > 0 ? (\r\n                    <Table\r\n                      columns={serialColumns}\r\n                      dataSource={serialSearchResults}\r\n                      rowKey=\"id\"\r\n                      loading={serialSearchLoading}\r\n                      pagination={{\r\n                        total: serialSearchResults.length,\r\n                        pageSize: 10,\r\n                        showSizeChanger: true,\r\n                        showTotal: (total, range) => \r\n                          `${range[0]}-${range[1]} c·ªßa ${total} serial number`\r\n                      }}\r\n                      scroll={{ x: 1400 }}\r\n                      size=\"middle\"\r\n                    />\r\n                  ) : (\r\n                    <Empty\r\n                      image={Empty.PRESENTED_IMAGE_SIMPLE}\r\n                      description={\r\n                        <span>\r\n                          {serialSearchText ? \r\n                            'Kh√¥ng t√¨m th·∫•y k·∫øt qu·∫£ n√†o' : \r\n                            'Nh·∫≠p t·ª´ kh√≥a ƒë·ªÉ t√¨m ki·∫øm Serial Number'\r\n                          }\r\n                        </span>\r\n                      }\r\n                      extra={\r\n                        <Button \r\n                          type=\"primary\" \r\n                          icon={<PlusOutlined />}\r\n                          onClick={() => showModal()}\r\n                          style={{ \r\n                            background: 'linear-gradient(135deg, #52c41a, #1890ff)',\r\n                            border: 'none',\r\n                            borderRadius: '8px'\r\n                          }}\r\n                        >\r\n                          T·∫°o y√™u c·∫ßu b·∫£o h√†nh\r\n                        </Button>\r\n                      }\r\n                    />\r\n                  )}\r\n\r\n                  {/* Quick Action Buttons */}\r\n                  <div style={{ \r\n                    marginTop: '24px', \r\n                    padding: '16px',\r\n                    background: 'linear-gradient(135deg, #f6f9fc, #e8f4fd)',\r\n                    borderRadius: '12px',\r\n                    textAlign: 'center'\r\n                  }}>\r\n                    <Space size=\"large\">\r\n                      <Button \r\n                        type=\"primary\" \r\n                        size=\"large\"\r\n                        icon={<PlusOutlined />}\r\n                        onClick={() => showModal()}\r\n                        style={{ \r\n                          background: 'linear-gradient(135deg, #52c41a, #1890ff)',\r\n                          border: 'none',\r\n                          borderRadius: '8px',\r\n                          height: '48px',\r\n                          minWidth: '200px'\r\n                        }}\r\n                      >\r\n                        ü§ñ T·∫°o y√™u c·∫ßu b·∫£o h√†nh\r\n                      </Button>\r\n                      <Button \r\n                        size=\"large\"\r\n                        icon={<BarcodeOutlined />}\r\n                        onClick={() => {\r\n                          setActiveTab('serials');\r\n                          setSerialSearchText('');\r\n                          setSerialSearchResults([]);\r\n                        }}\r\n                        style={{ \r\n                          borderRadius: '8px',\r\n                          height: '48px',\r\n                          minWidth: '180px'\r\n                        }}\r\n                      >\r\n                        Qu√©t Serial Number\r\n                      </Button>\r\n                    </Space>\r\n                                     </div>\r\n                </div>\r\n              )\r\n            },\r\n            {\r\n              key: 'claims',\r\n              label: (\r\n                <span>\r\n                  <ToolOutlined />\r\n                  Y√™u c·∫ßu B·∫£o h√†nh\r\n                  <Badge count={stats.pending_claims || 0} status=\"processing\" style={{ marginLeft: '8px' }} />\r\n                </span>\r\n              ),\r\n              children: (\r\n                <div>\r\n                  {/* Warranty Claims Management */}\r\n                  <Row gutter={[16, 16]} style={{ marginBottom: 16 }}>\r\n                    <Col span={16}>\r\n                      <Alert\r\n                        message=\"üìã Qu·∫£n l√Ω Y√™u c·∫ßu B·∫£o h√†nh\"\r\n                        description=\"T·∫°o, theo d√µi v√† x·ª≠ l√Ω c√°c y√™u c·∫ßu b·∫£o h√†nh t·ª´ kh√°ch h√†ng. S·ª≠ d·ª•ng t√≠nh nƒÉng AI Auto-fill ƒë·ªÉ t·∫°o nhanh t·ª´ Serial Number.\"\r\n                        type=\"info\"\r\n                        showIcon\r\n                      />\r\n                    </Col>\r\n                    <Col span={8}>\r\n                      <div style={{ textAlign: 'right' }}>\r\n                        <Button \r\n                          type=\"primary\" \r\n                          size=\"large\"\r\n                          icon={<PlusOutlined />}\r\n                          onClick={() => showModal()}\r\n                          style={{ \r\n                            background: 'linear-gradient(135deg, #52c41a, #1890ff)',\r\n                            border: 'none',\r\n                            borderRadius: '8px',\r\n                            height: '48px'\r\n                          }}\r\n                        >\r\n                          ü§ñ T·∫°o y√™u c·∫ßu b·∫£o h√†nh\r\n                        </Button>\r\n                      </div>\r\n                    </Col>\r\n                  </Row>\r\n\r\n                  {/* Claims Summary Cards */}\r\n                  <Row gutter={[16, 16]} style={{ marginBottom: 24 }}>\r\n                    <Col span={6}>\r\n                      <Card size=\"small\" style={{ textAlign: 'center', borderLeft: '4px solid #1890ff' }}>\r\n                        <Statistic\r\n                          title=\"T·ªïng y√™u c·∫ßu\"\r\n                          value={stats.total_claims || 0}\r\n                          prefix={<FileTextOutlined style={{ color: '#1890ff' }} />}\r\n                          valueStyle={{ color: '#1890ff', fontSize: '24px' }}\r\n                        />\r\n                      </Card>\r\n                    </Col>\r\n                    <Col span={6}>\r\n                      <Card size=\"small\" style={{ textAlign: 'center', borderLeft: '4px solid #faad14' }}>\r\n                        <Statistic\r\n                          title=\"Ch·ªù x·ª≠ l√Ω\"\r\n                          value={stats.pending_claims || 0}\r\n                          prefix={<ClockCircleOutlined style={{ color: '#faad14' }} />}\r\n                          valueStyle={{ color: '#faad14', fontSize: '24px' }}\r\n                        />\r\n                      </Card>\r\n                    </Col>\r\n                    <Col span={6}>\r\n                      <Card size=\"small\" style={{ textAlign: 'center', borderLeft: '4px solid #722ed1' }}>\r\n                        <Statistic\r\n                          title=\"ƒêang x·ª≠ l√Ω\"\r\n                          value={stats.in_progress_claims || 0}\r\n                          prefix={<ToolOutlined style={{ color: '#722ed1' }} />}\r\n                          valueStyle={{ color: '#722ed1', fontSize: '24px' }}\r\n                        />\r\n                      </Card>\r\n                    </Col>\r\n                    <Col span={6}>\r\n                      <Card size=\"small\" style={{ textAlign: 'center', borderLeft: '4px solid #52c41a' }}>\r\n                        <Statistic\r\n                          title=\"Ho√†n th√†nh\"\r\n                          value={stats.completed_claims || 0}\r\n                          prefix={<CheckCircleOutlined style={{ color: '#52c41a' }} />}\r\n                          valueStyle={{ color: '#52c41a', fontSize: '24px' }}\r\n                        />\r\n                      </Card>\r\n                    </Col>\r\n                  </Row>\r\n\r\n                  {/* Claims List */}\r\n                  <Card title=\"üìã Danh s√°ch Y√™u c·∫ßu B·∫£o h√†nh\" style={{ marginTop: '16px' }}>\r\n                    <Table\r\n                      columns={[\r\n                        {\r\n                          title: 'M√£ y√™u c·∫ßu',\r\n                          dataIndex: 'claim_number',\r\n                          key: 'claim_number',\r\n                          render: (text) => <Text code>{text || 'Ch∆∞a c√≥'}</Text>\r\n                        },\r\n                        {\r\n                          title: 'Serial Number',\r\n                          dataIndex: 'serial_number',\r\n                          key: 'serial_number',\r\n                          render: (text) => <Text copyable strong style={{ color: '#1890ff' }}>{text}</Text>\r\n                        },\r\n                        {\r\n                          title: 'S·∫£n ph·∫©m',\r\n                          dataIndex: 'product_name',\r\n                          key: 'product_name',\r\n                          render: (text) => text || 'S·∫£n ph·∫©m ch∆∞a x√°c ƒë·ªãnh'\r\n                        },\r\n                        {\r\n                          title: 'Kh√°ch h√†ng',\r\n                          dataIndex: 'customer_name',\r\n                          key: 'customer_name',\r\n                          render: (text) => text || 'Kh√°ch h√†ng ch∆∞a x√°c ƒë·ªãnh'\r\n                        },\r\n                        {\r\n                          title: 'Nh√† cung c·∫•p',\r\n                          dataIndex: 'supplier_name',\r\n                          key: 'supplier_name',\r\n                          render: (text, record) => {\r\n                            if (!text) return <Text type=\"secondary\">Ch∆∞a c√≥ nh√† cung c·∫•p</Text>;\r\n                            return (\r\n                              <div>\r\n                                <div style={{ fontWeight: '500', color: '#1890ff' }}>\r\n                                  üè™ {text}\r\n                                </div>\r\n                                {record.supplier_code && (\r\n                                  <div style={{ fontSize: '11px', color: '#666' }}>\r\n                                    {record.supplier_code}\r\n                                  </div>\r\n                                )}\r\n                              </div>\r\n                            );\r\n                          }\r\n                        },\r\n                        {\r\n                          title: 'Tr·∫°ng th√°i',\r\n                          dataIndex: 'status',\r\n                          key: 'status',\r\n                          render: (status) => {\r\n                            const statusInfo = claimStatuses.find(s => s.value === status);\r\n                            return <Tag color={statusInfo?.color}>{statusInfo?.label || status}</Tag>;\r\n                          }\r\n                        },\r\n                        {\r\n                          title: 'Ng√†y t·∫°o',\r\n                          dataIndex: 'created_at',\r\n                          key: 'created_at',\r\n                          render: (date) => date ? moment(date).format('DD/MM/YYYY HH:mm') : 'N/A'\r\n                        },\r\n                        {\r\n                          title: 'Thao t√°c',\r\n                          key: 'actions',\r\n                          width: 200,\r\n                          fixed: 'right',\r\n                          render: (_, record) => (\r\n                            <Space size=\"small\">\r\n                              {/* Smart Status Actions */}\r\n                              {getSmartActions(record)}\r\n                              \r\n                              {/* View Details */}\r\n                              <Tooltip title=\"Xem l·ªãch s·ª≠ chi ti·∫øt\">\r\n                                <Button \r\n                                  size=\"small\" \r\n                                  icon={<EyeOutlined />} \r\n                                  onClick={() => showWarrantyHistory(record)}\r\n                                  style={{ color: '#1890ff' }}\r\n                                />\r\n                              </Tooltip>\r\n                              \r\n                              {/* Edit */}\r\n                              <Tooltip title=\"Ch·ªânh s·ª≠a\">\r\n                                <Button \r\n                                  size=\"small\" \r\n                                  icon={<EditOutlined />} \r\n                                  onClick={() => showModal(record)}\r\n                                  style={{ color: '#52c41a' }}\r\n                                />\r\n                              </Tooltip>\r\n                              \r\n                              {/* More Actions Dropdown */}\r\n                              <Dropdown\r\n                                menu={{\r\n                                  items: getMoreActions(record),\r\n                                  onClick: ({ key }) => handleMoreAction(key, record)\r\n                                }}\r\n                                trigger={['click']}\r\n                              >\r\n                                <Button size=\"small\" icon={<MoreOutlined />} />\r\n                              </Dropdown>\r\n                            </Space>\r\n                          )\r\n                        }\r\n                      ]}\r\n                      dataSource={claims}\r\n                      rowKey=\"id\"\r\n                      loading={loading}\r\n                      pagination={{\r\n                        pageSize: 10,\r\n                        showSizeChanger: true,\r\n                        showTotal: (total, range) => `${range[0]}-${range[1]} c·ªßa ${total} y√™u c·∫ßu`\r\n                      }}\r\n                      locale={{\r\n                        emptyText: (\r\n                          <Empty\r\n                            image={Empty.PRESENTED_IMAGE_SIMPLE}\r\n                            description=\"Ch∆∞a c√≥ y√™u c·∫ßu b·∫£o h√†nh n√†o\"\r\n                            extra={\r\n                              <Button \r\n                                type=\"primary\" \r\n                                icon={<PlusOutlined />}\r\n                                onClick={() => showModal()}\r\n                              >\r\n                                T·∫°o y√™u c·∫ßu ƒë·∫ßu ti√™n\r\n                              </Button>\r\n                            }\r\n                          />\r\n                        )\r\n                      }}\r\n                    />\r\n                  </Card>\r\n                </div>\r\n              )\r\n            }\r\n          ]}\r\n        />\r\n      </Card>\r\n\r\n      {/* üì± Enhanced Serial Detail Drawer */}\r\n      <Drawer\r\n        title={\r\n          <span>\r\n            <BarcodeOutlined style={{ marginRight: 8 }} />\r\n            Chi ti·∫øt Serial Number\r\n          </span>\r\n        }\r\n        placement=\"right\"\r\n        width={700}\r\n        onClose={() => setSerialDetailDrawer(false)}\r\n        open={serialDetailDrawer}\r\n      >\r\n        {selectedSerial && (\r\n          <div>\r\n            {/* üìã Th√¥ng tin Serial - ENHANCED LAYOUT */}\r\n            <Descriptions \r\n              title={\r\n                <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\r\n                  <BarcodeOutlined style={{ color: '#1890ff' }} />\r\n                  <span>Th√¥ng tin Serial</span>\r\n                </div>\r\n              } \r\n              bordered \r\n              size=\"small\"\r\n              column={2}\r\n              style={{ marginBottom: '24px' }}\r\n            >\r\n              <Descriptions.Item label=\"Serial Number\" span={1}>\r\n                <Text copyable strong style={{ fontSize: '16px', color: '#1890ff' }}>\r\n                  {selectedSerial.serial_number}\r\n                </Text>\r\n              </Descriptions.Item>\r\n              <Descriptions.Item label=\"S·∫£n ph·∫©m\" span={1}>\r\n                <div>\r\n                  <div style={{ fontWeight: 'bold', color: '#262626' }}>{selectedSerial.product_name}</div>\r\n                  <div style={{ color: '#666', fontSize: '12px' }}>SKU: {selectedSerial.product_sku || selectedSerial.sku || 'N/A'}</div>\r\n                </div>\r\n              </Descriptions.Item>\r\n              <Descriptions.Item label=\"Tr·∫°ng th√°i\">\r\n                {getStatusTag(selectedSerial.status)}\r\n              </Descriptions.Item>\r\n              <Descriptions.Item label=\"T√¨nh tr·∫°ng\">\r\n                {getConditionTag(selectedSerial.condition_grade)}\r\n              </Descriptions.Item>\r\n              <Descriptions.Item label=\"V·ªã tr√≠\">\r\n                <Tag icon={<EnvironmentOutlined />} color=\"blue\">\r\n                  {selectedSerial.location || 'HCM'}\r\n                </Tag>\r\n              </Descriptions.Item>\r\n            </Descriptions>\r\n\r\n            {/* üè™ Th√¥ng tin Nh√† cung c·∫•p - ENHANCED LAYOUT */}\r\n            <Descriptions \r\n              title={\r\n                <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\r\n                  <ShopOutlined style={{ color: '#52c41a' }} />\r\n                  <span>Th√¥ng tin Nh√† cung c·∫•p</span>\r\n                </div>\r\n              } \r\n              bordered \r\n              size=\"small\"\r\n              column={2}\r\n              style={{ marginBottom: '24px' }}\r\n            >\r\n              <Descriptions.Item label=\"T√™n nh√† cung c·∫•p\" span={1}>\r\n                <div style={{ fontWeight: 'bold', color: '#1890ff' }}>\r\n                  {selectedSerial.supplier_name || 'Nh√† cung c·∫•p ABC'}\r\n                </div>\r\n              </Descriptions.Item>\r\n              <Descriptions.Item label=\"M√£ nh√† cung c·∫•p\">\r\n                <Text code>{selectedSerial.supplier_code || 'SUP001'}</Text>\r\n              </Descriptions.Item>\r\n              <Descriptions.Item label=\"Ng∆∞·ªùi li√™n h·ªá\">\r\n                <div style={{ display: 'flex', alignItems: 'center', gap: '4px' }}>\r\n                  <UserOutlined style={{ color: '#666' }} />\r\n                  {selectedSerial.supplier_contact || 'Ch∆∞a c√≥ ng∆∞·ªùi li√™n h·ªá'}\r\n                </div>\r\n              </Descriptions.Item>\r\n              <Descriptions.Item label=\"Ng√†y nh·∫≠p\">\r\n                <div style={{ display: 'flex', alignItems: 'center', gap: '4px' }}>\r\n                  <CalendarOutlined style={{ color: '#52c41a' }} />\r\n                  <Text strong>\r\n                    {selectedSerial.import_time_display || \r\n                     (selectedSerial.created_at ? \r\n                       new Date(selectedSerial.created_at).toLocaleString('vi-VN', { timeZone: 'Asia/Ho_Chi_Minh' }) : \r\n                       '08:10 04/07/2025'\r\n                     )\r\n                    }\r\n                  </Text>\r\n                </div>\r\n              </Descriptions.Item>\r\n              <Descriptions.Item label=\"Gi√° nh·∫≠p\" span={2}>\r\n                <Text strong style={{ color: '#f56a00', fontSize: '14px' }}>\r\n                  {selectedSerial.purchase_price ? \r\n                    formatCurrency(selectedSerial.purchase_price) : \r\n                    '120.000 ‚Ç´'\r\n                  }\r\n                </Text>\r\n              </Descriptions.Item>\r\n            </Descriptions>\r\n\r\n            {/* üõ°Ô∏è Th√¥ng tin B·∫£o h√†nh - FIXED LOGIC */}\r\n            <Descriptions \r\n              title={\r\n                <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\r\n                  <SafetyOutlined style={{ color: '#722ed1' }} />\r\n                  <span>Th√¥ng tin B·∫£o h√†nh</span>\r\n                </div>\r\n              } \r\n              bordered \r\n              size=\"small\"\r\n              column={2}\r\n              style={{ marginBottom: '24px' }}\r\n            >\r\n              <Descriptions.Item label=\"Th·ªùi gian b·∫£o h√†nh\" span={1}>\r\n                <Text strong style={{ color: '#722ed1' }}>\r\n                  {selectedSerial.warranty_months_total > 0 ? \r\n                    `${selectedSerial.warranty_months_total} th√°ng` : \r\n                    '12 th√°ng'\r\n                  }\r\n                </Text>\r\n              </Descriptions.Item>\r\n              <Descriptions.Item label=\"Ng√†y b·∫Øt ƒë·∫ßu\">\r\n                <Text>\r\n                  {selectedSerial.warranty_start_date ? \r\n                    new Date(selectedSerial.warranty_start_date).toLocaleDateString('vi-VN') : \r\n                    '4/7/2025'\r\n                  }\r\n                </Text>\r\n              </Descriptions.Item>\r\n              <Descriptions.Item label=\"Ng√†y k·∫øt th√∫c\">\r\n                <Text strong style={{ color: '#1890ff' }}>\r\n                  {selectedSerial.warranty_end_date ? \r\n                    new Date(selectedSerial.warranty_end_date).toLocaleDateString('vi-VN') : \r\n                    '4/7/2026'\r\n                  }\r\n                </Text>\r\n              </Descriptions.Item>\r\n              <Descriptions.Item label=\"Tr·∫°ng th√°i b·∫£o h√†nh\" span={2}>\r\n                <div style={{ display: 'flex', alignItems: 'center', gap: '8px', flexWrap: 'wrap' }}>\r\n                  {/* FIXED: Proper warranty status display */}\r\n                  {selectedSerial.warranty_end_date ? (\r\n                    (() => {\r\n                      const today = new Date();\r\n                      const endDate = new Date(selectedSerial.warranty_end_date);\r\n                      const daysLeft = Math.ceil((endDate - today) / (1000 * 60 * 60 * 24));\r\n                      \r\n                      if (daysLeft > 30) {\r\n                        return (\r\n                          <>\r\n                            <Tag icon={<CheckCircleOutlined />} color=\"green\" style={{ marginBottom: '4px' }}>\r\n                              C√≤n hi·ªáu l·ª±c\r\n                            </Tag>\r\n                            <Text style={{ color: '#52c41a', fontSize: '12px' }}>\r\n                              (C√≤n {daysLeft} ng√†y)\r\n                            </Text>\r\n                          </>\r\n                        );\r\n                      } else if (daysLeft > 0) {\r\n                        return (\r\n                          <>\r\n                            <Tag icon={<WarningOutlined />} color=\"orange\" style={{ marginBottom: '4px' }}>\r\n                              S·∫Øp h·∫øt h·∫°n\r\n                            </Tag>\r\n                            <Text style={{ color: '#faad14', fontSize: '12px' }}>\r\n                              (C√≤n {daysLeft} ng√†y)\r\n                            </Text>\r\n                          </>\r\n                        );\r\n                      } else {\r\n                        return (\r\n                          <>\r\n                            <Tag icon={<ExclamationCircleOutlined />} color=\"red\" style={{ marginBottom: '4px' }}>\r\n                              H·∫øt h·∫°n\r\n                            </Tag>\r\n                            <Text style={{ color: '#ff4d4f', fontSize: '12px' }}>\r\n                              (ƒê√£ h·∫øt h·∫°n {Math.abs(daysLeft)} ng√†y)\r\n                            </Text>\r\n                          </>\r\n                        );\r\n                      }\r\n                    })()\r\n                  ) : (\r\n                    <>\r\n                      <Tag icon={<CheckCircleOutlined />} color=\"green\" style={{ marginBottom: '4px' }}>\r\n                        C√≤n hi·ªáu l·ª±c\r\n                      </Tag>\r\n                      <Text style={{ color: '#52c41a', fontSize: '12px' }}>\r\n                        (C√≤n 364 ng√†y)\r\n                      </Text>\r\n                    </>\r\n                  )}\r\n                </div>\r\n              </Descriptions.Item>\r\n              <Descriptions.Item label=\"Nh√† cung c·∫•p b·∫£o h√†nh\" span={2}>\r\n                <div style={{ display: 'flex', alignItems: 'center', gap: '4px' }}>\r\n                  <ShopOutlined style={{ color: '#1890ff' }} />\r\n                  <Text strong>{selectedSerial.supplier_name || selectedSerial.warranty_provider || 'Nh√† cung c·∫•p ABC'}</Text>\r\n                </div>\r\n              </Descriptions.Item>\r\n            </Descriptions>\r\n\r\n            {/* üí∞ Th√¥ng tin B√°n h√†ng - ENHANCED when sold */}\r\n            {(selectedSerial.sold_date || selectedSerial.sale_info || selectedSerial.status === 'sold') && (\r\n              <Descriptions \r\n                title={\r\n                  <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\r\n                    <ShoppingCartOutlined style={{ color: '#f56a00' }} />\r\n                    <span>Th√¥ng tin B√°n h√†ng</span>\r\n                  </div>\r\n                } \r\n                bordered \r\n                size=\"small\"\r\n                column={2}\r\n                style={{ marginBottom: '24px' }}\r\n              >\r\n                <Descriptions.Item label=\"Ng√†y b√°n\">\r\n                  <div style={{ display: 'flex', alignItems: 'center', gap: '4px' }}>\r\n                    <CalendarOutlined style={{ color: '#52c41a' }} />\r\n                    <Text strong>\r\n                      {selectedSerial.sold_date ? \r\n                        new Date(selectedSerial.sold_date).toLocaleDateString('vi-VN', { timeZone: 'Asia/Ho_Chi_Minh' }) :\r\n                        (selectedSerial.sale_info?.date || '4/7/2025')\r\n                      }\r\n                    </Text>\r\n                  </div>\r\n                </Descriptions.Item>\r\n                <Descriptions.Item label=\"Gi√° b√°n\">\r\n                  <Text strong style={{ color: '#f56a00', fontSize: '14px' }}>\r\n                    {selectedSerial.sold_price ? \r\n                      formatCurrency(selectedSerial.sold_price) :\r\n                      (selectedSerial.sale_info?.price ? \r\n                        formatCurrency(selectedSerial.sale_info.price) : \r\n                        '120.000 ‚Ç´'\r\n                      )\r\n                    }\r\n                  </Text>\r\n                </Descriptions.Item>\r\n                <Descriptions.Item label=\"Kh√°ch h√†ng\" span={2}>\r\n                  <div>\r\n                    <div style={{ fontWeight: 'bold', color: '#1890ff' }}>\r\n                      <UserOutlined style={{ marginRight: '4px' }} />\r\n                      {selectedSerial.customer_name || \r\n                       selectedSerial.sale_info?.customer ||\r\n                       'Nguyen Thanh Nam'\r\n                      }\r\n                    </div>\r\n                    <div style={{ color: '#666', fontSize: '12px', marginTop: '2px' }}>\r\n                      <PhoneOutlined style={{ marginRight: '4px' }} />\r\n                      {selectedSerial.customer_phone || \r\n                       selectedSerial.sale_info?.customer_phone ||\r\n                       '0836768597'\r\n                      }\r\n                    </div>\r\n                  </div>\r\n                </Descriptions.Item>\r\n                <Descriptions.Item label=\"M√£ ƒë∆°n h√†ng\" span={2}>\r\n                  <Text code style={{ fontSize: '13px' }}>\r\n                    {selectedSerial.order_number ||\r\n                     selectedSerial.sale_info?.order_number ||\r\n                     'DH1751618108199'\r\n                    }\r\n                  </Text>\r\n                </Descriptions.Item>\r\n              </Descriptions>\r\n            )}\r\n\r\n            {/* üìù Ghi ch√∫ */}\r\n            <Card \r\n              title={\r\n                <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\r\n                  <FileTextOutlined style={{ color: '#666' }} />\r\n                  <span>Ghi ch√∫</span>\r\n                </div>\r\n              }\r\n              size=\"small\"\r\n              style={{ marginBottom: '16px' }}\r\n            >\r\n              <Text style={{ color: '#666' }}>\r\n                {selectedSerial.notes || 'Ch∆∞a c√≥ ghi ch√∫.'}\r\n              </Text>\r\n            </Card>\r\n\r\n            {/* üé¨ Action Buttons */}\r\n            <div style={{ \r\n              display: 'flex', \r\n              gap: '12px', \r\n              justifyContent: 'center',\r\n              padding: '16px',\r\n              background: '#fafafa',\r\n              borderRadius: '8px',\r\n              marginTop: '16px'\r\n            }}>\r\n              <Button \r\n                type=\"primary\" \r\n                icon={<PlusOutlined />}\r\n                onClick={() => {\r\n                  showModal();\r\n                  setTimeout(() => {\r\n                    form.setFieldsValue({ serial_number: selectedSerial.serial_number });\r\n                    handleSerialAutoFill(selectedSerial.serial_number);\r\n                  }, 100);\r\n                  setSerialDetailDrawer(false);\r\n                }}\r\n                style={{ \r\n                  background: 'linear-gradient(135deg, #52c41a, #1890ff)',\r\n                  border: 'none'\r\n                }}\r\n              >\r\n                T·∫°o y√™u c·∫ßu b·∫£o h√†nh\r\n              </Button>\r\n              <Button \r\n                icon={<HistoryOutlined />}\r\n                onClick={() => {\r\n                  showWarrantyHistory(selectedSerial);\r\n                  setSerialDetailDrawer(false);\r\n                }}\r\n              >\r\n                Xem l·ªãch s·ª≠\r\n              </Button>\r\n              <Button \r\n                icon={<PrinterOutlined />}\r\n                onClick={() => {\r\n                  // Print functionality can be added here\r\n                  message.info('T√≠nh nƒÉng in ƒëang ƒë∆∞·ª£c ph√°t tri·ªÉn');\r\n                }}\r\n              >\r\n                In th√¥ng tin\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </Drawer>\r\n\r\n      {/* ü§ñ Enhanced Create/Edit Warranty Modal with Auto-fill */}\r\n      <Modal\r\n        title={\r\n          <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\r\n            <RobotOutlined style={{ color: '#52c41a' }} />\r\n            <span>{selectedClaim ? 'Ch·ªânh s·ª≠a y√™u c·∫ßu b·∫£o h√†nh' : 'T·∫°o y√™u c·∫ßu b·∫£o h√†nh'}</span>\r\n            <Tag color=\"green\" size=\"small\">AI Auto-fill</Tag>\r\n          </div>\r\n        }\r\n        open={isModalVisible}\r\n        onCancel={() => setIsModalVisible(false)}\r\n        footer={null}\r\n        width={900}\r\n        style={{ top: 50 }}\r\n      >\r\n        <Form form={form} layout=\"vertical\" onFinish={handleSubmit}>\r\n          {/* AI-Enhanced Serial Number Input */}\r\n          <Alert\r\n            message=\"ü§ñ AI Th√¥ng minh: Nh·∫≠p Serial Number v√† b·∫•m Enter ƒë·ªÉ t·ª± ƒë·ªông ƒëi·ªÅn to√†n b·ªô th√¥ng tin!\"\r\n            type=\"info\"\r\n            showIcon\r\n            style={{ marginBottom: 16 }}\r\n          />\r\n          \r\n          <Form.Item \r\n            label={\r\n              <span style={{ fontWeight: 'bold', color: '#1890ff' }}>\r\n                <BarcodeOutlined style={{ marginRight: '4px' }} />\r\n                Serial Number\r\n              </span>\r\n            } \r\n            name=\"serial_number\" \r\n            rules={[{ required: true, message: 'Vui l√≤ng nh·∫≠p Serial Number' }]}\r\n          >\r\n            <Input.Group compact>\r\n              <AutoComplete\r\n                options={serialSuggestions}\r\n                onSearch={fetchSerialSuggestions}\r\n                placeholder=\"Nh·∫≠p Serial Number (VD: SN24, SN12341234...)\"\r\n                size=\"large\"\r\n                style={{ width: 'calc(100% - 120px)' }}\r\n                onPressEnter={(e) => handleSerialAutoFill(e.target.value)}\r\n                onSelect={(value) => handleSerialAutoFill(value)}\r\n                suffix={\r\n                  autoFillLoading ? (\r\n                    <Spin size=\"small\" />\r\n                  ) : (\r\n                    <Tooltip title=\"B·∫•m Enter ƒë·ªÉ auto-fill\">\r\n                      <ThunderboltOutlined style={{ color: '#52c41a' }} />\r\n                    </Tooltip>\r\n                  )\r\n                }\r\n              />\r\n              <Button\r\n                type=\"primary\"\r\n                size=\"large\"\r\n                icon={<BarcodeOutlined />}\r\n                onClick={() => openQRScanner('warranty')}\r\n                style={{\r\n                  width: '120px',\r\n                  background: '#52c41a',\r\n                  borderColor: '#52c41a'\r\n                }}\r\n              >\r\n                üì± Qu√©t\r\n              </Button>\r\n            </Input.Group>\r\n          </Form.Item>\r\n\r\n          <Row gutter={16}>\r\n            <Col span={12}>\r\n              <Form.Item label=\"S·∫£n ph·∫©m\" name=\"product_id\">\r\n                <Select \r\n                  placeholder=\"Ch·ªçn s·∫£n ph·∫©m\" \r\n                  allowClear\r\n                  showSearch\r\n                  filterOption={(input, option) =>\r\n                    option.children.toLowerCase().indexOf(input.toLowerCase()) >= 0\r\n                  }\r\n                >\r\n                  {products.map(product => (\r\n                    <Option key={product.id} value={product.id}>{product.name}</Option>\r\n                  ))}\r\n                </Select>\r\n              </Form.Item>\r\n            </Col>\r\n            <Col span={12}>\r\n              <Form.Item label=\"Kh√°ch h√†ng\" name=\"customer_id\">\r\n                <Select \r\n                  placeholder=\"Ch·ªçn kh√°ch h√†ng\" \r\n                  allowClear\r\n                  showSearch\r\n                  filterOption={(input, option) =>\r\n                    option.children.toLowerCase().indexOf(input.toLowerCase()) >= 0\r\n                  }\r\n                >\r\n                  {customers.map(customer => (\r\n                    <Option key={customer.id} value={customer.id}>{customer.name}</Option>\r\n                  ))}\r\n                </Select>\r\n              </Form.Item>\r\n            </Col>\r\n          </Row>\r\n\r\n          <Row gutter={16}>\r\n            <Col span={8}>\r\n              <Form.Item label=\"Nh√† cung c·∫•p\" name=\"supplier_id\">\r\n                <Select placeholder=\"Ch·ªçn nh√† cung c·∫•p\" allowClear showSearch\r\n                  filterOption={(input, option) =>\r\n                    option.children.toLowerCase().indexOf(input.toLowerCase()) >= 0\r\n                  }\r\n                >\r\n                  {suppliers.map(supplier => (\r\n                    <Option key={supplier.id} value={supplier.id}>\r\n                      üè™ {supplier.name}\r\n                    </Option>\r\n                  ))}\r\n                </Select>\r\n              </Form.Item>\r\n            </Col>\r\n            <Col span={8}>\r\n              <Form.Item label=\"K·ªπ thu·∫≠t vi√™n\" name=\"assigned_technician_id\">\r\n                <Select placeholder=\"Ch·ªçn k·ªπ thu·∫≠t vi√™n\" allowClear>\r\n                  {users.map(user => (\r\n                    <Option key={user.id} value={user.id}>{user.full_name}</Option>\r\n                  ))}\r\n                </Select>\r\n              </Form.Item>\r\n            </Col>\r\n            <Col span={8}>\r\n              <Form.Item label=\"∆Øu ti√™n\" name=\"priority\">\r\n                <Select placeholder=\"Ch·ªçn ∆∞u ti√™n\" defaultValue=\"normal\">\r\n                  {priorities.map(priority => (\r\n                    <Option key={priority.value} value={priority.value}>\r\n                      <Tag color={priority.color}>{priority.label}</Tag>\r\n                    </Option>\r\n                  ))}\r\n                </Select>\r\n              </Form.Item>\r\n            </Col>\r\n          </Row>\r\n\r\n          <Form.Item label=\"M√¥ t·∫£ v·∫•n ƒë·ªÅ\" name=\"issue_description\" rules={[{ required: true }]}>\r\n            <Input.TextArea \r\n              rows={4} \r\n              placeholder=\"M√¥ t·∫£ chi ti·∫øt v·∫•n ƒë·ªÅ c·∫ßn b·∫£o h√†nh...\"\r\n              showCount\r\n              maxLength={500}\r\n            />\r\n          </Form.Item>\r\n\r\n          <Row gutter={16}>\r\n            <Col span={8}>\r\n              <Form.Item label=\"Lo·∫°i y√™u c·∫ßu\" name=\"claim_type\">\r\n                <Select placeholder=\"Ch·ªçn lo·∫°i\" defaultValue=\"repair\">\r\n                  {claimTypes.map(type => (\r\n                    <Option key={type.value} value={type.value}>{type.label}</Option>\r\n                  ))}\r\n                </Select>\r\n              </Form.Item>\r\n            </Col>\r\n            <Col span={8}>\r\n              <Form.Item label=\"Tr·∫°ng th√°i\" name=\"status\">\r\n                <Select placeholder=\"Ch·ªçn tr·∫°ng th√°i\" defaultValue=\"pending\">\r\n                  {claimStatuses.map(status => (\r\n                    <Option key={status.value} value={status.value}>\r\n                      <Tag color={status.color}>{status.label}</Tag>\r\n                    </Option>\r\n                  ))}\r\n                </Select>\r\n              </Form.Item>\r\n            </Col>\r\n            <Col span={8}>\r\n              <Form.Item label=\"Ng√†y d·ª± ki·∫øn ho√†n th√†nh\" name=\"expected_completion_date\">\r\n                <DatePicker \r\n                  style={{ width: '100%' }}\r\n                  placeholder=\"Ch·ªçn ng√†y\"\r\n                  disabledDate={(current) => current && current < moment().endOf('day')}\r\n                />\r\n              </Form.Item>\r\n            </Col>\r\n          </Row>\r\n\r\n          {/* Warranty Information */}\r\n          <Divider orientation=\"left\">\r\n            <span style={{ color: '#52c41a' }}>\r\n              <SafetyOutlined style={{ marginRight: '4px' }} />\r\n              Th√¥ng tin B·∫£o h√†nh\r\n            </span>\r\n          </Divider>\r\n          \r\n          <Row gutter={16}>\r\n            <Col span={12}>\r\n              <Form.Item label=\"Ng√†y b·∫Øt ƒë·∫ßu b·∫£o h√†nh\" name=\"warranty_start_date\">\r\n                <DatePicker style={{ width: '100%' }} placeholder=\"Ch·ªçn ng√†y b·∫Øt ƒë·∫ßu\" />\r\n              </Form.Item>\r\n            </Col>\r\n            <Col span={12}>\r\n              <Form.Item label=\"Ng√†y k·∫øt th√∫c b·∫£o h√†nh\" name=\"warranty_end_date\">\r\n                <DatePicker style={{ width: '100%' }} placeholder=\"Ch·ªçn ng√†y k·∫øt th√∫c\" />\r\n              </Form.Item>\r\n            </Col>\r\n          </Row>\r\n\r\n          <Form.Item style={{ marginTop: '24px', textAlign: 'right' }}>\r\n            <Space>\r\n              <Button onClick={() => setIsModalVisible(false)} size=\"large\">\r\n                H·ªßy\r\n              </Button>\r\n              <Button \r\n                type=\"primary\" \r\n                htmlType=\"submit\"\r\n                size=\"large\"\r\n                icon={selectedClaim ? <EditOutlined /> : <PlusOutlined />}\r\n                style={{ \r\n                  background: 'linear-gradient(135deg, #52c41a, #1890ff)',\r\n                  border: 'none'\r\n                }}\r\n              >\r\n                {selectedClaim ? 'C·∫≠p nh·∫≠t' : 'T·∫°o m·ªõi'}\r\n              </Button>\r\n            </Space>\r\n          </Form.Item>\r\n        </Form>\r\n      </Modal>\r\n\r\n      {/* üé¨ Warranty History Modal */}\r\n      <Modal\r\n        title={\r\n          <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\r\n            <HistoryOutlined style={{ color: '#1890ff' }} />\r\n            <span>L·ªãch s·ª≠ B·∫£o h√†nh</span>\r\n            {selectedWarrantyRecord && (\r\n              <Tag color=\"blue\">{selectedWarrantyRecord.serial_number}</Tag>\r\n            )}\r\n          </div>\r\n        }\r\n        open={historyModalVisible}\r\n        onCancel={() => setHistoryModalVisible(false)}\r\n        footer={null}\r\n        width={900}\r\n        style={{ top: 50 }}\r\n      >\r\n        {selectedWarrantyRecord && (\r\n          <div>\r\n            {/* Warranty Claim Overview */}\r\n            <Alert\r\n              message=\"üìã Th√¥ng tin Y√™u c·∫ßu B·∫£o h√†nh\"\r\n              description={\r\n                <div style={{ marginTop: '8px' }}>\r\n                  <Row gutter={16}>\r\n                    <Col span={8}>\r\n                      <strong>Serial Number:</strong> {selectedWarrantyRecord.serial_number}\r\n                    </Col>\r\n                    <Col span={8}>\r\n                      <strong>S·∫£n ph·∫©m:</strong> {selectedWarrantyRecord.product_name || 'N/A'}\r\n                    </Col>\r\n                    <Col span={8}>\r\n                      <strong>Kh√°ch h√†ng:</strong> {selectedWarrantyRecord.customer_name || 'N/A'}\r\n                    </Col>\r\n                  </Row>\r\n                  <Row gutter={16} style={{ marginTop: '8px' }}>\r\n                    <Col span={8}>\r\n                      <strong>Tr·∫°ng th√°i hi·ªán t·∫°i:</strong> {' '}\r\n                      <Tag color={claimStatuses.find(s => s.value === selectedWarrantyRecord.status)?.color}>\r\n                        {claimStatuses.find(s => s.value === selectedWarrantyRecord.status)?.label}\r\n                      </Tag>\r\n                    </Col>\r\n                    <Col span={8}>\r\n                      <strong>Nh√† cung c·∫•p:</strong> {selectedWarrantyRecord.supplier_name || 'N/A'}\r\n                    </Col>\r\n                    <Col span={8}>\r\n                      <strong>Ng√†y t·∫°o:</strong> {formatDate(selectedWarrantyRecord.created_at)}\r\n                    </Col>\r\n                  </Row>\r\n                </div>\r\n              }\r\n              type=\"info\"\r\n              showIcon\r\n              style={{ marginBottom: '24px' }}\r\n            />\r\n\r\n            {/* Serial & Product Details */}\r\n            <Row gutter={16} style={{ marginBottom: '24px' }}>\r\n              <Col span={12}>\r\n                <Card size=\"small\" title=\"üì¶ Th√¥ng tin S·∫£n ph·∫©m\">\r\n                  <Descriptions size=\"small\" column={1}>\r\n                    <Descriptions.Item label=\"T√™n s·∫£n ph·∫©m\">\r\n                      {selectedWarrantyRecord.product_name || 'N/A'}\r\n                    </Descriptions.Item>\r\n                    <Descriptions.Item label=\"Serial Number\">\r\n                      <Text copyable strong style={{ color: '#1890ff' }}>\r\n                        {selectedWarrantyRecord.serial_number}\r\n                      </Text>\r\n                    </Descriptions.Item>\r\n                    <Descriptions.Item label=\"Nh√† cung c·∫•p\">\r\n                      üè™ {selectedWarrantyRecord.supplier_name || 'N/A'}\r\n                    </Descriptions.Item>\r\n                    {/* üÜï NEW: Ng√†y b√°n information */}\r\n                    {selectedWarrantyRecord.sold_date && (\r\n                      <Descriptions.Item label=\"Ng√†y b√°n\">\r\n                        <div style={{ color: '#52c41a' }}>\r\n                          üìÖ {formatDate(selectedWarrantyRecord.sold_date)}\r\n                        </div>\r\n                      </Descriptions.Item>\r\n                    )}\r\n                    <Descriptions.Item label=\"B·∫£o h√†nh\">\r\n                      {selectedWarrantyRecord.warranty_end_date ? (\r\n                        <div>\r\n                          <div style={{ \r\n                            color: '#52c41a', \r\n                            fontWeight: 'bold',\r\n                            display: 'flex',\r\n                            alignItems: 'center',\r\n                            gap: '4px'\r\n                          }}>\r\n                            ‚úÖ C√≤n h·∫°n b·∫£o h√†nh\r\n                          </div>\r\n                          <div style={{ \r\n                            fontSize: '12px', \r\n                            color: '#666',\r\n                            marginTop: '4px' \r\n                          }}>\r\n                            ƒê·∫øn {formatDate(selectedWarrantyRecord.warranty_end_date)}\r\n                          </div>\r\n                          {selectedWarrantyRecord.warranty_days_left > 0 && (\r\n                            <div style={{ \r\n                              fontSize: '11px', \r\n                              color: '#1890ff',\r\n                              marginTop: '2px' \r\n                            }}>\r\n                              (C√≤n {selectedWarrantyRecord.warranty_days_left} ng√†y)\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n                      ) : (\r\n                        <div style={{ color: '#ff4d4f' }}>\r\n                          ‚ùå Ch∆∞a c√≥ b·∫£o h√†nh\r\n                        </div>\r\n                      )}\r\n                    </Descriptions.Item>\r\n                  </Descriptions>\r\n                </Card>\r\n              </Col>\r\n              <Col span={12}>\r\n                <Card size=\"small\" title=\"üë§ Th√¥ng tin Kh√°ch h√†ng\">\r\n                  <Descriptions size=\"small\" column={1}>\r\n                    <Descriptions.Item label=\"T√™n kh√°ch h√†ng\">\r\n                      {selectedWarrantyRecord.customer_name || 'N/A'}\r\n                    </Descriptions.Item>\r\n                    <Descriptions.Item label=\"ƒêi·ªán tho·∫°i\">\r\n                      {selectedWarrantyRecord.customer_phone ? (\r\n                        <span>\r\n                          <PhoneOutlined style={{ marginRight: '4px', color: '#52c41a' }} />\r\n                          {selectedWarrantyRecord.customer_phone}\r\n                        </span>\r\n                      ) : 'N/A'}\r\n                    </Descriptions.Item>\r\n                    <Descriptions.Item label=\"V·∫•n ƒë·ªÅ\">\r\n                      {selectedWarrantyRecord.issue_description || 'N/A'}\r\n                    </Descriptions.Item>\r\n                    <Descriptions.Item label=\"Lo·∫°i y√™u c·∫ßu\">\r\n                      <Tag color=\"blue\">\r\n                        {claimTypes.find(t => t.value === selectedWarrantyRecord.claim_type)?.label || selectedWarrantyRecord.claim_type}\r\n                      </Tag>\r\n                    </Descriptions.Item>\r\n                  </Descriptions>\r\n                </Card>\r\n              </Col>\r\n            </Row>\r\n\r\n            {/* Timeline History */}\r\n            <Card title=\"üìÖ L·ªãch s·ª≠ X·ª≠ l√Ω\" style={{ marginBottom: '16px' }}>\r\n              <Spin spinning={historyLoading}>\r\n                {warrantyHistory.length > 0 ? (\r\n                  <Timeline\r\n                    items={warrantyHistory.map((item, index) => ({\r\n                      dot: getTimelineDot(item.status),\r\n                      children: (\r\n                        <div key={item.id}>\r\n                          <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n                            <strong style={{ fontSize: '14px', color: '#1890ff' }}>\r\n                              {item.action}\r\n                            </strong>\r\n                            <div style={{ fontSize: '12px', color: '#666' }}>\r\n                              {item.timestamp}\r\n                            </div>\r\n                          </div>\r\n                          <div style={{ margin: '4px 0', color: '#666' }}>\r\n                            üë§ Ng∆∞·ªùi th·ª±c hi·ªán: <strong>{item.user}</strong>\r\n                          </div>\r\n                          <div style={{ margin: '4px 0' }}>\r\n                            {item.details}\r\n                          </div>\r\n                          {item.notes && (\r\n                            <div style={{ \r\n                              margin: '8px 0', \r\n                              padding: '8px 12px', \r\n                              background: '#f6f8fa', \r\n                              borderRadius: '6px',\r\n                              border: '1px solid #e1e4e8',\r\n                              fontSize: '13px'\r\n                            }}>\r\n                              üí¨ <strong>Ghi ch√∫:</strong> {item.notes}\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n                      )\r\n                    }))}\r\n                  />\r\n                ) : (\r\n                  <Empty \r\n                    image={Empty.PRESENTED_IMAGE_SIMPLE}\r\n                    description=\"Ch∆∞a c√≥ l·ªãch s·ª≠ x·ª≠ l√Ω\"\r\n                  />\r\n                )}\r\n              </Spin>\r\n            </Card>\r\n\r\n            {/* Action Buttons */}\r\n            <div style={{ textAlign: 'center', marginTop: '24px' }}>\r\n              <Space size=\"large\">\r\n                <Button \r\n                  icon={<EditOutlined />}\r\n                  onClick={() => {\r\n                    setHistoryModalVisible(false);\r\n                    showModal(selectedWarrantyRecord);\r\n                  }}\r\n                  style={{ minWidth: '120px' }}\r\n                >\r\n                  Ch·ªânh s·ª≠a\r\n                </Button>\r\n                <Button \r\n                  icon={<PrinterOutlined />}\r\n                  onClick={() => window.print()}\r\n                  style={{ minWidth: '120px' }}\r\n                >\r\n                  In b√°o c√°o\r\n                </Button>\r\n                <Button \r\n                  icon={<DownloadOutlined />}\r\n                  onClick={() => message.info('T√≠nh nƒÉng xu·∫•t file s·∫Ω ƒë∆∞·ª£c ph√°t tri·ªÉn')}\r\n                  style={{ minWidth: '120px' }}\r\n                >\r\n                  Xu·∫•t file\r\n                </Button>\r\n              </Space>\r\n            </div>\r\n          </div>\r\n        )}\r\n             </Modal>\r\n\r\n      {/* üì± QR Scanner Modal */}\r\n      <QRScanner\r\n        visible={qrScannerVisible}\r\n        onClose={() => setQrScannerVisible(false)}\r\n        onScan={handleQRScan}\r\n        title={\r\n          scannerMode === 'warranty'\r\n            ? 'Qu√©t Serial ƒë·ªÉ T·∫°o Y√™u c·∫ßu'\r\n            : 'Qu√©t Serial ƒë·ªÉ T√¨m ki·∫øm'\r\n        }\r\n        placeholder={\r\n          scannerMode === 'warranty'\r\n            ? 'ƒê∆∞a camera v√†o m√£ QR/Barcode ƒë·ªÉ t·ª± ƒë·ªông ƒëi·ªÅn th√¥ng tin.'\r\n            : 'ƒê∆∞a camera v√†o m√£ QR/Barcode ƒë·ªÉ t√¨m ki·∫øm th√¥ng tin s·∫£n ph·∫©m.'\r\n        }\r\n      />\r\n       </div>\r\n     </div>\r\n   );\r\n };\r\n\r\nexport default WarrantyPage; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}