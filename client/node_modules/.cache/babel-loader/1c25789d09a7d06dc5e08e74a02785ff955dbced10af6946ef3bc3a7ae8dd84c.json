{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Card,Table,Button,Input,Space,Modal,Form,message,Row,Col,Statistic,Tag,Tooltip,Popconfirm,Drawer,Typography,Avatar}from'antd';import{PlusOutlined,SearchOutlined,EditOutlined,DeleteOutlined,ShopOutlined,PhoneOutlined,MailOutlined,HomeOutlined,CreditCardOutlined,EyeOutlined,BankOutlined,UserOutlined,ContactsOutlined}from'@ant-design/icons';import api,{suppliersAPI,serialsAPI,formatCurrency,formatDate}from'../services/api';import SupplierFormModal from'../components/SupplierFormModal';import{toast}from'sonner';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const{Search}=Input;const{Text}=Typography;const SuppliersPage=()=>{const[suppliers,setSuppliers]=useState([]);const[loading,setLoading]=useState(false);const[isModalVisible,setIsModalVisible]=useState(false);const[isDetailDrawerVisible,setIsDetailDrawerVisible]=useState(false);const[editingSupplier,setEditingSupplier]=useState(null);const[selectedSupplier,setSelectedSupplier]=useState(null);const[searchText,setSearchText]=useState('');const[stats,setStats]=useState({total:0,totalDebt:0,totalCreditLimit:0});const[supplierProducts,setSupplierProducts]=useState([]);const[supplierProductsLoading,setSupplierProductsLoading]=useState(false);const[isProductsDrawerVisible,setIsProductsDrawerVisible]=useState(false);const[form]=Form.useForm();useEffect(()=>{fetchSuppliers();},[searchText]);const fetchSuppliers=async()=>{try{setLoading(true);const response=await suppliersAPI.getAll({search:searchText});if(response.data.success){setSuppliers(response.data.data);calculateStats(response.data.data);}}catch(error){toast.error('Lỗi khi tải danh sách nhà cung cấp');console.error('Error fetching suppliers:',error);}finally{setLoading(false);}};const calculateStats=supplierData=>{const stats={total:supplierData.length,totalDebt:supplierData.reduce((sum,s)=>sum+(s.total_debt||0),0),totalCreditLimit:supplierData.reduce((sum,s)=>sum+(s.credit_limit||0),0)};setStats(stats);};const showModal=function(){let supplier=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;setEditingSupplier(supplier);setIsModalVisible(true);if(supplier){form.setFieldsValue(supplier);}else{form.resetFields();}};const handleCancel=()=>{setIsModalVisible(false);setEditingSupplier(null);form.resetFields();};const handleSubmit=async values=>{try{if(editingSupplier){await suppliersAPI.update(editingSupplier.id,values);toast.success('Cập nhật nhà cung cấp thành công');}else{await suppliersAPI.create(values);toast.success('Tạo nhà cung cấp thành công');}handleCancel();fetchSuppliers();}catch(error){toast.error(\"L\\u1ED7i khi \".concat(editingSupplier?'cập nhật':'tạo',\" nh\\xE0 cung c\\u1EA5p\"));console.error('Error saving supplier:',error);}};const handleDelete=async id=>{try{await suppliersAPI.delete(id);toast.success('Xóa nhà cung cấp thành công');fetchSuppliers();}catch(error){toast.error('Lỗi khi xóa nhà cung cấp');console.error('Error deleting supplier:',error);}};const showSupplierDetail=async supplier=>{try{const response=await suppliersAPI.getById(supplier.id);if(response.data.success){setSelectedSupplier(response.data.data);setIsDetailDrawerVisible(true);}}catch(error){toast.error('Lỗi khi tải thông tin nhà cung cấp');}};const showSupplierProducts=async supplier=>{try{setSupplierProductsLoading(true);setSelectedSupplier(supplier);setIsProductsDrawerVisible(true);console.log(\"\\uD83D\\uDD0D Loading products for supplier: \".concat(supplier.name,\" (ID: \").concat(supplier.id,\")\"));// NEW: Use dedicated endpoint for supplier products\ntry{const response=await api.get(\"/suppliers/\".concat(supplier.id,\"/products\"));if(response.data.success){console.log(\"\\u2705 Found \".concat(response.data.data.length,\" products from supplier API\"));setSupplierProducts(response.data.data);if(response.data.data.length>0){toast.success(\"\\uD83C\\uDFAF T\\xECm th\\u1EA5y \".concat(response.data.data.length,\" s\\u1EA3n ph\\u1EA9m t\\u1EEB nh\\xE0 cung c\\u1EA5p \\\"\").concat(supplier.name,\"\\\"\"));}else{toast.warning(\"\\u26A0\\uFE0F Nh\\xE0 cung c\\u1EA5p \\\"\".concat(supplier.name,\"\\\" ch\\u01B0a c\\xF3 s\\u1EA3n ph\\u1EA9m n\\xE0o trong h\\u1EC7 th\\u1ED1ng\"));}return;// Exit early if API call successful\n}}catch(apiError){console.warn('Supplier products API failed, falling back to search methods:',apiError);}// FALLBACK: Use search methods if API fails\nconst allProducts=[];// Method 1: Search serials by supplier name\ntry{const serialsResponse=await api.get('/serials/search',{params:{q:supplier.name,status:'all',limit:1000}});if(serialsResponse.data.success){console.log(\"\\uD83D\\uDCE6 Found \".concat(serialsResponse.data.data.length,\" serials from search\"));allProducts.push(...serialsResponse.data.data);}}catch(error){console.warn('Method 1 failed:',error);}// Method 2: Search by supplier code if no results\nif(supplier.code&&allProducts.length===0){try{const serialsByCodeResponse=await api.get('/serials/search',{params:{q:supplier.code,status:'all',limit:1000}});if(serialsByCodeResponse.data.success){console.log(\"\\uD83D\\uDCE6 Found \".concat(serialsByCodeResponse.data.data.length,\" serials by code\"));allProducts.push(...serialsByCodeResponse.data.data);}}catch(error){console.warn('Method 2 failed:',error);}}// Đã loại bỏ mockProducts, allProducts.push(...mockProducts), toast.info demo data. Chỉ giữ lại logic lấy dữ liệu thật từ API.\n// Remove duplicates and set results\nconst uniqueProducts=allProducts.filter((product,index,self)=>index===self.findIndex(p=>p.serial_number===product.serial_number));console.log(\"\\u2705 Final result: \".concat(uniqueProducts.length,\" unique products for supplier \").concat(supplier.name));setSupplierProducts(uniqueProducts);if(uniqueProducts.length>0){toast.success(\"\\uD83C\\uDFAF T\\xECm th\\u1EA5y \".concat(uniqueProducts.length,\" s\\u1EA3n ph\\u1EA9m t\\u1EEB nh\\xE0 cung c\\u1EA5p \\\"\").concat(supplier.name,\"\\\"\"));}else{toast.warning(\"\\u26A0\\uFE0F Nh\\xE0 cung c\\u1EA5p \\\"\".concat(supplier.name,\"\\\" ch\\u01B0a c\\xF3 s\\u1EA3n ph\\u1EA9m n\\xE0o ho\\u1EB7c ch\\u01B0a c\\xF3 d\\u1EEF li\\u1EC7u trong h\\u1EC7 th\\u1ED1ng\"));}}catch(error){console.error('Error fetching supplier products:',error);setSupplierProducts([]);toast.error('Lỗi khi tải danh sách sản phẩm của nhà cung cấp');}finally{setSupplierProductsLoading(false);}};const columns=[{title:'Mã NCC',dataIndex:'code',key:'code',width:80,fixed:'left',render:text=>/*#__PURE__*/_jsx(Text,{strong:true,style:{color:'#1890ff'},children:text})},{title:'Tên nhà cung cấp',dataIndex:'name',key:'name',width:200,fixed:'left',render:text=>/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center'},children:[/*#__PURE__*/_jsx(Avatar,{size:\"small\",icon:/*#__PURE__*/_jsx(ShopOutlined,{}),style:{backgroundColor:'#f0f0f0',color:'#1890ff',marginRight:8}}),/*#__PURE__*/_jsx(Text,{strong:true,style:{fontSize:'13px'},children:text})]})},{title:'Người liên hệ',dataIndex:'contact_person',key:'contact_person',width:140,render:text=>/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'12px'},children:text?/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center'},children:[/*#__PURE__*/_jsx(UserOutlined,{style:{marginRight:4,color:'#666'}}),/*#__PURE__*/_jsx(Text,{ellipsis:true,style:{maxWidth:'100px'},children:text})]}):/*#__PURE__*/_jsx(Text,{type:\"secondary\",style:{fontSize:'11px'},children:\"Ch\\u01B0a c\\xF3\"})})},{title:'Liên hệ',key:'contact_info',width:160,render:(_,record)=>/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'11px',lineHeight:'1.2'},children:[record.phone&&/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',marginBottom:2,color:'#666'},children:[/*#__PURE__*/_jsx(PhoneOutlined,{style:{marginRight:4,fontSize:'10px'}}),/*#__PURE__*/_jsx(Text,{ellipsis:true,style:{maxWidth:'110px',fontSize:'11px'},children:record.phone})]}),record.email&&/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',color:'#666'},children:[/*#__PURE__*/_jsx(MailOutlined,{style:{marginRight:4,fontSize:'10px'}}),/*#__PURE__*/_jsx(Text,{ellipsis:true,style:{maxWidth:'110px',fontSize:'11px'},children:record.email})]}),!record.phone&&!record.email&&/*#__PURE__*/_jsx(Text,{type:\"secondary\",style:{fontSize:'11px'},children:\"Ch\\u01B0a c\\xF3\"})]})},{title:'Địa chỉ',key:'address_info',width:180,render:(_,record)=>/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'11px',lineHeight:'1.3'},children:[record.address&&/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:2,color:'#333'},children:/*#__PURE__*/_jsx(Text,{ellipsis:true,style:{maxWidth:'150px',fontSize:'11px'},children:record.address})}),record.city&&/*#__PURE__*/_jsxs(\"div\",{style:{color:'#666'},children:[/*#__PURE__*/_jsx(HomeOutlined,{style:{marginRight:4,fontSize:'10px'}}),/*#__PURE__*/_jsx(Text,{style:{fontSize:'11px'},children:record.city})]}),!record.address&&!record.city&&/*#__PURE__*/_jsx(Text,{type:\"secondary\",style:{fontSize:'11px'},children:\"Ch\\u01B0a c\\xF3\"})]})},{title:'Công nợ',dataIndex:'total_debt',key:'total_debt',width:100,align:'right',render:debt=>/*#__PURE__*/_jsx(\"div\",{style:{textAlign:'right'},children:/*#__PURE__*/_jsx(Text,{strong:true,style:{color:debt>0?'#ff4d4f':'#52c41a',fontSize:'12px'},children:formatCurrency(debt||0)})}),sorter:(a,b)=>(a.total_debt||0)-(b.total_debt||0)},{title:'Hạn mức',dataIndex:'credit_limit',key:'credit_limit',width:100,align:'right',render:limit=>/*#__PURE__*/_jsx(\"div\",{style:{textAlign:'right'},children:/*#__PURE__*/_jsx(Text,{style:{color:'#1890ff',fontSize:'12px'},children:formatCurrency(limit||0)})})},{title:'Thanh toán',dataIndex:'payment_terms',key:'payment_terms',width:100,render:terms=>/*#__PURE__*/_jsx(Tag,{color:\"blue\",style:{fontSize:'11px',margin:0,padding:'2px 6px',lineHeight:'1.2'},children:terms||'Không xác định'})},{title:'Thao tác',key:'actions',width:120,fixed:'right',render:(_,record)=>/*#__PURE__*/_jsxs(Space,{size:\"small\",children:[/*#__PURE__*/_jsx(Tooltip,{title:\"Xem chi ti\\u1EBFt nh\\xE0 cung c\\u1EA5p\",children:/*#__PURE__*/_jsx(Button,{type:\"text\",size:\"small\",icon:/*#__PURE__*/_jsx(EyeOutlined,{}),onClick:()=>showSupplierDetail(record),style:{padding:'2px 4px'}})}),/*#__PURE__*/_jsx(Tooltip,{title:\"Xem s\\u1EA3n ph\\u1EA9m \\u0111\\xE3 cung c\\u1EA5p\",children:/*#__PURE__*/_jsx(Button,{type:\"text\",size:\"small\",icon:/*#__PURE__*/_jsx(ShopOutlined,{}),onClick:()=>showSupplierProducts(record),style:{padding:'2px 4px',color:'#52c41a'}})}),/*#__PURE__*/_jsx(Tooltip,{title:\"Ch\\u1EC9nh s\\u1EEDa\",children:/*#__PURE__*/_jsx(Button,{type:\"text\",size:\"small\",icon:/*#__PURE__*/_jsx(EditOutlined,{}),onClick:()=>showModal(record),style:{padding:'2px 4px',color:'#1890ff'}})}),/*#__PURE__*/_jsx(Popconfirm,{title:\"B\\u1EA1n c\\xF3 ch\\u1EAFc ch\\u1EAFn mu\\u1ED1n x\\xF3a nh\\xE0 cung c\\u1EA5p n\\xE0y?\",onConfirm:()=>handleDelete(record.id),okText:\"C\\xF3\",cancelText:\"Kh\\xF4ng\",placement:\"topRight\",children:/*#__PURE__*/_jsx(Tooltip,{title:\"X\\xF3a\",children:/*#__PURE__*/_jsx(Button,{type:\"text\",danger:true,size:\"small\",icon:/*#__PURE__*/_jsx(DeleteOutlined,{}),style:{padding:'2px 4px'}})})})]})}];return/*#__PURE__*/_jsxs(\"div\",{style:{padding:'20px'},children:[/*#__PURE__*/_jsxs(Row,{gutter:[16,16],style:{marginBottom:20},children:[/*#__PURE__*/_jsx(Col,{xs:24,sm:8,children:/*#__PURE__*/_jsx(Card,{size:\"small\",style:{height:'100%'},children:/*#__PURE__*/_jsx(Statistic,{title:\"T\\u1ED5ng nh\\xE0 cung c\\u1EA5p\",value:stats.total,prefix:/*#__PURE__*/_jsx(ShopOutlined,{}),valueStyle:{color:'#1890ff',fontSize:'20px'}})})}),/*#__PURE__*/_jsx(Col,{xs:24,sm:8,children:/*#__PURE__*/_jsx(Card,{size:\"small\",style:{height:'100%'},children:/*#__PURE__*/_jsx(Statistic,{title:\"T\\u1ED5ng c\\xF4ng n\\u1EE3\",value:stats.totalDebt,formatter:value=>formatCurrency(value),prefix:/*#__PURE__*/_jsx(CreditCardOutlined,{}),valueStyle:{color:'#ff4d4f',fontSize:'20px'}})})}),/*#__PURE__*/_jsx(Col,{xs:24,sm:8,children:/*#__PURE__*/_jsx(Card,{size:\"small\",style:{height:'100%'},children:/*#__PURE__*/_jsx(Statistic,{title:\"T\\u1ED5ng h\\u1EA1n m\\u1EE9c\",value:stats.totalCreditLimit,formatter:value=>formatCurrency(value),prefix:/*#__PURE__*/_jsx(BankOutlined,{}),valueStyle:{color:'#52c41a',fontSize:'20px'}})})})]}),/*#__PURE__*/_jsxs(Card,{title:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center'},children:[/*#__PURE__*/_jsx(ContactsOutlined,{style:{marginRight:8}}),\"Qu\\u1EA3n l\\xFD nh\\xE0 cung c\\u1EA5p\"]}),size:\"small\",children:[/*#__PURE__*/_jsxs(Row,{gutter:[16,16],style:{marginBottom:16},children:[/*#__PURE__*/_jsx(Col,{xs:24,sm:16,md:18,children:/*#__PURE__*/_jsx(Search,{placeholder:\"T\\xECm theo t\\xEAn, m\\xE3 NCC, ng\\u01B0\\u1EDDi li\\xEAn h\\u1EC7...\",value:searchText,onChange:e=>setSearchText(e.target.value),onSearch:fetchSuppliers,enterButton:/*#__PURE__*/_jsx(SearchOutlined,{}),allowClear:true,size:\"middle\"})}),/*#__PURE__*/_jsx(Col,{xs:24,sm:8,md:6,style:{textAlign:'right'},children:/*#__PURE__*/_jsx(Button,{type:\"primary\",icon:/*#__PURE__*/_jsx(PlusOutlined,{}),onClick:()=>showModal(),size:\"middle\",block:true,children:\"Th\\xEAm nh\\xE0 cung c\\u1EA5p\"})})]}),/*#__PURE__*/_jsx(Table,{columns:columns,dataSource:suppliers,rowKey:\"id\",loading:loading,size:\"small\",pagination:{total:suppliers.length,pageSize:15,showSizeChanger:true,showQuickJumper:true,showTotal:(total,range)=>\"\".concat(range[0],\"-\").concat(range[1],\" c\\u1EE7a \").concat(total,\" nh\\xE0 cung c\\u1EA5p\"),responsive:true,size:'small'},scroll:{x:1100,y:'calc(100vh - 450px)'},style:{backgroundColor:'#fafafa',borderRadius:'6px'}})]}),/*#__PURE__*/_jsx(SupplierFormModal,{isModalVisible:isModalVisible,handleCancel:handleCancel,handleSubmit:handleSubmit,editingSupplier:editingSupplier,form:form}),/*#__PURE__*/_jsx(Drawer,{title:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center'},children:[/*#__PURE__*/_jsx(EyeOutlined,{style:{marginRight:8}}),\"Th\\xF4ng tin chi ti\\u1EBFt nh\\xE0 cung c\\u1EA5p\"]}),placement:\"right\",onClose:()=>setIsDetailDrawerVisible(false),open:isDetailDrawerVisible,width:500,children:selectedSupplier&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Card,{title:\"Th\\xF4ng tin c\\u01A1 b\\u1EA3n\",size:\"small\",style:{marginBottom:16},children:/*#__PURE__*/_jsxs(\"div\",{style:{lineHeight:'1.8'},children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(Text,{strong:true,children:\"M\\xE3 nh\\xE0 cung c\\u1EA5p:\"}),\" \",selectedSupplier.code]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(Text,{strong:true,children:\"T\\xEAn:\"}),\" \",selectedSupplier.name]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(Text,{strong:true,children:\"Ng\\u01B0\\u1EDDi li\\xEAn h\\u1EC7:\"}),\" \",selectedSupplier.contact_person||'Chưa có']}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(Text,{strong:true,children:\"\\u0110i\\u1EC7n tho\\u1EA1i:\"}),\" \",selectedSupplier.phone||'Chưa có']}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(Text,{strong:true,children:\"Email:\"}),\" \",selectedSupplier.email||'Chưa có']}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(Text,{strong:true,children:\"M\\xE3 s\\u1ED1 thu\\u1EBF:\"}),\" \",selectedSupplier.tax_code||'Chưa có']})]})}),/*#__PURE__*/_jsxs(Card,{title:\"Th\\xF4ng tin t\\xE0i ch\\xEDnh\",size:\"small\",style:{marginBottom:16},children:[/*#__PURE__*/_jsxs(Row,{gutter:16,children:[/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(Statistic,{title:\"C\\xF4ng n\\u1EE3 hi\\u1EC7n t\\u1EA1i\",value:selectedSupplier.total_debt||0,formatter:value=>formatCurrency(value),valueStyle:{color:selectedSupplier.total_debt>0?'#ff4d4f':'#52c41a',fontSize:'18px'}})}),/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(Statistic,{title:\"H\\u1EA1n m\\u1EE9c t\\xEDn d\\u1EE5ng\",value:selectedSupplier.credit_limit||0,formatter:value=>formatCurrency(value),valueStyle:{color:'#1890ff',fontSize:'18px'}})})]}),/*#__PURE__*/_jsxs(\"p\",{style:{marginTop:16},children:[/*#__PURE__*/_jsx(Text,{strong:true,children:\"\\u0110i\\u1EC1u kho\\u1EA3n thanh to\\xE1n:\"}),\" \",selectedSupplier.payment_terms||'Không xác định']})]}),(selectedSupplier.address||selectedSupplier.city)&&/*#__PURE__*/_jsxs(Card,{title:\"\\u0110\\u1ECBa ch\\u1EC9\",size:\"small\",style:{marginBottom:16},children:[selectedSupplier.address&&/*#__PURE__*/_jsx(\"p\",{children:selectedSupplier.address}),selectedSupplier.city&&/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(Text,{strong:true,children:\"Th\\xE0nh ph\\u1ED1:\"}),\" \",selectedSupplier.city]})]}),selectedSupplier.notes&&/*#__PURE__*/_jsx(Card,{title:\"Ghi ch\\xFA\",size:\"small\",children:/*#__PURE__*/_jsx(\"p\",{children:selectedSupplier.notes})})]})}),/*#__PURE__*/_jsx(Drawer,{title:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center'},children:[/*#__PURE__*/_jsx(ShopOutlined,{style:{marginRight:8,color:'#52c41a'}}),\"S\\u1EA3n ph\\u1EA9m \\u0111\\xE3 cung c\\u1EA5p b\\u1EDFi: \",selectedSupplier===null||selectedSupplier===void 0?void 0:selectedSupplier.name]}),placement:\"right\",onClose:()=>setIsProductsDrawerVisible(false),open:isProductsDrawerVisible,width:1200,style:{zIndex:1001},children:selectedSupplier&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Card,{size:\"small\",style:{marginBottom:16,background:'linear-gradient(135deg, #f6ffed, #e8f4fd)'},children:/*#__PURE__*/_jsxs(Row,{gutter:16,children:[/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Text,{strong:true,style:{fontSize:'16px',color:'#1890ff'},children:[\"\\uD83C\\uDFEA \",selectedSupplier.name]}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'12px',color:'#666',marginTop:'4px'},children:[\"\\uD83D\\uDCCB M\\xE3 NCC: \",selectedSupplier.code]})]})}),/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'right'},children:[selectedSupplier.phone&&/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'12px',color:'#666'},children:[\"\\uD83D\\uDCDE \",selectedSupplier.phone]}),selectedSupplier.contact_person&&/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'12px',color:'#666'},children:[\"\\uD83D\\uDC64 \",selectedSupplier.contact_person]})]})})]})}),/*#__PURE__*/_jsxs(Row,{gutter:[16,16],style:{marginBottom:16},children:[/*#__PURE__*/_jsx(Col,{span:8,children:/*#__PURE__*/_jsx(Card,{size:\"small\",style:{textAlign:'center',borderLeft:'4px solid #52c41a'},children:/*#__PURE__*/_jsx(Statistic,{title:\"T\\u1ED5ng s\\u1EA3n ph\\u1EA9m\",value:supplierProducts.length,prefix:/*#__PURE__*/_jsx(ShopOutlined,{style:{color:'#52c41a'}}),valueStyle:{color:'#52c41a',fontSize:'20px'}})})}),/*#__PURE__*/_jsx(Col,{span:8,children:/*#__PURE__*/_jsx(Card,{size:\"small\",style:{textAlign:'center',borderLeft:'4px solid #1890ff'},children:/*#__PURE__*/_jsx(Statistic,{title:\"C\\xF3 s\\u1EB5n\",value:supplierProducts.filter(p=>p.status==='available').length,prefix:/*#__PURE__*/_jsx(ShopOutlined,{style:{color:'#1890ff'}}),valueStyle:{color:'#1890ff',fontSize:'20px'}})})}),/*#__PURE__*/_jsx(Col,{span:8,children:/*#__PURE__*/_jsx(Card,{size:\"small\",style:{textAlign:'center',borderLeft:'4px solid #ff4d4f'},children:/*#__PURE__*/_jsx(Statistic,{title:\"\\u0110\\xE3 b\\xE1n\",value:supplierProducts.filter(p=>p.status==='sold').length,prefix:/*#__PURE__*/_jsx(ShopOutlined,{style:{color:'#ff4d4f'}}),valueStyle:{color:'#ff4d4f',fontSize:'20px'}})})})]}),/*#__PURE__*/_jsx(Card,{title:\"\\uD83D\\uDCE6 Danh s\\xE1ch s\\u1EA3n ph\\u1EA9m \\u0111\\xE3 cung c\\u1EA5p\",size:\"small\",children:/*#__PURE__*/_jsx(Table,{columns:[{title:'Serial Number',dataIndex:'serial_number',key:'serial_number',width:120,fixed:'left',render:text=>/*#__PURE__*/_jsx(Text,{copyable:true,strong:true,style:{color:'#1890ff'},children:text})},{title:'Tên sản phẩm',dataIndex:'product_name',key:'product_name',width:180,render:text=>/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{style:{fontWeight:'bold'},children:[\"\\uD83D\\uDCE6 \",text||'Sản phẩm chưa xác định']})})},{title:'Ngày nhập',dataIndex:'import_time_display',key:'import_date',width:140,render:(text,record)=>/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'12px'},children:[\"\\uD83D\\uDCC5 \",text||formatDate(record.created_at)||'Chưa xác định']})},{title:'Giá nhập',dataIndex:'purchase_price',key:'purchase_price',width:100,align:'right',render:price=>/*#__PURE__*/_jsx(Text,{strong:true,style:{color:'#52c41a',fontSize:'12px'},children:formatCurrency(price||0)})},{title:'Trạng thái',dataIndex:'status',key:'status',width:100,render:status=>{const statusMap={'available':{color:'green',text:'Có sẵn'},'sold':{color:'red',text:'Đã bán'},'damaged':{color:'orange',text:'Hỏng'},'reserved':{color:'blue',text:'Đã đặt'}};const statusInfo=statusMap[status]||{color:'default',text:status};return/*#__PURE__*/_jsx(Tag,{color:statusInfo.color,children:statusInfo.text});}},{title:'Tình trạng',dataIndex:'condition_grade',key:'condition',width:100,render:condition=>{const conditionMap={'new':{color:'green',text:'Mới'},'like_new':{color:'cyan',text:'Như mới'},'good':{color:'blue',text:'Tốt'},'fair':{color:'orange',text:'Khá'},'poor':{color:'red',text:'Kém'}};const conditionInfo=conditionMap[condition]||{color:'default',text:condition||'Mới'};return/*#__PURE__*/_jsx(Tag,{color:conditionInfo.color,children:conditionInfo.text});}},{title:'Vị trí',dataIndex:'location',key:'location',width:80,render:location=>/*#__PURE__*/_jsx(Tag,{icon:/*#__PURE__*/_jsx(HomeOutlined,{}),color:\"blue\",children:location||'HCM'})},{title:'Thời gian bảo hành',key:'warranty',width:150,render:(_,record)=>{if(record.warranty_start_date&&record.warranty_end_date){const startDate=new Date(record.warranty_start_date);const endDate=new Date(record.warranty_end_date);const diffMonths=Math.round((endDate-startDate)/(1000*60*60*24*30));return/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'11px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{fontWeight:'bold',color:'#52c41a'},children:[\"\\uD83D\\uDEE1\\uFE0F \",diffMonths,\" th\\xE1ng\"]}),/*#__PURE__*/_jsxs(\"div\",{style:{color:'#666'},children:[\"\\uD83D\\uDCC5 \",startDate.toLocaleDateString('vi-VN',{timeZone:'Asia/Ho_Chi_Minh'}),\" \\u2192 \",endDate.toLocaleDateString('vi-VN',{timeZone:'Asia/Ho_Chi_Minh'})]})]});}return/*#__PURE__*/_jsx(Text,{type:\"secondary\",style:{fontSize:'11px'},children:\"Ch\\u01B0a c\\xF3 b\\u1EA3o h\\xE0nh\"});}},{title:'Thông tin liên hệ',key:'contact_details',width:200,render:(_,record)=>/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'11px',lineHeight:'1.3'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{fontWeight:'bold',color:'#1890ff'},children:[\"\\uD83C\\uDFEA \",selectedSupplier.name]}),selectedSupplier.phone&&/*#__PURE__*/_jsxs(\"div\",{style:{color:'#666'},children:[\"\\uD83D\\uDCDE \",selectedSupplier.phone]}),selectedSupplier.email&&/*#__PURE__*/_jsxs(\"div\",{style:{color:'#666'},children:[\"\\uD83D\\uDCE7 \",selectedSupplier.email]}),selectedSupplier.address&&/*#__PURE__*/_jsxs(\"div\",{style:{color:'#666'},children:[\"\\uD83D\\uDCCD \",selectedSupplier.address]})]})}],dataSource:supplierProducts,rowKey:record=>record.id||record.serial_number,loading:supplierProductsLoading,pagination:{pageSize:20,showSizeChanger:true,showTotal:(total,range)=>\"\".concat(range[0],\"-\").concat(range[1],\" c\\u1EE7a \").concat(total,\" s\\u1EA3n ph\\u1EA9m\"),size:'small'},scroll:{x:1100,y:'calc(100vh - 400px)'},size:\"small\",locale:{emptyText:supplierProductsLoading?'Đang tải...':'Nhà cung cấp này chưa cung cấp sản phẩm nào'}})})]})})]});};export default SuppliersPage;","map":{"version":3,"names":["React","useState","useEffect","Card","Table","Button","Input","Space","Modal","Form","message","Row","Col","Statistic","Tag","Tooltip","Popconfirm","Drawer","Typography","Avatar","PlusOutlined","SearchOutlined","EditOutlined","DeleteOutlined","ShopOutlined","PhoneOutlined","MailOutlined","HomeOutlined","CreditCardOutlined","EyeOutlined","BankOutlined","UserOutlined","ContactsOutlined","api","suppliersAPI","serialsAPI","formatCurrency","formatDate","SupplierFormModal","toast","jsx","_jsx","jsxs","_jsxs","Search","Text","SuppliersPage","suppliers","setSuppliers","loading","setLoading","isModalVisible","setIsModalVisible","isDetailDrawerVisible","setIsDetailDrawerVisible","editingSupplier","setEditingSupplier","selectedSupplier","setSelectedSupplier","searchText","setSearchText","stats","setStats","total","totalDebt","totalCreditLimit","supplierProducts","setSupplierProducts","supplierProductsLoading","setSupplierProductsLoading","isProductsDrawerVisible","setIsProductsDrawerVisible","form","useForm","fetchSuppliers","response","getAll","search","data","success","calculateStats","error","console","supplierData","length","reduce","sum","s","total_debt","credit_limit","showModal","supplier","arguments","undefined","setFieldsValue","resetFields","handleCancel","handleSubmit","values","update","id","create","concat","handleDelete","delete","showSupplierDetail","getById","showSupplierProducts","log","name","get","warning","apiError","warn","allProducts","serialsResponse","params","q","status","limit","push","code","serialsByCodeResponse","uniqueProducts","filter","product","index","self","findIndex","p","serial_number","columns","title","dataIndex","key","width","fixed","render","text","strong","style","color","children","display","alignItems","size","icon","backgroundColor","marginRight","fontSize","ellipsis","maxWidth","type","_","record","lineHeight","phone","marginBottom","email","address","city","align","debt","textAlign","sorter","a","b","terms","margin","padding","onClick","onConfirm","okText","cancelText","placement","danger","gutter","xs","sm","height","value","prefix","valueStyle","formatter","md","placeholder","onChange","e","target","onSearch","enterButton","allowClear","block","dataSource","rowKey","pagination","pageSize","showSizeChanger","showQuickJumper","showTotal","range","responsive","scroll","x","y","borderRadius","onClose","open","contact_person","tax_code","span","marginTop","payment_terms","notes","zIndex","background","borderLeft","copyable","fontWeight","created_at","price","statusMap","statusInfo","condition","conditionMap","conditionInfo","location","warranty_start_date","warranty_end_date","startDate","Date","endDate","diffMonths","Math","round","toLocaleDateString","timeZone","locale","emptyText"],"sources":["C:/Users/ADMIN/Desktop/kho/kho/client/src/pages/SuppliersPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport {\r\n  Card,\r\n  Table,\r\n  Button,\r\n  Input,\r\n  Space,\r\n  Modal,\r\n  Form,\r\n  message,\r\n  Row,\r\n  Col,\r\n  Statistic,\r\n  Tag,\r\n  Tooltip,\r\n  Popconfirm,\r\n  Drawer,\r\n  Typography,\r\n  Avatar\r\n} from 'antd';\r\nimport {\r\n  PlusOutlined,\r\n  SearchOutlined,\r\n  EditOutlined,\r\n  DeleteOutlined,\r\n  ShopOutlined,\r\n  PhoneOutlined,\r\n  MailOutlined,\r\n  HomeOutlined,\r\n  CreditCardOutlined,\r\n  EyeOutlined,\r\n  BankOutlined,\r\n  UserOutlined,\r\n  ContactsOutlined\r\n} from '@ant-design/icons';\r\nimport api, { suppliersAPI, serialsAPI, formatCurrency, formatDate } from '../services/api';\r\nimport SupplierFormModal from '../components/SupplierFormModal';\r\nimport { toast } from 'sonner';\r\n\r\nconst { Search } = Input;\r\nconst { Text } = Typography;\r\n\r\nconst SuppliersPage = () => {\r\n  const [suppliers, setSuppliers] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [isModalVisible, setIsModalVisible] = useState(false);\r\n  const [isDetailDrawerVisible, setIsDetailDrawerVisible] = useState(false);\r\n  const [editingSupplier, setEditingSupplier] = useState(null);\r\n  const [selectedSupplier, setSelectedSupplier] = useState(null);\r\n  const [searchText, setSearchText] = useState('');\r\n  const [stats, setStats] = useState({\r\n    total: 0,\r\n    totalDebt: 0,\r\n    totalCreditLimit: 0\r\n  });\r\n  const [supplierProducts, setSupplierProducts] = useState([]);\r\n  const [supplierProductsLoading, setSupplierProductsLoading] = useState(false);\r\n  const [isProductsDrawerVisible, setIsProductsDrawerVisible] = useState(false);\r\n  const [form] = Form.useForm();\r\n\r\n  useEffect(() => {\r\n    fetchSuppliers();\r\n  }, [searchText]);\r\n\r\n  const fetchSuppliers = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await suppliersAPI.getAll({\r\n        search: searchText\r\n      });\r\n      \r\n      if (response.data.success) {\r\n        setSuppliers(response.data.data);\r\n        calculateStats(response.data.data);\r\n      }\r\n    } catch (error) {\r\n      toast.error('Lỗi khi tải danh sách nhà cung cấp');\r\n      console.error('Error fetching suppliers:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const calculateStats = (supplierData) => {\r\n    const stats = {\r\n      total: supplierData.length,\r\n      totalDebt: supplierData.reduce((sum, s) => sum + (s.total_debt || 0), 0),\r\n      totalCreditLimit: supplierData.reduce((sum, s) => sum + (s.credit_limit || 0), 0)\r\n    };\r\n    setStats(stats);\r\n  };\r\n\r\n  const showModal = (supplier = null) => {\r\n    setEditingSupplier(supplier);\r\n    setIsModalVisible(true);\r\n    if (supplier) {\r\n      form.setFieldsValue(supplier);\r\n    } else {\r\n      form.resetFields();\r\n    }\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    setIsModalVisible(false);\r\n    setEditingSupplier(null);\r\n    form.resetFields();\r\n  };\r\n\r\n  const handleSubmit = async (values) => {\r\n    try {\r\n      if (editingSupplier) {\r\n        await suppliersAPI.update(editingSupplier.id, values);\r\n        toast.success('Cập nhật nhà cung cấp thành công');\r\n      } else {\r\n        await suppliersAPI.create(values);\r\n        toast.success('Tạo nhà cung cấp thành công');\r\n      }\r\n      \r\n      handleCancel();\r\n      fetchSuppliers();\r\n    } catch (error) {\r\n      toast.error(`Lỗi khi ${editingSupplier ? 'cập nhật' : 'tạo'} nhà cung cấp`);\r\n      console.error('Error saving supplier:', error);\r\n    }\r\n  };\r\n\r\n  const handleDelete = async (id) => {\r\n    try {\r\n      await suppliersAPI.delete(id);\r\n      toast.success('Xóa nhà cung cấp thành công');\r\n      fetchSuppliers();\r\n    } catch (error) {\r\n      toast.error('Lỗi khi xóa nhà cung cấp');\r\n      console.error('Error deleting supplier:', error);\r\n    }\r\n  };\r\n\r\n  const showSupplierDetail = async (supplier) => {\r\n    try {\r\n      const response = await suppliersAPI.getById(supplier.id);\r\n      if (response.data.success) {\r\n        setSelectedSupplier(response.data.data);\r\n        setIsDetailDrawerVisible(true);\r\n      }\r\n    } catch (error) {\r\n      toast.error('Lỗi khi tải thông tin nhà cung cấp');\r\n    }\r\n  };\r\n\r\n  const showSupplierProducts = async (supplier) => {\r\n    try {\r\n      setSupplierProductsLoading(true);\r\n      setSelectedSupplier(supplier);\r\n      setIsProductsDrawerVisible(true);\r\n      \r\n      console.log(`🔍 Loading products for supplier: ${supplier.name} (ID: ${supplier.id})`);\r\n      \r\n      // NEW: Use dedicated endpoint for supplier products\r\n      try {\r\n        const response = await api.get(`/suppliers/${supplier.id}/products`);\r\n        \r\n        if (response.data.success) {\r\n          console.log(`✅ Found ${response.data.data.length} products from supplier API`);\r\n          setSupplierProducts(response.data.data);\r\n          \r\n          if (response.data.data.length > 0) {\r\n            toast.success(`🎯 Tìm thấy ${response.data.data.length} sản phẩm từ nhà cung cấp \"${supplier.name}\"`);\r\n          } else {\r\n            toast.warning(`⚠️ Nhà cung cấp \"${supplier.name}\" chưa có sản phẩm nào trong hệ thống`);\r\n          }\r\n          return; // Exit early if API call successful\r\n        }\r\n      } catch (apiError) {\r\n        console.warn('Supplier products API failed, falling back to search methods:', apiError);\r\n      }\r\n      \r\n      // FALLBACK: Use search methods if API fails\r\n      const allProducts = [];\r\n      \r\n      // Method 1: Search serials by supplier name\r\n      try {\r\n        const serialsResponse = await api.get('/serials/search', {\r\n          params: {\r\n            q: supplier.name,\r\n            status: 'all',\r\n            limit: 1000\r\n          }\r\n        });\r\n        \r\n        if (serialsResponse.data.success) {\r\n          console.log(`📦 Found ${serialsResponse.data.data.length} serials from search`);\r\n          allProducts.push(...serialsResponse.data.data);\r\n        }\r\n      } catch (error) {\r\n        console.warn('Method 1 failed:', error);\r\n      }\r\n      \r\n      // Method 2: Search by supplier code if no results\r\n      if (supplier.code && allProducts.length === 0) {\r\n        try {\r\n          const serialsByCodeResponse = await api.get('/serials/search', {\r\n            params: {\r\n              q: supplier.code,\r\n              status: 'all',\r\n              limit: 1000\r\n            }\r\n          });\r\n          \r\n          if (serialsByCodeResponse.data.success) {\r\n            console.log(`📦 Found ${serialsByCodeResponse.data.data.length} serials by code`);\r\n            allProducts.push(...serialsByCodeResponse.data.data);\r\n          }\r\n        } catch (error) {\r\n          console.warn('Method 2 failed:', error);\r\n        }\r\n      }\r\n      \r\n      // Đã loại bỏ mockProducts, allProducts.push(...mockProducts), toast.info demo data. Chỉ giữ lại logic lấy dữ liệu thật từ API.\r\n      \r\n      // Remove duplicates and set results\r\n      const uniqueProducts = allProducts.filter((product, index, self) => \r\n        index === self.findIndex(p => p.serial_number === product.serial_number)\r\n      );\r\n      \r\n      console.log(`✅ Final result: ${uniqueProducts.length} unique products for supplier ${supplier.name}`);\r\n      setSupplierProducts(uniqueProducts);\r\n      \r\n      if (uniqueProducts.length > 0) {\r\n        toast.success(`🎯 Tìm thấy ${uniqueProducts.length} sản phẩm từ nhà cung cấp \"${supplier.name}\"`);\r\n      } else {\r\n        toast.warning(`⚠️ Nhà cung cấp \"${supplier.name}\" chưa có sản phẩm nào hoặc chưa có dữ liệu trong hệ thống`);\r\n      }\r\n      \r\n    } catch (error) {\r\n      console.error('Error fetching supplier products:', error);\r\n      setSupplierProducts([]);\r\n      toast.error('Lỗi khi tải danh sách sản phẩm của nhà cung cấp');\r\n    } finally {\r\n      setSupplierProductsLoading(false);\r\n    }\r\n  };\r\n\r\n  const columns = [\r\n    {\r\n      title: 'Mã NCC',\r\n      dataIndex: 'code',\r\n      key: 'code',\r\n      width: 80,\r\n      fixed: 'left',\r\n      render: (text) => <Text strong style={{ color: '#1890ff' }}>{text}</Text>\r\n    },\r\n    {\r\n      title: 'Tên nhà cung cấp',\r\n      dataIndex: 'name',\r\n      key: 'name',\r\n      width: 200,\r\n      fixed: 'left',\r\n      render: (text) => (\r\n        <div style={{ display: 'flex', alignItems: 'center' }}>\r\n          <Avatar \r\n            size=\"small\" \r\n            icon={<ShopOutlined />} \r\n            style={{ \r\n              backgroundColor: '#f0f0f0', \r\n              color: '#1890ff',\r\n              marginRight: 8 \r\n            }} \r\n          />\r\n          <Text strong style={{ fontSize: '13px' }}>{text}</Text>\r\n        </div>\r\n      )\r\n    },\r\n    {\r\n      title: 'Người liên hệ',\r\n      dataIndex: 'contact_person',\r\n      key: 'contact_person',\r\n      width: 140,\r\n      render: (text) => (\r\n        <div style={{ fontSize: '12px' }}>\r\n          {text ? (\r\n            <div style={{ display: 'flex', alignItems: 'center' }}>\r\n              <UserOutlined style={{ marginRight: 4, color: '#666' }} />\r\n              <Text ellipsis style={{ maxWidth: '100px' }}>{text}</Text>\r\n            </div>\r\n          ) : (\r\n            <Text type=\"secondary\" style={{ fontSize: '11px' }}>Chưa có</Text>\r\n          )}\r\n        </div>\r\n      )\r\n    },\r\n    {\r\n      title: 'Liên hệ',\r\n      key: 'contact_info',\r\n      width: 160,\r\n      render: (_, record) => (\r\n        <div style={{ fontSize: '11px', lineHeight: '1.2' }}>\r\n          {record.phone && (\r\n            <div style={{ \r\n              display: 'flex', \r\n              alignItems: 'center', \r\n              marginBottom: 2,\r\n              color: '#666' \r\n            }}>\r\n              <PhoneOutlined style={{ marginRight: 4, fontSize: '10px' }} />\r\n              <Text ellipsis style={{ maxWidth: '110px', fontSize: '11px' }}>\r\n                {record.phone}\r\n              </Text>\r\n            </div>\r\n          )}\r\n          {record.email && (\r\n            <div style={{ \r\n              display: 'flex', \r\n              alignItems: 'center',\r\n              color: '#666' \r\n            }}>\r\n              <MailOutlined style={{ marginRight: 4, fontSize: '10px' }} />\r\n              <Text ellipsis style={{ maxWidth: '110px', fontSize: '11px' }}>\r\n                {record.email}\r\n              </Text>\r\n            </div>\r\n          )}\r\n          {!record.phone && !record.email && (\r\n            <Text type=\"secondary\" style={{ fontSize: '11px' }}>Chưa có</Text>\r\n          )}\r\n        </div>\r\n      )\r\n    },\r\n    {\r\n      title: 'Địa chỉ',\r\n      key: 'address_info',\r\n      width: 180,\r\n      render: (_, record) => (\r\n        <div style={{ fontSize: '11px', lineHeight: '1.3' }}>\r\n          {record.address && (\r\n            <div style={{ marginBottom: 2, color: '#333' }}>\r\n              <Text ellipsis style={{ maxWidth: '150px', fontSize: '11px' }}>\r\n                {record.address}\r\n              </Text>\r\n            </div>\r\n          )}\r\n          {record.city && (\r\n            <div style={{ color: '#666' }}>\r\n              <HomeOutlined style={{ marginRight: 4, fontSize: '10px' }} />\r\n              <Text style={{ fontSize: '11px' }}>{record.city}</Text>\r\n            </div>\r\n          )}\r\n          {!record.address && !record.city && (\r\n            <Text type=\"secondary\" style={{ fontSize: '11px' }}>Chưa có</Text>\r\n          )}\r\n        </div>\r\n      )\r\n    },\r\n    {\r\n      title: 'Công nợ',\r\n      dataIndex: 'total_debt',\r\n      key: 'total_debt',\r\n      width: 100,\r\n      align: 'right',\r\n      render: (debt) => (\r\n        <div style={{ textAlign: 'right' }}>\r\n          <Text \r\n            strong \r\n            style={{ \r\n              color: debt > 0 ? '#ff4d4f' : '#52c41a',\r\n              fontSize: '12px'\r\n            }}\r\n          >\r\n            {formatCurrency(debt || 0)}\r\n          </Text>\r\n        </div>\r\n      ),\r\n      sorter: (a, b) => (a.total_debt || 0) - (b.total_debt || 0)\r\n    },\r\n    {\r\n      title: 'Hạn mức',\r\n      dataIndex: 'credit_limit',\r\n      key: 'credit_limit',\r\n      width: 100,\r\n      align: 'right',\r\n      render: (limit) => (\r\n        <div style={{ textAlign: 'right' }}>\r\n          <Text style={{ color: '#1890ff', fontSize: '12px' }}>\r\n            {formatCurrency(limit || 0)}\r\n          </Text>\r\n        </div>\r\n      )\r\n    },\r\n    {\r\n      title: 'Thanh toán',\r\n      dataIndex: 'payment_terms',\r\n      key: 'payment_terms',\r\n      width: 100,\r\n      render: (terms) => (\r\n        <Tag \r\n          color=\"blue\" \r\n          style={{ \r\n            fontSize: '11px',\r\n            margin: 0,\r\n            padding: '2px 6px',\r\n            lineHeight: '1.2'\r\n          }}\r\n        >\r\n          {terms || 'Không xác định'}\r\n        </Tag>\r\n      )\r\n    },\r\n    {\r\n      title: 'Thao tác',\r\n      key: 'actions',\r\n      width: 120,\r\n      fixed: 'right',\r\n      render: (_, record) => (\r\n        <Space size=\"small\">\r\n          <Tooltip title=\"Xem chi tiết nhà cung cấp\">\r\n            <Button\r\n              type=\"text\"\r\n              size=\"small\"\r\n              icon={<EyeOutlined />}\r\n              onClick={() => showSupplierDetail(record)}\r\n              style={{ padding: '2px 4px' }}\r\n            />\r\n          </Tooltip>\r\n          <Tooltip title=\"Xem sản phẩm đã cung cấp\">\r\n            <Button\r\n              type=\"text\"\r\n              size=\"small\"\r\n              icon={<ShopOutlined />}\r\n              onClick={() => showSupplierProducts(record)}\r\n              style={{ padding: '2px 4px', color: '#52c41a' }}\r\n            />\r\n          </Tooltip>\r\n          <Tooltip title=\"Chỉnh sửa\">\r\n            <Button\r\n              type=\"text\"\r\n              size=\"small\"\r\n              icon={<EditOutlined />}\r\n              onClick={() => showModal(record)}\r\n              style={{ padding: '2px 4px', color: '#1890ff' }}\r\n            />\r\n          </Tooltip>\r\n          <Popconfirm\r\n            title=\"Bạn có chắc chắn muốn xóa nhà cung cấp này?\"\r\n            onConfirm={() => handleDelete(record.id)}\r\n            okText=\"Có\"\r\n            cancelText=\"Không\"\r\n            placement=\"topRight\"\r\n          >\r\n            <Tooltip title=\"Xóa\">\r\n              <Button\r\n                type=\"text\"\r\n                danger\r\n                size=\"small\"\r\n                icon={<DeleteOutlined />}\r\n                style={{ padding: '2px 4px' }}\r\n              />\r\n            </Tooltip>\r\n          </Popconfirm>\r\n        </Space>\r\n      )\r\n    }\r\n  ];\r\n\r\n  return (\r\n    <div style={{ padding: '20px' }}>\r\n      {/* Header thống kê - Responsive */}\r\n      <Row gutter={[16, 16]} style={{ marginBottom: 20 }}>\r\n        <Col xs={24} sm={8}>\r\n          <Card size=\"small\" style={{ height: '100%' }}>\r\n            <Statistic\r\n              title=\"Tổng nhà cung cấp\"\r\n              value={stats.total}\r\n              prefix={<ShopOutlined />}\r\n              valueStyle={{ color: '#1890ff', fontSize: '20px' }}\r\n            />\r\n          </Card>\r\n        </Col>\r\n        <Col xs={24} sm={8}>\r\n          <Card size=\"small\" style={{ height: '100%' }}>\r\n            <Statistic\r\n              title=\"Tổng công nợ\"\r\n              value={stats.totalDebt}\r\n              formatter={value => formatCurrency(value)}\r\n              prefix={<CreditCardOutlined />}\r\n              valueStyle={{ color: '#ff4d4f', fontSize: '20px' }}\r\n            />\r\n          </Card>\r\n        </Col>\r\n        <Col xs={24} sm={8}>\r\n          <Card size=\"small\" style={{ height: '100%' }}>\r\n            <Statistic\r\n              title=\"Tổng hạn mức\"\r\n              value={stats.totalCreditLimit}\r\n              formatter={value => formatCurrency(value)}\r\n              prefix={<BankOutlined />}\r\n              valueStyle={{ color: '#52c41a', fontSize: '20px' }}\r\n            />\r\n          </Card>\r\n        </Col>\r\n      </Row>\r\n\r\n      {/* Main Content */}\r\n      <Card \r\n        title={\r\n          <div style={{ display: 'flex', alignItems: 'center' }}>\r\n            <ContactsOutlined style={{ marginRight: 8 }} />\r\n            Quản lý nhà cung cấp\r\n          </div>\r\n        }\r\n        size=\"small\"\r\n      >\r\n        {/* Filters - Responsive */}\r\n        <Row gutter={[16, 16]} style={{ marginBottom: 16 }}>\r\n          <Col xs={24} sm={16} md={18}>\r\n            <Search\r\n              placeholder=\"Tìm theo tên, mã NCC, người liên hệ...\"\r\n              value={searchText}\r\n              onChange={(e) => setSearchText(e.target.value)}\r\n              onSearch={fetchSuppliers}\r\n              enterButton={<SearchOutlined />}\r\n              allowClear\r\n              size=\"middle\"\r\n            />\r\n          </Col>\r\n          <Col xs={24} sm={8} md={6} style={{ textAlign: 'right' }}>\r\n            <Button\r\n              type=\"primary\"\r\n              icon={<PlusOutlined />}\r\n              onClick={() => showModal()}\r\n              size=\"middle\"\r\n              block\r\n            >\r\n              Thêm nhà cung cấp\r\n            </Button>\r\n          </Col>\r\n        </Row>\r\n\r\n        {/* Table với responsive scroll */}\r\n        <Table\r\n          columns={columns}\r\n          dataSource={suppliers}\r\n          rowKey=\"id\"\r\n          loading={loading}\r\n          size=\"small\"\r\n          pagination={{\r\n            total: suppliers.length,\r\n            pageSize: 15,\r\n            showSizeChanger: true,\r\n            showQuickJumper: true,\r\n            showTotal: (total, range) => \r\n              `${range[0]}-${range[1]} của ${total} nhà cung cấp`,\r\n            responsive: true,\r\n            size: 'small'\r\n          }}\r\n          scroll={{ \r\n            x: 1100,\r\n            y: 'calc(100vh - 450px)'\r\n          }}\r\n          style={{ \r\n            backgroundColor: '#fafafa',\r\n            borderRadius: '6px'\r\n          }}\r\n        />\r\n      </Card>\r\n\r\n      {/* Modal thêm/sửa nhà cung cấp */}\r\n      <SupplierFormModal\r\n        isModalVisible={isModalVisible}\r\n        handleCancel={handleCancel}\r\n        handleSubmit={handleSubmit}\r\n        editingSupplier={editingSupplier}\r\n        form={form}\r\n      />\r\n\r\n      {/* Drawer chi tiết nhà cung cấp */}\r\n      <Drawer\r\n        title={\r\n          <div style={{ display: 'flex', alignItems: 'center' }}>\r\n            <EyeOutlined style={{ marginRight: 8 }} />\r\n            Thông tin chi tiết nhà cung cấp\r\n          </div>\r\n        }\r\n        placement=\"right\"\r\n        onClose={() => setIsDetailDrawerVisible(false)}\r\n        open={isDetailDrawerVisible}\r\n        width={500}\r\n      >\r\n        {selectedSupplier && (\r\n          <div>\r\n            <Card title=\"Thông tin cơ bản\" size=\"small\" style={{ marginBottom: 16 }}>\r\n              <div style={{ lineHeight: '1.8' }}>\r\n                <p><Text strong>Mã nhà cung cấp:</Text> {selectedSupplier.code}</p>\r\n                <p><Text strong>Tên:</Text> {selectedSupplier.name}</p>\r\n                <p><Text strong>Người liên hệ:</Text> {selectedSupplier.contact_person || 'Chưa có'}</p>\r\n                <p><Text strong>Điện thoại:</Text> {selectedSupplier.phone || 'Chưa có'}</p>\r\n                <p><Text strong>Email:</Text> {selectedSupplier.email || 'Chưa có'}</p>\r\n                <p><Text strong>Mã số thuế:</Text> {selectedSupplier.tax_code || 'Chưa có'}</p>\r\n              </div>\r\n            </Card>\r\n\r\n            <Card title=\"Thông tin tài chính\" size=\"small\" style={{ marginBottom: 16 }}>\r\n              <Row gutter={16}>\r\n                <Col span={12}>\r\n                  <Statistic\r\n                    title=\"Công nợ hiện tại\"\r\n                    value={selectedSupplier.total_debt || 0}\r\n                    formatter={value => formatCurrency(value)}\r\n                    valueStyle={{ \r\n                      color: selectedSupplier.total_debt > 0 ? '#ff4d4f' : '#52c41a',\r\n                      fontSize: '18px'\r\n                    }}\r\n                  />\r\n                </Col>\r\n                <Col span={12}>\r\n                  <Statistic\r\n                    title=\"Hạn mức tín dụng\"\r\n                    value={selectedSupplier.credit_limit || 0}\r\n                    formatter={value => formatCurrency(value)}\r\n                    valueStyle={{ color: '#1890ff', fontSize: '18px' }}\r\n                  />\r\n                </Col>\r\n              </Row>\r\n              <p style={{ marginTop: 16 }}>\r\n                <Text strong>Điều khoản thanh toán:</Text> {selectedSupplier.payment_terms || 'Không xác định'}\r\n              </p>\r\n            </Card>\r\n\r\n            {(selectedSupplier.address || selectedSupplier.city) && (\r\n              <Card title=\"Địa chỉ\" size=\"small\" style={{ marginBottom: 16 }}>\r\n                {selectedSupplier.address && <p>{selectedSupplier.address}</p>}\r\n                {selectedSupplier.city && <p><Text strong>Thành phố:</Text> {selectedSupplier.city}</p>}\r\n              </Card>\r\n            )}\r\n\r\n            {selectedSupplier.notes && (\r\n              <Card title=\"Ghi chú\" size=\"small\">\r\n                <p>{selectedSupplier.notes}</p>\r\n              </Card>\r\n            )}\r\n          </div>\r\n        )}\r\n      </Drawer>\r\n\r\n      {/* 🎯 NEW: Drawer hiển thị sản phẩm của nhà cung cấp */}\r\n      <Drawer\r\n        title={\r\n          <div style={{ display: 'flex', alignItems: 'center' }}>\r\n            <ShopOutlined style={{ marginRight: 8, color: '#52c41a' }} />\r\n            Sản phẩm đã cung cấp bởi: {selectedSupplier?.name}\r\n          </div>\r\n        }\r\n        placement=\"right\"\r\n        onClose={() => setIsProductsDrawerVisible(false)}\r\n        open={isProductsDrawerVisible}\r\n        width={1200}\r\n        style={{ zIndex: 1001 }}\r\n      >\r\n        {selectedSupplier && (\r\n          <div>\r\n            {/* Supplier Info Header */}\r\n            <Card size=\"small\" style={{ marginBottom: 16, background: 'linear-gradient(135deg, #f6ffed, #e8f4fd)' }}>\r\n              <Row gutter={16}>\r\n                <Col span={12}>\r\n                  <div>\r\n                    <Text strong style={{ fontSize: '16px', color: '#1890ff' }}>\r\n                      🏪 {selectedSupplier.name}\r\n                    </Text>\r\n                    <div style={{ fontSize: '12px', color: '#666', marginTop: '4px' }}>\r\n                      📋 Mã NCC: {selectedSupplier.code}\r\n                    </div>\r\n                  </div>\r\n                </Col>\r\n                <Col span={12}>\r\n                  <div style={{ textAlign: 'right' }}>\r\n                    {selectedSupplier.phone && (\r\n                      <div style={{ fontSize: '12px', color: '#666' }}>\r\n                        📞 {selectedSupplier.phone}\r\n                      </div>\r\n                    )}\r\n                    {selectedSupplier.contact_person && (\r\n                      <div style={{ fontSize: '12px', color: '#666' }}>\r\n                        👤 {selectedSupplier.contact_person}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </Col>\r\n              </Row>\r\n            </Card>\r\n\r\n            {/* Products Summary Stats */}\r\n            <Row gutter={[16, 16]} style={{ marginBottom: 16 }}>\r\n              <Col span={8}>\r\n                <Card size=\"small\" style={{ textAlign: 'center', borderLeft: '4px solid #52c41a' }}>\r\n                  <Statistic\r\n                    title=\"Tổng sản phẩm\"\r\n                    value={supplierProducts.length}\r\n                    prefix={<ShopOutlined style={{ color: '#52c41a' }} />}\r\n                    valueStyle={{ color: '#52c41a', fontSize: '20px' }}\r\n                  />\r\n                </Card>\r\n              </Col>\r\n              <Col span={8}>\r\n                <Card size=\"small\" style={{ textAlign: 'center', borderLeft: '4px solid #1890ff' }}>\r\n                  <Statistic\r\n                    title=\"Có sẵn\"\r\n                    value={supplierProducts.filter(p => p.status === 'available').length}\r\n                    prefix={<ShopOutlined style={{ color: '#1890ff' }} />}\r\n                    valueStyle={{ color: '#1890ff', fontSize: '20px' }}\r\n                  />\r\n                </Card>\r\n              </Col>\r\n              <Col span={8}>\r\n                <Card size=\"small\" style={{ textAlign: 'center', borderLeft: '4px solid #ff4d4f' }}>\r\n                  <Statistic\r\n                    title=\"Đã bán\"\r\n                    value={supplierProducts.filter(p => p.status === 'sold').length}\r\n                    prefix={<ShopOutlined style={{ color: '#ff4d4f' }} />}\r\n                    valueStyle={{ color: '#ff4d4f', fontSize: '20px' }}\r\n                  />\r\n                </Card>\r\n              </Col>\r\n            </Row>\r\n\r\n            {/* Products Table */}\r\n            <Card title=\"📦 Danh sách sản phẩm đã cung cấp\" size=\"small\">\r\n              <Table\r\n                columns={[\r\n                  {\r\n                    title: 'Serial Number',\r\n                    dataIndex: 'serial_number',\r\n                    key: 'serial_number',\r\n                    width: 120,\r\n                    fixed: 'left',\r\n                    render: (text) => (\r\n                      <Text copyable strong style={{ color: '#1890ff' }}>\r\n                        {text}\r\n                      </Text>\r\n                    )\r\n                  },\r\n                  {\r\n                    title: 'Tên sản phẩm',\r\n                    dataIndex: 'product_name',\r\n                    key: 'product_name',\r\n                    width: 180,\r\n                    render: (text) => (\r\n                      <div>\r\n                        <div style={{ fontWeight: 'bold' }}>\r\n                          📦 {text || 'Sản phẩm chưa xác định'}\r\n                        </div>\r\n                      </div>\r\n                    )\r\n                  },\r\n                  {\r\n                    title: 'Ngày nhập',\r\n                    dataIndex: 'import_time_display',\r\n                    key: 'import_date',\r\n                    width: 140,\r\n                    render: (text, record) => (\r\n                      <div style={{ fontSize: '12px' }}>\r\n                        📅 {text || formatDate(record.created_at) || 'Chưa xác định'}\r\n                      </div>\r\n                    )\r\n                  },\r\n                  {\r\n                    title: 'Giá nhập',\r\n                    dataIndex: 'purchase_price',\r\n                    key: 'purchase_price',\r\n                    width: 100,\r\n                    align: 'right',\r\n                    render: (price) => (\r\n                      <Text strong style={{ color: '#52c41a', fontSize: '12px' }}>\r\n                        {formatCurrency(price || 0)}\r\n                      </Text>\r\n                    )\r\n                  },\r\n                  {\r\n                    title: 'Trạng thái',\r\n                    dataIndex: 'status',\r\n                    key: 'status',\r\n                    width: 100,\r\n                    render: (status) => {\r\n                      const statusMap = {\r\n                        'available': { color: 'green', text: 'Có sẵn' },\r\n                        'sold': { color: 'red', text: 'Đã bán' },\r\n                        'damaged': { color: 'orange', text: 'Hỏng' },\r\n                        'reserved': { color: 'blue', text: 'Đã đặt' }\r\n                      };\r\n                      const statusInfo = statusMap[status] || { color: 'default', text: status };\r\n                      return <Tag color={statusInfo.color}>{statusInfo.text}</Tag>;\r\n                    }\r\n                  },\r\n                  {\r\n                    title: 'Tình trạng',\r\n                    dataIndex: 'condition_grade',\r\n                    key: 'condition',\r\n                    width: 100,\r\n                    render: (condition) => {\r\n                      const conditionMap = {\r\n                        'new': { color: 'green', text: 'Mới' },\r\n                        'like_new': { color: 'cyan', text: 'Như mới' },\r\n                        'good': { color: 'blue', text: 'Tốt' },\r\n                        'fair': { color: 'orange', text: 'Khá' },\r\n                        'poor': { color: 'red', text: 'Kém' }\r\n                      };\r\n                      const conditionInfo = conditionMap[condition] || { color: 'default', text: condition || 'Mới' };\r\n                      return <Tag color={conditionInfo.color}>{conditionInfo.text}</Tag>;\r\n                    }\r\n                  },\r\n                  {\r\n                    title: 'Vị trí',\r\n                    dataIndex: 'location',\r\n                    key: 'location',\r\n                    width: 80,\r\n                    render: (location) => (\r\n                      <Tag icon={<HomeOutlined />} color=\"blue\">\r\n                        {location || 'HCM'}\r\n                      </Tag>\r\n                    )\r\n                  },\r\n                  {\r\n                    title: 'Thời gian bảo hành',\r\n                    key: 'warranty',\r\n                    width: 150,\r\n                    render: (_, record) => {\r\n                      if (record.warranty_start_date && record.warranty_end_date) {\r\n                        const startDate = new Date(record.warranty_start_date);\r\n                        const endDate = new Date(record.warranty_end_date);\r\n                        const diffMonths = Math.round((endDate - startDate) / (1000 * 60 * 60 * 24 * 30));\r\n                        \r\n                        return (\r\n                          <div style={{ fontSize: '11px' }}>\r\n                            <div style={{ fontWeight: 'bold', color: '#52c41a' }}>\r\n                              🛡️ {diffMonths} tháng\r\n                            </div>\r\n                            <div style={{ color: '#666' }}>\r\n                              📅 {startDate.toLocaleDateString('vi-VN', { timeZone: 'Asia/Ho_Chi_Minh' })} → {endDate.toLocaleDateString('vi-VN', { timeZone: 'Asia/Ho_Chi_Minh' })}\r\n                            </div>\r\n                          </div>\r\n                        );\r\n                      }\r\n                      return <Text type=\"secondary\" style={{ fontSize: '11px' }}>Chưa có bảo hành</Text>;\r\n                    }\r\n                  },\r\n                  {\r\n                    title: 'Thông tin liên hệ',\r\n                    key: 'contact_details',\r\n                    width: 200,\r\n                    render: (_, record) => (\r\n                      <div style={{ fontSize: '11px', lineHeight: '1.3' }}>\r\n                        <div style={{ fontWeight: 'bold', color: '#1890ff' }}>\r\n                          🏪 {selectedSupplier.name}\r\n                        </div>\r\n                        {selectedSupplier.phone && (\r\n                          <div style={{ color: '#666' }}>\r\n                            📞 {selectedSupplier.phone}\r\n                          </div>\r\n                        )}\r\n                        {selectedSupplier.email && (\r\n                          <div style={{ color: '#666' }}>\r\n                            📧 {selectedSupplier.email}\r\n                          </div>\r\n                        )}\r\n                        {selectedSupplier.address && (\r\n                          <div style={{ color: '#666' }}>\r\n                            📍 {selectedSupplier.address}\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    )\r\n                  }\r\n                ]}\r\n                dataSource={supplierProducts}\r\n                rowKey={(record) => record.id || record.serial_number}\r\n                loading={supplierProductsLoading}\r\n                pagination={{\r\n                  pageSize: 20,\r\n                  showSizeChanger: true,\r\n                  showTotal: (total, range) => \r\n                    `${range[0]}-${range[1]} của ${total} sản phẩm`,\r\n                  size: 'small'\r\n                }}\r\n                scroll={{ x: 1100, y: 'calc(100vh - 400px)' }}\r\n                size=\"small\"\r\n                locale={{\r\n                  emptyText: supplierProductsLoading ? 'Đang tải...' : 'Nhà cung cấp này chưa cung cấp sản phẩm nào'\r\n                }}\r\n              />\r\n            </Card>\r\n          </div>\r\n        )}\r\n      </Drawer>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SuppliersPage; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}