{"ast":null,"code":"import _objectSpread from\"C:/Users/ADMIN/Desktop/kho/kho/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{useForm}from'react-hook-form';import{zodResolver}from'@hookform/resolvers/zod';import{z}from'zod';import{toast}from'react-toastify';import'react-toastify/dist/ReactToastify.css';import{Card,Table,Button,Modal,Input,Select,DatePicker,Space,Tag,Row,Col,Statistic,Tabs,InputNumber,Alert,Badge,Typography}from'antd';import{PlusOutlined,UserOutlined,ShopOutlined,DollarOutlined,ExclamationCircleOutlined,CheckCircleOutlined,CreditCardOutlined,WalletOutlined}from'@ant-design/icons';import{customersAPI,suppliersAPI,financialAPI}from'../services/api';import dayjs from'dayjs';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const{Option}=Select;const{TabPane}=Tabs;const{Text}=Typography;// Zod schema for debt payment validation\nconst debtPaymentSchema=z.object({entity_id:z.number().min(1,'Vui l√≤ng ch·ªçn kh√°ch h√†ng/nh√† cung c·∫•p'),amount:z.number().min(1,'S·ªë ti·ªÅn ph·∫£i l·ªõn h∆°n 0'),description:z.string().optional(),payment_method:z.enum(['cash','card','transfer','ewallet'],{errorMap:()=>({message:'Vui l√≤ng ch·ªçn ph∆∞∆°ng th·ª©c thanh to√°n'})}),transaction_date:z.any().optional()});const DebtPage=()=>{const[customerDebts,setCustomerDebts]=useState([]);const[supplierDebts,setSupplierDebts]=useState([]);const[customers,setCustomers]=useState([]);const[suppliers,setSuppliers]=useState([]);const[loading,setLoading]=useState(false);const[modalVisible,setModalVisible]=useState(false);const[activeTab,setActiveTab]=useState('customers');const[modalType,setModalType]=useState('payment');// 'payment' or 'debt'\nconst[debtStats,setDebtStats]=useState({totalCustomerDebt:0,totalSupplierDebt:0,overduCustomerDebt:0,overdueSupplierDebt:0});const{register,handleSubmit,reset,setValue,watch,formState:{errors,isSubmitting}}=useForm({resolver:zodResolver(debtPaymentSchema),defaultValues:{payment_method:'cash',transaction_date:dayjs()}});const paymentMethods=[{value:'cash',label:'Ti·ªÅn m·∫∑t',icon:/*#__PURE__*/_jsx(DollarOutlined,{})},{value:'card',label:'Th·∫ª',icon:/*#__PURE__*/_jsx(CreditCardOutlined,{})},{value:'transfer',label:'Chuy·ªÉn kho·∫£n',icon:/*#__PURE__*/_jsx(WalletOutlined,{})},{value:'ewallet',label:'V√≠ ƒëi·ªán t·ª≠',icon:/*#__PURE__*/_jsx(WalletOutlined,{})}];useEffect(()=>{fetchData();},[]);// Process debts when customers/suppliers data changes\nuseEffect(()=>{if(customers.length>0){fetchCustomerDebts();}},[customers]);// eslint-disable-line react-hooks/exhaustive-deps\nuseEffect(()=>{if(suppliers.length>0){fetchSupplierDebts();}},[suppliers]);// eslint-disable-line react-hooks/exhaustive-deps\nconst fetchData=async()=>{setLoading(true);try{// First fetch all customers and suppliers\nawait Promise.all([fetchCustomers(),fetchSuppliers()]);// Then process debts (this will be done in useEffect when customers/suppliers change)\n}catch(error){toast.error('L·ªói khi t·∫£i d·ªØ li·ªáu');}finally{setLoading(false);}};const fetchCustomerDebts=async()=>{try{// Use customers data that's already fetched and enhanced\nconst customersWithDebt=customers.filter(c=>(c.current_debt||0)>0);setCustomerDebts(customersWithDebt);// Calculate debt stats\nconst totalDebt=customersWithDebt.reduce((sum,c)=>sum+(c.current_debt||0),0);setDebtStats(prev=>_objectSpread(_objectSpread({},prev),{},{totalCustomerDebt:totalDebt}));}catch(error){console.error('Error processing customer debts:',error);setCustomerDebts([]);}};const fetchSupplierDebts=async()=>{try{// Use suppliers data that's already fetched and enhanced\nconst suppliersWithDebt=suppliers.filter(s=>(s.current_debt||0)>0);setSupplierDebts(suppliersWithDebt);// Calculate debt stats\nconst totalDebt=suppliersWithDebt.reduce((sum,s)=>sum+(s.current_debt||0),0);setDebtStats(prev=>_objectSpread(_objectSpread({},prev),{},{totalSupplierDebt:totalDebt}));}catch(error){console.error('Error processing supplier debts:',error);setSupplierDebts([]);}};const fetchCustomers=async()=>{try{const response=await customersAPI.getAll();if(response.data.success){// Calculate debt for each customer (mock calculation for now)\nconst customersWithDebt=response.data.data.map(customer=>_objectSpread(_objectSpread({},customer),{},{current_debt:customer.current_debt||Math.floor(Math.random()*5000000),// Mock debt for demo\ntotal_spent:customer.total_spent||Math.floor(Math.random()*20000000)}));setCustomers(customersWithDebt);}}catch(error){console.error('Error fetching customers:',error);// Fallback: Set empty array to avoid crashes\nsetCustomers([]);}};const fetchSuppliers=async()=>{try{const response=await suppliersAPI.getAll();if(response.data.success){// Calculate debt for each supplier (mock calculation for now)\nconst suppliersWithDebt=response.data.data.map(supplier=>_objectSpread(_objectSpread({},supplier),{},{current_debt:supplier.current_debt||Math.floor(Math.random()*10000000),// Mock debt for demo\ntotal_purchases:supplier.total_purchases||Math.floor(Math.random()*50000000)}));setSuppliers(suppliersWithDebt);}}catch(error){console.error('Error fetching suppliers:',error);// Fallback: Set empty array to avoid crashes\nsetSuppliers([]);}};const handlePayDebt=async data=>{try{var _data$transaction_dat;const transactionData={type:activeTab==='customers'?'income':'expense',category:activeTab==='customers'?'Thu n·ª£ kh√°ch h√†ng':'Tr·∫£ n·ª£ nh√† cung c·∫•p',amount:data.amount,description:data.description,customer_id:activeTab==='customers'?data.entity_id:null,supplier_id:activeTab==='suppliers'?data.entity_id:null,payment_method:data.payment_method,transaction_date:((_data$transaction_dat=data.transaction_date)===null||_data$transaction_dat===void 0?void 0:_data$transaction_dat.toISOString())||new Date().toISOString(),user_id:1};const response=await financialAPI.create(transactionData);if(response.data.success){toast.success('Ghi nh·∫≠n thanh to√°n th√†nh c√¥ng');setModalVisible(false);reset();fetchData();}}catch(error){toast.error('L·ªói khi ghi nh·∫≠n thanh to√°n');}};const customerColumns=[{title:'M√£ KH',dataIndex:'code',key:'code',width:100},{title:'T√™n kh√°ch h√†ng',dataIndex:'name',key:'name',render:(name,record)=>/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{children:name}),record.phone&&/*#__PURE__*/_jsx(Text,{type:\"secondary\",style:{fontSize:12},children:record.phone})]})},{title:'Lo·∫°i KH',dataIndex:'customer_type',key:'customer_type',render:type=>{const colors={regular:'default',vip:'gold',wholesale:'blue'};const labels={regular:'Th∆∞·ªùng',vip:'VIP',wholesale:'S·ªâ'};return/*#__PURE__*/_jsx(Tag,{color:colors[type],children:labels[type]});}},{title:'S·ªë n·ª£',dataIndex:'current_debt',key:'current_debt',render:debt=>/*#__PURE__*/_jsxs(Text,{strong:true,style:{color:debt>0?'#ff4d4f':'#52c41a'},children:[debt.toLocaleString('vi-VN'),\" \\u20AB\"]}),sorter:(a,b)=>a.current_debt-b.current_debt},{title:'T·ªïng chi ti√™u',dataIndex:'total_spent',key:'total_spent',render:spent=>/*#__PURE__*/_jsxs(Text,{type:\"secondary\",children:[spent?spent.toLocaleString('vi-VN'):0,\" \\u20AB\"]})},{title:'Tr·∫°ng th√°i',key:'status',render:(_,record)=>{const debt=record.current_debt||0;if(debt===0){return/*#__PURE__*/_jsx(Badge,{status:\"success\",text:\"\\u0110\\xE3 thanh to\\xE1n\"});}else if(debt>1000000){return/*#__PURE__*/_jsx(Badge,{status:\"error\",text:\"N\\u1EE3 l\\u1EDBn\"});}else{return/*#__PURE__*/_jsx(Badge,{status:\"warning\",text:\"C\\xF3 n\\u1EE3\"});}}},{title:'Thao t√°c',key:'actions',render:(_,record)=>/*#__PURE__*/_jsx(Space,{children:/*#__PURE__*/_jsx(Button,{type:\"primary\",size:\"small\",icon:/*#__PURE__*/_jsx(DollarOutlined,{}),onClick:()=>{setModalType('payment');setActiveTab('customers');setModalVisible(true);reset({entity_id:record.id,payment_method:'cash',transaction_date:dayjs()});},children:\"Thanh to\\xE1n\"})})}];const supplierColumns=[{title:'M√£ NCC',dataIndex:'code',key:'code',width:100},{title:'T√™n nh√† cung c·∫•p',dataIndex:'name',key:'name',render:(name,record)=>/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{children:name}),record.phone&&/*#__PURE__*/_jsx(Text,{type:\"secondary\",style:{fontSize:12},children:record.phone})]})},{title:'ƒê·ªãa ch·ªâ',dataIndex:'address',key:'address',ellipsis:true},{title:'S·ªë n·ª£',dataIndex:'current_debt',key:'current_debt',render:debt=>/*#__PURE__*/_jsxs(Text,{strong:true,style:{color:debt>0?'#ff4d4f':'#52c41a'},children:[debt.toLocaleString('vi-VN'),\" \\u20AB\"]}),sorter:(a,b)=>a.current_debt-b.current_debt},{title:'Tr·∫°ng th√°i',key:'status',render:(_,record)=>{const debt=record.current_debt||0;if(debt===0){return/*#__PURE__*/_jsx(Badge,{status:\"success\",text:\"\\u0110\\xE3 thanh to\\xE1n\"});}else if(debt>5000000){return/*#__PURE__*/_jsx(Badge,{status:\"error\",text:\"N\\u1EE3 l\\u1EDBn\"});}else{return/*#__PURE__*/_jsx(Badge,{status:\"warning\",text:\"C\\xF3 n\\u1EE3\"});}}},{title:'Thao t√°c',key:'actions',render:(_,record)=>/*#__PURE__*/_jsx(Space,{children:/*#__PURE__*/_jsx(Button,{type:\"primary\",size:\"small\",icon:/*#__PURE__*/_jsx(DollarOutlined,{}),onClick:()=>{setModalType('payment');setActiveTab('suppliers');setModalVisible(true);reset({entity_id:record.id,payment_method:'cash',transaction_date:dayjs()});},children:\"Thanh to\\xE1n\"})})}];const renderDebtSummary=()=>{return/*#__PURE__*/_jsxs(Row,{gutter:16,style:{marginBottom:24},children:[/*#__PURE__*/_jsx(Col,{span:6,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(Statistic,{title:\"T\\u1ED5ng n\\u1EE3 kh\\xE1ch h\\xE0ng\",value:debtStats.totalCustomerDebt,precision:0,valueStyle:{color:'#cf1322'},prefix:/*#__PURE__*/_jsx(UserOutlined,{}),suffix:\"\\u20AB\"})})}),/*#__PURE__*/_jsx(Col,{span:6,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(Statistic,{title:\"T\\u1ED5ng n\\u1EE3 nh\\xE0 cung c\\u1EA5p\",value:debtStats.totalSupplierDebt,precision:0,valueStyle:{color:'#cf1322'},prefix:/*#__PURE__*/_jsx(ShopOutlined,{}),suffix:\"\\u20AB\"})})}),/*#__PURE__*/_jsx(Col,{span:6,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(Statistic,{title:\"T\\u1ED5ng n\\u1EE3 ph\\u1EA3i thu\",value:debtStats.totalCustomerDebt+debtStats.totalSupplierDebt,precision:0,valueStyle:{color:'#1890ff'},prefix:/*#__PURE__*/_jsx(DollarOutlined,{}),suffix:\"\\u20AB\"})})}),/*#__PURE__*/_jsx(Col,{span:6,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(Statistic,{title:\"S\\u1ED1 kh\\xE1ch h\\xE0ng c\\xF3 n\\u1EE3\",value:customerDebts.length,valueStyle:{color:'#52c41a'},prefix:/*#__PURE__*/_jsx(UserOutlined,{})})})})]});};return/*#__PURE__*/_jsxs(\"div\",{style:{padding:24},children:[renderDebtSummary(),/*#__PURE__*/_jsx(Alert,{message:\"Qu\\u1EA3n l\\xFD n\\u1EE3\",description:\"Theo d\\xF5i v\\xE0 qu\\u1EA3n l\\xFD c\\xE1c kho\\u1EA3n n\\u1EE3 c\\u1EE7a kh\\xE1ch h\\xE0ng v\\xE0 nh\\xE0 cung c\\u1EA5p. H\\u1EC7 th\\u1ED1ng s\\u1EBD t\\u1EF1 \\u0111\\u1ED9ng c\\u1EADp nh\\u1EADt s\\u1ED1 d\\u01B0 n\\u1EE3 khi c\\xF3 giao d\\u1ECBch thanh to\\xE1n.\",type:\"info\",showIcon:true,style:{marginBottom:24}}),/*#__PURE__*/_jsxs(Tabs,{activeKey:activeTab,onChange:setActiveTab,children:[/*#__PURE__*/_jsx(TabPane,{tab:/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(UserOutlined,{}),\"N\\u1EE3 kh\\xE1ch h\\xE0ng (\",customerDebts.length,\")\"]}),children:/*#__PURE__*/_jsx(Card,{title:\"Danh s\\xE1ch kh\\xE1ch h\\xE0ng c\\xF3 n\\u1EE3\",extra:/*#__PURE__*/_jsx(Button,{type:\"primary\",icon:/*#__PURE__*/_jsx(PlusOutlined,{}),onClick:()=>{setModalType('payment');setActiveTab('customers');setModalVisible(true);reset({payment_method:'cash',transaction_date:dayjs()});},children:\"Ghi nh\\u1EADn thanh to\\xE1n\"}),children:/*#__PURE__*/_jsx(Table,{columns:customerColumns,dataSource:customerDebts,loading:loading,rowKey:\"id\",pagination:{showSizeChanger:true,showQuickJumper:true,showTotal:(total,range)=>\"\".concat(range[0],\"-\").concat(range[1],\" c\\u1EE7a \").concat(total,\" kh\\xE1ch h\\xE0ng\")}})})},\"customers\"),/*#__PURE__*/_jsx(TabPane,{tab:/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(ShopOutlined,{}),\"N\\u1EE3 nh\\xE0 cung c\\u1EA5p (\",supplierDebts.length,\")\"]}),children:/*#__PURE__*/_jsx(Card,{title:\"Danh s\\xE1ch nh\\xE0 cung c\\u1EA5p c\\xF3 n\\u1EE3\",extra:/*#__PURE__*/_jsx(Button,{type:\"primary\",icon:/*#__PURE__*/_jsx(PlusOutlined,{}),onClick:()=>{setModalType('payment');setActiveTab('suppliers');setModalVisible(true);reset({payment_method:'cash',transaction_date:dayjs()});},children:\"Ghi nh\\u1EADn thanh to\\xE1n\"}),children:/*#__PURE__*/_jsx(Table,{columns:supplierColumns,dataSource:supplierDebts,loading:loading,rowKey:\"id\",pagination:{showSizeChanger:true,showQuickJumper:true,showTotal:(total,range)=>\"\".concat(range[0],\"-\").concat(range[1],\" c\\u1EE7a \").concat(total,\" nh\\xE0 cung c\\u1EA5p\")}})})},\"suppliers\")]}),/*#__PURE__*/_jsx(Modal,{title:\"Ghi nh\\u1EADn thanh to\\xE1n \".concat(activeTab==='customers'?'n·ª£ kh√°ch h√†ng':'n·ª£ nh√† cung c·∫•p'),open:modalVisible,onCancel:()=>setModalVisible(false),footer:null,width:600,children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(handlePayDebt),children:[/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:16},children:[/*#__PURE__*/_jsxs(\"label\",{style:{display:'block',marginBottom:4},children:[activeTab==='customers'?'Kh√°ch h√†ng':'Nh√† cung c·∫•p',\" \",/*#__PURE__*/_jsx(\"span\",{style:{color:'red'},children:\"*\"})]}),/*#__PURE__*/_jsx(Select,{placeholder:\"Ch\\u1ECDn \".concat(activeTab==='customers'?'kh√°ch h√†ng':'nh√† cung c·∫•p'),style:{width:'100%'},onChange:value=>setValue('entity_id',value),value:watch('entity_id'),showSearch:true,filterOption:(input,option)=>option.children.toLowerCase().indexOf(input.toLowerCase())>=0,children:(activeTab==='customers'?customers:suppliers).map(entity=>/*#__PURE__*/_jsx(Option,{value:entity.id,children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{children:entity.name}),entity.phone&&/*#__PURE__*/_jsxs(Text,{type:\"secondary\",style:{fontSize:12},children:[\"\\uD83D\\uDCDE \",entity.phone]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Text,{type:\"secondary\",style:{fontSize:12},children:[\"N\\u1EE3 hi\\u1EC7n t\\u1EA1i: \",(entity.current_debt||0).toLocaleString('vi-VN'),\" \\u20AB\"]})})]})},entity.id))}),errors.entity_id&&/*#__PURE__*/_jsx(\"div\",{style:{color:'red',fontSize:12},children:errors.entity_id.message})]}),/*#__PURE__*/_jsxs(Row,{gutter:16,children:[/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:16},children:[/*#__PURE__*/_jsxs(\"label\",{style:{display:'block',marginBottom:4},children:[\"S\\u1ED1 ti\\u1EC1n thanh to\\xE1n \",/*#__PURE__*/_jsx(\"span\",{style:{color:'red'},children:\"*\"})]}),/*#__PURE__*/_jsx(InputNumber,_objectSpread(_objectSpread({},register('amount',{valueAsNumber:true})),{},{placeholder:\"Nh\\u1EADp s\\u1ED1 ti\\u1EC1n\",style:{width:'100%'},formatter:value=>\"\".concat(value).replace(/\\B(?=(\\d{3})+(?!\\d))/g,','),parser:value=>value.replace(/\\$\\s?|(,*)/g,''),min:0})),errors.amount&&/*#__PURE__*/_jsx(\"div\",{style:{color:'red',fontSize:12},children:errors.amount.message})]})}),/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:16},children:[/*#__PURE__*/_jsxs(\"label\",{style:{display:'block',marginBottom:4},children:[\"Ph\\u01B0\\u01A1ng th\\u1EE9c thanh to\\xE1n \",/*#__PURE__*/_jsx(\"span\",{style:{color:'red'},children:\"*\"})]}),/*#__PURE__*/_jsx(Select,{placeholder:\"Ch\\u1ECDn ph\\u01B0\\u01A1ng th\\u1EE9c\",style:{width:'100%'},onChange:value=>setValue('payment_method',value),value:watch('payment_method'),children:paymentMethods.map(method=>/*#__PURE__*/_jsx(Option,{value:method.value,children:/*#__PURE__*/_jsxs(Space,{children:[method.icon,method.label]})},method.value))}),errors.payment_method&&/*#__PURE__*/_jsx(\"div\",{style:{color:'red',fontSize:12},children:errors.payment_method.message})]})})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:16},children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:4},children:\"M\\xF4 t\\u1EA3\"}),/*#__PURE__*/_jsx(Input.TextArea,_objectSpread(_objectSpread({},register('description')),{},{placeholder:\"Nh\\u1EADp m\\xF4 t\\u1EA3 thanh to\\xE1n\",rows:3}))]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:16},children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:4},children:\"Ng\\xE0y thanh to\\xE1n\"}),/*#__PURE__*/_jsx(DatePicker,_objectSpread(_objectSpread({},register('transaction_date')),{},{style:{width:'100%'},onChange:date=>setValue('transaction_date',date),value:watch('transaction_date')}))]}),/*#__PURE__*/_jsx(\"div\",{style:{textAlign:'right',marginTop:24},children:/*#__PURE__*/_jsxs(Space,{children:[/*#__PURE__*/_jsx(Button,{onClick:()=>setModalVisible(false),children:\"H\\u1EE7y\"}),/*#__PURE__*/_jsx(Button,{type:\"primary\",htmlType:\"submit\",loading:isSubmitting,icon:/*#__PURE__*/_jsx(DollarOutlined,{}),children:\"Ghi nh\\u1EADn thanh to\\xE1n\"})]})})]})})]});};export default DebtPage;","map":{"version":3,"names":["React","useState","useEffect","useForm","zodResolver","z","toast","Card","Table","Button","Modal","Input","Select","DatePicker","Space","Tag","Row","Col","Statistic","Tabs","InputNumber","Alert","Badge","Typography","PlusOutlined","UserOutlined","ShopOutlined","DollarOutlined","ExclamationCircleOutlined","CheckCircleOutlined","CreditCardOutlined","WalletOutlined","customersAPI","suppliersAPI","financialAPI","dayjs","jsx","_jsx","jsxs","_jsxs","Option","TabPane","Text","debtPaymentSchema","object","entity_id","number","min","amount","description","string","optional","payment_method","enum","errorMap","message","transaction_date","any","DebtPage","customerDebts","setCustomerDebts","supplierDebts","setSupplierDebts","customers","setCustomers","suppliers","setSuppliers","loading","setLoading","modalVisible","setModalVisible","activeTab","setActiveTab","modalType","setModalType","debtStats","setDebtStats","totalCustomerDebt","totalSupplierDebt","overduCustomerDebt","overdueSupplierDebt","register","handleSubmit","reset","setValue","watch","formState","errors","isSubmitting","resolver","defaultValues","paymentMethods","value","label","icon","fetchData","length","fetchCustomerDebts","fetchSupplierDebts","Promise","all","fetchCustomers","fetchSuppliers","error","customersWithDebt","filter","c","current_debt","totalDebt","reduce","sum","prev","_objectSpread","console","suppliersWithDebt","s","response","getAll","data","success","map","customer","Math","floor","random","total_spent","supplier","total_purchases","handlePayDebt","_data$transaction_dat","transactionData","type","category","customer_id","supplier_id","toISOString","Date","user_id","create","customerColumns","title","dataIndex","key","width","render","name","record","children","phone","style","fontSize","colors","regular","vip","wholesale","labels","color","debt","strong","toLocaleString","sorter","a","b","spent","_","status","text","size","onClick","id","supplierColumns","ellipsis","renderDebtSummary","gutter","marginBottom","span","precision","valueStyle","prefix","suffix","padding","showIcon","activeKey","onChange","tab","extra","columns","dataSource","rowKey","pagination","showSizeChanger","showQuickJumper","showTotal","total","range","concat","open","onCancel","footer","onSubmit","display","placeholder","showSearch","filterOption","input","option","toLowerCase","indexOf","entity","valueAsNumber","formatter","replace","parser","method","TextArea","rows","date","textAlign","marginTop","htmlType"],"sources":["C:/Users/ADMIN/Desktop/kho/kho/client/src/pages/DebtPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useForm } from 'react-hook-form';\r\nimport { zodResolver } from '@hookform/resolvers/zod';\r\nimport { z } from 'zod';\r\nimport { toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport {\r\n  Card,\r\n  Table,\r\n  Button,\r\n  Modal,\r\n  Input,\r\n  Select,\r\n  DatePicker,\r\n  Space,\r\n  Tag,\r\n  Row,\r\n  Col,\r\n  Statistic,\r\n  Tabs,\r\n  InputNumber,\r\n  Alert,\r\n  Badge,\r\n  Typography,\r\n} from 'antd';\r\nimport {\r\n  PlusOutlined,\r\n  UserOutlined,\r\n  ShopOutlined,\r\n  DollarOutlined,\r\n  ExclamationCircleOutlined,\r\n  CheckCircleOutlined,\r\n  CreditCardOutlined,\r\n  WalletOutlined,\r\n} from '@ant-design/icons';\r\nimport { customersAPI, suppliersAPI, financialAPI } from '../services/api';\r\nimport dayjs from 'dayjs';\r\n\r\nconst { Option } = Select;\r\nconst { TabPane } = Tabs;\r\nconst { Text } = Typography;\r\n\r\n// Zod schema for debt payment validation\r\nconst debtPaymentSchema = z.object({\r\n  entity_id: z.number().min(1, 'Vui l√≤ng ch·ªçn kh√°ch h√†ng/nh√† cung c·∫•p'),\r\n  amount: z.number().min(1, 'S·ªë ti·ªÅn ph·∫£i l·ªõn h∆°n 0'),\r\n  description: z.string().optional(),\r\n  payment_method: z.enum(['cash', 'card', 'transfer', 'ewallet'], {\r\n    errorMap: () => ({ message: 'Vui l√≤ng ch·ªçn ph∆∞∆°ng th·ª©c thanh to√°n' })\r\n  }),\r\n  transaction_date: z.any().optional(),\r\n});\r\n\r\nconst DebtPage = () => {\r\n  const [customerDebts, setCustomerDebts] = useState([]);\r\n  const [supplierDebts, setSupplierDebts] = useState([]);\r\n  const [customers, setCustomers] = useState([]);\r\n  const [suppliers, setSuppliers] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [modalVisible, setModalVisible] = useState(false);\r\n  const [activeTab, setActiveTab] = useState('customers');\r\n  const [modalType, setModalType] = useState('payment'); // 'payment' or 'debt'\r\n  const [debtStats, setDebtStats] = useState({\r\n    totalCustomerDebt: 0,\r\n    totalSupplierDebt: 0,\r\n    overduCustomerDebt: 0,\r\n    overdueSupplierDebt: 0,\r\n  });\r\n\r\n  const {\r\n    register,\r\n    handleSubmit,\r\n    reset,\r\n    setValue,\r\n    watch,\r\n    formState: { errors, isSubmitting },\r\n  } = useForm({\r\n    resolver: zodResolver(debtPaymentSchema),\r\n    defaultValues: {\r\n      payment_method: 'cash',\r\n      transaction_date: dayjs(),\r\n    },\r\n  });\r\n\r\n  const paymentMethods = [\r\n    { value: 'cash', label: 'Ti·ªÅn m·∫∑t', icon: <DollarOutlined /> },\r\n    { value: 'card', label: 'Th·∫ª', icon: <CreditCardOutlined /> },\r\n    { value: 'transfer', label: 'Chuy·ªÉn kho·∫£n', icon: <WalletOutlined /> },\r\n    { value: 'ewallet', label: 'V√≠ ƒëi·ªán t·ª≠', icon: <WalletOutlined /> },\r\n  ];\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n  }, []);\r\n\r\n  // Process debts when customers/suppliers data changes\r\n  useEffect(() => {\r\n    if (customers.length > 0) {\r\n      fetchCustomerDebts();\r\n    }\r\n  }, [customers]); // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n  useEffect(() => {\r\n    if (suppliers.length > 0) {\r\n      fetchSupplierDebts();\r\n    }\r\n  }, [suppliers]); // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n  const fetchData = async () => {\r\n    setLoading(true);\r\n    try {\r\n      // First fetch all customers and suppliers\r\n      await Promise.all([\r\n        fetchCustomers(),\r\n        fetchSuppliers(),\r\n      ]);\r\n      \r\n      // Then process debts (this will be done in useEffect when customers/suppliers change)\r\n    } catch (error) {\r\n      toast.error('L·ªói khi t·∫£i d·ªØ li·ªáu');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const fetchCustomerDebts = async () => {\r\n    try {\r\n      // Use customers data that's already fetched and enhanced\r\n      const customersWithDebt = customers.filter(c => (c.current_debt || 0) > 0);\r\n      setCustomerDebts(customersWithDebt);\r\n      \r\n      // Calculate debt stats\r\n      const totalDebt = customersWithDebt.reduce((sum, c) => sum + (c.current_debt || 0), 0);\r\n      setDebtStats(prev => ({ ...prev, totalCustomerDebt: totalDebt }));\r\n    } catch (error) {\r\n      console.error('Error processing customer debts:', error);\r\n      setCustomerDebts([]);\r\n    }\r\n  };\r\n\r\n  const fetchSupplierDebts = async () => {\r\n    try {\r\n      // Use suppliers data that's already fetched and enhanced\r\n      const suppliersWithDebt = suppliers.filter(s => (s.current_debt || 0) > 0);\r\n      setSupplierDebts(suppliersWithDebt);\r\n      \r\n      // Calculate debt stats\r\n      const totalDebt = suppliersWithDebt.reduce((sum, s) => sum + (s.current_debt || 0), 0);\r\n      setDebtStats(prev => ({ ...prev, totalSupplierDebt: totalDebt }));\r\n    } catch (error) {\r\n      console.error('Error processing supplier debts:', error);\r\n      setSupplierDebts([]);\r\n    }\r\n  };\r\n\r\n  const fetchCustomers = async () => {\r\n    try {\r\n      const response = await customersAPI.getAll();\r\n      if (response.data.success) {\r\n        // Calculate debt for each customer (mock calculation for now)\r\n        const customersWithDebt = response.data.data.map(customer => ({\r\n          ...customer,\r\n          current_debt: customer.current_debt || Math.floor(Math.random() * 5000000), // Mock debt for demo\r\n          total_spent: customer.total_spent || Math.floor(Math.random() * 20000000)\r\n        }));\r\n        setCustomers(customersWithDebt);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching customers:', error);\r\n      // Fallback: Set empty array to avoid crashes\r\n      setCustomers([]);\r\n    }\r\n  };\r\n\r\n  const fetchSuppliers = async () => {\r\n    try {\r\n      const response = await suppliersAPI.getAll();\r\n      if (response.data.success) {\r\n        // Calculate debt for each supplier (mock calculation for now)\r\n        const suppliersWithDebt = response.data.data.map(supplier => ({\r\n          ...supplier,\r\n          current_debt: supplier.current_debt || Math.floor(Math.random() * 10000000), // Mock debt for demo\r\n          total_purchases: supplier.total_purchases || Math.floor(Math.random() * 50000000)\r\n        }));\r\n        setSuppliers(suppliersWithDebt);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching suppliers:', error);\r\n      // Fallback: Set empty array to avoid crashes\r\n      setSuppliers([]);\r\n    }\r\n  };\r\n\r\n  const handlePayDebt = async (data) => {\r\n    try {\r\n      const transactionData = {\r\n        type: activeTab === 'customers' ? 'income' : 'expense',\r\n        category: activeTab === 'customers' ? 'Thu n·ª£ kh√°ch h√†ng' : 'Tr·∫£ n·ª£ nh√† cung c·∫•p',\r\n        amount: data.amount,\r\n        description: data.description,\r\n        customer_id: activeTab === 'customers' ? data.entity_id : null,\r\n        supplier_id: activeTab === 'suppliers' ? data.entity_id : null,\r\n        payment_method: data.payment_method,\r\n        transaction_date: data.transaction_date?.toISOString() || new Date().toISOString(),\r\n        user_id: 1,\r\n      };\r\n\r\n      const response = await financialAPI.create(transactionData);\r\n      if (response.data.success) {\r\n        toast.success('Ghi nh·∫≠n thanh to√°n th√†nh c√¥ng');\r\n        setModalVisible(false);\r\n        reset();\r\n        fetchData();\r\n      }\r\n    } catch (error) {\r\n      toast.error('L·ªói khi ghi nh·∫≠n thanh to√°n');\r\n    }\r\n  };\r\n\r\n  const customerColumns = [\r\n    {\r\n      title: 'M√£ KH',\r\n      dataIndex: 'code',\r\n      key: 'code',\r\n      width: 100,\r\n    },\r\n    {\r\n      title: 'T√™n kh√°ch h√†ng',\r\n      dataIndex: 'name',\r\n      key: 'name',\r\n      render: (name, record) => (\r\n        <div>\r\n          <div>{name}</div>\r\n          {record.phone && (\r\n            <Text type=\"secondary\" style={{ fontSize: 12 }}>\r\n              {record.phone}\r\n            </Text>\r\n          )}\r\n        </div>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Lo·∫°i KH',\r\n      dataIndex: 'customer_type',\r\n      key: 'customer_type',\r\n      render: (type) => {\r\n        const colors = {\r\n          regular: 'default',\r\n          vip: 'gold',\r\n          wholesale: 'blue',\r\n        };\r\n        const labels = {\r\n          regular: 'Th∆∞·ªùng',\r\n          vip: 'VIP',\r\n          wholesale: 'S·ªâ',\r\n        };\r\n        return <Tag color={colors[type]}>{labels[type]}</Tag>;\r\n      },\r\n    },\r\n    {\r\n      title: 'S·ªë n·ª£',\r\n      dataIndex: 'current_debt',\r\n      key: 'current_debt',\r\n      render: (debt) => (\r\n        <Text strong style={{ color: debt > 0 ? '#ff4d4f' : '#52c41a' }}>\r\n          {debt.toLocaleString('vi-VN')} ‚Ç´\r\n        </Text>\r\n      ),\r\n      sorter: (a, b) => a.current_debt - b.current_debt,\r\n    },\r\n    {\r\n      title: 'T·ªïng chi ti√™u',\r\n      dataIndex: 'total_spent',\r\n      key: 'total_spent',\r\n      render: (spent) => (\r\n        <Text type=\"secondary\">\r\n          {spent ? spent.toLocaleString('vi-VN') : 0} ‚Ç´\r\n        </Text>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Tr·∫°ng th√°i',\r\n      key: 'status',\r\n      render: (_, record) => {\r\n        const debt = record.current_debt || 0;\r\n        if (debt === 0) {\r\n          return <Badge status=\"success\" text=\"ƒê√£ thanh to√°n\" />;\r\n        } else if (debt > 1000000) {\r\n          return <Badge status=\"error\" text=\"N·ª£ l·ªõn\" />;\r\n        } else {\r\n          return <Badge status=\"warning\" text=\"C√≥ n·ª£\" />;\r\n        }\r\n      },\r\n    },\r\n    {\r\n      title: 'Thao t√°c',\r\n      key: 'actions',\r\n      render: (_, record) => (\r\n        <Space>\r\n          <Button\r\n            type=\"primary\"\r\n            size=\"small\"\r\n            icon={<DollarOutlined />}\r\n            onClick={() => {\r\n              setModalType('payment');\r\n              setActiveTab('customers');\r\n              setModalVisible(true);\r\n              reset({\r\n                entity_id: record.id,\r\n                payment_method: 'cash',\r\n                transaction_date: dayjs(),\r\n              });\r\n            }}\r\n          >\r\n            Thanh to√°n\r\n          </Button>\r\n        </Space>\r\n      ),\r\n    },\r\n  ];\r\n\r\n  const supplierColumns = [\r\n    {\r\n      title: 'M√£ NCC',\r\n      dataIndex: 'code',\r\n      key: 'code',\r\n      width: 100,\r\n    },\r\n    {\r\n      title: 'T√™n nh√† cung c·∫•p',\r\n      dataIndex: 'name',\r\n      key: 'name',\r\n      render: (name, record) => (\r\n        <div>\r\n          <div>{name}</div>\r\n          {record.phone && (\r\n            <Text type=\"secondary\" style={{ fontSize: 12 }}>\r\n              {record.phone}\r\n            </Text>\r\n          )}\r\n        </div>\r\n      ),\r\n    },\r\n    {\r\n      title: 'ƒê·ªãa ch·ªâ',\r\n      dataIndex: 'address',\r\n      key: 'address',\r\n      ellipsis: true,\r\n    },\r\n    {\r\n      title: 'S·ªë n·ª£',\r\n      dataIndex: 'current_debt',\r\n      key: 'current_debt',\r\n      render: (debt) => (\r\n        <Text strong style={{ color: debt > 0 ? '#ff4d4f' : '#52c41a' }}>\r\n          {debt.toLocaleString('vi-VN')} ‚Ç´\r\n        </Text>\r\n      ),\r\n      sorter: (a, b) => a.current_debt - b.current_debt,\r\n    },\r\n    {\r\n      title: 'Tr·∫°ng th√°i',\r\n      key: 'status',\r\n      render: (_, record) => {\r\n        const debt = record.current_debt || 0;\r\n        if (debt === 0) {\r\n          return <Badge status=\"success\" text=\"ƒê√£ thanh to√°n\" />;\r\n        } else if (debt > 5000000) {\r\n          return <Badge status=\"error\" text=\"N·ª£ l·ªõn\" />;\r\n        } else {\r\n          return <Badge status=\"warning\" text=\"C√≥ n·ª£\" />;\r\n        }\r\n      },\r\n    },\r\n    {\r\n      title: 'Thao t√°c',\r\n      key: 'actions',\r\n      render: (_, record) => (\r\n        <Space>\r\n          <Button\r\n            type=\"primary\"\r\n            size=\"small\"\r\n            icon={<DollarOutlined />}\r\n            onClick={() => {\r\n              setModalType('payment');\r\n              setActiveTab('suppliers');\r\n              setModalVisible(true);\r\n              reset({\r\n                entity_id: record.id,\r\n                payment_method: 'cash',\r\n                transaction_date: dayjs(),\r\n              });\r\n            }}\r\n          >\r\n            Thanh to√°n\r\n          </Button>\r\n        </Space>\r\n      ),\r\n    },\r\n  ];\r\n\r\n  const renderDebtSummary = () => {\r\n    return (\r\n      <Row gutter={16} style={{ marginBottom: 24 }}>\r\n        <Col span={6}>\r\n          <Card>\r\n            <Statistic\r\n              title=\"T·ªïng n·ª£ kh√°ch h√†ng\"\r\n              value={debtStats.totalCustomerDebt}\r\n              precision={0}\r\n              valueStyle={{ color: '#cf1322' }}\r\n              prefix={<UserOutlined />}\r\n              suffix=\"‚Ç´\"\r\n            />\r\n          </Card>\r\n        </Col>\r\n        <Col span={6}>\r\n          <Card>\r\n            <Statistic\r\n              title=\"T·ªïng n·ª£ nh√† cung c·∫•p\"\r\n              value={debtStats.totalSupplierDebt}\r\n              precision={0}\r\n              valueStyle={{ color: '#cf1322' }}\r\n              prefix={<ShopOutlined />}\r\n              suffix=\"‚Ç´\"\r\n            />\r\n          </Card>\r\n        </Col>\r\n        <Col span={6}>\r\n          <Card>\r\n            <Statistic\r\n              title=\"T·ªïng n·ª£ ph·∫£i thu\"\r\n              value={debtStats.totalCustomerDebt + debtStats.totalSupplierDebt}\r\n              precision={0}\r\n              valueStyle={{ color: '#1890ff' }}\r\n              prefix={<DollarOutlined />}\r\n              suffix=\"‚Ç´\"\r\n            />\r\n          </Card>\r\n        </Col>\r\n        <Col span={6}>\r\n          <Card>\r\n            <Statistic\r\n              title=\"S·ªë kh√°ch h√†ng c√≥ n·ª£\"\r\n              value={customerDebts.length}\r\n              valueStyle={{ color: '#52c41a' }}\r\n              prefix={<UserOutlined />}\r\n            />\r\n          </Card>\r\n        </Col>\r\n      </Row>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div style={{ padding: 24 }}>\r\n      {renderDebtSummary()}\r\n\r\n      <Alert\r\n        message=\"Qu·∫£n l√Ω n·ª£\"\r\n        description=\"Theo d√µi v√† qu·∫£n l√Ω c√°c kho·∫£n n·ª£ c·ªßa kh√°ch h√†ng v√† nh√† cung c·∫•p. H·ªá th·ªëng s·∫Ω t·ª± ƒë·ªông c·∫≠p nh·∫≠t s·ªë d∆∞ n·ª£ khi c√≥ giao d·ªãch thanh to√°n.\"\r\n        type=\"info\"\r\n        showIcon\r\n        style={{ marginBottom: 24 }}\r\n      />\r\n\r\n      <Tabs activeKey={activeTab} onChange={setActiveTab}>\r\n        <TabPane\r\n          tab={\r\n            <span>\r\n              <UserOutlined />\r\n              N·ª£ kh√°ch h√†ng ({customerDebts.length})\r\n            </span>\r\n          }\r\n          key=\"customers\"\r\n        >\r\n          <Card\r\n            title=\"Danh s√°ch kh√°ch h√†ng c√≥ n·ª£\"\r\n            extra={\r\n              <Button\r\n                type=\"primary\"\r\n                icon={<PlusOutlined />}\r\n                onClick={() => {\r\n                  setModalType('payment');\r\n                  setActiveTab('customers');\r\n                  setModalVisible(true);\r\n                  reset({\r\n                    payment_method: 'cash',\r\n                    transaction_date: dayjs(),\r\n                  });\r\n                }}\r\n              >\r\n                Ghi nh·∫≠n thanh to√°n\r\n              </Button>\r\n            }\r\n          >\r\n            <Table\r\n              columns={customerColumns}\r\n              dataSource={customerDebts}\r\n              loading={loading}\r\n              rowKey=\"id\"\r\n              pagination={{\r\n                showSizeChanger: true,\r\n                showQuickJumper: true,\r\n                showTotal: (total, range) =>\r\n                  `${range[0]}-${range[1]} c·ªßa ${total} kh√°ch h√†ng`,\r\n              }}\r\n            />\r\n          </Card>\r\n        </TabPane>\r\n\r\n        <TabPane\r\n          tab={\r\n            <span>\r\n              <ShopOutlined />\r\n              N·ª£ nh√† cung c·∫•p ({supplierDebts.length})\r\n            </span>\r\n          }\r\n          key=\"suppliers\"\r\n        >\r\n          <Card\r\n            title=\"Danh s√°ch nh√† cung c·∫•p c√≥ n·ª£\"\r\n            extra={\r\n              <Button\r\n                type=\"primary\"\r\n                icon={<PlusOutlined />}\r\n                onClick={() => {\r\n                  setModalType('payment');\r\n                  setActiveTab('suppliers');\r\n                  setModalVisible(true);\r\n                  reset({\r\n                    payment_method: 'cash',\r\n                    transaction_date: dayjs(),\r\n                  });\r\n                }}\r\n              >\r\n                Ghi nh·∫≠n thanh to√°n\r\n              </Button>\r\n            }\r\n          >\r\n            <Table\r\n              columns={supplierColumns}\r\n              dataSource={supplierDebts}\r\n              loading={loading}\r\n              rowKey=\"id\"\r\n              pagination={{\r\n                showSizeChanger: true,\r\n                showQuickJumper: true,\r\n                showTotal: (total, range) =>\r\n                  `${range[0]}-${range[1]} c·ªßa ${total} nh√† cung c·∫•p`,\r\n              }}\r\n            />\r\n          </Card>\r\n        </TabPane>\r\n      </Tabs>\r\n\r\n      <Modal\r\n        title={`Ghi nh·∫≠n thanh to√°n ${activeTab === 'customers' ? 'n·ª£ kh√°ch h√†ng' : 'n·ª£ nh√† cung c·∫•p'}`}\r\n        open={modalVisible}\r\n        onCancel={() => setModalVisible(false)}\r\n        footer={null}\r\n        width={600}\r\n      >\r\n        <form onSubmit={handleSubmit(handlePayDebt)}>\r\n          <div style={{ marginBottom: 16 }}>\r\n            <label style={{ display: 'block', marginBottom: 4 }}>\r\n              {activeTab === 'customers' ? 'Kh√°ch h√†ng' : 'Nh√† cung c·∫•p'} <span style={{ color: 'red' }}>*</span>\r\n            </label>\r\n            <Select\r\n              placeholder={`Ch·ªçn ${activeTab === 'customers' ? 'kh√°ch h√†ng' : 'nh√† cung c·∫•p'}`}\r\n              style={{ width: '100%' }}\r\n              onChange={(value) => setValue('entity_id', value)}\r\n              value={watch('entity_id')}\r\n              showSearch\r\n              filterOption={(input, option) =>\r\n                option.children.toLowerCase().indexOf(input.toLowerCase()) >= 0\r\n              }\r\n            >\r\n              {(activeTab === 'customers' ? customers : suppliers)\r\n                .map((entity) => (\r\n                  <Option key={entity.id} value={entity.id}>\r\n                    <div>\r\n                      <div>{entity.name}</div>\r\n                      {entity.phone && (\r\n                        <Text type=\"secondary\" style={{ fontSize: 12 }}>\r\n                          üìû {entity.phone}\r\n                        </Text>\r\n                      )}\r\n                      <div>\r\n                        <Text type=\"secondary\" style={{ fontSize: 12 }}>\r\n                          N·ª£ hi·ªán t·∫°i: {(entity.current_debt || 0).toLocaleString('vi-VN')} ‚Ç´\r\n                        </Text>\r\n                      </div>\r\n                    </div>\r\n                  </Option>\r\n                ))}\r\n            </Select>\r\n            {errors.entity_id && (\r\n              <div style={{ color: 'red', fontSize: 12 }}>\r\n                {errors.entity_id.message}\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          <Row gutter={16}>\r\n            <Col span={12}>\r\n              <div style={{ marginBottom: 16 }}>\r\n                <label style={{ display: 'block', marginBottom: 4 }}>\r\n                  S·ªë ti·ªÅn thanh to√°n <span style={{ color: 'red' }}>*</span>\r\n                </label>\r\n                <InputNumber\r\n                  {...register('amount', { valueAsNumber: true })}\r\n                  placeholder=\"Nh·∫≠p s·ªë ti·ªÅn\"\r\n                  style={{ width: '100%' }}\r\n                  formatter={(value) => `${value}`.replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',')}\r\n                  parser={(value) => value.replace(/\\$\\s?|(,*)/g, '')}\r\n                  min={0}\r\n                />\r\n                {errors.amount && (\r\n                  <div style={{ color: 'red', fontSize: 12 }}>\r\n                    {errors.amount.message}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </Col>\r\n            <Col span={12}>\r\n              <div style={{ marginBottom: 16 }}>\r\n                <label style={{ display: 'block', marginBottom: 4 }}>\r\n                  Ph∆∞∆°ng th·ª©c thanh to√°n <span style={{ color: 'red' }}>*</span>\r\n                </label>\r\n                <Select\r\n                  placeholder=\"Ch·ªçn ph∆∞∆°ng th·ª©c\"\r\n                  style={{ width: '100%' }}\r\n                  onChange={(value) => setValue('payment_method', value)}\r\n                  value={watch('payment_method')}\r\n                >\r\n                  {paymentMethods.map((method) => (\r\n                    <Option key={method.value} value={method.value}>\r\n                      <Space>\r\n                        {method.icon}\r\n                        {method.label}\r\n                      </Space>\r\n                    </Option>\r\n                  ))}\r\n                </Select>\r\n                {errors.payment_method && (\r\n                  <div style={{ color: 'red', fontSize: 12 }}>\r\n                    {errors.payment_method.message}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </Col>\r\n          </Row>\r\n\r\n          <div style={{ marginBottom: 16 }}>\r\n            <label style={{ display: 'block', marginBottom: 4 }}>\r\n              M√¥ t·∫£\r\n            </label>\r\n            <Input.TextArea\r\n              {...register('description')}\r\n              placeholder=\"Nh·∫≠p m√¥ t·∫£ thanh to√°n\"\r\n              rows={3}\r\n            />\r\n          </div>\r\n\r\n          <div style={{ marginBottom: 16 }}>\r\n            <label style={{ display: 'block', marginBottom: 4 }}>\r\n              Ng√†y thanh to√°n\r\n            </label>\r\n            <DatePicker\r\n              {...register('transaction_date')}\r\n              style={{ width: '100%' }}\r\n              onChange={(date) => setValue('transaction_date', date)}\r\n              value={watch('transaction_date')}\r\n            />\r\n          </div>\r\n\r\n          <div style={{ textAlign: 'right', marginTop: 24 }}>\r\n            <Space>\r\n              <Button onClick={() => setModalVisible(false)}>\r\n                H·ªßy\r\n              </Button>\r\n              <Button\r\n                type=\"primary\"\r\n                htmlType=\"submit\"\r\n                loading={isSubmitting}\r\n                icon={<DollarOutlined />}\r\n              >\r\n                Ghi nh·∫≠n thanh to√°n\r\n              </Button>\r\n            </Space>\r\n          </div>\r\n        </form>\r\n      </Modal>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DebtPage; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}