{"ast":null,"code":"import _objectSpread from\"C:/Users/ADMIN/Desktop/kho/kho/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{useForm}from'react-hook-form';import{zodResolver}from'@hookform/resolvers/zod';import{z}from'zod';import{toast}from'react-toastify';import'react-toastify/dist/ReactToastify.css';import{Card,Table,Button,Modal,Input,Select,DatePicker,Space,Tag,Row,Col,Statistic,Tabs,InputNumber,Alert,Badge,Typography}from'antd';import{PlusOutlined,UserOutlined,ShopOutlined,DollarOutlined,ExclamationCircleOutlined,CheckCircleOutlined,CreditCardOutlined,WalletOutlined}from'@ant-design/icons';import{customersAPI,suppliersAPI,financialAPI}from'../services/api';import dayjs from'dayjs';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const{Option}=Select;const{TabPane}=Tabs;const{Text}=Typography;// Zod schema for debt payment validation\nconst debtPaymentSchema=z.object({entity_id:z.number().min(1,'Vui lòng chọn khách hàng/nhà cung cấp'),amount:z.number().min(1,'Số tiền phải lớn hơn 0'),description:z.string().optional(),payment_method:z.enum(['cash','card','transfer','ewallet'],{errorMap:()=>({message:'Vui lòng chọn phương thức thanh toán'})}),transaction_date:z.any().optional()});const DebtPage=()=>{const[customerDebts,setCustomerDebts]=useState([]);const[supplierDebts,setSupplierDebts]=useState([]);const[customers,setCustomers]=useState([]);const[suppliers,setSuppliers]=useState([]);const[loading,setLoading]=useState(false);const[modalVisible,setModalVisible]=useState(false);const[activeTab,setActiveTab]=useState('customers');const[modalType,setModalType]=useState('payment');// 'payment' or 'debt'\nconst[debtStats,setDebtStats]=useState({totalCustomerDebt:0,totalSupplierDebt:0,overduCustomerDebt:0,overdueSupplierDebt:0});const{register,handleSubmit,reset,setValue,watch,formState:{errors,isSubmitting}}=useForm({resolver:zodResolver(debtPaymentSchema),defaultValues:{payment_method:'cash',transaction_date:dayjs()}});const paymentMethods=[{value:'cash',label:'Tiền mặt',icon:/*#__PURE__*/_jsx(DollarOutlined,{})},{value:'card',label:'Thẻ',icon:/*#__PURE__*/_jsx(CreditCardOutlined,{})},{value:'transfer',label:'Chuyển khoản',icon:/*#__PURE__*/_jsx(WalletOutlined,{})},{value:'ewallet',label:'Ví điện tử',icon:/*#__PURE__*/_jsx(WalletOutlined,{})}];useEffect(()=>{fetchData();},[]);const fetchData=async()=>{setLoading(true);try{await Promise.all([fetchCustomerDebts(),fetchSupplierDebts(),fetchCustomers(),fetchSuppliers()]);}catch(error){toast.error('Lỗi khi tải dữ liệu');}finally{setLoading(false);}};const fetchCustomerDebts=async()=>{try{const response=await customersAPI.getAll();if(response.data.success){const customers=response.data.data.filter(c=>c.current_debt>0);setCustomerDebts(customers);// Calculate debt stats\nconst totalDebt=customers.reduce((sum,c)=>sum+(c.current_debt||0),0);setDebtStats(prev=>_objectSpread(_objectSpread({},prev),{},{totalCustomerDebt:totalDebt}));}}catch(error){console.error('Error fetching customer debts:',error);}};const fetchSupplierDebts=async()=>{try{const response=await suppliersAPI.getAll();if(response.data.success){const suppliers=response.data.data.filter(s=>s.current_debt>0);setSupplierDebts(suppliers);// Calculate debt stats\nconst totalDebt=suppliers.reduce((sum,s)=>sum+(s.current_debt||0),0);setDebtStats(prev=>_objectSpread(_objectSpread({},prev),{},{totalSupplierDebt:totalDebt}));}}catch(error){console.error('Error fetching supplier debts:',error);}};const fetchCustomers=async()=>{try{const response=await customersAPI.getAll();if(response.data.success){setCustomers(response.data.data);}}catch(error){console.error('Error fetching customers:',error);}};const fetchSuppliers=async()=>{try{const response=await suppliersAPI.getAll();if(response.data.success){setSuppliers(response.data.data);}}catch(error){console.error('Error fetching suppliers:',error);}};const handlePayDebt=async data=>{try{var _data$transaction_dat;const transactionData={type:activeTab==='customers'?'income':'expense',category:activeTab==='customers'?'Thu nợ khách hàng':'Trả nợ nhà cung cấp',amount:data.amount,description:data.description,customer_id:activeTab==='customers'?data.entity_id:null,supplier_id:activeTab==='suppliers'?data.entity_id:null,payment_method:data.payment_method,transaction_date:((_data$transaction_dat=data.transaction_date)===null||_data$transaction_dat===void 0?void 0:_data$transaction_dat.toISOString())||new Date().toISOString(),user_id:1};const response=await financialAPI.create(transactionData);if(response.data.success){toast.success('Ghi nhận thanh toán thành công');setModalVisible(false);reset();fetchData();}}catch(error){toast.error('Lỗi khi ghi nhận thanh toán');}};const customerColumns=[{title:'Mã KH',dataIndex:'code',key:'code',width:100},{title:'Tên khách hàng',dataIndex:'name',key:'name',render:(name,record)=>/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{children:name}),record.phone&&/*#__PURE__*/_jsx(Text,{type:\"secondary\",style:{fontSize:12},children:record.phone})]})},{title:'Loại KH',dataIndex:'customer_type',key:'customer_type',render:type=>{const colors={regular:'default',vip:'gold',wholesale:'blue'};const labels={regular:'Thường',vip:'VIP',wholesale:'Sỉ'};return/*#__PURE__*/_jsx(Tag,{color:colors[type],children:labels[type]});}},{title:'Số nợ',dataIndex:'current_debt',key:'current_debt',render:debt=>/*#__PURE__*/_jsxs(Text,{strong:true,style:{color:debt>0?'#ff4d4f':'#52c41a'},children:[debt.toLocaleString('vi-VN'),\" \\u20AB\"]}),sorter:(a,b)=>a.current_debt-b.current_debt},{title:'Tổng chi tiêu',dataIndex:'total_spent',key:'total_spent',render:spent=>/*#__PURE__*/_jsxs(Text,{type:\"secondary\",children:[spent?spent.toLocaleString('vi-VN'):0,\" \\u20AB\"]})},{title:'Trạng thái',key:'status',render:(_,record)=>{const debt=record.current_debt||0;if(debt===0){return/*#__PURE__*/_jsx(Badge,{status:\"success\",text:\"\\u0110\\xE3 thanh to\\xE1n\"});}else if(debt>1000000){return/*#__PURE__*/_jsx(Badge,{status:\"error\",text:\"N\\u1EE3 l\\u1EDBn\"});}else{return/*#__PURE__*/_jsx(Badge,{status:\"warning\",text:\"C\\xF3 n\\u1EE3\"});}}},{title:'Thao tác',key:'actions',render:(_,record)=>/*#__PURE__*/_jsx(Space,{children:/*#__PURE__*/_jsx(Button,{type:\"primary\",size:\"small\",icon:/*#__PURE__*/_jsx(DollarOutlined,{}),onClick:()=>{setModalType('payment');setActiveTab('customers');setModalVisible(true);reset({entity_id:record.id,payment_method:'cash',transaction_date:dayjs()});},children:\"Thanh to\\xE1n\"})})}];const supplierColumns=[{title:'Mã NCC',dataIndex:'code',key:'code',width:100},{title:'Tên nhà cung cấp',dataIndex:'name',key:'name',render:(name,record)=>/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{children:name}),record.phone&&/*#__PURE__*/_jsx(Text,{type:\"secondary\",style:{fontSize:12},children:record.phone})]})},{title:'Địa chỉ',dataIndex:'address',key:'address',ellipsis:true},{title:'Số nợ',dataIndex:'current_debt',key:'current_debt',render:debt=>/*#__PURE__*/_jsxs(Text,{strong:true,style:{color:debt>0?'#ff4d4f':'#52c41a'},children:[debt.toLocaleString('vi-VN'),\" \\u20AB\"]}),sorter:(a,b)=>a.current_debt-b.current_debt},{title:'Trạng thái',key:'status',render:(_,record)=>{const debt=record.current_debt||0;if(debt===0){return/*#__PURE__*/_jsx(Badge,{status:\"success\",text:\"\\u0110\\xE3 thanh to\\xE1n\"});}else if(debt>5000000){return/*#__PURE__*/_jsx(Badge,{status:\"error\",text:\"N\\u1EE3 l\\u1EDBn\"});}else{return/*#__PURE__*/_jsx(Badge,{status:\"warning\",text:\"C\\xF3 n\\u1EE3\"});}}},{title:'Thao tác',key:'actions',render:(_,record)=>/*#__PURE__*/_jsx(Space,{children:/*#__PURE__*/_jsx(Button,{type:\"primary\",size:\"small\",icon:/*#__PURE__*/_jsx(DollarOutlined,{}),onClick:()=>{setModalType('payment');setActiveTab('suppliers');setModalVisible(true);reset({entity_id:record.id,payment_method:'cash',transaction_date:dayjs()});},children:\"Thanh to\\xE1n\"})})}];const renderDebtSummary=()=>{return/*#__PURE__*/_jsxs(Row,{gutter:16,style:{marginBottom:24},children:[/*#__PURE__*/_jsx(Col,{span:6,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(Statistic,{title:\"T\\u1ED5ng n\\u1EE3 kh\\xE1ch h\\xE0ng\",value:debtStats.totalCustomerDebt,precision:0,valueStyle:{color:'#cf1322'},prefix:/*#__PURE__*/_jsx(UserOutlined,{}),suffix:\"\\u20AB\"})})}),/*#__PURE__*/_jsx(Col,{span:6,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(Statistic,{title:\"T\\u1ED5ng n\\u1EE3 nh\\xE0 cung c\\u1EA5p\",value:debtStats.totalSupplierDebt,precision:0,valueStyle:{color:'#cf1322'},prefix:/*#__PURE__*/_jsx(ShopOutlined,{}),suffix:\"\\u20AB\"})})}),/*#__PURE__*/_jsx(Col,{span:6,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(Statistic,{title:\"T\\u1ED5ng n\\u1EE3 ph\\u1EA3i thu\",value:debtStats.totalCustomerDebt+debtStats.totalSupplierDebt,precision:0,valueStyle:{color:'#1890ff'},prefix:/*#__PURE__*/_jsx(DollarOutlined,{}),suffix:\"\\u20AB\"})})}),/*#__PURE__*/_jsx(Col,{span:6,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(Statistic,{title:\"S\\u1ED1 kh\\xE1ch h\\xE0ng c\\xF3 n\\u1EE3\",value:customerDebts.length,valueStyle:{color:'#52c41a'},prefix:/*#__PURE__*/_jsx(UserOutlined,{})})})})]});};return/*#__PURE__*/_jsxs(\"div\",{style:{padding:24},children:[renderDebtSummary(),/*#__PURE__*/_jsx(Alert,{message:\"Qu\\u1EA3n l\\xFD n\\u1EE3\",description:\"Theo d\\xF5i v\\xE0 qu\\u1EA3n l\\xFD c\\xE1c kho\\u1EA3n n\\u1EE3 c\\u1EE7a kh\\xE1ch h\\xE0ng v\\xE0 nh\\xE0 cung c\\u1EA5p. H\\u1EC7 th\\u1ED1ng s\\u1EBD t\\u1EF1 \\u0111\\u1ED9ng c\\u1EADp nh\\u1EADt s\\u1ED1 d\\u01B0 n\\u1EE3 khi c\\xF3 giao d\\u1ECBch thanh to\\xE1n.\",type:\"info\",showIcon:true,style:{marginBottom:24}}),/*#__PURE__*/_jsxs(Tabs,{activeKey:activeTab,onChange:setActiveTab,children:[/*#__PURE__*/_jsx(TabPane,{tab:/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(UserOutlined,{}),\"N\\u1EE3 kh\\xE1ch h\\xE0ng (\",customerDebts.length,\")\"]}),children:/*#__PURE__*/_jsx(Card,{title:\"Danh s\\xE1ch kh\\xE1ch h\\xE0ng c\\xF3 n\\u1EE3\",extra:/*#__PURE__*/_jsx(Button,{type:\"primary\",icon:/*#__PURE__*/_jsx(PlusOutlined,{}),onClick:()=>{setModalType('payment');setActiveTab('customers');setModalVisible(true);reset({payment_method:'cash',transaction_date:dayjs()});},children:\"Ghi nh\\u1EADn thanh to\\xE1n\"}),children:/*#__PURE__*/_jsx(Table,{columns:customerColumns,dataSource:customerDebts,loading:loading,rowKey:\"id\",pagination:{showSizeChanger:true,showQuickJumper:true,showTotal:(total,range)=>\"\".concat(range[0],\"-\").concat(range[1],\" c\\u1EE7a \").concat(total,\" kh\\xE1ch h\\xE0ng\")}})})},\"customers\"),/*#__PURE__*/_jsx(TabPane,{tab:/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(ShopOutlined,{}),\"N\\u1EE3 nh\\xE0 cung c\\u1EA5p (\",supplierDebts.length,\")\"]}),children:/*#__PURE__*/_jsx(Card,{title:\"Danh s\\xE1ch nh\\xE0 cung c\\u1EA5p c\\xF3 n\\u1EE3\",extra:/*#__PURE__*/_jsx(Button,{type:\"primary\",icon:/*#__PURE__*/_jsx(PlusOutlined,{}),onClick:()=>{setModalType('payment');setActiveTab('suppliers');setModalVisible(true);reset({payment_method:'cash',transaction_date:dayjs()});},children:\"Ghi nh\\u1EADn thanh to\\xE1n\"}),children:/*#__PURE__*/_jsx(Table,{columns:supplierColumns,dataSource:supplierDebts,loading:loading,rowKey:\"id\",pagination:{showSizeChanger:true,showQuickJumper:true,showTotal:(total,range)=>\"\".concat(range[0],\"-\").concat(range[1],\" c\\u1EE7a \").concat(total,\" nh\\xE0 cung c\\u1EA5p\")}})})},\"suppliers\")]}),/*#__PURE__*/_jsx(Modal,{title:\"Ghi nh\\u1EADn thanh to\\xE1n \".concat(activeTab==='customers'?'nợ khách hàng':'nợ nhà cung cấp'),open:modalVisible,onCancel:()=>setModalVisible(false),footer:null,width:600,children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(handlePayDebt),children:[/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:16},children:[/*#__PURE__*/_jsxs(\"label\",{style:{display:'block',marginBottom:4},children:[activeTab==='customers'?'Khách hàng':'Nhà cung cấp',\" \",/*#__PURE__*/_jsx(\"span\",{style:{color:'red'},children:\"*\"})]}),/*#__PURE__*/_jsx(Select,{placeholder:\"Ch\\u1ECDn \".concat(activeTab==='customers'?'khách hàng':'nhà cung cấp'),style:{width:'100%'},onChange:value=>setValue('entity_id',value),value:watch('entity_id'),showSearch:true,filterOption:(input,option)=>option.children.toLowerCase().indexOf(input.toLowerCase())>=0,children:(activeTab==='customers'?customers:suppliers).filter(entity=>entity.current_debt>0).map(entity=>{var _entity$current_debt;return/*#__PURE__*/_jsx(Option,{value:entity.id,children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{children:entity.name}),/*#__PURE__*/_jsxs(Text,{type:\"secondary\",style:{fontSize:12},children:[\"N\\u1EE3: \",(_entity$current_debt=entity.current_debt)===null||_entity$current_debt===void 0?void 0:_entity$current_debt.toLocaleString('vi-VN'),\" \\u20AB\"]})]})},entity.id);})}),errors.entity_id&&/*#__PURE__*/_jsx(\"div\",{style:{color:'red',fontSize:12},children:errors.entity_id.message})]}),/*#__PURE__*/_jsxs(Row,{gutter:16,children:[/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:16},children:[/*#__PURE__*/_jsxs(\"label\",{style:{display:'block',marginBottom:4},children:[\"S\\u1ED1 ti\\u1EC1n thanh to\\xE1n \",/*#__PURE__*/_jsx(\"span\",{style:{color:'red'},children:\"*\"})]}),/*#__PURE__*/_jsx(InputNumber,_objectSpread(_objectSpread({},register('amount',{valueAsNumber:true})),{},{placeholder:\"Nh\\u1EADp s\\u1ED1 ti\\u1EC1n\",style:{width:'100%'},formatter:value=>\"\".concat(value).replace(/\\B(?=(\\d{3})+(?!\\d))/g,','),parser:value=>value.replace(/\\$\\s?|(,*)/g,''),min:0})),errors.amount&&/*#__PURE__*/_jsx(\"div\",{style:{color:'red',fontSize:12},children:errors.amount.message})]})}),/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:16},children:[/*#__PURE__*/_jsxs(\"label\",{style:{display:'block',marginBottom:4},children:[\"Ph\\u01B0\\u01A1ng th\\u1EE9c thanh to\\xE1n \",/*#__PURE__*/_jsx(\"span\",{style:{color:'red'},children:\"*\"})]}),/*#__PURE__*/_jsx(Select,{placeholder:\"Ch\\u1ECDn ph\\u01B0\\u01A1ng th\\u1EE9c\",style:{width:'100%'},onChange:value=>setValue('payment_method',value),value:watch('payment_method'),children:paymentMethods.map(method=>/*#__PURE__*/_jsx(Option,{value:method.value,children:/*#__PURE__*/_jsxs(Space,{children:[method.icon,method.label]})},method.value))}),errors.payment_method&&/*#__PURE__*/_jsx(\"div\",{style:{color:'red',fontSize:12},children:errors.payment_method.message})]})})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:16},children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:4},children:\"M\\xF4 t\\u1EA3\"}),/*#__PURE__*/_jsx(Input.TextArea,_objectSpread(_objectSpread({},register('description')),{},{placeholder:\"Nh\\u1EADp m\\xF4 t\\u1EA3 thanh to\\xE1n\",rows:3}))]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:16},children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:4},children:\"Ng\\xE0y thanh to\\xE1n\"}),/*#__PURE__*/_jsx(DatePicker,_objectSpread(_objectSpread({},register('transaction_date')),{},{style:{width:'100%'},onChange:date=>setValue('transaction_date',date),value:watch('transaction_date')}))]}),/*#__PURE__*/_jsx(\"div\",{style:{textAlign:'right',marginTop:24},children:/*#__PURE__*/_jsxs(Space,{children:[/*#__PURE__*/_jsx(Button,{onClick:()=>setModalVisible(false),children:\"H\\u1EE7y\"}),/*#__PURE__*/_jsx(Button,{type:\"primary\",htmlType:\"submit\",loading:isSubmitting,icon:/*#__PURE__*/_jsx(DollarOutlined,{}),children:\"Ghi nh\\u1EADn thanh to\\xE1n\"})]})})]})})]});};export default DebtPage;","map":{"version":3,"names":["React","useState","useEffect","useForm","zodResolver","z","toast","Card","Table","Button","Modal","Input","Select","DatePicker","Space","Tag","Row","Col","Statistic","Tabs","InputNumber","Alert","Badge","Typography","PlusOutlined","UserOutlined","ShopOutlined","DollarOutlined","ExclamationCircleOutlined","CheckCircleOutlined","CreditCardOutlined","WalletOutlined","customersAPI","suppliersAPI","financialAPI","dayjs","jsx","_jsx","jsxs","_jsxs","Option","TabPane","Text","debtPaymentSchema","object","entity_id","number","min","amount","description","string","optional","payment_method","enum","errorMap","message","transaction_date","any","DebtPage","customerDebts","setCustomerDebts","supplierDebts","setSupplierDebts","customers","setCustomers","suppliers","setSuppliers","loading","setLoading","modalVisible","setModalVisible","activeTab","setActiveTab","modalType","setModalType","debtStats","setDebtStats","totalCustomerDebt","totalSupplierDebt","overduCustomerDebt","overdueSupplierDebt","register","handleSubmit","reset","setValue","watch","formState","errors","isSubmitting","resolver","defaultValues","paymentMethods","value","label","icon","fetchData","Promise","all","fetchCustomerDebts","fetchSupplierDebts","fetchCustomers","fetchSuppliers","error","response","getAll","data","success","filter","c","current_debt","totalDebt","reduce","sum","prev","_objectSpread","console","s","handlePayDebt","_data$transaction_dat","transactionData","type","category","customer_id","supplier_id","toISOString","Date","user_id","create","customerColumns","title","dataIndex","key","width","render","name","record","children","phone","style","fontSize","colors","regular","vip","wholesale","labels","color","debt","strong","toLocaleString","sorter","a","b","spent","_","status","text","size","onClick","id","supplierColumns","ellipsis","renderDebtSummary","gutter","marginBottom","span","precision","valueStyle","prefix","suffix","length","padding","showIcon","activeKey","onChange","tab","extra","columns","dataSource","rowKey","pagination","showSizeChanger","showQuickJumper","showTotal","total","range","concat","open","onCancel","footer","onSubmit","display","placeholder","showSearch","filterOption","input","option","toLowerCase","indexOf","entity","map","_entity$current_debt","valueAsNumber","formatter","replace","parser","method","TextArea","rows","date","textAlign","marginTop","htmlType"],"sources":["C:/Users/ADMIN/Desktop/kho/kho/client/src/pages/DebtPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useForm } from 'react-hook-form';\r\nimport { zodResolver } from '@hookform/resolvers/zod';\r\nimport { z } from 'zod';\r\nimport { toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport {\r\n  Card,\r\n  Table,\r\n  Button,\r\n  Modal,\r\n  Input,\r\n  Select,\r\n  DatePicker,\r\n  Space,\r\n  Tag,\r\n  Row,\r\n  Col,\r\n  Statistic,\r\n  Tabs,\r\n  InputNumber,\r\n  Alert,\r\n  Badge,\r\n  Typography,\r\n} from 'antd';\r\nimport {\r\n  PlusOutlined,\r\n  UserOutlined,\r\n  ShopOutlined,\r\n  DollarOutlined,\r\n  ExclamationCircleOutlined,\r\n  CheckCircleOutlined,\r\n  CreditCardOutlined,\r\n  WalletOutlined,\r\n} from '@ant-design/icons';\r\nimport { customersAPI, suppliersAPI, financialAPI } from '../services/api';\r\nimport dayjs from 'dayjs';\r\n\r\nconst { Option } = Select;\r\nconst { TabPane } = Tabs;\r\nconst { Text } = Typography;\r\n\r\n// Zod schema for debt payment validation\r\nconst debtPaymentSchema = z.object({\r\n  entity_id: z.number().min(1, 'Vui lòng chọn khách hàng/nhà cung cấp'),\r\n  amount: z.number().min(1, 'Số tiền phải lớn hơn 0'),\r\n  description: z.string().optional(),\r\n  payment_method: z.enum(['cash', 'card', 'transfer', 'ewallet'], {\r\n    errorMap: () => ({ message: 'Vui lòng chọn phương thức thanh toán' })\r\n  }),\r\n  transaction_date: z.any().optional(),\r\n});\r\n\r\nconst DebtPage = () => {\r\n  const [customerDebts, setCustomerDebts] = useState([]);\r\n  const [supplierDebts, setSupplierDebts] = useState([]);\r\n  const [customers, setCustomers] = useState([]);\r\n  const [suppliers, setSuppliers] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [modalVisible, setModalVisible] = useState(false);\r\n  const [activeTab, setActiveTab] = useState('customers');\r\n  const [modalType, setModalType] = useState('payment'); // 'payment' or 'debt'\r\n  const [debtStats, setDebtStats] = useState({\r\n    totalCustomerDebt: 0,\r\n    totalSupplierDebt: 0,\r\n    overduCustomerDebt: 0,\r\n    overdueSupplierDebt: 0,\r\n  });\r\n\r\n  const {\r\n    register,\r\n    handleSubmit,\r\n    reset,\r\n    setValue,\r\n    watch,\r\n    formState: { errors, isSubmitting },\r\n  } = useForm({\r\n    resolver: zodResolver(debtPaymentSchema),\r\n    defaultValues: {\r\n      payment_method: 'cash',\r\n      transaction_date: dayjs(),\r\n    },\r\n  });\r\n\r\n  const paymentMethods = [\r\n    { value: 'cash', label: 'Tiền mặt', icon: <DollarOutlined /> },\r\n    { value: 'card', label: 'Thẻ', icon: <CreditCardOutlined /> },\r\n    { value: 'transfer', label: 'Chuyển khoản', icon: <WalletOutlined /> },\r\n    { value: 'ewallet', label: 'Ví điện tử', icon: <WalletOutlined /> },\r\n  ];\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n  }, []);\r\n\r\n  const fetchData = async () => {\r\n    setLoading(true);\r\n    try {\r\n      await Promise.all([\r\n        fetchCustomerDebts(),\r\n        fetchSupplierDebts(),\r\n        fetchCustomers(),\r\n        fetchSuppliers(),\r\n      ]);\r\n    } catch (error) {\r\n      toast.error('Lỗi khi tải dữ liệu');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const fetchCustomerDebts = async () => {\r\n    try {\r\n      const response = await customersAPI.getAll();\r\n      if (response.data.success) {\r\n        const customers = response.data.data.filter(c => c.current_debt > 0);\r\n        setCustomerDebts(customers);\r\n        \r\n        // Calculate debt stats\r\n        const totalDebt = customers.reduce((sum, c) => sum + (c.current_debt || 0), 0);\r\n        setDebtStats(prev => ({ ...prev, totalCustomerDebt: totalDebt }));\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching customer debts:', error);\r\n    }\r\n  };\r\n\r\n  const fetchSupplierDebts = async () => {\r\n    try {\r\n      const response = await suppliersAPI.getAll();\r\n      if (response.data.success) {\r\n        const suppliers = response.data.data.filter(s => s.current_debt > 0);\r\n        setSupplierDebts(suppliers);\r\n        \r\n        // Calculate debt stats\r\n        const totalDebt = suppliers.reduce((sum, s) => sum + (s.current_debt || 0), 0);\r\n        setDebtStats(prev => ({ ...prev, totalSupplierDebt: totalDebt }));\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching supplier debts:', error);\r\n    }\r\n  };\r\n\r\n  const fetchCustomers = async () => {\r\n    try {\r\n      const response = await customersAPI.getAll();\r\n      if (response.data.success) {\r\n        setCustomers(response.data.data);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching customers:', error);\r\n    }\r\n  };\r\n\r\n  const fetchSuppliers = async () => {\r\n    try {\r\n      const response = await suppliersAPI.getAll();\r\n      if (response.data.success) {\r\n        setSuppliers(response.data.data);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching suppliers:', error);\r\n    }\r\n  };\r\n\r\n  const handlePayDebt = async (data) => {\r\n    try {\r\n      const transactionData = {\r\n        type: activeTab === 'customers' ? 'income' : 'expense',\r\n        category: activeTab === 'customers' ? 'Thu nợ khách hàng' : 'Trả nợ nhà cung cấp',\r\n        amount: data.amount,\r\n        description: data.description,\r\n        customer_id: activeTab === 'customers' ? data.entity_id : null,\r\n        supplier_id: activeTab === 'suppliers' ? data.entity_id : null,\r\n        payment_method: data.payment_method,\r\n        transaction_date: data.transaction_date?.toISOString() || new Date().toISOString(),\r\n        user_id: 1,\r\n      };\r\n\r\n      const response = await financialAPI.create(transactionData);\r\n      if (response.data.success) {\r\n        toast.success('Ghi nhận thanh toán thành công');\r\n        setModalVisible(false);\r\n        reset();\r\n        fetchData();\r\n      }\r\n    } catch (error) {\r\n      toast.error('Lỗi khi ghi nhận thanh toán');\r\n    }\r\n  };\r\n\r\n  const customerColumns = [\r\n    {\r\n      title: 'Mã KH',\r\n      dataIndex: 'code',\r\n      key: 'code',\r\n      width: 100,\r\n    },\r\n    {\r\n      title: 'Tên khách hàng',\r\n      dataIndex: 'name',\r\n      key: 'name',\r\n      render: (name, record) => (\r\n        <div>\r\n          <div>{name}</div>\r\n          {record.phone && (\r\n            <Text type=\"secondary\" style={{ fontSize: 12 }}>\r\n              {record.phone}\r\n            </Text>\r\n          )}\r\n        </div>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Loại KH',\r\n      dataIndex: 'customer_type',\r\n      key: 'customer_type',\r\n      render: (type) => {\r\n        const colors = {\r\n          regular: 'default',\r\n          vip: 'gold',\r\n          wholesale: 'blue',\r\n        };\r\n        const labels = {\r\n          regular: 'Thường',\r\n          vip: 'VIP',\r\n          wholesale: 'Sỉ',\r\n        };\r\n        return <Tag color={colors[type]}>{labels[type]}</Tag>;\r\n      },\r\n    },\r\n    {\r\n      title: 'Số nợ',\r\n      dataIndex: 'current_debt',\r\n      key: 'current_debt',\r\n      render: (debt) => (\r\n        <Text strong style={{ color: debt > 0 ? '#ff4d4f' : '#52c41a' }}>\r\n          {debt.toLocaleString('vi-VN')} ₫\r\n        </Text>\r\n      ),\r\n      sorter: (a, b) => a.current_debt - b.current_debt,\r\n    },\r\n    {\r\n      title: 'Tổng chi tiêu',\r\n      dataIndex: 'total_spent',\r\n      key: 'total_spent',\r\n      render: (spent) => (\r\n        <Text type=\"secondary\">\r\n          {spent ? spent.toLocaleString('vi-VN') : 0} ₫\r\n        </Text>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Trạng thái',\r\n      key: 'status',\r\n      render: (_, record) => {\r\n        const debt = record.current_debt || 0;\r\n        if (debt === 0) {\r\n          return <Badge status=\"success\" text=\"Đã thanh toán\" />;\r\n        } else if (debt > 1000000) {\r\n          return <Badge status=\"error\" text=\"Nợ lớn\" />;\r\n        } else {\r\n          return <Badge status=\"warning\" text=\"Có nợ\" />;\r\n        }\r\n      },\r\n    },\r\n    {\r\n      title: 'Thao tác',\r\n      key: 'actions',\r\n      render: (_, record) => (\r\n        <Space>\r\n          <Button\r\n            type=\"primary\"\r\n            size=\"small\"\r\n            icon={<DollarOutlined />}\r\n            onClick={() => {\r\n              setModalType('payment');\r\n              setActiveTab('customers');\r\n              setModalVisible(true);\r\n              reset({\r\n                entity_id: record.id,\r\n                payment_method: 'cash',\r\n                transaction_date: dayjs(),\r\n              });\r\n            }}\r\n          >\r\n            Thanh toán\r\n          </Button>\r\n        </Space>\r\n      ),\r\n    },\r\n  ];\r\n\r\n  const supplierColumns = [\r\n    {\r\n      title: 'Mã NCC',\r\n      dataIndex: 'code',\r\n      key: 'code',\r\n      width: 100,\r\n    },\r\n    {\r\n      title: 'Tên nhà cung cấp',\r\n      dataIndex: 'name',\r\n      key: 'name',\r\n      render: (name, record) => (\r\n        <div>\r\n          <div>{name}</div>\r\n          {record.phone && (\r\n            <Text type=\"secondary\" style={{ fontSize: 12 }}>\r\n              {record.phone}\r\n            </Text>\r\n          )}\r\n        </div>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Địa chỉ',\r\n      dataIndex: 'address',\r\n      key: 'address',\r\n      ellipsis: true,\r\n    },\r\n    {\r\n      title: 'Số nợ',\r\n      dataIndex: 'current_debt',\r\n      key: 'current_debt',\r\n      render: (debt) => (\r\n        <Text strong style={{ color: debt > 0 ? '#ff4d4f' : '#52c41a' }}>\r\n          {debt.toLocaleString('vi-VN')} ₫\r\n        </Text>\r\n      ),\r\n      sorter: (a, b) => a.current_debt - b.current_debt,\r\n    },\r\n    {\r\n      title: 'Trạng thái',\r\n      key: 'status',\r\n      render: (_, record) => {\r\n        const debt = record.current_debt || 0;\r\n        if (debt === 0) {\r\n          return <Badge status=\"success\" text=\"Đã thanh toán\" />;\r\n        } else if (debt > 5000000) {\r\n          return <Badge status=\"error\" text=\"Nợ lớn\" />;\r\n        } else {\r\n          return <Badge status=\"warning\" text=\"Có nợ\" />;\r\n        }\r\n      },\r\n    },\r\n    {\r\n      title: 'Thao tác',\r\n      key: 'actions',\r\n      render: (_, record) => (\r\n        <Space>\r\n          <Button\r\n            type=\"primary\"\r\n            size=\"small\"\r\n            icon={<DollarOutlined />}\r\n            onClick={() => {\r\n              setModalType('payment');\r\n              setActiveTab('suppliers');\r\n              setModalVisible(true);\r\n              reset({\r\n                entity_id: record.id,\r\n                payment_method: 'cash',\r\n                transaction_date: dayjs(),\r\n              });\r\n            }}\r\n          >\r\n            Thanh toán\r\n          </Button>\r\n        </Space>\r\n      ),\r\n    },\r\n  ];\r\n\r\n  const renderDebtSummary = () => {\r\n    return (\r\n      <Row gutter={16} style={{ marginBottom: 24 }}>\r\n        <Col span={6}>\r\n          <Card>\r\n            <Statistic\r\n              title=\"Tổng nợ khách hàng\"\r\n              value={debtStats.totalCustomerDebt}\r\n              precision={0}\r\n              valueStyle={{ color: '#cf1322' }}\r\n              prefix={<UserOutlined />}\r\n              suffix=\"₫\"\r\n            />\r\n          </Card>\r\n        </Col>\r\n        <Col span={6}>\r\n          <Card>\r\n            <Statistic\r\n              title=\"Tổng nợ nhà cung cấp\"\r\n              value={debtStats.totalSupplierDebt}\r\n              precision={0}\r\n              valueStyle={{ color: '#cf1322' }}\r\n              prefix={<ShopOutlined />}\r\n              suffix=\"₫\"\r\n            />\r\n          </Card>\r\n        </Col>\r\n        <Col span={6}>\r\n          <Card>\r\n            <Statistic\r\n              title=\"Tổng nợ phải thu\"\r\n              value={debtStats.totalCustomerDebt + debtStats.totalSupplierDebt}\r\n              precision={0}\r\n              valueStyle={{ color: '#1890ff' }}\r\n              prefix={<DollarOutlined />}\r\n              suffix=\"₫\"\r\n            />\r\n          </Card>\r\n        </Col>\r\n        <Col span={6}>\r\n          <Card>\r\n            <Statistic\r\n              title=\"Số khách hàng có nợ\"\r\n              value={customerDebts.length}\r\n              valueStyle={{ color: '#52c41a' }}\r\n              prefix={<UserOutlined />}\r\n            />\r\n          </Card>\r\n        </Col>\r\n      </Row>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div style={{ padding: 24 }}>\r\n      {renderDebtSummary()}\r\n\r\n      <Alert\r\n        message=\"Quản lý nợ\"\r\n        description=\"Theo dõi và quản lý các khoản nợ của khách hàng và nhà cung cấp. Hệ thống sẽ tự động cập nhật số dư nợ khi có giao dịch thanh toán.\"\r\n        type=\"info\"\r\n        showIcon\r\n        style={{ marginBottom: 24 }}\r\n      />\r\n\r\n      <Tabs activeKey={activeTab} onChange={setActiveTab}>\r\n        <TabPane\r\n          tab={\r\n            <span>\r\n              <UserOutlined />\r\n              Nợ khách hàng ({customerDebts.length})\r\n            </span>\r\n          }\r\n          key=\"customers\"\r\n        >\r\n          <Card\r\n            title=\"Danh sách khách hàng có nợ\"\r\n            extra={\r\n              <Button\r\n                type=\"primary\"\r\n                icon={<PlusOutlined />}\r\n                onClick={() => {\r\n                  setModalType('payment');\r\n                  setActiveTab('customers');\r\n                  setModalVisible(true);\r\n                  reset({\r\n                    payment_method: 'cash',\r\n                    transaction_date: dayjs(),\r\n                  });\r\n                }}\r\n              >\r\n                Ghi nhận thanh toán\r\n              </Button>\r\n            }\r\n          >\r\n            <Table\r\n              columns={customerColumns}\r\n              dataSource={customerDebts}\r\n              loading={loading}\r\n              rowKey=\"id\"\r\n              pagination={{\r\n                showSizeChanger: true,\r\n                showQuickJumper: true,\r\n                showTotal: (total, range) =>\r\n                  `${range[0]}-${range[1]} của ${total} khách hàng`,\r\n              }}\r\n            />\r\n          </Card>\r\n        </TabPane>\r\n\r\n        <TabPane\r\n          tab={\r\n            <span>\r\n              <ShopOutlined />\r\n              Nợ nhà cung cấp ({supplierDebts.length})\r\n            </span>\r\n          }\r\n          key=\"suppliers\"\r\n        >\r\n          <Card\r\n            title=\"Danh sách nhà cung cấp có nợ\"\r\n            extra={\r\n              <Button\r\n                type=\"primary\"\r\n                icon={<PlusOutlined />}\r\n                onClick={() => {\r\n                  setModalType('payment');\r\n                  setActiveTab('suppliers');\r\n                  setModalVisible(true);\r\n                  reset({\r\n                    payment_method: 'cash',\r\n                    transaction_date: dayjs(),\r\n                  });\r\n                }}\r\n              >\r\n                Ghi nhận thanh toán\r\n              </Button>\r\n            }\r\n          >\r\n            <Table\r\n              columns={supplierColumns}\r\n              dataSource={supplierDebts}\r\n              loading={loading}\r\n              rowKey=\"id\"\r\n              pagination={{\r\n                showSizeChanger: true,\r\n                showQuickJumper: true,\r\n                showTotal: (total, range) =>\r\n                  `${range[0]}-${range[1]} của ${total} nhà cung cấp`,\r\n              }}\r\n            />\r\n          </Card>\r\n        </TabPane>\r\n      </Tabs>\r\n\r\n      <Modal\r\n        title={`Ghi nhận thanh toán ${activeTab === 'customers' ? 'nợ khách hàng' : 'nợ nhà cung cấp'}`}\r\n        open={modalVisible}\r\n        onCancel={() => setModalVisible(false)}\r\n        footer={null}\r\n        width={600}\r\n      >\r\n        <form onSubmit={handleSubmit(handlePayDebt)}>\r\n          <div style={{ marginBottom: 16 }}>\r\n            <label style={{ display: 'block', marginBottom: 4 }}>\r\n              {activeTab === 'customers' ? 'Khách hàng' : 'Nhà cung cấp'} <span style={{ color: 'red' }}>*</span>\r\n            </label>\r\n            <Select\r\n              placeholder={`Chọn ${activeTab === 'customers' ? 'khách hàng' : 'nhà cung cấp'}`}\r\n              style={{ width: '100%' }}\r\n              onChange={(value) => setValue('entity_id', value)}\r\n              value={watch('entity_id')}\r\n              showSearch\r\n              filterOption={(input, option) =>\r\n                option.children.toLowerCase().indexOf(input.toLowerCase()) >= 0\r\n              }\r\n            >\r\n              {(activeTab === 'customers' ? customers : suppliers)\r\n                .filter(entity => entity.current_debt > 0)\r\n                .map((entity) => (\r\n                  <Option key={entity.id} value={entity.id}>\r\n                    <div>\r\n                      <div>{entity.name}</div>\r\n                      <Text type=\"secondary\" style={{ fontSize: 12 }}>\r\n                        Nợ: {entity.current_debt?.toLocaleString('vi-VN')} ₫\r\n                      </Text>\r\n                    </div>\r\n                  </Option>\r\n                ))}\r\n            </Select>\r\n            {errors.entity_id && (\r\n              <div style={{ color: 'red', fontSize: 12 }}>\r\n                {errors.entity_id.message}\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          <Row gutter={16}>\r\n            <Col span={12}>\r\n              <div style={{ marginBottom: 16 }}>\r\n                <label style={{ display: 'block', marginBottom: 4 }}>\r\n                  Số tiền thanh toán <span style={{ color: 'red' }}>*</span>\r\n                </label>\r\n                <InputNumber\r\n                  {...register('amount', { valueAsNumber: true })}\r\n                  placeholder=\"Nhập số tiền\"\r\n                  style={{ width: '100%' }}\r\n                  formatter={(value) => `${value}`.replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',')}\r\n                  parser={(value) => value.replace(/\\$\\s?|(,*)/g, '')}\r\n                  min={0}\r\n                />\r\n                {errors.amount && (\r\n                  <div style={{ color: 'red', fontSize: 12 }}>\r\n                    {errors.amount.message}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </Col>\r\n            <Col span={12}>\r\n              <div style={{ marginBottom: 16 }}>\r\n                <label style={{ display: 'block', marginBottom: 4 }}>\r\n                  Phương thức thanh toán <span style={{ color: 'red' }}>*</span>\r\n                </label>\r\n                <Select\r\n                  placeholder=\"Chọn phương thức\"\r\n                  style={{ width: '100%' }}\r\n                  onChange={(value) => setValue('payment_method', value)}\r\n                  value={watch('payment_method')}\r\n                >\r\n                  {paymentMethods.map((method) => (\r\n                    <Option key={method.value} value={method.value}>\r\n                      <Space>\r\n                        {method.icon}\r\n                        {method.label}\r\n                      </Space>\r\n                    </Option>\r\n                  ))}\r\n                </Select>\r\n                {errors.payment_method && (\r\n                  <div style={{ color: 'red', fontSize: 12 }}>\r\n                    {errors.payment_method.message}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </Col>\r\n          </Row>\r\n\r\n          <div style={{ marginBottom: 16 }}>\r\n            <label style={{ display: 'block', marginBottom: 4 }}>\r\n              Mô tả\r\n            </label>\r\n            <Input.TextArea\r\n              {...register('description')}\r\n              placeholder=\"Nhập mô tả thanh toán\"\r\n              rows={3}\r\n            />\r\n          </div>\r\n\r\n          <div style={{ marginBottom: 16 }}>\r\n            <label style={{ display: 'block', marginBottom: 4 }}>\r\n              Ngày thanh toán\r\n            </label>\r\n            <DatePicker\r\n              {...register('transaction_date')}\r\n              style={{ width: '100%' }}\r\n              onChange={(date) => setValue('transaction_date', date)}\r\n              value={watch('transaction_date')}\r\n            />\r\n          </div>\r\n\r\n          <div style={{ textAlign: 'right', marginTop: 24 }}>\r\n            <Space>\r\n              <Button onClick={() => setModalVisible(false)}>\r\n                Hủy\r\n              </Button>\r\n              <Button\r\n                type=\"primary\"\r\n                htmlType=\"submit\"\r\n                loading={isSubmitting}\r\n                icon={<DollarOutlined />}\r\n              >\r\n                Ghi nhận thanh toán\r\n              </Button>\r\n            </Space>\r\n          </div>\r\n        </form>\r\n      </Modal>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DebtPage; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}