{"ast":null,"code":"import _objectSpread from\"C:/Users/ADMIN/Desktop/kho/kho/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{toast}from'react-toastify';import'react-toastify/dist/ReactToastify.css';import{Card,Table,Button,Modal,Input,Select,DatePicker,Space,Tag,Row,Col,Statistic,Tabs,InputNumber,Radio,Form,message}from'antd';import{PlusOutlined,FilterOutlined,DownloadOutlined,DollarOutlined,RiseOutlined,FallOutlined,BarChartOutlined,PieChartOutlined}from'@ant-design/icons';import{LineChart,Line,BarChart,Bar,PieChart,Pie,Cell,XAxis,YAxis,CartesianGrid,Tooltip,Legend,ResponsiveContainer}from'recharts';import{financialAPI,reportsAPI}from'../services/api';import dayjs from'dayjs';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const{Option}=Select;const{RangePicker}=DatePicker;const{TabPane}=Tabs;const FinancialPage=()=>{var _categories;const[transactions,setTransactions]=useState([]);const[loading,setLoading]=useState(false);const[modalVisible,setModalVisible]=useState(false);const[stats,setStats]=useState({totalIncome:0,totalExpense:0,netProfit:0,todayIncome:0,monthIncome:0});const[activeTab,setActiveTab]=useState('transactions');const[chartData,setChartData]=useState([]);const[form]=Form.useForm();const categories={income:['Bán hàng','Dịch vụ','Thu khác','Lãi ngân hàng','Hoàn tiền','Thu nợ khách hàng'],expense:['Nhập hàng','Tiền thuê','Điện nước','Lương nhân viên','Marketing','Vận chuyển','Bảo trì sửa chữa','Chi phí khác','Trả nợ nhà cung cấp']};const paymentMethods=[{value:'cash',label:'Tiền mặt'},{value:'card',label:'Thẻ'},{value:'transfer',label:'Chuyển khoản'},{value:'ewallet',label:'Ví điện tử'}];const COLORS=['#0088FE','#00C49F','#FFBB28','#FF8042','#8884D8','#82CA9D'];useEffect(()=>{fetchTransactions();fetchStats();},[]);useEffect(()=>{if(transactions.length>0){generateChartData();}},[transactions]);const fetchTransactions=async()=>{setLoading(true);try{const response=await financialAPI.getTransactions();if(response.data.success){setTransactions(response.data.data);}else{setTransactions([]);}}catch(error){toast.error('Lỗi khi tải dữ liệu thu chi');setTransactions([]);}finally{setLoading(false);}};const fetchStats=async()=>{try{const response=await reportsAPI.getFinancialSummary();if(response.data.success){setStats(response.data.data);}else{setStats({});}}catch(error){console.error('Error fetching stats:',error);setStats({});}};const generateChartData=()=>{// Monthly data for line chart\nconst monthlyData=[];const currentMonth=dayjs();for(let i=5;i>=0;i--){const month=currentMonth.subtract(i,'month');const monthTransactions=transactions.filter(t=>{const transactionDate=dayjs(t.transaction_date);return transactionDate.month()===month.month()&&transactionDate.year()===month.year();});const income=monthTransactions.filter(t=>t.type==='income').reduce((sum,t)=>sum+t.amount,0);const expense=monthTransactions.filter(t=>t.type==='expense').reduce((sum,t)=>sum+t.amount,0);monthlyData.push({month:month.format('MM/YYYY'),income,expense,profit:income-expense});}setChartData(monthlyData);};const handleAddTransaction=async values=>{try{var _values$transaction_d;console.log('🔄 Submitting transaction data:',values);const transactionData=_objectSpread(_objectSpread({},values),{},{transaction_date:((_values$transaction_d=values.transaction_date)===null||_values$transaction_d===void 0?void 0:_values$transaction_d.toISOString())||new Date().toISOString(),user_id:1// Current user ID\n});console.log('📤 Final transaction data:',transactionData);const response=await financialAPI.create(transactionData);console.log('✅ API Response:',response);if(response.data.success){message.success('Thêm giao dịch thành công');setModalVisible(false);form.resetFields();fetchTransactions();fetchStats();}else{message.error(response.data.message||'Lỗi khi thêm giao dịch');}}catch(error){var _error$response,_error$response$data;console.error('❌ Transaction submission error:',error);message.error(\"L\\u1ED7i khi th\\xEAm giao d\\u1ECBch: \".concat(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||error.message));}};const handleModalOpen=()=>{setModalVisible(true);form.setFieldsValue({type:'income',payment_method:'cash',transaction_date:dayjs()});};const columns=[{title:'Ngày',dataIndex:'transaction_date',key:'transaction_date',render:date=>dayjs(date).format('DD/MM/YYYY HH:mm'),sorter:(a,b)=>dayjs(a.transaction_date).unix()-dayjs(b.transaction_date).unix()},{title:'Loại',dataIndex:'type',key:'type',render:type=>/*#__PURE__*/_jsx(Tag,{color:type==='income'?'green':'red',children:type==='income'?'Thu':'Chi'}),filters:[{text:'Thu',value:'income'},{text:'Chi',value:'expense'}],onFilter:(value,record)=>record.type===value},{title:'Danh mục',dataIndex:'category',key:'category'},{title:'Số tiền',dataIndex:'amount',key:'amount',render:(amount,record)=>/*#__PURE__*/_jsxs(\"span\",{style:{color:record.type==='income'?'#52c41a':'#ff4d4f'},children:[record.type==='income'?'+':'-',amount.toLocaleString('vi-VN'),\" \\u20AB\"]}),sorter:(a,b)=>a.amount-b.amount},{title:'Mô tả',dataIndex:'description',key:'description',ellipsis:true},{title:'Phương thức TT',dataIndex:'payment_method',key:'payment_method',render:method=>{const methodMap={cash:'Tiền mặt',card:'Thẻ',transfer:'Chuyển khoản',ewallet:'Ví điện tử'};return methodMap[method]||method;}},{title:'Người tạo',dataIndex:'user_name',key:'user_name',render:name=>name||'Chưa xác định'}];const renderTransactionsTab=()=>/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Row,{gutter:16,style:{marginBottom:16},children:[/*#__PURE__*/_jsx(Col,{span:6,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(Statistic,{title:\"T\\u1ED5ng thu\",value:stats.total_income||stats.totalIncome,precision:0,valueStyle:{color:'#3f8600'},prefix:/*#__PURE__*/_jsx(RiseOutlined,{}),suffix:\"\\u20AB\"})})}),/*#__PURE__*/_jsx(Col,{span:6,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(Statistic,{title:\"T\\u1ED5ng chi\",value:stats.total_expense||stats.totalExpense,precision:0,valueStyle:{color:'#cf1322'},prefix:/*#__PURE__*/_jsx(FallOutlined,{}),suffix:\"\\u20AB\"})})}),/*#__PURE__*/_jsx(Col,{span:6,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(Statistic,{title:\"L\\u1EE3i nhu\\u1EADn\",value:stats.net_profit||stats.netProfit,precision:0,valueStyle:{color:'#1890ff'},prefix:/*#__PURE__*/_jsx(DollarOutlined,{}),suffix:\"\\u20AB\"})})}),/*#__PURE__*/_jsx(Col,{span:6,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(Statistic,{title:\"Thu h\\xF4m nay\",value:stats.today_income||stats.todayIncome,precision:0,valueStyle:{color:'#52c41a'},prefix:/*#__PURE__*/_jsx(RiseOutlined,{}),suffix:\"\\u20AB\"})})})]}),/*#__PURE__*/_jsx(Card,{title:\"Giao d\\u1ECBch t\\xE0i ch\\xEDnh\",extra:/*#__PURE__*/_jsxs(Space,{children:[/*#__PURE__*/_jsx(Button,{icon:/*#__PURE__*/_jsx(FilterOutlined,{}),children:\"L\\u1ECDc\"}),/*#__PURE__*/_jsx(Button,{icon:/*#__PURE__*/_jsx(DownloadOutlined,{}),children:\"Xu\\u1EA5t b\\xE1o c\\xE1o\"}),/*#__PURE__*/_jsx(Button,{type:\"primary\",icon:/*#__PURE__*/_jsx(PlusOutlined,{}),onClick:handleModalOpen,children:\"Th\\xEAm giao d\\u1ECBch\"})]}),children:/*#__PURE__*/_jsx(Table,{columns:columns,dataSource:transactions,loading:loading,rowKey:\"id\",pagination:{showSizeChanger:true,showQuickJumper:true,showTotal:(total,range)=>\"\".concat(range[0],\"-\").concat(range[1],\" c\\u1EE7a \").concat(total,\" giao d\\u1ECBch\")}})})]});const renderChartsTab=()=>/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Row,{gutter:16,style:{marginBottom:24},children:[/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(Card,{title:\"Bi\\u1EC3u \\u0111\\u1ED3 doanh thu theo th\\xE1ng\",icon:/*#__PURE__*/_jsx(BarChartOutlined,{}),children:/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:300,children:/*#__PURE__*/_jsxs(BarChart,{data:chartData,children:[/*#__PURE__*/_jsx(CartesianGrid,{strokeDasharray:\"3 3\"}),/*#__PURE__*/_jsx(XAxis,{dataKey:\"month\"}),/*#__PURE__*/_jsx(YAxis,{}),/*#__PURE__*/_jsx(Tooltip,{formatter:value=>\"\".concat(value.toLocaleString('vi-VN'),\" \\u20AB\")}),/*#__PURE__*/_jsx(Legend,{}),/*#__PURE__*/_jsx(Bar,{dataKey:\"income\",fill:\"#52c41a\",name:\"Thu\"}),/*#__PURE__*/_jsx(Bar,{dataKey:\"expense\",fill:\"#ff4d4f\",name:\"Chi\"})]})})})}),/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(Card,{title:\"Bi\\u1EC3u \\u0111\\u1ED3 l\\u1EE3i nhu\\u1EADn theo th\\xE1ng\",icon:/*#__PURE__*/_jsx(LineChart,{}),children:/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:300,children:/*#__PURE__*/_jsxs(LineChart,{data:chartData,children:[/*#__PURE__*/_jsx(CartesianGrid,{strokeDasharray:\"3 3\"}),/*#__PURE__*/_jsx(XAxis,{dataKey:\"month\"}),/*#__PURE__*/_jsx(YAxis,{}),/*#__PURE__*/_jsx(Tooltip,{formatter:value=>\"\".concat(value.toLocaleString('vi-VN'),\" \\u20AB\")}),/*#__PURE__*/_jsx(Legend,{}),/*#__PURE__*/_jsx(Line,{type:\"monotone\",dataKey:\"profit\",stroke:\"#1890ff\",strokeWidth:2,name:\"L\\u1EE3i nhu\\u1EADn\"})]})})})})]})});return/*#__PURE__*/_jsxs(\"div\",{style:{padding:24},children:[/*#__PURE__*/_jsxs(Tabs,{activeKey:activeTab,onChange:setActiveTab,children:[/*#__PURE__*/_jsx(TabPane,{tab:\"Giao d\\u1ECBch\",children:renderTransactionsTab()},\"transactions\"),/*#__PURE__*/_jsx(TabPane,{tab:\"Bi\\u1EC3u \\u0111\\u1ED3\",children:renderChartsTab()},\"charts\")]}),/*#__PURE__*/_jsx(Modal,{title:\"Th\\xEAm giao d\\u1ECBch t\\xE0i ch\\xEDnh\",open:modalVisible,onCancel:()=>setModalVisible(false),footer:null,width:600,children:/*#__PURE__*/_jsxs(Form,{form:form,layout:\"vertical\",onFinish:handleAddTransaction,children:[/*#__PURE__*/_jsxs(Row,{gutter:16,children:[/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(Form.Item,{label:\"Lo\\u1EA1i giao d\\u1ECBch\",name:\"type\",rules:[{required:true,message:'Vui lòng chọn loại giao dịch'}],children:/*#__PURE__*/_jsxs(Radio.Group,{onChange:e=>{form.setFieldsValue({category:undefined});},children:[/*#__PURE__*/_jsx(Radio,{value:\"income\",children:\"Thu\"}),/*#__PURE__*/_jsx(Radio,{value:\"expense\",children:\"Chi\"})]})})}),/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(Form.Item,{label:\"Danh m\\u1EE5c\",name:\"category\",rules:[{required:true,message:'Vui lòng chọn danh mục'}],children:/*#__PURE__*/_jsx(Select,{placeholder:\"Ch\\u1ECDn danh m\\u1EE5c\",children:(_categories=categories[form.getFieldValue('type')||'income'])===null||_categories===void 0?void 0:_categories.map(category=>/*#__PURE__*/_jsx(Option,{value:category,children:category},category))})})})]}),/*#__PURE__*/_jsxs(Row,{gutter:16,children:[/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(Form.Item,{label:\"S\\u1ED1 ti\\u1EC1n\",name:\"amount\",rules:[{required:true,message:'Vui lòng nhập số tiền'}],children:/*#__PURE__*/_jsx(InputNumber,{placeholder:\"Nh\\u1EADp s\\u1ED1 ti\\u1EC1n\",style:{width:'100%'},formatter:value=>\"\".concat(value).replace(/\\B(?=(\\d{3})+(?!\\d))/g,','),parser:value=>value.replace(/\\$\\s?|(,*)/g,''),min:0})})}),/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(Form.Item,{label:\"Ph\\u01B0\\u01A1ng th\\u1EE9c thanh to\\xE1n\",name:\"payment_method\",rules:[{required:true,message:'Vui lòng chọn phương thức thanh toán'}],children:/*#__PURE__*/_jsx(Select,{placeholder:\"Ch\\u1ECDn ph\\u01B0\\u01A1ng th\\u1EE9c\",children:paymentMethods.map(method=>/*#__PURE__*/_jsx(Option,{value:method.value,children:method.label},method.value))})})})]}),/*#__PURE__*/_jsx(Form.Item,{label:\"M\\xF4 t\\u1EA3\",name:\"description\",rules:[{required:true,message:'Vui lòng nhập mô tả giao dịch'}],children:/*#__PURE__*/_jsx(Input.TextArea,{placeholder:\"Nh\\u1EADp m\\xF4 t\\u1EA3 giao d\\u1ECBch\",rows:3})}),/*#__PURE__*/_jsx(Form.Item,{label:\"Ng\\xE0y giao d\\u1ECBch\",name:\"transaction_date\",rules:[{required:true,message:'Vui lòng chọn ngày giao dịch'}],children:/*#__PURE__*/_jsx(DatePicker,{style:{width:'100%'}})}),/*#__PURE__*/_jsx(\"div\",{style:{textAlign:'right',marginTop:24},children:/*#__PURE__*/_jsxs(Space,{children:[/*#__PURE__*/_jsx(Button,{onClick:()=>setModalVisible(false),children:\"H\\u1EE7y\"}),/*#__PURE__*/_jsx(Button,{type:\"primary\",htmlType:\"submit\",icon:/*#__PURE__*/_jsx(PlusOutlined,{}),children:\"Th\\xEAm giao d\\u1ECBch\"})]})})]})})]});};export default FinancialPage;","map":{"version":3,"names":["React","useState","useEffect","toast","Card","Table","Button","Modal","Input","Select","DatePicker","Space","Tag","Row","Col","Statistic","Tabs","InputNumber","Radio","Form","message","PlusOutlined","FilterOutlined","DownloadOutlined","DollarOutlined","RiseOutlined","FallOutlined","BarChartOutlined","PieChartOutlined","LineChart","Line","BarChart","Bar","PieChart","Pie","Cell","XAxis","YAxis","CartesianGrid","Tooltip","Legend","ResponsiveContainer","financialAPI","reportsAPI","dayjs","jsx","_jsx","jsxs","_jsxs","Option","RangePicker","TabPane","FinancialPage","_categories","transactions","setTransactions","loading","setLoading","modalVisible","setModalVisible","stats","setStats","totalIncome","totalExpense","netProfit","todayIncome","monthIncome","activeTab","setActiveTab","chartData","setChartData","form","useForm","categories","income","expense","paymentMethods","value","label","COLORS","fetchTransactions","fetchStats","length","generateChartData","response","getTransactions","data","success","error","getFinancialSummary","console","monthlyData","currentMonth","i","month","subtract","monthTransactions","filter","t","transactionDate","transaction_date","year","type","reduce","sum","amount","push","format","profit","handleAddTransaction","values","_values$transaction_d","log","transactionData","_objectSpread","toISOString","Date","user_id","create","resetFields","_error$response","_error$response$data","concat","handleModalOpen","setFieldsValue","payment_method","columns","title","dataIndex","key","render","date","sorter","a","b","unix","color","children","filters","text","onFilter","record","style","toLocaleString","ellipsis","method","methodMap","cash","card","transfer","ewallet","name","renderTransactionsTab","gutter","marginBottom","span","total_income","precision","valueStyle","prefix","suffix","total_expense","net_profit","today_income","extra","icon","onClick","dataSource","rowKey","pagination","showSizeChanger","showQuickJumper","showTotal","total","range","renderChartsTab","width","height","strokeDasharray","dataKey","formatter","fill","stroke","strokeWidth","padding","activeKey","onChange","tab","open","onCancel","footer","layout","onFinish","Item","rules","required","Group","e","category","undefined","placeholder","getFieldValue","map","replace","parser","min","TextArea","rows","textAlign","marginTop","htmlType"],"sources":["C:/Users/ADMIN/Desktop/kho/kho/client/src/pages/FinancialPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport {\r\n  Card,\r\n  Table,\r\n  Button,\r\n  Modal,\r\n  Input,\r\n  Select,\r\n  DatePicker,\r\n  Space,\r\n  Tag,\r\n  Row,\r\n  Col,\r\n  Statistic,\r\n  Tabs,\r\n  InputNumber,\r\n  Radio,\r\n  Form,\r\n  message,\r\n} from 'antd';\r\nimport {\r\n  PlusOutlined,\r\n  FilterOutlined,\r\n  DownloadOutlined,\r\n  DollarOutlined,\r\n  RiseOutlined,\r\n  FallOutlined,\r\n  BarChartOutlined,\r\n  PieChartOutlined,\r\n} from '@ant-design/icons';\r\nimport {\r\n  LineChart,\r\n  Line,\r\n  BarChart,\r\n  Bar,\r\n  PieChart,\r\n  Pie,\r\n  Cell,\r\n  XAxis,\r\n  YAxis,\r\n  CartesianGrid,\r\n  Tooltip,\r\n  Legend,\r\n  ResponsiveContainer,\r\n} from 'recharts';\r\nimport { financialAPI, reportsAPI } from '../services/api';\r\nimport dayjs from 'dayjs';\r\n\r\nconst { Option } = Select;\r\nconst { RangePicker } = DatePicker;\r\nconst { TabPane } = Tabs;\r\n\r\nconst FinancialPage = () => {\r\n  const [transactions, setTransactions] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [modalVisible, setModalVisible] = useState(false);\r\n  const [stats, setStats] = useState({\r\n    totalIncome: 0,\r\n    totalExpense: 0,\r\n    netProfit: 0,\r\n    todayIncome: 0,\r\n    monthIncome: 0,\r\n  });\r\n  const [activeTab, setActiveTab] = useState('transactions');\r\n  const [chartData, setChartData] = useState([]);\r\n  const [form] = Form.useForm();\r\n\r\n  const categories = {\r\n    income: [\r\n      'Bán hàng',\r\n      'Dịch vụ',\r\n      'Thu khác',\r\n      'Lãi ngân hàng',\r\n      'Hoàn tiền',\r\n      'Thu nợ khách hàng',\r\n    ],\r\n    expense: [\r\n      'Nhập hàng',\r\n      'Tiền thuê',\r\n      'Điện nước',\r\n      'Lương nhân viên',\r\n      'Marketing',\r\n      'Vận chuyển',\r\n      'Bảo trì sửa chữa',\r\n      'Chi phí khác',\r\n      'Trả nợ nhà cung cấp',\r\n    ],\r\n  };\r\n\r\n  const paymentMethods = [\r\n    { value: 'cash', label: 'Tiền mặt' },\r\n    { value: 'card', label: 'Thẻ' },\r\n    { value: 'transfer', label: 'Chuyển khoản' },\r\n    { value: 'ewallet', label: 'Ví điện tử' },\r\n  ];\r\n\r\n  const COLORS = ['#0088FE', '#00C49F', '#FFBB28', '#FF8042', '#8884D8', '#82CA9D'];\r\n\r\n  useEffect(() => {\r\n    fetchTransactions();\r\n    fetchStats();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (transactions.length > 0) {\r\n      generateChartData();\r\n    }\r\n  }, [transactions]);\r\n\r\n  const fetchTransactions = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await financialAPI.getTransactions();\r\n      if (response.data.success) {\r\n        setTransactions(response.data.data);\r\n      } else {\r\n        setTransactions([]);\r\n      }\r\n    } catch (error) {\r\n      toast.error('Lỗi khi tải dữ liệu thu chi');\r\n      setTransactions([]);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const fetchStats = async () => {\r\n    try {\r\n      const response = await reportsAPI.getFinancialSummary();\r\n      if (response.data.success) {\r\n        setStats(response.data.data);\r\n      } else {\r\n        setStats({});\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching stats:', error);\r\n      setStats({});\r\n    }\r\n  };\r\n\r\n  const generateChartData = () => {\r\n    // Monthly data for line chart\r\n    const monthlyData = [];\r\n    const currentMonth = dayjs();\r\n    \r\n    for (let i = 5; i >= 0; i--) {\r\n      const month = currentMonth.subtract(i, 'month');\r\n      const monthTransactions = transactions.filter(t => {\r\n        const transactionDate = dayjs(t.transaction_date);\r\n        return transactionDate.month() === month.month() && \r\n               transactionDate.year() === month.year();\r\n      });\r\n      \r\n      const income = monthTransactions\r\n        .filter(t => t.type === 'income')\r\n        .reduce((sum, t) => sum + t.amount, 0);\r\n      \r\n      const expense = monthTransactions\r\n        .filter(t => t.type === 'expense')\r\n        .reduce((sum, t) => sum + t.amount, 0);\r\n      \r\n      monthlyData.push({\r\n        month: month.format('MM/YYYY'),\r\n        income,\r\n        expense,\r\n        profit: income - expense,\r\n      });\r\n    }\r\n    \r\n    setChartData(monthlyData);\r\n  };\r\n\r\n  const handleAddTransaction = async (values) => {\r\n    try {\r\n      console.log('🔄 Submitting transaction data:', values);\r\n      \r\n      const transactionData = {\r\n        ...values,\r\n        transaction_date: values.transaction_date?.toISOString() || new Date().toISOString(),\r\n        user_id: 1, // Current user ID\r\n      };\r\n\r\n      console.log('📤 Final transaction data:', transactionData);\r\n\r\n      const response = await financialAPI.create(transactionData);\r\n      console.log('✅ API Response:', response);\r\n      \r\n      if (response.data.success) {\r\n        message.success('Thêm giao dịch thành công');\r\n        setModalVisible(false);\r\n        form.resetFields();\r\n        fetchTransactions();\r\n        fetchStats();\r\n      } else {\r\n        message.error(response.data.message || 'Lỗi khi thêm giao dịch');\r\n      }\r\n    } catch (error) {\r\n      console.error('❌ Transaction submission error:', error);\r\n      message.error(`Lỗi khi thêm giao dịch: ${error.response?.data?.message || error.message}`);\r\n    }\r\n  };\r\n\r\n  const handleModalOpen = () => {\r\n    setModalVisible(true);\r\n    form.setFieldsValue({\r\n      type: 'income',\r\n      payment_method: 'cash',\r\n      transaction_date: dayjs(),\r\n    });\r\n  };\r\n\r\n  const columns = [\r\n    {\r\n      title: 'Ngày',\r\n      dataIndex: 'transaction_date',\r\n      key: 'transaction_date',\r\n      render: (date) => dayjs(date).format('DD/MM/YYYY HH:mm'),\r\n      sorter: (a, b) => dayjs(a.transaction_date).unix() - dayjs(b.transaction_date).unix(),\r\n    },\r\n    {\r\n      title: 'Loại',\r\n      dataIndex: 'type',\r\n      key: 'type',\r\n      render: (type) => (\r\n        <Tag color={type === 'income' ? 'green' : 'red'}>\r\n          {type === 'income' ? 'Thu' : 'Chi'}\r\n        </Tag>\r\n      ),\r\n      filters: [\r\n        { text: 'Thu', value: 'income' },\r\n        { text: 'Chi', value: 'expense' },\r\n      ],\r\n      onFilter: (value, record) => record.type === value,\r\n    },\r\n    {\r\n      title: 'Danh mục',\r\n      dataIndex: 'category',\r\n      key: 'category',\r\n    },\r\n    {\r\n      title: 'Số tiền',\r\n      dataIndex: 'amount',\r\n      key: 'amount',\r\n      render: (amount, record) => (\r\n        <span style={{ color: record.type === 'income' ? '#52c41a' : '#ff4d4f' }}>\r\n          {record.type === 'income' ? '+' : '-'}{amount.toLocaleString('vi-VN')} ₫\r\n        </span>\r\n      ),\r\n      sorter: (a, b) => a.amount - b.amount,\r\n    },\r\n    {\r\n      title: 'Mô tả',\r\n      dataIndex: 'description',\r\n      key: 'description',\r\n      ellipsis: true,\r\n    },\r\n    {\r\n      title: 'Phương thức TT',\r\n      dataIndex: 'payment_method',\r\n      key: 'payment_method',\r\n      render: (method) => {\r\n        const methodMap = {\r\n          cash: 'Tiền mặt',\r\n          card: 'Thẻ',\r\n          transfer: 'Chuyển khoản',\r\n          ewallet: 'Ví điện tử',\r\n        };\r\n        return methodMap[method] || method;\r\n      },\r\n    },\r\n    {\r\n      title: 'Người tạo',\r\n      dataIndex: 'user_name',\r\n      key: 'user_name',\r\n      render: (name) => name || 'Chưa xác định',\r\n    },\r\n  ];\r\n\r\n  const renderTransactionsTab = () => (\r\n    <div>\r\n      <Row gutter={16} style={{ marginBottom: 16 }}>\r\n        <Col span={6}>\r\n          <Card>\r\n            <Statistic\r\n              title=\"Tổng thu\"\r\n              value={stats.total_income || stats.totalIncome}\r\n              precision={0}\r\n              valueStyle={{ color: '#3f8600' }}\r\n              prefix={<RiseOutlined />}\r\n              suffix=\"₫\"\r\n            />\r\n          </Card>\r\n        </Col>\r\n        <Col span={6}>\r\n          <Card>\r\n            <Statistic\r\n              title=\"Tổng chi\"\r\n              value={stats.total_expense || stats.totalExpense}\r\n              precision={0}\r\n              valueStyle={{ color: '#cf1322' }}\r\n              prefix={<FallOutlined />}\r\n              suffix=\"₫\"\r\n            />\r\n          </Card>\r\n        </Col>\r\n        <Col span={6}>\r\n          <Card>\r\n            <Statistic\r\n              title=\"Lợi nhuận\"\r\n              value={stats.net_profit || stats.netProfit}\r\n              precision={0}\r\n              valueStyle={{ color: '#1890ff' }}\r\n              prefix={<DollarOutlined />}\r\n              suffix=\"₫\"\r\n            />\r\n          </Card>\r\n        </Col>\r\n        <Col span={6}>\r\n          <Card>\r\n            <Statistic\r\n              title=\"Thu hôm nay\"\r\n              value={stats.today_income || stats.todayIncome}\r\n              precision={0}\r\n              valueStyle={{ color: '#52c41a' }}\r\n              prefix={<RiseOutlined />}\r\n              suffix=\"₫\"\r\n            />\r\n          </Card>\r\n        </Col>\r\n      </Row>\r\n\r\n      <Card\r\n        title=\"Giao dịch tài chính\"\r\n        extra={\r\n          <Space>\r\n            <Button icon={<FilterOutlined />}>\r\n              Lọc\r\n            </Button>\r\n            <Button icon={<DownloadOutlined />}>\r\n              Xuất báo cáo\r\n            </Button>\r\n            <Button\r\n              type=\"primary\"\r\n              icon={<PlusOutlined />}\r\n              onClick={handleModalOpen}\r\n            >\r\n              Thêm giao dịch\r\n            </Button>\r\n          </Space>\r\n        }\r\n      >\r\n        <Table\r\n          columns={columns}\r\n          dataSource={transactions}\r\n          loading={loading}\r\n          rowKey=\"id\"\r\n          pagination={{\r\n            showSizeChanger: true,\r\n            showQuickJumper: true,\r\n            showTotal: (total, range) =>\r\n              `${range[0]}-${range[1]} của ${total} giao dịch`,\r\n          }}\r\n        />\r\n      </Card>\r\n    </div>\r\n  );\r\n\r\n  const renderChartsTab = () => (\r\n    <div>\r\n      <Row gutter={16} style={{ marginBottom: 24 }}>\r\n        <Col span={12}>\r\n          <Card title=\"Biểu đồ doanh thu theo tháng\" icon={<BarChartOutlined />}>\r\n            <ResponsiveContainer width=\"100%\" height={300}>\r\n              <BarChart data={chartData}>\r\n                <CartesianGrid strokeDasharray=\"3 3\" />\r\n                <XAxis dataKey=\"month\" />\r\n                <YAxis />\r\n                <Tooltip formatter={(value) => `${value.toLocaleString('vi-VN')} ₫`} />\r\n                <Legend />\r\n                <Bar dataKey=\"income\" fill=\"#52c41a\" name=\"Thu\" />\r\n                <Bar dataKey=\"expense\" fill=\"#ff4d4f\" name=\"Chi\" />\r\n              </BarChart>\r\n            </ResponsiveContainer>\r\n          </Card>\r\n        </Col>\r\n        <Col span={12}>\r\n          <Card title=\"Biểu đồ lợi nhuận theo tháng\" icon={<LineChart />}>\r\n            <ResponsiveContainer width=\"100%\" height={300}>\r\n              <LineChart data={chartData}>\r\n                <CartesianGrid strokeDasharray=\"3 3\" />\r\n                <XAxis dataKey=\"month\" />\r\n                <YAxis />\r\n                <Tooltip formatter={(value) => `${value.toLocaleString('vi-VN')} ₫`} />\r\n                <Legend />\r\n                <Line\r\n                  type=\"monotone\"\r\n                  dataKey=\"profit\"\r\n                  stroke=\"#1890ff\"\r\n                  strokeWidth={2}\r\n                  name=\"Lợi nhuận\"\r\n                />\r\n              </LineChart>\r\n            </ResponsiveContainer>\r\n          </Card>\r\n        </Col>\r\n      </Row>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div style={{ padding: 24 }}>\r\n      <Tabs activeKey={activeTab} onChange={setActiveTab}>\r\n        <TabPane tab=\"Giao dịch\" key=\"transactions\">\r\n          {renderTransactionsTab()}\r\n        </TabPane>\r\n        <TabPane tab=\"Biểu đồ\" key=\"charts\">\r\n          {renderChartsTab()}\r\n        </TabPane>\r\n      </Tabs>\r\n\r\n      <Modal\r\n        title=\"Thêm giao dịch tài chính\"\r\n        open={modalVisible}\r\n        onCancel={() => setModalVisible(false)}\r\n        footer={null}\r\n        width={600}\r\n      >\r\n        <Form\r\n          form={form}\r\n          layout=\"vertical\"\r\n          onFinish={handleAddTransaction}\r\n        >\r\n          <Row gutter={16}>\r\n            <Col span={12}>\r\n              <Form.Item\r\n                label=\"Loại giao dịch\"\r\n                name=\"type\"\r\n                rules={[{ required: true, message: 'Vui lòng chọn loại giao dịch' }]}\r\n              >\r\n                <Radio.Group\r\n                  onChange={(e) => {\r\n                    form.setFieldsValue({ category: undefined });\r\n                  }}\r\n                >\r\n                  <Radio value=\"income\">Thu</Radio>\r\n                  <Radio value=\"expense\">Chi</Radio>\r\n                </Radio.Group>\r\n              </Form.Item>\r\n            </Col>\r\n            <Col span={12}>\r\n              <Form.Item\r\n                label=\"Danh mục\"\r\n                name=\"category\"\r\n                rules={[{ required: true, message: 'Vui lòng chọn danh mục' }]}\r\n              >\r\n                <Select placeholder=\"Chọn danh mục\">\r\n                  {categories[form.getFieldValue('type') || 'income']?.map((category) => (\r\n                    <Option key={category} value={category}>\r\n                      {category}\r\n                    </Option>\r\n                  ))}\r\n                </Select>\r\n              </Form.Item>\r\n            </Col>\r\n          </Row>\r\n\r\n          <Row gutter={16}>\r\n            <Col span={12}>\r\n              <Form.Item\r\n                label=\"Số tiền\"\r\n                name=\"amount\"\r\n                rules={[{ required: true, message: 'Vui lòng nhập số tiền' }]}\r\n              >\r\n                <InputNumber\r\n                  placeholder=\"Nhập số tiền\"\r\n                  style={{ width: '100%' }}\r\n                  formatter={(value) => `${value}`.replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',')}\r\n                  parser={(value) => value.replace(/\\$\\s?|(,*)/g, '')}\r\n                  min={0}\r\n                />\r\n              </Form.Item>\r\n            </Col>\r\n            <Col span={12}>\r\n              <Form.Item\r\n                label=\"Phương thức thanh toán\"\r\n                name=\"payment_method\"\r\n                rules={[{ required: true, message: 'Vui lòng chọn phương thức thanh toán' }]}\r\n              >\r\n                <Select placeholder=\"Chọn phương thức\">\r\n                  {paymentMethods.map((method) => (\r\n                    <Option key={method.value} value={method.value}>\r\n                      {method.label}\r\n                    </Option>\r\n                  ))}\r\n                </Select>\r\n              </Form.Item>\r\n            </Col>\r\n          </Row>\r\n\r\n          <Form.Item\r\n            label=\"Mô tả\"\r\n            name=\"description\"\r\n            rules={[{ required: true, message: 'Vui lòng nhập mô tả giao dịch' }]}\r\n          >\r\n            <Input.TextArea\r\n              placeholder=\"Nhập mô tả giao dịch\"\r\n              rows={3}\r\n            />\r\n          </Form.Item>\r\n\r\n          <Form.Item\r\n            label=\"Ngày giao dịch\"\r\n            name=\"transaction_date\"\r\n            rules={[{ required: true, message: 'Vui lòng chọn ngày giao dịch' }]}\r\n          >\r\n            <DatePicker style={{ width: '100%' }} />\r\n          </Form.Item>\r\n\r\n          <div style={{ textAlign: 'right', marginTop: 24 }}>\r\n            <Space>\r\n              <Button onClick={() => setModalVisible(false)}>\r\n                Hủy\r\n              </Button>\r\n              <Button\r\n                type=\"primary\"\r\n                htmlType=\"submit\"\r\n                icon={<PlusOutlined />}\r\n              >\r\n                Thêm giao dịch\r\n              </Button>\r\n            </Space>\r\n          </div>\r\n        </Form>\r\n      </Modal>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FinancialPage; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}