{"ast":null,"code":"// AI-Powered Error Monitor & Auto-Fix System\n// Tự động bắt và phân tích lỗi, đưa ra giải pháp sửa chữa\nimport api from'./api';class AIErrorMonitor{constructor(){this.errors=[];this.apiErrors=[];this.consoleErrors=[];this.isMonitoring=false;this.aiEndpoint='/ai/analyze-error';this.autoFixEnabled=true;this.init();}init(){console.log('🤖 AI Error Monitor khởi động...');// Bắt tất cả lỗi console\nthis.interceptConsoleErrors();// Bắt tất cả lỗi API\nthis.interceptAPIErrors();// Bắt lỗi React/JS runtime\nthis.interceptRuntimeErrors();// Bắt lỗi unhandled promise\nthis.interceptPromiseErrors();// Bắt lỗi network\nthis.interceptNetworkErrors();this.isMonitoring=true;console.log('✅ AI Error Monitor đã sẵn sàng - Sẽ tự động sửa lỗi!');}// Bắt tất cả lỗi console (error, warn, debug)\ninterceptConsoleErrors(){var _this=this;const originalError=console.error;const originalWarn=console.warn;console.error=function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this.captureConsoleError('error',args);originalError.apply(console,args);};console.warn=function(){for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2];}_this.captureConsoleError('warn',args);originalWarn.apply(console,args);};}// Bắt lỗi API từ axios interceptor\ninterceptAPIErrors(){// Đã có sẵn trong api.js, ta sẽ hook vào đó\nif(window.axios){window.axios.interceptors.response.use(response=>response,error=>{this.captureAPIError(error);return Promise.reject(error);});}}// Bắt lỗi runtime JavaScript\ninterceptRuntimeErrors(){window.addEventListener('error',event=>{this.captureRuntimeError(event);});}// Bắt lỗi promise không được handle\ninterceptPromiseErrors(){window.addEventListener('unhandledrejection',event=>{this.capturePromiseError(event);});}// Bắt lỗi network\ninterceptNetworkErrors(){var _this2=this;const originalFetch=window.fetch;window.fetch=async function(){try{const response=await originalFetch(...arguments);if(!response.ok){_this2.captureNetworkError(arguments.length<=0?undefined:arguments[0],response);}return response;}catch(error){_this2.captureNetworkError(arguments.length<=0?undefined:arguments[0],null,error);throw error;}};}// Ghi lại lỗi console\ncaptureConsoleError(level,args){const error={id:Date.now()+Math.random(),type:'console',level:level,message:args.join(' '),timestamp:new Date().toISOString(),url:window.location.href,userAgent:navigator.userAgent,stack:new Error().stack};this.consoleErrors.push(error);this.processError(error);}// Ghi lại lỗi API\ncaptureAPIError(axiosError){var _axiosError$config,_axiosError$config$me,_axiosError$config2,_axiosError$config3,_axiosError$config4,_axiosError$config5,_axiosError$response,_axiosError$response2,_axiosError$response3,_axiosError$config6,_axiosError$config7;const error={id:Date.now()+Math.random(),type:'api',method:(_axiosError$config=axiosError.config)===null||_axiosError$config===void 0?void 0:(_axiosError$config$me=_axiosError$config.method)===null||_axiosError$config$me===void 0?void 0:_axiosError$config$me.toUpperCase(),url:(_axiosError$config2=axiosError.config)===null||_axiosError$config2===void 0?void 0:_axiosError$config2.url,baseURL:(_axiosError$config3=axiosError.config)===null||_axiosError$config3===void 0?void 0:_axiosError$config3.baseURL,fullURL:\"\".concat((_axiosError$config4=axiosError.config)===null||_axiosError$config4===void 0?void 0:_axiosError$config4.baseURL).concat((_axiosError$config5=axiosError.config)===null||_axiosError$config5===void 0?void 0:_axiosError$config5.url),status:(_axiosError$response=axiosError.response)===null||_axiosError$response===void 0?void 0:_axiosError$response.status,statusText:(_axiosError$response2=axiosError.response)===null||_axiosError$response2===void 0?void 0:_axiosError$response2.statusText,data:(_axiosError$response3=axiosError.response)===null||_axiosError$response3===void 0?void 0:_axiosError$response3.data,message:axiosError.message,timestamp:new Date().toISOString(),requestData:(_axiosError$config6=axiosError.config)===null||_axiosError$config6===void 0?void 0:_axiosError$config6.data,headers:(_axiosError$config7=axiosError.config)===null||_axiosError$config7===void 0?void 0:_axiosError$config7.headers};this.apiErrors.push(error);console.log('🔴 API Error Captured:',error);this.processError(error);}// Ghi lại lỗi runtime\ncaptureRuntimeError(event){var _event$error;const error={id:Date.now()+Math.random(),type:'runtime',message:event.message,filename:event.filename,lineno:event.lineno,colno:event.colno,stack:(_event$error=event.error)===null||_event$error===void 0?void 0:_event$error.stack,timestamp:new Date().toISOString(),url:window.location.href};this.errors.push(error);this.processError(error);}// Ghi lại lỗi promise\ncapturePromiseError(event){var _event$reason,_event$reason2;const error={id:Date.now()+Math.random(),type:'promise',message:((_event$reason=event.reason)===null||_event$reason===void 0?void 0:_event$reason.message)||event.reason,stack:(_event$reason2=event.reason)===null||_event$reason2===void 0?void 0:_event$reason2.stack,timestamp:new Date().toISOString(),url:window.location.href};this.errors.push(error);this.processError(error);}// Ghi lại lỗi network\ncaptureNetworkError(url,response,error){const networkError={id:Date.now()+Math.random(),type:'network',url:url,status:response===null||response===void 0?void 0:response.status,statusText:response===null||response===void 0?void 0:response.statusText,message:(error===null||error===void 0?void 0:error.message)||\"Network error: \".concat(response===null||response===void 0?void 0:response.status),timestamp:new Date().toISOString()};this.errors.push(networkError);this.processError(networkError);}// Xử lý lỗi thông qua AI\nasync processError(error){console.log(\"\\uD83E\\uDD16 AI \\u0111ang ph\\xE2n t\\xEDch l\\u1ED7i: \".concat(error.type),error);// ✨ ENHANCED: Client-side pattern matching trước khi gửi về AI backend\nconst clientSideAnalysis=this.performClientSideAnalysis(error);if(clientSideAnalysis.canAutoFix){console.log('🔧 AI Client-side pattern match found, auto-fixing immediately...');await this.applyAutoFix(error,clientSideAnalysis.solution);return;}try{// Gửi lỗi đến AI để phân tích\nconst aiResponse=await this.sendToAI(error);if(aiResponse.canAutoFix&&this.autoFixEnabled){console.log('🔧 AI đã tìm ra cách sửa, đang auto-fix...');await this.applyAutoFix(error,aiResponse.solution);}else{console.log('📋 AI gợi ý cách sửa:',aiResponse.suggestion);this.showErrorNotification(error,aiResponse);}}catch(aiError){console.log('❌ AI không thể phân tích lỗi:',aiError.message);this.showBasicErrorNotification(error);}}// ✨ NEW: Client-side pattern matching cho các lỗi phổ biến\nperformClientSideAnalysis(error){// 🎯 CUSTOMER DELETE 404 ERROR - Immediate Recognition\nif(error.type==='api'&&error.method==='DELETE'&&error.url&&error.url.includes('/customers/')&&error.status===404){console.log('🎯 AI Client-side match: CUSTOMER_DELETE_404_ERROR');return{canAutoFix:true,confidence:0.98,pattern:'CUSTOMER_DELETE_404_ERROR',suggestion:'Khách hàng đã bị xóa hoặc không tồn tại. AI sẽ cập nhật danh sách và thông báo.',solution:{type:'customer_delete_404_fix',message:'Khách hàng không tồn tại hoặc đã bị xóa.',actions:[{type:'show_user_message',message:'Khách hàng không tồn tại hoặc đã bị xóa.'},{type:'refresh_customer_list',force:true},{type:'show_success_notification',message:'Danh sách khách hàng đã được cập nhật'}]}};}// 🎯 SUPPLIER DELETE 404 ERROR - Immediate Recognition\nif(error.type==='api'&&error.method==='DELETE'&&error.url&&error.url.includes('/suppliers/')&&error.status===404){console.log('🎯 AI Client-side match: SUPPLIER_DELETE_404_ERROR');return{canAutoFix:true,confidence:0.98,pattern:'SUPPLIER_DELETE_404_ERROR',suggestion:'Nhà cung cấp đã bị xóa hoặc không tồn tại. AI sẽ cập nhật danh sách.',solution:{type:'supplier_delete_404_fix',message:'Nhà cung cấp không tồn tại hoặc đã bị xóa.',actions:[{type:'show_user_message',message:'Nhà cung cấp không tồn tại hoặc đã bị xóa.'},{type:'refresh_supplier_list',force:true},{type:'show_success_notification',message:'Danh sách nhà cung cấp đã được cập nhật'}]}};}// 🎯 API 500 SERVER ERROR - Critical Pattern\nif(error.type==='api'&&error.status>=500&&error.status<600){console.log('🎯 AI Client-side match: API_500_SERVER_ERROR');return{canAutoFix:true,confidence:0.95,pattern:'API_500_SERVER_ERROR',suggestion:'Server đang gặp vấn đề nghiêm trọng. AI sẽ thử retry và backup solutions.',solution:{type:'api_500_recovery',message:'Server đang gặp vấn đề. AI đang thử các giải pháp khôi phục...',actions:[{type:'retry_with_backoff',strategy:'exponential',maxRetries:3},{type:'show_user_message',message:'Server đang gặp vấn đề. AI đang thử khôi phục...'},{type:'enable_offline_mode',duration:30000}]}};}// 🎯 REACT ILLEGAL INVOCATION - Emergency Pattern\nif(error.type==='console'&&error.message&&error.message.toLowerCase().includes('illegal invocation')){console.log('🎯 AI Client-side match: REACT_ILLEGAL_INVOCATION_ERROR');return{canAutoFix:true,confidence:0.95,pattern:'REACT_ILLEGAL_INVOCATION_ERROR',suggestion:'CRITICAL React DOM error detected. AI implementing emergency recovery.',solution:{type:'emergency_react_recovery',message:'Đang khôi phục từ lỗi React critical...',actions:[{type:'emergency_page_reload',delay:2000,message:'Fixing critical React error...'},{type:'fix_form_bindings',target:'all_forms'},{type:'enable_safe_mode',duration:30000}]}};}// 🎯 NETWORK CONNECTION ERROR\nif(error.type==='network'||error.type==='api'&&error.message&&error.message.toLowerCase().includes('network')){console.log('🎯 AI Client-side match: NETWORK_CONNECTION_ERROR');return{canAutoFix:true,confidence:0.8,pattern:'NETWORK_CONNECTION_ERROR',suggestion:'Lỗi kết nối mạng. AI implementing retry strategy và offline mode.',solution:{type:'network_recovery',message:'Kết nối mạng gặp vấn đề. AI đang thử khôi phục...',actions:[{type:'retry_with_backoff',strategy:'exponential',maxRetries:5},{type:'enable_offline_mode',cache_strategy:'last_known_good'},{type:'show_connection_status',real_time:true}]}};}// No client-side pattern match found\nreturn{canAutoFix:false,confidence:0,pattern:'UNKNOWN',suggestion:'Chưa nhận diện được pattern. Gửi về AI backend để phân tích.',solution:null};}// Gửi lỗi đến AI backend để phân tích\nasync sendToAI(error){try{const response=await api.post(this.aiEndpoint,{error:error,context:{page:window.location.pathname,timestamp:new Date().toISOString(),userAgent:navigator.userAgent,recentErrors:this.getRecentErrors(5),systemInfo:{url:window.location.href,viewport:\"\".concat(window.innerWidth,\"x\").concat(window.innerHeight),online:navigator.onLine}}});return response.data;}catch(error){throw new Error('AI service unavailable');}}// Áp dụng auto-fix do AI đề xuất\nasync applyAutoFix(error,solution){try{console.log('🔄 Đang áp dụng auto-fix...',solution);switch(solution.type){case'reload_page':setTimeout(()=>window.location.reload(),2000);break;case'retry_api':await this.retryFailedAPI(error,solution);break;case'clear_cache':localStorage.clear();sessionStorage.clear();break;case'update_ui_state':await this.updateUIState(solution.data);break;case'fix_code':console.log('💡 Code fix suggestion:',solution.code);break;case'show_user_message':this.showUserMessage(solution.message);break;case'redirect_to_list':this.redirectToList(solution.page);break;case'use_fallback_data':this.useFallbackData(solution.data);break;case'reload_page_section':this.reloadPageSection(solution.section);break;// ADVANCED SOLUTIONS - DEEP ANALYSIS\ncase'retry_with_backoff':this.retryWithExponentialBackoff(solution);break;case'enable_offline_mode':this.enableOfflineMode(solution);break;case'add_null_checks':this.suggestNullChecks(solution);break;case'analyze_hook_dependencies':this.analyzeHookDependencies(solution);break;case'implement_error_boundary':this.implementErrorBoundary(solution);break;case'auto_create_customer':this.autoCreateCustomer(solution);break;case'refresh_inventory_data':this.refreshInventoryData(solution);break;case'suggest_alternative_products':this.suggestAlternativeProducts(solution);break;case'refresh_auth_token':this.refreshAuthToken(solution);break;case'highlight_invalid_fields':this.highlightInvalidFields(solution);break;// EMERGENCY SOLUTIONS - CRITICAL ERROR HANDLING\ncase'emergency_page_reload':this.emergencyPageReload(solution);break;case'fix_form_bindings':this.fixFormBindings(solution);break;case'reset_component_state':this.resetComponentState(solution);break;case'clear_form_cache':this.clearFormCache(solution);break;case'enable_safe_mode':this.enableSafeMode(solution);break;case'component_recovery':this.componentRecovery(solution);break;case'show_fallback_ui':this.showFallbackUI(solution);break;// ✨ NEW CLIENT-SIDE SPECIFIC SOLUTIONS\ncase'customer_delete_404_fix':await this.handleCustomerDelete404(solution);break;case'supplier_delete_404_fix':await this.handleSupplierDelete404(solution);break;case'api_500_recovery':await this.handleAPI500Recovery(solution);break;case'emergency_react_recovery':await this.handleEmergencyReactRecovery(solution);break;case'network_recovery':await this.handleNetworkRecovery(solution);break;default:console.log('🤖 AI solution:',solution.description);}console.log('✅ Auto-fix hoàn thành!');this.showSuccessNotification(\"AI \\u0111\\xE3 t\\u1EF1 \\u0111\\u1ED9ng s\\u1EEDa l\\u1ED7i: \".concat(error.message));}catch(fixError){console.log('❌ Auto-fix thất bại:',fixError.message);}}// Retry API call theo gợi ý của AI\nasync retryFailedAPI(error,solution){if(error.type!=='api')return;try{var _error$method;const retryConfig={method:((_error$method=error.method)===null||_error$method===void 0?void 0:_error$method.toLowerCase())||'get',url:error.url,data:solution.modifiedData||JSON.parse(error.requestData||'{}'),headers:solution.modifiedHeaders||error.headers};console.log('🔄 Retry API với config mới:',retryConfig);const response=await api(retryConfig);console.log('✅ API retry thành công:',response.data);return response;}catch(retryError){console.log('❌ API retry thất bại:',retryError.message);throw retryError;}}// Cập nhật UI state theo gợi ý AI\nasync updateUIState(stateChanges){try{// Dispatch Redux actions hoặc update React state\nif(window.store&&stateChanges.redux){window.store.dispatch(stateChanges.redux);}// Update localStorage\nif(stateChanges.localStorage){Object.entries(stateChanges.localStorage).forEach(_ref=>{let[key,value]=_ref;localStorage.setItem(key,JSON.stringify(value));});}console.log('✅ UI state updated theo AI suggestion');}catch(error){console.log('❌ Không thể update UI state:',error.message);}}// Hiển thị thông báo lỗi với AI suggestion\nshowErrorNotification(error,aiResponse){const notification={type:'error',title:\"\\uD83E\\uDD16 AI Ph\\xE1t hi\\u1EC7n l\\u1ED7i: \".concat(error.type),message:error.message,suggestion:aiResponse.suggestion,action:aiResponse.action,duration:10000};this.displayNotification(notification);}// Hiển thị thông báo thành công\nshowSuccessNotification(message){const notification={type:'success',title:'🤖 AI Auto-Fix',message:message,duration:5000};this.displayNotification(notification);}// Hiển thị thông báo cơ bản\nshowBasicErrorNotification(error){console.log(\"\\uD83D\\uDD34 L\\u1ED7i \".concat(error.type,\": \").concat(error.message));}// Hiển thị notification trên UI\ndisplayNotification(notification){// Tích hợp với Ant Design notification hoặc custom notification\nif(window.antd&&window.antd.notification){window.antd.notification[notification.type]({message:notification.title,description:notification.message+(notification.suggestion?\"\\n\\uD83D\\uDCA1 \".concat(notification.suggestion):''),duration:notification.duration/1000});}else{console.log('📢 Notification:',notification);}}// Lấy lỗi gần đây\ngetRecentErrors(){let count=arguments.length>0&&arguments[0]!==undefined?arguments[0]:10;const allErrors=[...this.errors,...this.apiErrors,...this.consoleErrors];return allErrors.sort((a,b)=>new Date(b.timestamp)-new Date(a.timestamp)).slice(0,count);}// Lấy thống kê lỗi\ngetErrorStats(){const allErrors=this.getRecentErrors(100);const stats={total:allErrors.length,byType:{},byPage:{},recent24h:0};const now=new Date();const yesterday=new Date(now.getTime()-24*60*60*1000);allErrors.forEach(error=>{// Count by type\nstats.byType[error.type]=(stats.byType[error.type]||0)+1;// Count by page\nconst page=error.url||'unknown';stats.byPage[page]=(stats.byPage[page]||0)+1;// Count recent 24h\nif(new Date(error.timestamp)>yesterday){stats.recent24h++;}});return stats;}// API để disable/enable auto-fix\nsetAutoFix(enabled){this.autoFixEnabled=enabled;console.log(\"\\uD83E\\uDD16 AI Auto-Fix: \".concat(enabled?'Enabled':'Disabled'));}// Hiển thị thông báo cho user\nshowUserMessage(message){try{console.log(\"\\uD83D\\uDCE2 AI Message: \".concat(message));// Sử dụng Ant Design notification nếu có\nif(window.antd&&window.antd.message){window.antd.message.warning(message);}else{// Fallback to browser notification\nalert(\"\\uD83E\\uDD16 AI: \".concat(message));}return true;}catch(error){console.error('❌ Không thể hiển thị thông báo:',error);return false;}}// Chuyển hướng về trang danh sách\nredirectToList(page){try{console.log(\"\\uD83D\\uDD04 AI Redirect to: \".concat(page));if(page&&page.startsWith('/')){// Chuyển hướng bằng window.location\nsetTimeout(()=>{window.location.href=page;},2000);}else{// Chuyển về trang chính nếu không có page cụ thể\nsetTimeout(()=>{window.location.href='/';},2000);}return true;}catch(error){console.error('❌ Không thể chuyển hướng:',error);return false;}}// Sử dụng dữ liệu fallback\nuseFallbackData(data){try{console.log('🔄 AI sử dụng fallback data:',data);// Lưu vào sessionStorage để component khác có thể sử dụng\nif(data&&typeof data==='object'){sessionStorage.setItem('ai_fallback_data',JSON.stringify(data));// Trigger custom event để components biết có fallback data\nwindow.dispatchEvent(new CustomEvent('ai-fallback-data',{detail:data}));}return true;}catch(error){console.error('❌ Không thể sử dụng fallback data:',error);return false;}}// Reload một phần cụ thể của trang\nreloadPageSection(section){try{console.log(\"\\uD83D\\uDD04 AI reload section: \".concat(section));// Dispatch event để component tự reload\nwindow.dispatchEvent(new CustomEvent('ai-reload-section',{detail:{section}}));return true;}catch(error){console.error('❌ Không thể reload section:',error);return false;}}// ============================================\n// ADVANCED SOLUTION IMPLEMENTATIONS - DEEP AI\n// ============================================\n// Retry với exponential backoff strategy\nretryWithExponentialBackoff(solution){const{strategy='exponential',maxRetries=5,baseDelay=1000}=solution;console.log(\"\\uD83D\\uDD04 AI implementing \".concat(strategy,\" backoff retry strategy\"));const retryWithDelay=attempt=>{if(attempt>=maxRetries){console.log(\"\\u274C Max retries (\".concat(maxRetries,\") reached\"));return;}const delay=strategy==='exponential'?baseDelay*Math.pow(2,attempt):baseDelay;console.log(\"\\u23F1\\uFE0F Retry attempt \".concat(attempt+1,\"/\").concat(maxRetries,\" after \").concat(delay,\"ms\"));setTimeout(()=>{// Implement actual retry logic here\nwindow.location.reload();},delay);};retryWithDelay(0);}// Enable offline mode với cache strategy\nenableOfflineMode(solution){const{cache_strategy='last_known_good',duration=30000}=solution;console.log(\"\\uD83D\\uDCF4 AI enabling offline mode with \".concat(cache_strategy,\" strategy\"));// Set offline indicator\nif(document.body){const offlineIndicator=document.createElement('div');offlineIndicator.id='ai-offline-indicator';offlineIndicator.style.cssText=\"\\n        position: fixed;\\n        top: 0;\\n        left: 0;\\n        right: 0;\\n        background: #ff7875;\\n        color: white;\\n        text-align: center;\\n        padding: 8px;\\n        z-index: 9999;\\n        font-size: 14px;\\n      \";offlineIndicator.textContent='🤖 AI: Offline mode - Đang sử dụng dữ liệu cache';document.body.prepend(offlineIndicator);// Auto remove after duration\nsetTimeout(()=>{offlineIndicator===null||offlineIndicator===void 0?void 0:offlineIndicator.remove();},duration);}}// Suggest null checks cho React components\nsuggestNullChecks(solution){console.log('🛡️ AI suggesting null checks implementation:');console.log(\"\\n      \\uD83D\\uDCA1 AI Code Suggestion:\\n      \\n      // Add null checks before accessing properties\\n      const MyComponent = ({ data }) => {\\n        if (!data || !data.items) {\\n          return <div>Loading...</div>;\\n        }\\n        \\n        return (\\n          <div>\\n            {data.items?.map(item => (\\n              <div key={item?.id || 'unknown'}>\\n                {item?.name || 'Unknown'}\\n              </div>\\n            ))}\\n          </div>\\n        );\\n      };\\n    \");}// Analyze React Hook dependencies\nanalyzeHookDependencies(solution){console.log('🔍 AI analyzing React Hook dependencies:');console.log(\"\\n      \\uD83D\\uDCA1 AI Hook Analysis:\\n      \\n      \\u26A0\\uFE0F Common Issues:\\n      1. Missing dependencies in useEffect\\n      2. Stale closures in event handlers\\n      3. Infinite re-renders from object dependencies\\n      \\n      \\uD83D\\uDD27 AI Suggestions:\\n      - Add missing dependencies to dependency array\\n      - Use useCallback for function dependencies\\n      - Use useMemo for object dependencies\\n      - Consider splitting complex effects\\n      \\n      Example fix:\\n      useEffect(() => {\\n        // effect code\\n      }, [dependency1, dependency2]); // \\u2190 Add all dependencies\\n    \");}// Implement Error Boundary suggestion\nimplementErrorBoundary(solution){console.log('🚧 AI suggesting Error Boundary implementation:');console.log(\"\\n      \\uD83D\\uDCA1 AI Error Boundary Pattern:\\n      \\n      import ErrorBoundary from './components/ErrorBoundary';\\n      \\n      <ErrorBoundary fallback={<div>Something went wrong</div>}>\\n        <YourComponent />\\n      </ErrorBoundary>\\n      \\n      \\u2705 This will catch component errors and prevent crashes\\n    \");}// Auto create customer solution\nautoCreateCustomer(solution){console.log('👤 AI auto-creating customer with defaults...');const defaultCustomer={name:'Khách hàng',phone:'',customer_type:'regular',discount_rate:0};// Trigger customer creation form with defaults\nthis.showUserMessage('AI đã chuẩn bị thông tin khách hàng mặc định. Vui lòng kiểm tra và xác nhận.');return defaultCustomer;}// Refresh inventory data\nrefreshInventoryData(solution){console.log('📦 AI refreshing inventory data...');// Emit custom event to refresh inventory\nwindow.dispatchEvent(new CustomEvent('ai-refresh-inventory',{detail:{realTime:solution.real_time}}));this.showUserMessage('AI đang cập nhật dữ liệu tồn kho real-time...');}// Suggest alternative products\nsuggestAlternativeProducts(solution){console.log('🔄 AI suggesting alternative products...');this.showUserMessage('Sản phẩm không đủ stock. AI đang tìm sản phẩm tương tự...');// Emit event for product suggestions\nwindow.dispatchEvent(new CustomEvent('ai-suggest-alternatives',{detail:{similar:solution.similar}}));}// Refresh authentication token\nrefreshAuthToken(solution){console.log('🔐 AI attempting to refresh auth token...');if(solution.silent){// Silent refresh\nconsole.log('🤫 Silent token refresh...');}else{this.showUserMessage('Phiên đăng nhập hết hạn. AI đang làm mới token...');}// Trigger auth refresh\nwindow.dispatchEvent(new CustomEvent('ai-refresh-auth'));}// Highlight invalid form fields\nhighlightInvalidFields(solution){console.log('🎯 AI highlighting invalid form fields...');// Find form elements and highlight invalid ones\nconst forms=document.querySelectorAll('form');forms.forEach(form=>{const invalidInputs=form.querySelectorAll(':invalid');invalidInputs.forEach(input=>{input.style.border='2px solid #ff4d4f';input.style.boxShadow='0 0 5px rgba(255, 77, 79, 0.3)';});});this.showUserMessage('AI đã highlight các field cần sửa. Vui lòng kiểm tra lại.');}// ============================================\n// EMERGENCY SOLUTIONS - CRITICAL ERROR RECOVERY\n// ============================================\n// Emergency page reload cho critical errors\nemergencyPageReload(solution){const{delay=3000,message='Đang khôi phục từ lỗi critical...'}=solution;console.log('🚨 AI EMERGENCY: Implementing emergency page reload...');// Show emergency notice\nthis.showEmergencyNotice(message);// Set emergency flag trong localStorage\nlocalStorage.setItem('ai_emergency_recovery',JSON.stringify({timestamp:Date.now(),reason:'illegal_invocation_error',auto_recovery:true}));// Reload after delay\nsetTimeout(()=>{console.log('🔄 AI Emergency: Reloading page to recover from critical error...');window.location.reload();},delay);}// Fix form bindings issues\nfixFormBindings(solution){console.log('🔧 AI fixing form bindings...');try{// Remove all form event listeners\nconst forms=document.querySelectorAll('form');forms.forEach(form=>{// Clone form to remove all event listeners\nconst newForm=form.cloneNode(true);form.parentNode.replaceChild(newForm,form);});// Clear React form state cache\nif(window.React&&window.React.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED){// Reset React internal state (emergency measure)\nconsole.log('🔧 Resetting React internal form state...');}this.showUserMessage('AI đã fix form bindings. Vui lòng thử lại.');}catch(error){console.error('❌ Failed to fix form bindings:',error);this.emergencyPageReload({delay:2000,message:'Form binding fix failed, reloading...'});}}// Reset component state deeply\nresetComponentState(solution){console.log('🔄 AI resetting component state...');try{// Clear all localStorage related to forms and components\nconst keysToRemove=[];for(let i=0;i<localStorage.length;i++){const key=localStorage.key(i);if(key&&(key.includes('form')||key.includes('component')||key.includes('state'))){keysToRemove.push(key);}}keysToRemove.forEach(key=>{localStorage.removeItem(key);console.log(\"\\uD83D\\uDDD1\\uFE0F Removed localStorage: \".concat(key));});// Clear sessionStorage as well\nsessionStorage.clear();// Emit custom event to force React components to reset\nwindow.dispatchEvent(new CustomEvent('ai-component-reset',{detail:{deep:solution.deep,reason:'illegal_invocation_recovery'}}));this.showUserMessage('AI đã reset component state. Hệ thống đang khôi phục...');}catch(error){console.error('❌ Failed to reset component state:',error);}}// Clear form cache\nclearFormCache(solution){console.log('🧹 AI clearing form cache...');const{localStorage_keys=['form_*']}=solution;try{// Clear localStorage keys matching patterns\nlocalStorage_keys.forEach(pattern=>{const regex=new RegExp(pattern.replace('*','.*'));const keysToRemove=[];for(let i=0;i<localStorage.length;i++){const key=localStorage.key(i);if(key&&regex.test(key)){keysToRemove.push(key);}}keysToRemove.forEach(key=>{localStorage.removeItem(key);console.log(\"\\uD83D\\uDDD1\\uFE0F Cleared form cache: \".concat(key));});});this.showUserMessage('AI đã clear form cache thành công.');}catch(error){console.error('❌ Failed to clear form cache:',error);}}// Enable safe mode\nenableSafeMode(solution){const{duration=30000}=solution;console.log(\"\\uD83D\\uDEE1\\uFE0F AI enabling safe mode for \".concat(duration,\"ms...\"));// Set safe mode flag\nwindow.AI_SAFE_MODE=true;localStorage.setItem('ai_safe_mode',JSON.stringify({enabled:true,timestamp:Date.now(),duration:duration}));// Show safe mode indicator\nthis.showSafeModeIndicator(duration);// Disable safe mode after duration\nsetTimeout(()=>{window.AI_SAFE_MODE=false;localStorage.removeItem('ai_safe_mode');console.log('🛡️ AI safe mode disabled');// Remove safe mode indicator\nconst indicator=document.getElementById('ai-safe-mode-indicator');if(indicator){indicator.remove();}},duration);}// Component recovery\ncomponentRecovery(solution){console.log('🔧 AI implementing component recovery...');const{strategy='graceful_fallback'}=solution;try{switch(strategy){case'graceful_fallback':// Force React error boundaries to show fallback UI\nwindow.dispatchEvent(new CustomEvent('ai-force-fallback',{detail:{reason:'component_recovery'}}));break;case'component_remount':// Force component remount\nwindow.dispatchEvent(new CustomEvent('ai-remount-components'));break;default:this.showUserMessage('AI đang khôi phục component...');}}catch(error){console.error('❌ Component recovery failed:',error);this.emergencyPageReload({delay:1000});}}// Show fallback UI\nshowFallbackUI(solution){const{message='Đang khôi phục component...'}=solution;console.log('🎭 AI showing fallback UI...');// Create fallback overlay\nconst overlay=document.createElement('div');overlay.id='ai-fallback-overlay';overlay.style.cssText=\"\\n      position: fixed;\\n      top: 0;\\n      left: 0;\\n      right: 0;\\n      bottom: 0;\\n      background: rgba(0, 0, 0, 0.8);\\n      color: white;\\n      display: flex;\\n      flex-direction: column;\\n      justify-content: center;\\n      align-items: center;\\n      z-index: 10000;\\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\\n    \";overlay.innerHTML=\"\\n      <div style=\\\"text-align: center; max-width: 400px; padding: 24px;\\\">\\n        <div style=\\\"font-size: 48px; margin-bottom: 16px;\\\">\\uD83E\\uDD16</div>\\n        <h2 style=\\\"margin: 0 0 16px 0; color: #1890ff;\\\">AI Recovery Mode</h2>\\n        <p style=\\\"margin: 0 0 24px 0; opacity: 0.8;\\\">\".concat(message,\"</p>\\n        <div style=\\\"display: flex; justify-content: center; gap: 12px;\\\">\\n          <div style=\\\"width: 8px; height: 8px; border-radius: 50%; background: #1890ff; animation: pulse 1.5s infinite;\\\"></div>\\n          <div style=\\\"width: 8px; height: 8px; border-radius: 50%; background: #1890ff; animation: pulse 1.5s infinite 0.2s;\\\"></div>\\n          <div style=\\\"width: 8px; height: 8px; border-radius: 50%; background: #1890ff; animation: pulse 1.5s infinite 0.4s;\\\"></div>\\n        </div>\\n      </div>\\n      <style>\\n        @keyframes pulse {\\n          0%, 100% { opacity: 0.3; }\\n          50% { opacity: 1; }\\n        }\\n      </style>\\n    \");document.body.appendChild(overlay);// Auto remove after 5 seconds\nsetTimeout(()=>{overlay.remove();},5000);}// Show emergency notice\nshowEmergencyNotice(message){const notice=document.createElement('div');notice.id='ai-emergency-notice';notice.style.cssText=\"\\n      position: fixed;\\n      top: 0;\\n      left: 0;\\n      right: 0;\\n      background: linear-gradient(135deg, #ff4d4f, #ff7875);\\n      color: white;\\n      text-align: center;\\n      padding: 12px;\\n      z-index: 9999;\\n      font-weight: 600;\\n      box-shadow: 0 2px 8px rgba(255, 77, 79, 0.3);\\n    \";notice.textContent=\"\\uD83D\\uDEA8 AI EMERGENCY: \".concat(message);document.body.prepend(notice);}// Show safe mode indicator\nshowSafeModeIndicator(duration){const indicator=document.createElement('div');indicator.id='ai-safe-mode-indicator';indicator.style.cssText=\"\\n      position: fixed;\\n      bottom: 20px;\\n      right: 20px;\\n      background: #52c41a;\\n      color: white;\\n      padding: 8px 12px;\\n      border-radius: 6px;\\n      z-index: 9998;\\n      font-size: 12px;\\n      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\\n    \";indicator.textContent=\"\\uD83D\\uDEE1\\uFE0F AI Safe Mode (\".concat(Math.round(duration/1000),\"s)\");document.body.appendChild(indicator);}// API để lấy report tổng hợp\ngenerateReport(){const stats=this.getErrorStats();const recentErrors=this.getRecentErrors(20);return{summary:{monitoring:this.isMonitoring,autoFix:this.autoFixEnabled,totalErrors:stats.total,recent24h:stats.recent24h},stats:stats,recentErrors:recentErrors,timestamp:new Date().toISOString()};}// ✨ NEW: Handle specific auto-fix for customer delete 404 errors\nasync handleCustomerDelete404(solution){console.log('👤 AI handling CUSTOMER_DELETE_404_ERROR auto-fix...');this.showUserMessage('Khách hàng đã bị xóa hoặc không tồn tại. AI đang cập nhật danh sách và thông báo.');await this.refreshCustomerList();this.showSuccessNotification('Danh sách khách hàng đã được cập nhật.');}// ✨ NEW: Handle specific auto-fix for supplier delete 404 errors\nasync handleSupplierDelete404(solution){console.log('👤 AI handling SUPPLIER_DELETE_404_ERROR auto-fix...');this.showUserMessage('Nhà cung cấp đã bị xóa hoặc không tồn tại. AI đang cập nhật danh sách.');await this.refreshSupplierList();this.showSuccessNotification('Danh sách nhà cung cấp đã được cập nhật.');}// ✨ NEW: Handle specific auto-fix for API 500 server errors\nasync handleAPI500Recovery(solution){console.log('👤 AI handling API_500_SERVER_ERROR auto-fix...');this.showUserMessage('Server đang gặp vấn đề. AI đang thử các giải pháp khôi phục...');await this.retryWithExponentialBackoff(solution);this.showSuccessNotification('Server đã khôi phục.');}// ✨ NEW: Handle specific auto-fix for emergency React recovery\nasync handleEmergencyReactRecovery(solution){console.log('👤 AI handling EMERGENCY_REACT_RECOVERY auto-fix...');this.showUserMessage('Đang khôi phục từ lỗi React critical...');await this.emergencyPageReload(solution);this.showSuccessNotification('Lỗi React đã được khôi phục.');}// ✨ NEW: Handle specific auto-fix for network recovery\nasync handleNetworkRecovery(solution){console.log('👤 AI handling NETWORK_RECOVERY auto-fix...');this.showUserMessage('Kết nối mạng gặp vấn đề. AI đang thử khôi phục...');await this.retryWithExponentialBackoff(solution);this.showSuccessNotification('Kết nối mạng đã khôi phục.');}// Helper to refresh customer list\nasync refreshCustomerList(){window.dispatchEvent(new CustomEvent('ai-refresh-customer-list'));}// Helper to refresh supplier list\nasync refreshSupplierList(){window.dispatchEvent(new CustomEvent('ai-refresh-supplier-list'));}}// Khởi tạo global error monitor\nconst aiErrorMonitor=new AIErrorMonitor();// Export để sử dụng trong các component khác\nexport default aiErrorMonitor;// Expose vào window để debug\nif(process.env.NODE_ENV==='development'){window.aiErrorMonitor=aiErrorMonitor;}","map":{"version":3,"names":["api","AIErrorMonitor","constructor","errors","apiErrors","consoleErrors","isMonitoring","aiEndpoint","autoFixEnabled","init","console","log","interceptConsoleErrors","interceptAPIErrors","interceptRuntimeErrors","interceptPromiseErrors","interceptNetworkErrors","_this","originalError","error","originalWarn","warn","_len","arguments","length","args","Array","_key","captureConsoleError","apply","_len2","_key2","window","axios","interceptors","response","use","captureAPIError","Promise","reject","addEventListener","event","captureRuntimeError","capturePromiseError","_this2","originalFetch","fetch","ok","captureNetworkError","undefined","level","id","Date","now","Math","random","type","message","join","timestamp","toISOString","url","location","href","userAgent","navigator","stack","Error","push","processError","axiosError","_axiosError$config","_axiosError$config$me","_axiosError$config2","_axiosError$config3","_axiosError$config4","_axiosError$config5","_axiosError$response","_axiosError$response2","_axiosError$response3","_axiosError$config6","_axiosError$config7","method","config","toUpperCase","baseURL","fullURL","concat","status","statusText","data","requestData","headers","_event$error","filename","lineno","colno","_event$reason","_event$reason2","reason","networkError","clientSideAnalysis","performClientSideAnalysis","canAutoFix","applyAutoFix","solution","aiResponse","sendToAI","suggestion","showErrorNotification","aiError","showBasicErrorNotification","includes","confidence","pattern","actions","force","strategy","maxRetries","duration","toLowerCase","delay","target","cache_strategy","real_time","post","context","page","pathname","recentErrors","getRecentErrors","systemInfo","viewport","innerWidth","innerHeight","online","onLine","setTimeout","reload","retryFailedAPI","localStorage","clear","sessionStorage","updateUIState","code","showUserMessage","redirectToList","useFallbackData","reloadPageSection","section","retryWithExponentialBackoff","enableOfflineMode","suggestNullChecks","analyzeHookDependencies","implementErrorBoundary","autoCreateCustomer","refreshInventoryData","suggestAlternativeProducts","refreshAuthToken","highlightInvalidFields","emergencyPageReload","fixFormBindings","resetComponentState","clearFormCache","enableSafeMode","componentRecovery","showFallbackUI","handleCustomerDelete404","handleSupplierDelete404","handleAPI500Recovery","handleEmergencyReactRecovery","handleNetworkRecovery","description","showSuccessNotification","fixError","_error$method","retryConfig","modifiedData","JSON","parse","modifiedHeaders","retryError","stateChanges","store","redux","dispatch","Object","entries","forEach","_ref","key","value","setItem","stringify","notification","title","action","displayNotification","antd","count","allErrors","sort","a","b","slice","getErrorStats","stats","total","byType","byPage","recent24h","yesterday","getTime","setAutoFix","enabled","warning","alert","startsWith","dispatchEvent","CustomEvent","detail","baseDelay","retryWithDelay","attempt","pow","document","body","offlineIndicator","createElement","style","cssText","textContent","prepend","remove","defaultCustomer","name","phone","customer_type","discount_rate","realTime","similar","silent","forms","querySelectorAll","form","invalidInputs","input","border","boxShadow","showEmergencyNotice","auto_recovery","newForm","cloneNode","parentNode","replaceChild","React","__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED","keysToRemove","i","removeItem","deep","localStorage_keys","regex","RegExp","replace","test","AI_SAFE_MODE","showSafeModeIndicator","indicator","getElementById","overlay","innerHTML","appendChild","notice","round","generateReport","summary","monitoring","autoFix","totalErrors","refreshCustomerList","refreshSupplierList","aiErrorMonitor","process","env","NODE_ENV"],"sources":["C:/Users/ADMIN/Desktop/kho/kho/client/src/services/errorMonitor.js"],"sourcesContent":["// AI-Powered Error Monitor & Auto-Fix System\r\n// Tự động bắt và phân tích lỗi, đưa ra giải pháp sửa chữa\r\n\r\nimport api from './api';\r\n\r\nclass AIErrorMonitor {\r\n  constructor() {\r\n    this.errors = [];\r\n    this.apiErrors = [];\r\n    this.consoleErrors = [];\r\n    this.isMonitoring = false;\r\n    this.aiEndpoint = '/ai/analyze-error';\r\n    this.autoFixEnabled = true;\r\n    \r\n    this.init();\r\n  }\r\n\r\n  init() {\r\n    console.log('🤖 AI Error Monitor khởi động...');\r\n    \r\n    // Bắt tất cả lỗi console\r\n    this.interceptConsoleErrors();\r\n    \r\n    // Bắt tất cả lỗi API\r\n    this.interceptAPIErrors();\r\n    \r\n    // Bắt lỗi React/JS runtime\r\n    this.interceptRuntimeErrors();\r\n    \r\n    // Bắt lỗi unhandled promise\r\n    this.interceptPromiseErrors();\r\n    \r\n    // Bắt lỗi network\r\n    this.interceptNetworkErrors();\r\n    \r\n    this.isMonitoring = true;\r\n    console.log('✅ AI Error Monitor đã sẵn sàng - Sẽ tự động sửa lỗi!');\r\n  }\r\n\r\n  // Bắt tất cả lỗi console (error, warn, debug)\r\n  interceptConsoleErrors() {\r\n    const originalError = console.error;\r\n    const originalWarn = console.warn;\r\n    \r\n    console.error = (...args) => {\r\n      this.captureConsoleError('error', args);\r\n      originalError.apply(console, args);\r\n    };\r\n    \r\n    console.warn = (...args) => {\r\n      this.captureConsoleError('warn', args);\r\n      originalWarn.apply(console, args);\r\n    };\r\n  }\r\n\r\n  // Bắt lỗi API từ axios interceptor\r\n  interceptAPIErrors() {\r\n    // Đã có sẵn trong api.js, ta sẽ hook vào đó\r\n    if (window.axios) {\r\n      window.axios.interceptors.response.use(\r\n        (response) => response,\r\n        (error) => {\r\n          this.captureAPIError(error);\r\n          return Promise.reject(error);\r\n        }\r\n      );\r\n    }\r\n  }\r\n\r\n  // Bắt lỗi runtime JavaScript\r\n  interceptRuntimeErrors() {\r\n    window.addEventListener('error', (event) => {\r\n      this.captureRuntimeError(event);\r\n    });\r\n  }\r\n\r\n  // Bắt lỗi promise không được handle\r\n  interceptPromiseErrors() {\r\n    window.addEventListener('unhandledrejection', (event) => {\r\n      this.capturePromiseError(event);\r\n    });\r\n  }\r\n\r\n  // Bắt lỗi network\r\n  interceptNetworkErrors() {\r\n    const originalFetch = window.fetch;\r\n    window.fetch = async (...args) => {\r\n      try {\r\n        const response = await originalFetch(...args);\r\n        if (!response.ok) {\r\n          this.captureNetworkError(args[0], response);\r\n        }\r\n        return response;\r\n      } catch (error) {\r\n        this.captureNetworkError(args[0], null, error);\r\n        throw error;\r\n      }\r\n    };\r\n  }\r\n\r\n  // Ghi lại lỗi console\r\n  captureConsoleError(level, args) {\r\n    const error = {\r\n      id: Date.now() + Math.random(),\r\n      type: 'console',\r\n      level: level,\r\n      message: args.join(' '),\r\n      timestamp: new Date().toISOString(),\r\n      url: window.location.href,\r\n      userAgent: navigator.userAgent,\r\n      stack: new Error().stack\r\n    };\r\n    \r\n    this.consoleErrors.push(error);\r\n    this.processError(error);\r\n  }\r\n\r\n  // Ghi lại lỗi API\r\n  captureAPIError(axiosError) {\r\n    const error = {\r\n      id: Date.now() + Math.random(),\r\n      type: 'api',\r\n      method: axiosError.config?.method?.toUpperCase(),\r\n      url: axiosError.config?.url,\r\n      baseURL: axiosError.config?.baseURL,\r\n      fullURL: `${axiosError.config?.baseURL}${axiosError.config?.url}`,\r\n      status: axiosError.response?.status,\r\n      statusText: axiosError.response?.statusText,\r\n      data: axiosError.response?.data,\r\n      message: axiosError.message,\r\n      timestamp: new Date().toISOString(),\r\n      requestData: axiosError.config?.data,\r\n      headers: axiosError.config?.headers\r\n    };\r\n    \r\n    this.apiErrors.push(error);\r\n    console.log('🔴 API Error Captured:', error);\r\n    this.processError(error);\r\n  }\r\n\r\n  // Ghi lại lỗi runtime\r\n  captureRuntimeError(event) {\r\n    const error = {\r\n      id: Date.now() + Math.random(),\r\n      type: 'runtime',\r\n      message: event.message,\r\n      filename: event.filename,\r\n      lineno: event.lineno,\r\n      colno: event.colno,\r\n      stack: event.error?.stack,\r\n      timestamp: new Date().toISOString(),\r\n      url: window.location.href\r\n    };\r\n    \r\n    this.errors.push(error);\r\n    this.processError(error);\r\n  }\r\n\r\n  // Ghi lại lỗi promise\r\n  capturePromiseError(event) {\r\n    const error = {\r\n      id: Date.now() + Math.random(),\r\n      type: 'promise',\r\n      message: event.reason?.message || event.reason,\r\n      stack: event.reason?.stack,\r\n      timestamp: new Date().toISOString(),\r\n      url: window.location.href\r\n    };\r\n    \r\n    this.errors.push(error);\r\n    this.processError(error);\r\n  }\r\n\r\n  // Ghi lại lỗi network\r\n  captureNetworkError(url, response, error) {\r\n    const networkError = {\r\n      id: Date.now() + Math.random(),\r\n      type: 'network',\r\n      url: url,\r\n      status: response?.status,\r\n      statusText: response?.statusText,\r\n      message: error?.message || `Network error: ${response?.status}`,\r\n      timestamp: new Date().toISOString()\r\n    };\r\n    \r\n    this.errors.push(networkError);\r\n    this.processError(networkError);\r\n  }\r\n\r\n  // Xử lý lỗi thông qua AI\r\n  async processError(error) {\r\n    console.log(`🤖 AI đang phân tích lỗi: ${error.type}`, error);\r\n    \r\n    // ✨ ENHANCED: Client-side pattern matching trước khi gửi về AI backend\r\n    const clientSideAnalysis = this.performClientSideAnalysis(error);\r\n    \r\n    if (clientSideAnalysis.canAutoFix) {\r\n      console.log('🔧 AI Client-side pattern match found, auto-fixing immediately...');\r\n      await this.applyAutoFix(error, clientSideAnalysis.solution);\r\n      return;\r\n    }\r\n    \r\n    try {\r\n      // Gửi lỗi đến AI để phân tích\r\n      const aiResponse = await this.sendToAI(error);\r\n      \r\n      if (aiResponse.canAutoFix && this.autoFixEnabled) {\r\n        console.log('🔧 AI đã tìm ra cách sửa, đang auto-fix...');\r\n        await this.applyAutoFix(error, aiResponse.solution);\r\n      } else {\r\n        console.log('📋 AI gợi ý cách sửa:', aiResponse.suggestion);\r\n        this.showErrorNotification(error, aiResponse);\r\n      }\r\n    } catch (aiError) {\r\n      console.log('❌ AI không thể phân tích lỗi:', aiError.message);\r\n      this.showBasicErrorNotification(error);\r\n    }\r\n  }\r\n\r\n  // ✨ NEW: Client-side pattern matching cho các lỗi phổ biến\r\n  performClientSideAnalysis(error) {\r\n    // 🎯 CUSTOMER DELETE 404 ERROR - Immediate Recognition\r\n    if (error.type === 'api' && \r\n        error.method === 'DELETE' && \r\n        error.url && error.url.includes('/customers/') && \r\n        error.status === 404) {\r\n      \r\n      console.log('🎯 AI Client-side match: CUSTOMER_DELETE_404_ERROR');\r\n      \r\n      return {\r\n        canAutoFix: true,\r\n        confidence: 0.98,\r\n        pattern: 'CUSTOMER_DELETE_404_ERROR',\r\n        suggestion: 'Khách hàng đã bị xóa hoặc không tồn tại. AI sẽ cập nhật danh sách và thông báo.',\r\n        solution: {\r\n          type: 'customer_delete_404_fix',\r\n          message: 'Khách hàng không tồn tại hoặc đã bị xóa.',\r\n          actions: [\r\n            { type: 'show_user_message', message: 'Khách hàng không tồn tại hoặc đã bị xóa.' },\r\n            { type: 'refresh_customer_list', force: true },\r\n            { type: 'show_success_notification', message: 'Danh sách khách hàng đã được cập nhật' }\r\n          ]\r\n        }\r\n      };\r\n    }\r\n    \r\n    // 🎯 SUPPLIER DELETE 404 ERROR - Immediate Recognition\r\n    if (error.type === 'api' && \r\n        error.method === 'DELETE' && \r\n        error.url && error.url.includes('/suppliers/') && \r\n        error.status === 404) {\r\n      \r\n      console.log('🎯 AI Client-side match: SUPPLIER_DELETE_404_ERROR');\r\n      \r\n      return {\r\n        canAutoFix: true,\r\n        confidence: 0.98,\r\n        pattern: 'SUPPLIER_DELETE_404_ERROR',\r\n        suggestion: 'Nhà cung cấp đã bị xóa hoặc không tồn tại. AI sẽ cập nhật danh sách.',\r\n        solution: {\r\n          type: 'supplier_delete_404_fix',\r\n          message: 'Nhà cung cấp không tồn tại hoặc đã bị xóa.',\r\n          actions: [\r\n            { type: 'show_user_message', message: 'Nhà cung cấp không tồn tại hoặc đã bị xóa.' },\r\n            { type: 'refresh_supplier_list', force: true },\r\n            { type: 'show_success_notification', message: 'Danh sách nhà cung cấp đã được cập nhật' }\r\n          ]\r\n        }\r\n      };\r\n    }\r\n    \r\n    // 🎯 API 500 SERVER ERROR - Critical Pattern\r\n    if (error.type === 'api' && \r\n        error.status >= 500 && \r\n        error.status < 600) {\r\n      \r\n      console.log('🎯 AI Client-side match: API_500_SERVER_ERROR');\r\n      \r\n      return {\r\n        canAutoFix: true,\r\n        confidence: 0.95,\r\n        pattern: 'API_500_SERVER_ERROR',\r\n        suggestion: 'Server đang gặp vấn đề nghiêm trọng. AI sẽ thử retry và backup solutions.',\r\n        solution: {\r\n          type: 'api_500_recovery',\r\n          message: 'Server đang gặp vấn đề. AI đang thử các giải pháp khôi phục...',\r\n          actions: [\r\n            { type: 'retry_with_backoff', strategy: 'exponential', maxRetries: 3 },\r\n            { type: 'show_user_message', message: 'Server đang gặp vấn đề. AI đang thử khôi phục...' },\r\n            { type: 'enable_offline_mode', duration: 30000 }\r\n          ]\r\n        }\r\n      };\r\n    }\r\n    \r\n    // 🎯 REACT ILLEGAL INVOCATION - Emergency Pattern\r\n    if (error.type === 'console' && \r\n        error.message && \r\n        error.message.toLowerCase().includes('illegal invocation')) {\r\n      \r\n      console.log('🎯 AI Client-side match: REACT_ILLEGAL_INVOCATION_ERROR');\r\n      \r\n      return {\r\n        canAutoFix: true,\r\n        confidence: 0.95,\r\n        pattern: 'REACT_ILLEGAL_INVOCATION_ERROR',\r\n        suggestion: 'CRITICAL React DOM error detected. AI implementing emergency recovery.',\r\n        solution: {\r\n          type: 'emergency_react_recovery',\r\n          message: 'Đang khôi phục từ lỗi React critical...',\r\n          actions: [\r\n            { type: 'emergency_page_reload', delay: 2000, message: 'Fixing critical React error...' },\r\n            { type: 'fix_form_bindings', target: 'all_forms' },\r\n            { type: 'enable_safe_mode', duration: 30000 }\r\n          ]\r\n        }\r\n      };\r\n    }\r\n    \r\n    // 🎯 NETWORK CONNECTION ERROR\r\n    if (error.type === 'network' || \r\n        (error.type === 'api' && error.message && error.message.toLowerCase().includes('network'))) {\r\n      \r\n      console.log('🎯 AI Client-side match: NETWORK_CONNECTION_ERROR');\r\n      \r\n      return {\r\n        canAutoFix: true,\r\n        confidence: 0.8,\r\n        pattern: 'NETWORK_CONNECTION_ERROR',\r\n        suggestion: 'Lỗi kết nối mạng. AI implementing retry strategy và offline mode.',\r\n        solution: {\r\n          type: 'network_recovery',\r\n          message: 'Kết nối mạng gặp vấn đề. AI đang thử khôi phục...',\r\n          actions: [\r\n            { type: 'retry_with_backoff', strategy: 'exponential', maxRetries: 5 },\r\n            { type: 'enable_offline_mode', cache_strategy: 'last_known_good' },\r\n            { type: 'show_connection_status', real_time: true }\r\n          ]\r\n        }\r\n      };\r\n    }\r\n    \r\n    // No client-side pattern match found\r\n    return {\r\n      canAutoFix: false,\r\n      confidence: 0,\r\n      pattern: 'UNKNOWN',\r\n      suggestion: 'Chưa nhận diện được pattern. Gửi về AI backend để phân tích.',\r\n      solution: null\r\n    };\r\n  }\r\n\r\n  // Gửi lỗi đến AI backend để phân tích\r\n  async sendToAI(error) {\r\n    try {\r\n      const response = await api.post(this.aiEndpoint, {\r\n        error: error,\r\n        context: {\r\n          page: window.location.pathname,\r\n          timestamp: new Date().toISOString(),\r\n          userAgent: navigator.userAgent,\r\n          recentErrors: this.getRecentErrors(5),\r\n          systemInfo: {\r\n            url: window.location.href,\r\n            viewport: `${window.innerWidth}x${window.innerHeight}`,\r\n            online: navigator.onLine\r\n          }\r\n        }\r\n      });\r\n      \r\n      return response.data;\r\n    } catch (error) {\r\n      throw new Error('AI service unavailable');\r\n    }\r\n  }\r\n\r\n  // Áp dụng auto-fix do AI đề xuất\r\n  async applyAutoFix(error, solution) {\r\n    try {\r\n      console.log('🔄 Đang áp dụng auto-fix...', solution);\r\n      \r\n      switch (solution.type) {\r\n        case 'reload_page':\r\n          setTimeout(() => window.location.reload(), 2000);\r\n          break;\r\n          \r\n        case 'retry_api':\r\n          await this.retryFailedAPI(error, solution);\r\n          break;\r\n          \r\n        case 'clear_cache':\r\n          localStorage.clear();\r\n          sessionStorage.clear();\r\n          break;\r\n          \r\n        case 'update_ui_state':\r\n          await this.updateUIState(solution.data);\r\n          break;\r\n          \r\n        case 'fix_code':\r\n          console.log('💡 Code fix suggestion:', solution.code);\r\n          break;\r\n\r\n        case 'show_user_message':\r\n          this.showUserMessage(solution.message);\r\n          break;\r\n\r\n        case 'redirect_to_list':\r\n          this.redirectToList(solution.page);\r\n          break;\r\n\r\n        case 'use_fallback_data':\r\n          this.useFallbackData(solution.data);\r\n          break;\r\n\r\n        case 'reload_page_section':\r\n          this.reloadPageSection(solution.section);\r\n          break;\r\n          \r\n        // ADVANCED SOLUTIONS - DEEP ANALYSIS\r\n        case 'retry_with_backoff':\r\n          this.retryWithExponentialBackoff(solution);\r\n          break;\r\n          \r\n        case 'enable_offline_mode':\r\n          this.enableOfflineMode(solution);\r\n          break;\r\n          \r\n        case 'add_null_checks':\r\n          this.suggestNullChecks(solution);\r\n          break;\r\n          \r\n        case 'analyze_hook_dependencies':\r\n          this.analyzeHookDependencies(solution);\r\n          break;\r\n          \r\n        case 'implement_error_boundary':\r\n          this.implementErrorBoundary(solution);\r\n          break;\r\n          \r\n        case 'auto_create_customer':\r\n          this.autoCreateCustomer(solution);\r\n          break;\r\n          \r\n        case 'refresh_inventory_data':\r\n          this.refreshInventoryData(solution);\r\n          break;\r\n          \r\n        case 'suggest_alternative_products':\r\n          this.suggestAlternativeProducts(solution);\r\n          break;\r\n          \r\n        case 'refresh_auth_token':\r\n          this.refreshAuthToken(solution);\r\n          break;\r\n          \r\n        case 'highlight_invalid_fields':\r\n          this.highlightInvalidFields(solution);\r\n          break;\r\n          \r\n        // EMERGENCY SOLUTIONS - CRITICAL ERROR HANDLING\r\n        case 'emergency_page_reload':\r\n          this.emergencyPageReload(solution);\r\n          break;\r\n          \r\n        case 'fix_form_bindings':\r\n          this.fixFormBindings(solution);\r\n          break;\r\n          \r\n        case 'reset_component_state':\r\n          this.resetComponentState(solution);\r\n          break;\r\n          \r\n        case 'clear_form_cache':\r\n          this.clearFormCache(solution);\r\n          break;\r\n          \r\n        case 'enable_safe_mode':\r\n          this.enableSafeMode(solution);\r\n          break;\r\n          \r\n        case 'component_recovery':\r\n          this.componentRecovery(solution);\r\n          break;\r\n          \r\n        case 'show_fallback_ui':\r\n          this.showFallbackUI(solution);\r\n          break;\r\n          \r\n        // ✨ NEW CLIENT-SIDE SPECIFIC SOLUTIONS\r\n        case 'customer_delete_404_fix':\r\n          await this.handleCustomerDelete404(solution);\r\n          break;\r\n          \r\n        case 'supplier_delete_404_fix':\r\n          await this.handleSupplierDelete404(solution);\r\n          break;\r\n          \r\n        case 'api_500_recovery':\r\n          await this.handleAPI500Recovery(solution);\r\n          break;\r\n          \r\n        case 'emergency_react_recovery':\r\n          await this.handleEmergencyReactRecovery(solution);\r\n          break;\r\n          \r\n        case 'network_recovery':\r\n          await this.handleNetworkRecovery(solution);\r\n          break;\r\n          \r\n        default:\r\n          console.log('🤖 AI solution:', solution.description);\r\n      }\r\n      \r\n      console.log('✅ Auto-fix hoàn thành!');\r\n      this.showSuccessNotification(`AI đã tự động sửa lỗi: ${error.message}`);\r\n      \r\n    } catch (fixError) {\r\n      console.log('❌ Auto-fix thất bại:', fixError.message);\r\n    }\r\n  }\r\n\r\n  // Retry API call theo gợi ý của AI\r\n  async retryFailedAPI(error, solution) {\r\n    if (error.type !== 'api') return;\r\n    \r\n    try {\r\n      const retryConfig = {\r\n        method: error.method?.toLowerCase() || 'get',\r\n        url: error.url,\r\n        data: solution.modifiedData || JSON.parse(error.requestData || '{}'),\r\n        headers: solution.modifiedHeaders || error.headers\r\n      };\r\n      \r\n      console.log('🔄 Retry API với config mới:', retryConfig);\r\n      const response = await api(retryConfig);\r\n      console.log('✅ API retry thành công:', response.data);\r\n      \r\n      return response;\r\n    } catch (retryError) {\r\n      console.log('❌ API retry thất bại:', retryError.message);\r\n      throw retryError;\r\n    }\r\n  }\r\n\r\n  // Cập nhật UI state theo gợi ý AI\r\n  async updateUIState(stateChanges) {\r\n    try {\r\n      // Dispatch Redux actions hoặc update React state\r\n      if (window.store && stateChanges.redux) {\r\n        window.store.dispatch(stateChanges.redux);\r\n      }\r\n      \r\n      // Update localStorage\r\n      if (stateChanges.localStorage) {\r\n        Object.entries(stateChanges.localStorage).forEach(([key, value]) => {\r\n          localStorage.setItem(key, JSON.stringify(value));\r\n        });\r\n      }\r\n      \r\n      console.log('✅ UI state updated theo AI suggestion');\r\n    } catch (error) {\r\n      console.log('❌ Không thể update UI state:', error.message);\r\n    }\r\n  }\r\n\r\n  // Hiển thị thông báo lỗi với AI suggestion\r\n  showErrorNotification(error, aiResponse) {\r\n    const notification = {\r\n      type: 'error',\r\n      title: `🤖 AI Phát hiện lỗi: ${error.type}`,\r\n      message: error.message,\r\n      suggestion: aiResponse.suggestion,\r\n      action: aiResponse.action,\r\n      duration: 10000\r\n    };\r\n    \r\n    this.displayNotification(notification);\r\n  }\r\n\r\n  // Hiển thị thông báo thành công\r\n  showSuccessNotification(message) {\r\n    const notification = {\r\n      type: 'success',\r\n      title: '🤖 AI Auto-Fix',\r\n      message: message,\r\n      duration: 5000\r\n    };\r\n    \r\n    this.displayNotification(notification);\r\n  }\r\n\r\n  // Hiển thị thông báo cơ bản\r\n  showBasicErrorNotification(error) {\r\n    console.log(`🔴 Lỗi ${error.type}: ${error.message}`);\r\n  }\r\n\r\n  // Hiển thị notification trên UI\r\n  displayNotification(notification) {\r\n    // Tích hợp với Ant Design notification hoặc custom notification\r\n    if (window.antd && window.antd.notification) {\r\n      window.antd.notification[notification.type]({\r\n        message: notification.title,\r\n        description: notification.message + (notification.suggestion ? `\\n💡 ${notification.suggestion}` : ''),\r\n        duration: notification.duration / 1000\r\n      });\r\n    } else {\r\n      console.log('📢 Notification:', notification);\r\n    }\r\n  }\r\n\r\n  // Lấy lỗi gần đây\r\n  getRecentErrors(count = 10) {\r\n    const allErrors = [...this.errors, ...this.apiErrors, ...this.consoleErrors];\r\n    return allErrors\r\n      .sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp))\r\n      .slice(0, count);\r\n  }\r\n\r\n  // Lấy thống kê lỗi\r\n  getErrorStats() {\r\n    const allErrors = this.getRecentErrors(100);\r\n    const stats = {\r\n      total: allErrors.length,\r\n      byType: {},\r\n      byPage: {},\r\n      recent24h: 0\r\n    };\r\n    \r\n    const now = new Date();\r\n    const yesterday = new Date(now.getTime() - 24 * 60 * 60 * 1000);\r\n    \r\n    allErrors.forEach(error => {\r\n      // Count by type\r\n      stats.byType[error.type] = (stats.byType[error.type] || 0) + 1;\r\n      \r\n      // Count by page\r\n      const page = error.url || 'unknown';\r\n      stats.byPage[page] = (stats.byPage[page] || 0) + 1;\r\n      \r\n      // Count recent 24h\r\n      if (new Date(error.timestamp) > yesterday) {\r\n        stats.recent24h++;\r\n      }\r\n    });\r\n    \r\n    return stats;\r\n  }\r\n\r\n  // API để disable/enable auto-fix\r\n  setAutoFix(enabled) {\r\n    this.autoFixEnabled = enabled;\r\n    console.log(`🤖 AI Auto-Fix: ${enabled ? 'Enabled' : 'Disabled'}`);\r\n  }\r\n\r\n  // Hiển thị thông báo cho user\r\n  showUserMessage(message) {\r\n    try {\r\n      console.log(`📢 AI Message: ${message}`);\r\n      \r\n      // Sử dụng Ant Design notification nếu có\r\n      if (window.antd && window.antd.message) {\r\n        window.antd.message.warning(message);\r\n      } else {\r\n        // Fallback to browser notification\r\n        alert(`🤖 AI: ${message}`);\r\n      }\r\n      \r\n      return true;\r\n    } catch (error) {\r\n      console.error('❌ Không thể hiển thị thông báo:', error);\r\n      return false;\r\n    }\r\n  }\r\n\r\n  // Chuyển hướng về trang danh sách\r\n  redirectToList(page) {\r\n    try {\r\n      console.log(`🔄 AI Redirect to: ${page}`);\r\n      \r\n      if (page && page.startsWith('/')) {\r\n        // Chuyển hướng bằng window.location\r\n        setTimeout(() => {\r\n          window.location.href = page;\r\n        }, 2000);\r\n      } else {\r\n        // Chuyển về trang chính nếu không có page cụ thể\r\n        setTimeout(() => {\r\n          window.location.href = '/';\r\n        }, 2000);\r\n      }\r\n      \r\n      return true;\r\n    } catch (error) {\r\n      console.error('❌ Không thể chuyển hướng:', error);\r\n      return false;\r\n    }\r\n  }\r\n\r\n  // Sử dụng dữ liệu fallback\r\n  useFallbackData(data) {\r\n    try {\r\n      console.log('🔄 AI sử dụng fallback data:', data);\r\n      \r\n      // Lưu vào sessionStorage để component khác có thể sử dụng\r\n      if (data && typeof data === 'object') {\r\n        sessionStorage.setItem('ai_fallback_data', JSON.stringify(data));\r\n        \r\n        // Trigger custom event để components biết có fallback data\r\n        window.dispatchEvent(new CustomEvent('ai-fallback-data', {\r\n          detail: data\r\n        }));\r\n      }\r\n      \r\n      return true;\r\n    } catch (error) {\r\n      console.error('❌ Không thể sử dụng fallback data:', error);\r\n      return false;\r\n    }\r\n  }\r\n\r\n  // Reload một phần cụ thể của trang\r\n  reloadPageSection(section) {\r\n    try {\r\n      console.log(`🔄 AI reload section: ${section}`);\r\n      \r\n      // Dispatch event để component tự reload\r\n      window.dispatchEvent(new CustomEvent('ai-reload-section', {\r\n        detail: { section }\r\n      }));\r\n      \r\n      return true;\r\n    } catch (error) {\r\n      console.error('❌ Không thể reload section:', error);\r\n      return false;\r\n    }\r\n  }\r\n\r\n  // ============================================\r\n  // ADVANCED SOLUTION IMPLEMENTATIONS - DEEP AI\r\n  // ============================================\r\n  \r\n  // Retry với exponential backoff strategy\r\n  retryWithExponentialBackoff(solution) {\r\n    const { strategy = 'exponential', maxRetries = 5, baseDelay = 1000 } = solution;\r\n    \r\n    console.log(`🔄 AI implementing ${strategy} backoff retry strategy`);\r\n    \r\n    const retryWithDelay = (attempt) => {\r\n      if (attempt >= maxRetries) {\r\n        console.log(`❌ Max retries (${maxRetries}) reached`);\r\n        return;\r\n      }\r\n      \r\n      const delay = strategy === 'exponential' \r\n        ? baseDelay * Math.pow(2, attempt)\r\n        : baseDelay;\r\n      \r\n      console.log(`⏱️ Retry attempt ${attempt + 1}/${maxRetries} after ${delay}ms`);\r\n      \r\n      setTimeout(() => {\r\n        // Implement actual retry logic here\r\n        window.location.reload();\r\n      }, delay);\r\n    };\r\n    \r\n    retryWithDelay(0);\r\n  }\r\n  \r\n  // Enable offline mode với cache strategy\r\n  enableOfflineMode(solution) {\r\n    const { cache_strategy = 'last_known_good', duration = 30000 } = solution;\r\n    \r\n    console.log(`📴 AI enabling offline mode with ${cache_strategy} strategy`);\r\n    \r\n    // Set offline indicator\r\n    if (document.body) {\r\n      const offlineIndicator = document.createElement('div');\r\n      offlineIndicator.id = 'ai-offline-indicator';\r\n      offlineIndicator.style.cssText = `\r\n        position: fixed;\r\n        top: 0;\r\n        left: 0;\r\n        right: 0;\r\n        background: #ff7875;\r\n        color: white;\r\n        text-align: center;\r\n        padding: 8px;\r\n        z-index: 9999;\r\n        font-size: 14px;\r\n      `;\r\n      offlineIndicator.textContent = '🤖 AI: Offline mode - Đang sử dụng dữ liệu cache';\r\n      \r\n      document.body.prepend(offlineIndicator);\r\n      \r\n      // Auto remove after duration\r\n      setTimeout(() => {\r\n        offlineIndicator?.remove();\r\n      }, duration);\r\n    }\r\n  }\r\n  \r\n  // Suggest null checks cho React components\r\n  suggestNullChecks(solution) {\r\n    console.log('🛡️ AI suggesting null checks implementation:');\r\n    console.log(`\r\n      💡 AI Code Suggestion:\r\n      \r\n      // Add null checks before accessing properties\r\n      const MyComponent = ({ data }) => {\r\n        if (!data || !data.items) {\r\n          return <div>Loading...</div>;\r\n        }\r\n        \r\n        return (\r\n          <div>\r\n            {data.items?.map(item => (\r\n              <div key={item?.id || 'unknown'}>\r\n                {item?.name || 'Unknown'}\r\n              </div>\r\n            ))}\r\n          </div>\r\n        );\r\n      };\r\n    `);\r\n  }\r\n  \r\n  // Analyze React Hook dependencies\r\n  analyzeHookDependencies(solution) {\r\n    console.log('🔍 AI analyzing React Hook dependencies:');\r\n    console.log(`\r\n      💡 AI Hook Analysis:\r\n      \r\n      ⚠️ Common Issues:\r\n      1. Missing dependencies in useEffect\r\n      2. Stale closures in event handlers\r\n      3. Infinite re-renders from object dependencies\r\n      \r\n      🔧 AI Suggestions:\r\n      - Add missing dependencies to dependency array\r\n      - Use useCallback for function dependencies\r\n      - Use useMemo for object dependencies\r\n      - Consider splitting complex effects\r\n      \r\n      Example fix:\r\n      useEffect(() => {\r\n        // effect code\r\n      }, [dependency1, dependency2]); // ← Add all dependencies\r\n    `);\r\n  }\r\n  \r\n  // Implement Error Boundary suggestion\r\n  implementErrorBoundary(solution) {\r\n    console.log('🚧 AI suggesting Error Boundary implementation:');\r\n    console.log(`\r\n      💡 AI Error Boundary Pattern:\r\n      \r\n      import ErrorBoundary from './components/ErrorBoundary';\r\n      \r\n      <ErrorBoundary fallback={<div>Something went wrong</div>}>\r\n        <YourComponent />\r\n      </ErrorBoundary>\r\n      \r\n      ✅ This will catch component errors and prevent crashes\r\n    `);\r\n  }\r\n  \r\n  // Auto create customer solution\r\n  autoCreateCustomer(solution) {\r\n    console.log('👤 AI auto-creating customer with defaults...');\r\n    \r\n    const defaultCustomer = {\r\n      name: 'Khách hàng',\r\n      phone: '',\r\n      customer_type: 'regular',\r\n      discount_rate: 0\r\n    };\r\n    \r\n    // Trigger customer creation form with defaults\r\n    this.showUserMessage('AI đã chuẩn bị thông tin khách hàng mặc định. Vui lòng kiểm tra và xác nhận.');\r\n    \r\n    return defaultCustomer;\r\n  }\r\n  \r\n  // Refresh inventory data\r\n  refreshInventoryData(solution) {\r\n    console.log('📦 AI refreshing inventory data...');\r\n    \r\n    // Emit custom event to refresh inventory\r\n    window.dispatchEvent(new CustomEvent('ai-refresh-inventory', {\r\n      detail: { realTime: solution.real_time }\r\n    }));\r\n    \r\n    this.showUserMessage('AI đang cập nhật dữ liệu tồn kho real-time...');\r\n  }\r\n  \r\n  // Suggest alternative products\r\n  suggestAlternativeProducts(solution) {\r\n    console.log('🔄 AI suggesting alternative products...');\r\n    \r\n    this.showUserMessage('Sản phẩm không đủ stock. AI đang tìm sản phẩm tương tự...');\r\n    \r\n    // Emit event for product suggestions\r\n    window.dispatchEvent(new CustomEvent('ai-suggest-alternatives', {\r\n      detail: { similar: solution.similar }\r\n    }));\r\n  }\r\n  \r\n  // Refresh authentication token\r\n  refreshAuthToken(solution) {\r\n    console.log('🔐 AI attempting to refresh auth token...');\r\n    \r\n    if (solution.silent) {\r\n      // Silent refresh\r\n      console.log('🤫 Silent token refresh...');\r\n    } else {\r\n      this.showUserMessage('Phiên đăng nhập hết hạn. AI đang làm mới token...');\r\n    }\r\n    \r\n    // Trigger auth refresh\r\n    window.dispatchEvent(new CustomEvent('ai-refresh-auth'));\r\n  }\r\n  \r\n  // Highlight invalid form fields\r\n  highlightInvalidFields(solution) {\r\n    console.log('🎯 AI highlighting invalid form fields...');\r\n    \r\n    // Find form elements and highlight invalid ones\r\n    const forms = document.querySelectorAll('form');\r\n    forms.forEach(form => {\r\n      const invalidInputs = form.querySelectorAll(':invalid');\r\n      invalidInputs.forEach(input => {\r\n        input.style.border = '2px solid #ff4d4f';\r\n        input.style.boxShadow = '0 0 5px rgba(255, 77, 79, 0.3)';\r\n      });\r\n    });\r\n    \r\n    this.showUserMessage('AI đã highlight các field cần sửa. Vui lòng kiểm tra lại.');\r\n  }\r\n  \r\n  // ============================================\r\n  // EMERGENCY SOLUTIONS - CRITICAL ERROR RECOVERY\r\n  // ============================================\r\n  \r\n  // Emergency page reload cho critical errors\r\n  emergencyPageReload(solution) {\r\n    const { delay = 3000, message = 'Đang khôi phục từ lỗi critical...' } = solution;\r\n    \r\n    console.log('🚨 AI EMERGENCY: Implementing emergency page reload...');\r\n    \r\n    // Show emergency notice\r\n    this.showEmergencyNotice(message);\r\n    \r\n    // Set emergency flag trong localStorage\r\n    localStorage.setItem('ai_emergency_recovery', JSON.stringify({\r\n      timestamp: Date.now(),\r\n      reason: 'illegal_invocation_error',\r\n      auto_recovery: true\r\n    }));\r\n    \r\n    // Reload after delay\r\n    setTimeout(() => {\r\n      console.log('🔄 AI Emergency: Reloading page to recover from critical error...');\r\n      window.location.reload();\r\n    }, delay);\r\n  }\r\n  \r\n  // Fix form bindings issues\r\n  fixFormBindings(solution) {\r\n    console.log('🔧 AI fixing form bindings...');\r\n    \r\n    try {\r\n      // Remove all form event listeners\r\n      const forms = document.querySelectorAll('form');\r\n      forms.forEach(form => {\r\n        // Clone form to remove all event listeners\r\n        const newForm = form.cloneNode(true);\r\n        form.parentNode.replaceChild(newForm, form);\r\n      });\r\n      \r\n      // Clear React form state cache\r\n      if (window.React && window.React.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED) {\r\n        // Reset React internal state (emergency measure)\r\n        console.log('🔧 Resetting React internal form state...');\r\n      }\r\n      \r\n      this.showUserMessage('AI đã fix form bindings. Vui lòng thử lại.');\r\n      \r\n    } catch (error) {\r\n      console.error('❌ Failed to fix form bindings:', error);\r\n      this.emergencyPageReload({ delay: 2000, message: 'Form binding fix failed, reloading...' });\r\n    }\r\n  }\r\n  \r\n  // Reset component state deeply\r\n  resetComponentState(solution) {\r\n    console.log('🔄 AI resetting component state...');\r\n    \r\n    try {\r\n      // Clear all localStorage related to forms and components\r\n      const keysToRemove = [];\r\n      for (let i = 0; i < localStorage.length; i++) {\r\n        const key = localStorage.key(i);\r\n        if (key && (key.includes('form') || key.includes('component') || key.includes('state'))) {\r\n          keysToRemove.push(key);\r\n        }\r\n      }\r\n      \r\n      keysToRemove.forEach(key => {\r\n        localStorage.removeItem(key);\r\n        console.log(`🗑️ Removed localStorage: ${key}`);\r\n      });\r\n      \r\n      // Clear sessionStorage as well\r\n      sessionStorage.clear();\r\n      \r\n      // Emit custom event to force React components to reset\r\n      window.dispatchEvent(new CustomEvent('ai-component-reset', {\r\n        detail: { deep: solution.deep, reason: 'illegal_invocation_recovery' }\r\n      }));\r\n      \r\n      this.showUserMessage('AI đã reset component state. Hệ thống đang khôi phục...');\r\n      \r\n    } catch (error) {\r\n      console.error('❌ Failed to reset component state:', error);\r\n    }\r\n  }\r\n  \r\n  // Clear form cache\r\n  clearFormCache(solution) {\r\n    console.log('🧹 AI clearing form cache...');\r\n    \r\n    const { localStorage_keys = ['form_*'] } = solution;\r\n    \r\n    try {\r\n      // Clear localStorage keys matching patterns\r\n      localStorage_keys.forEach(pattern => {\r\n        const regex = new RegExp(pattern.replace('*', '.*'));\r\n        const keysToRemove = [];\r\n        \r\n        for (let i = 0; i < localStorage.length; i++) {\r\n          const key = localStorage.key(i);\r\n          if (key && regex.test(key)) {\r\n            keysToRemove.push(key);\r\n          }\r\n        }\r\n        \r\n        keysToRemove.forEach(key => {\r\n          localStorage.removeItem(key);\r\n          console.log(`🗑️ Cleared form cache: ${key}`);\r\n        });\r\n      });\r\n      \r\n      this.showUserMessage('AI đã clear form cache thành công.');\r\n      \r\n    } catch (error) {\r\n      console.error('❌ Failed to clear form cache:', error);\r\n    }\r\n  }\r\n  \r\n  // Enable safe mode\r\n  enableSafeMode(solution) {\r\n    const { duration = 30000 } = solution;\r\n    \r\n    console.log(`🛡️ AI enabling safe mode for ${duration}ms...`);\r\n    \r\n    // Set safe mode flag\r\n    window.AI_SAFE_MODE = true;\r\n    localStorage.setItem('ai_safe_mode', JSON.stringify({\r\n      enabled: true,\r\n      timestamp: Date.now(),\r\n      duration: duration\r\n    }));\r\n    \r\n    // Show safe mode indicator\r\n    this.showSafeModeIndicator(duration);\r\n    \r\n    // Disable safe mode after duration\r\n    setTimeout(() => {\r\n      window.AI_SAFE_MODE = false;\r\n      localStorage.removeItem('ai_safe_mode');\r\n      console.log('🛡️ AI safe mode disabled');\r\n      \r\n      // Remove safe mode indicator\r\n      const indicator = document.getElementById('ai-safe-mode-indicator');\r\n      if (indicator) {\r\n        indicator.remove();\r\n      }\r\n    }, duration);\r\n  }\r\n  \r\n  // Component recovery\r\n  componentRecovery(solution) {\r\n    console.log('🔧 AI implementing component recovery...');\r\n    \r\n    const { strategy = 'graceful_fallback' } = solution;\r\n    \r\n    try {\r\n      switch (strategy) {\r\n        case 'graceful_fallback':\r\n          // Force React error boundaries to show fallback UI\r\n          window.dispatchEvent(new CustomEvent('ai-force-fallback', {\r\n            detail: { reason: 'component_recovery' }\r\n          }));\r\n          break;\r\n          \r\n        case 'component_remount':\r\n          // Force component remount\r\n          window.dispatchEvent(new CustomEvent('ai-remount-components'));\r\n          break;\r\n          \r\n        default:\r\n          this.showUserMessage('AI đang khôi phục component...');\r\n      }\r\n      \r\n    } catch (error) {\r\n      console.error('❌ Component recovery failed:', error);\r\n      this.emergencyPageReload({ delay: 1000 });\r\n    }\r\n  }\r\n  \r\n  // Show fallback UI\r\n  showFallbackUI(solution) {\r\n    const { message = 'Đang khôi phục component...' } = solution;\r\n    \r\n    console.log('🎭 AI showing fallback UI...');\r\n    \r\n    // Create fallback overlay\r\n    const overlay = document.createElement('div');\r\n    overlay.id = 'ai-fallback-overlay';\r\n    overlay.style.cssText = `\r\n      position: fixed;\r\n      top: 0;\r\n      left: 0;\r\n      right: 0;\r\n      bottom: 0;\r\n      background: rgba(0, 0, 0, 0.8);\r\n      color: white;\r\n      display: flex;\r\n      flex-direction: column;\r\n      justify-content: center;\r\n      align-items: center;\r\n      z-index: 10000;\r\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\r\n    `;\r\n    \r\n    overlay.innerHTML = `\r\n      <div style=\"text-align: center; max-width: 400px; padding: 24px;\">\r\n        <div style=\"font-size: 48px; margin-bottom: 16px;\">🤖</div>\r\n        <h2 style=\"margin: 0 0 16px 0; color: #1890ff;\">AI Recovery Mode</h2>\r\n        <p style=\"margin: 0 0 24px 0; opacity: 0.8;\">${message}</p>\r\n        <div style=\"display: flex; justify-content: center; gap: 12px;\">\r\n          <div style=\"width: 8px; height: 8px; border-radius: 50%; background: #1890ff; animation: pulse 1.5s infinite;\"></div>\r\n          <div style=\"width: 8px; height: 8px; border-radius: 50%; background: #1890ff; animation: pulse 1.5s infinite 0.2s;\"></div>\r\n          <div style=\"width: 8px; height: 8px; border-radius: 50%; background: #1890ff; animation: pulse 1.5s infinite 0.4s;\"></div>\r\n        </div>\r\n      </div>\r\n      <style>\r\n        @keyframes pulse {\r\n          0%, 100% { opacity: 0.3; }\r\n          50% { opacity: 1; }\r\n        }\r\n      </style>\r\n    `;\r\n    \r\n    document.body.appendChild(overlay);\r\n    \r\n    // Auto remove after 5 seconds\r\n    setTimeout(() => {\r\n      overlay.remove();\r\n    }, 5000);\r\n  }\r\n  \r\n  // Show emergency notice\r\n  showEmergencyNotice(message) {\r\n    const notice = document.createElement('div');\r\n    notice.id = 'ai-emergency-notice';\r\n    notice.style.cssText = `\r\n      position: fixed;\r\n      top: 0;\r\n      left: 0;\r\n      right: 0;\r\n      background: linear-gradient(135deg, #ff4d4f, #ff7875);\r\n      color: white;\r\n      text-align: center;\r\n      padding: 12px;\r\n      z-index: 9999;\r\n      font-weight: 600;\r\n      box-shadow: 0 2px 8px rgba(255, 77, 79, 0.3);\r\n    `;\r\n    notice.textContent = `🚨 AI EMERGENCY: ${message}`;\r\n    \r\n    document.body.prepend(notice);\r\n  }\r\n  \r\n  // Show safe mode indicator\r\n  showSafeModeIndicator(duration) {\r\n    const indicator = document.createElement('div');\r\n    indicator.id = 'ai-safe-mode-indicator';\r\n    indicator.style.cssText = `\r\n      position: fixed;\r\n      bottom: 20px;\r\n      right: 20px;\r\n      background: #52c41a;\r\n      color: white;\r\n      padding: 8px 12px;\r\n      border-radius: 6px;\r\n      z-index: 9998;\r\n      font-size: 12px;\r\n      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\r\n    `;\r\n    indicator.textContent = `🛡️ AI Safe Mode (${Math.round(duration/1000)}s)`;\r\n    \r\n    document.body.appendChild(indicator);\r\n  }\r\n\r\n  // API để lấy report tổng hợp\r\n  generateReport() {\r\n    const stats = this.getErrorStats();\r\n    const recentErrors = this.getRecentErrors(20);\r\n    \r\n    return {\r\n      summary: {\r\n        monitoring: this.isMonitoring,\r\n        autoFix: this.autoFixEnabled,\r\n        totalErrors: stats.total,\r\n        recent24h: stats.recent24h\r\n      },\r\n      stats: stats,\r\n      recentErrors: recentErrors,\r\n      timestamp: new Date().toISOString()\r\n    };\r\n  }\r\n\r\n  // ✨ NEW: Handle specific auto-fix for customer delete 404 errors\r\n  async handleCustomerDelete404(solution) {\r\n    console.log('👤 AI handling CUSTOMER_DELETE_404_ERROR auto-fix...');\r\n    this.showUserMessage('Khách hàng đã bị xóa hoặc không tồn tại. AI đang cập nhật danh sách và thông báo.');\r\n    await this.refreshCustomerList();\r\n    this.showSuccessNotification('Danh sách khách hàng đã được cập nhật.');\r\n  }\r\n\r\n  // ✨ NEW: Handle specific auto-fix for supplier delete 404 errors\r\n  async handleSupplierDelete404(solution) {\r\n    console.log('👤 AI handling SUPPLIER_DELETE_404_ERROR auto-fix...');\r\n    this.showUserMessage('Nhà cung cấp đã bị xóa hoặc không tồn tại. AI đang cập nhật danh sách.');\r\n    await this.refreshSupplierList();\r\n    this.showSuccessNotification('Danh sách nhà cung cấp đã được cập nhật.');\r\n  }\r\n\r\n  // ✨ NEW: Handle specific auto-fix for API 500 server errors\r\n  async handleAPI500Recovery(solution) {\r\n    console.log('👤 AI handling API_500_SERVER_ERROR auto-fix...');\r\n    this.showUserMessage('Server đang gặp vấn đề. AI đang thử các giải pháp khôi phục...');\r\n    await this.retryWithExponentialBackoff(solution);\r\n    this.showSuccessNotification('Server đã khôi phục.');\r\n  }\r\n\r\n  // ✨ NEW: Handle specific auto-fix for emergency React recovery\r\n  async handleEmergencyReactRecovery(solution) {\r\n    console.log('👤 AI handling EMERGENCY_REACT_RECOVERY auto-fix...');\r\n    this.showUserMessage('Đang khôi phục từ lỗi React critical...');\r\n    await this.emergencyPageReload(solution);\r\n    this.showSuccessNotification('Lỗi React đã được khôi phục.');\r\n  }\r\n\r\n  // ✨ NEW: Handle specific auto-fix for network recovery\r\n  async handleNetworkRecovery(solution) {\r\n    console.log('👤 AI handling NETWORK_RECOVERY auto-fix...');\r\n    this.showUserMessage('Kết nối mạng gặp vấn đề. AI đang thử khôi phục...');\r\n    await this.retryWithExponentialBackoff(solution);\r\n    this.showSuccessNotification('Kết nối mạng đã khôi phục.');\r\n  }\r\n\r\n  // Helper to refresh customer list\r\n  async refreshCustomerList() {\r\n    window.dispatchEvent(new CustomEvent('ai-refresh-customer-list'));\r\n  }\r\n\r\n  // Helper to refresh supplier list\r\n  async refreshSupplierList() {\r\n    window.dispatchEvent(new CustomEvent('ai-refresh-supplier-list'));\r\n  }\r\n}\r\n\r\n// Khởi tạo global error monitor\r\nconst aiErrorMonitor = new AIErrorMonitor();\r\n\r\n// Export để sử dụng trong các component khác\r\nexport default aiErrorMonitor;\r\n\r\n// Expose vào window để debug\r\nif (process.env.NODE_ENV === 'development') {\r\n  window.aiErrorMonitor = aiErrorMonitor;\r\n} "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}