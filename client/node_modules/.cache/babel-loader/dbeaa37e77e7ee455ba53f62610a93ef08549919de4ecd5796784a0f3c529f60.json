{"ast":null,"code":"import _objectSpread from\"C:/Users/ADMIN/Desktop/kho/kho/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{useForm}from'react-hook-form';import{zodResolver}from'@hookform/resolvers/zod';import{z}from'zod';import{toast}from'react-toastify';import'react-toastify/dist/ReactToastify.css';import{Card,Table,Button,Modal,Input,Select,DatePicker,Space,Tag,Row,Col,Statistic,Tabs,InputNumber,Radio}from'antd';import{PlusOutlined,FilterOutlined,DownloadOutlined,DollarOutlined,RiseOutlined,FallOutlined,BarChartOutlined,PieChartOutlined}from'@ant-design/icons';import{LineChart,Line,BarChart,Bar,PieChart,Pie,Cell,XAxis,YAxis,CartesianGrid,Tooltip,Legend,ResponsiveContainer}from'recharts';import{financialAPI,reportsAPI}from'../services/api';import dayjs from'dayjs';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const{Option}=Select;const{RangePicker}=DatePicker;const{TabPane}=Tabs;// Zod schema for financial transaction validation\nconst transactionSchema=z.object({type:z.enum(['income','expense'],{errorMap:()=>({message:'Vui lòng chọn loại giao dịch'})}),category:z.string().min(1,'Vui lòng chọn danh mục'),amount:z.number().min(1,'Số tiền phải lớn hơn 0'),description:z.string().optional(),payment_method:z.enum(['cash','card','transfer','ewallet'],{errorMap:()=>({message:'Vui lòng chọn phương thức thanh toán'})}),transaction_date:z.any().optional(),customer_id:z.number().optional(),supplier_id:z.number().optional()});const FinancialPage=()=>{var _categories;const[transactions,setTransactions]=useState([]);const[loading,setLoading]=useState(false);const[modalVisible,setModalVisible]=useState(false);const[stats,setStats]=useState({totalIncome:0,totalExpense:0,netProfit:0,todayIncome:0,monthIncome:0});const[activeTab,setActiveTab]=useState('transactions');const[chartData,setChartData]=useState([]);const{register,handleSubmit,reset,setValue,watch,formState:{errors,isSubmitting}}=useForm({resolver:zodResolver(transactionSchema),defaultValues:{type:'income',payment_method:'cash',transaction_date:dayjs()}});const categories={income:['Bán hàng','Dịch vụ','Thu khác','Lãi ngân hàng','Hoàn tiền','Thu nợ khách hàng'],expense:['Nhập hàng','Tiền thuê','Điện nước','Lương nhân viên','Marketing','Vận chuyển','Bảo trì sửa chữa','Chi phí khác','Trả nợ nhà cung cấp']};const paymentMethods=[{value:'cash',label:'Tiền mặt'},{value:'card',label:'Thẻ'},{value:'transfer',label:'Chuyển khoản'},{value:'ewallet',label:'Ví điện tử'}];const COLORS=['#0088FE','#00C49F','#FFBB28','#FF8042','#8884D8','#82CA9D'];useEffect(()=>{fetchTransactions();fetchStats();},[]);useEffect(()=>{if(transactions.length>0){generateChartData();}},[transactions]);const fetchTransactions=async()=>{setLoading(true);try{const response=await financialAPI.getTransactions();if(response.data.success){setTransactions(response.data.data);}}catch(error){toast.error('Lỗi khi tải dữ liệu thu chi');// Mock data for demo\nconst mockTransactions=[{id:1,type:'income',category:'Bán hàng',amount:1500000,description:'Doanh thu bán hàng ngày',payment_method:'cash',transaction_date:dayjs().subtract(1,'day').toISOString(),user_name:'Admin'},{id:2,type:'income',category:'Dịch vụ',amount:500000,description:'Phí dịch vụ tư vấn',payment_method:'transfer',transaction_date:dayjs().subtract(2,'day').toISOString(),user_name:'Admin'},{id:3,type:'expense',category:'Nhập hàng',amount:800000,description:'Nhập hàng từ nhà cung cấp',payment_method:'transfer',transaction_date:dayjs().subtract(3,'day').toISOString(),user_name:'Admin'}];setTransactions(mockTransactions);}finally{setLoading(false);}};const fetchStats=async()=>{try{const response=await reportsAPI.getFinancialSummary();if(response.data.success){setStats(response.data.data);}}catch(error){console.error('Error fetching stats:',error);// Mock stats\nsetStats({total_income:2500000,total_expense:1200000,net_profit:1300000,today_income:500000,today_expense:200000,today_profit:300000,month_income:15000000,month_expense:8000000,month_profit:7000000});}};const generateChartData=()=>{// Monthly data for line chart\nconst monthlyData=[];const currentMonth=dayjs();for(let i=5;i>=0;i--){const month=currentMonth.subtract(i,'month');const monthTransactions=transactions.filter(t=>{const transactionDate=dayjs(t.transaction_date);return transactionDate.month()===month.month()&&transactionDate.year()===month.year();});const income=monthTransactions.filter(t=>t.type==='income').reduce((sum,t)=>sum+t.amount,0);const expense=monthTransactions.filter(t=>t.type==='expense').reduce((sum,t)=>sum+t.amount,0);monthlyData.push({month:month.format('MM/YYYY'),income,expense,profit:income-expense});}setChartData(monthlyData);};const handleAddTransaction=async data=>{try{var _data$transaction_dat;const transactionData=_objectSpread(_objectSpread({},data),{},{transaction_date:((_data$transaction_dat=data.transaction_date)===null||_data$transaction_dat===void 0?void 0:_data$transaction_dat.toISOString())||new Date().toISOString(),user_id:1// Current user ID\n});const response=await financialAPI.create(transactionData);if(response.data.success){toast.success('Thêm giao dịch thành công');setModalVisible(false);reset();fetchTransactions();fetchStats();}}catch(error){toast.error('Lỗi khi thêm giao dịch');}};const columns=[{title:'Ngày',dataIndex:'transaction_date',key:'transaction_date',render:date=>dayjs(date).format('DD/MM/YYYY HH:mm'),sorter:(a,b)=>dayjs(a.transaction_date).unix()-dayjs(b.transaction_date).unix()},{title:'Loại',dataIndex:'type',key:'type',render:type=>/*#__PURE__*/_jsx(Tag,{color:type==='income'?'green':'red',children:type==='income'?'Thu':'Chi'}),filters:[{text:'Thu',value:'income'},{text:'Chi',value:'expense'}],onFilter:(value,record)=>record.type===value},{title:'Danh mục',dataIndex:'category',key:'category'},{title:'Số tiền',dataIndex:'amount',key:'amount',render:(amount,record)=>/*#__PURE__*/_jsxs(\"span\",{style:{color:record.type==='income'?'#52c41a':'#ff4d4f'},children:[record.type==='income'?'+':'-',amount.toLocaleString('vi-VN'),\" \\u20AB\"]}),sorter:(a,b)=>a.amount-b.amount},{title:'Mô tả',dataIndex:'description',key:'description',ellipsis:true},{title:'Phương thức TT',dataIndex:'payment_method',key:'payment_method',render:method=>{const methodMap={cash:'Tiền mặt',card:'Thẻ',transfer:'Chuyển khoản',ewallet:'Ví điện tử'};return methodMap[method]||method;}},{title:'Người tạo',dataIndex:'user_name',key:'user_name',render:name=>name||'Chưa xác định'}];const renderTransactionsTab=()=>/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Row,{gutter:16,style:{marginBottom:16},children:[/*#__PURE__*/_jsx(Col,{span:6,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(Statistic,{title:\"T\\u1ED5ng thu\",value:stats.total_income||stats.totalIncome,precision:0,valueStyle:{color:'#3f8600'},prefix:/*#__PURE__*/_jsx(RiseOutlined,{}),suffix:\"\\u20AB\"})})}),/*#__PURE__*/_jsx(Col,{span:6,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(Statistic,{title:\"T\\u1ED5ng chi\",value:stats.total_expense||stats.totalExpense,precision:0,valueStyle:{color:'#cf1322'},prefix:/*#__PURE__*/_jsx(FallOutlined,{}),suffix:\"\\u20AB\"})})}),/*#__PURE__*/_jsx(Col,{span:6,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(Statistic,{title:\"L\\u1EE3i nhu\\u1EADn\",value:stats.net_profit||stats.netProfit,precision:0,valueStyle:{color:'#1890ff'},prefix:/*#__PURE__*/_jsx(DollarOutlined,{}),suffix:\"\\u20AB\"})})}),/*#__PURE__*/_jsx(Col,{span:6,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(Statistic,{title:\"Thu h\\xF4m nay\",value:stats.today_income||stats.todayIncome,precision:0,valueStyle:{color:'#52c41a'},prefix:/*#__PURE__*/_jsx(RiseOutlined,{}),suffix:\"\\u20AB\"})})})]}),/*#__PURE__*/_jsx(Card,{title:\"Giao d\\u1ECBch t\\xE0i ch\\xEDnh\",extra:/*#__PURE__*/_jsxs(Space,{children:[/*#__PURE__*/_jsx(Button,{icon:/*#__PURE__*/_jsx(FilterOutlined,{}),children:\"L\\u1ECDc\"}),/*#__PURE__*/_jsx(Button,{icon:/*#__PURE__*/_jsx(DownloadOutlined,{}),children:\"Xu\\u1EA5t b\\xE1o c\\xE1o\"}),/*#__PURE__*/_jsx(Button,{type:\"primary\",icon:/*#__PURE__*/_jsx(PlusOutlined,{}),onClick:()=>setModalVisible(true),children:\"Th\\xEAm giao d\\u1ECBch\"})]}),children:/*#__PURE__*/_jsx(Table,{columns:columns,dataSource:transactions,loading:loading,rowKey:\"id\",pagination:{showSizeChanger:true,showQuickJumper:true,showTotal:(total,range)=>\"\".concat(range[0],\"-\").concat(range[1],\" c\\u1EE7a \").concat(total,\" giao d\\u1ECBch\")}})})]});const renderChartsTab=()=>/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Row,{gutter:16,style:{marginBottom:24},children:[/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(Card,{title:\"Bi\\u1EC3u \\u0111\\u1ED3 doanh thu theo th\\xE1ng\",icon:/*#__PURE__*/_jsx(BarChartOutlined,{}),children:/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:300,children:/*#__PURE__*/_jsxs(BarChart,{data:chartData,children:[/*#__PURE__*/_jsx(CartesianGrid,{strokeDasharray:\"3 3\"}),/*#__PURE__*/_jsx(XAxis,{dataKey:\"month\"}),/*#__PURE__*/_jsx(YAxis,{}),/*#__PURE__*/_jsx(Tooltip,{formatter:value=>\"\".concat(value.toLocaleString('vi-VN'),\" \\u20AB\")}),/*#__PURE__*/_jsx(Legend,{}),/*#__PURE__*/_jsx(Bar,{dataKey:\"income\",fill:\"#52c41a\",name:\"Thu\"}),/*#__PURE__*/_jsx(Bar,{dataKey:\"expense\",fill:\"#ff4d4f\",name:\"Chi\"})]})})})}),/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(Card,{title:\"Bi\\u1EC3u \\u0111\\u1ED3 l\\u1EE3i nhu\\u1EADn theo th\\xE1ng\",icon:/*#__PURE__*/_jsx(LineChart,{}),children:/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:300,children:/*#__PURE__*/_jsxs(LineChart,{data:chartData,children:[/*#__PURE__*/_jsx(CartesianGrid,{strokeDasharray:\"3 3\"}),/*#__PURE__*/_jsx(XAxis,{dataKey:\"month\"}),/*#__PURE__*/_jsx(YAxis,{}),/*#__PURE__*/_jsx(Tooltip,{formatter:value=>\"\".concat(value.toLocaleString('vi-VN'),\" \\u20AB\")}),/*#__PURE__*/_jsx(Legend,{}),/*#__PURE__*/_jsx(Line,{type:\"monotone\",dataKey:\"profit\",stroke:\"#1890ff\",strokeWidth:2,name:\"L\\u1EE3i nhu\\u1EADn\"})]})})})})]}),/*#__PURE__*/_jsx(Row,{gutter:16,children:/*#__PURE__*/_jsx(Col,{span:24,children:/*#__PURE__*/_jsx(Card,{title:\"Ph\\xE2n t\\xEDch chi ti\\u1EBFt\",icon:/*#__PURE__*/_jsx(PieChartOutlined,{}),children:/*#__PURE__*/_jsxs(Row,{gutter:16,children:[/*#__PURE__*/_jsxs(Col,{span:12,children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Ph\\xE2n b\\u1ED5 thu nh\\u1EADp theo danh m\\u1EE5c\"}),/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:300,children:/*#__PURE__*/_jsxs(PieChart,{children:[/*#__PURE__*/_jsx(Pie,{data:Object.entries(categories.income).map(_ref=>{let[key,value]=_ref;return{name:value,value:Math.random()*1000000// Mock data\n};}),cx:\"50%\",cy:\"50%\",labelLine:false,label:_ref2=>{let{name,percent}=_ref2;return\"\".concat(name,\" \").concat((percent*100).toFixed(0),\"%\");},outerRadius:80,fill:\"#8884d8\",dataKey:\"value\",children:Object.entries(categories.income).map((entry,index)=>/*#__PURE__*/_jsx(Cell,{fill:COLORS[index%COLORS.length]},\"cell-\".concat(index)))}),/*#__PURE__*/_jsx(Tooltip,{formatter:value=>\"\".concat(value.toLocaleString('vi-VN'),\" \\u20AB\")})]})})]}),/*#__PURE__*/_jsxs(Col,{span:12,children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Ph\\xE2n b\\u1ED5 chi ph\\xED theo danh m\\u1EE5c\"}),/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:300,children:/*#__PURE__*/_jsxs(PieChart,{children:[/*#__PURE__*/_jsx(Pie,{data:Object.entries(categories.expense).map(_ref3=>{let[key,value]=_ref3;return{name:value,value:Math.random()*500000// Mock data\n};}),cx:\"50%\",cy:\"50%\",labelLine:false,label:_ref4=>{let{name,percent}=_ref4;return\"\".concat(name,\" \").concat((percent*100).toFixed(0),\"%\");},outerRadius:80,fill:\"#8884d8\",dataKey:\"value\",children:Object.entries(categories.expense).map((entry,index)=>/*#__PURE__*/_jsx(Cell,{fill:COLORS[index%COLORS.length]},\"cell-\".concat(index)))}),/*#__PURE__*/_jsx(Tooltip,{formatter:value=>\"\".concat(value.toLocaleString('vi-VN'),\" \\u20AB\")})]})})]})]})})})})]});return/*#__PURE__*/_jsxs(\"div\",{style:{padding:24},children:[/*#__PURE__*/_jsxs(Tabs,{activeKey:activeTab,onChange:setActiveTab,children:[/*#__PURE__*/_jsx(TabPane,{tab:\"Giao d\\u1ECBch\",children:renderTransactionsTab()},\"transactions\"),/*#__PURE__*/_jsx(TabPane,{tab:\"Bi\\u1EC3u \\u0111\\u1ED3\",children:renderChartsTab()},\"charts\")]}),/*#__PURE__*/_jsx(Modal,{title:\"Th\\xEAm giao d\\u1ECBch t\\xE0i ch\\xEDnh\",open:modalVisible,onCancel:()=>setModalVisible(false),footer:null,width:600,children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(handleAddTransaction),children:[/*#__PURE__*/_jsxs(Row,{gutter:16,children:[/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:16},children:[/*#__PURE__*/_jsxs(\"label\",{style:{display:'block',marginBottom:4},children:[\"Lo\\u1EA1i giao d\\u1ECBch \",/*#__PURE__*/_jsx(\"span\",{style:{color:'red'},children:\"*\"})]}),/*#__PURE__*/_jsxs(Radio.Group,_objectSpread(_objectSpread({},register('type')),{},{onChange:e=>setValue('type',e.target.value),value:watch('type'),children:[/*#__PURE__*/_jsx(Radio,{value:\"income\",children:\"Thu\"}),/*#__PURE__*/_jsx(Radio,{value:\"expense\",children:\"Chi\"})]})),errors.type&&/*#__PURE__*/_jsx(\"div\",{style:{color:'red',fontSize:12},children:errors.type.message})]})}),/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:16},children:[/*#__PURE__*/_jsxs(\"label\",{style:{display:'block',marginBottom:4},children:[\"Danh m\\u1EE5c \",/*#__PURE__*/_jsx(\"span\",{style:{color:'red'},children:\"*\"})]}),/*#__PURE__*/_jsx(Select,{placeholder:\"Ch\\u1ECDn danh m\\u1EE5c\",style:{width:'100%'},onChange:value=>setValue('category',value),value:watch('category'),children:(_categories=categories[watch('type')||'income'])===null||_categories===void 0?void 0:_categories.map(category=>/*#__PURE__*/_jsx(Option,{value:category,children:category},category))}),errors.category&&/*#__PURE__*/_jsx(\"div\",{style:{color:'red',fontSize:12},children:errors.category.message})]})})]}),/*#__PURE__*/_jsxs(Row,{gutter:16,children:[/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:16},children:[/*#__PURE__*/_jsxs(\"label\",{style:{display:'block',marginBottom:4},children:[\"S\\u1ED1 ti\\u1EC1n \",/*#__PURE__*/_jsx(\"span\",{style:{color:'red'},children:\"*\"})]}),/*#__PURE__*/_jsx(InputNumber,_objectSpread(_objectSpread({},register('amount',{valueAsNumber:true})),{},{placeholder:\"Nh\\u1EADp s\\u1ED1 ti\\u1EC1n\",style:{width:'100%'},formatter:value=>\"\".concat(value).replace(/\\B(?=(\\d{3})+(?!\\d))/g,','),parser:value=>value.replace(/\\$\\s?|(,*)/g,''),min:0})),errors.amount&&/*#__PURE__*/_jsx(\"div\",{style:{color:'red',fontSize:12},children:errors.amount.message})]})}),/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:16},children:[/*#__PURE__*/_jsxs(\"label\",{style:{display:'block',marginBottom:4},children:[\"Ph\\u01B0\\u01A1ng th\\u1EE9c thanh to\\xE1n \",/*#__PURE__*/_jsx(\"span\",{style:{color:'red'},children:\"*\"})]}),/*#__PURE__*/_jsx(Select,{placeholder:\"Ch\\u1ECDn ph\\u01B0\\u01A1ng th\\u1EE9c\",style:{width:'100%'},onChange:value=>setValue('payment_method',value),value:watch('payment_method'),children:paymentMethods.map(method=>/*#__PURE__*/_jsx(Option,{value:method.value,children:method.label},method.value))}),errors.payment_method&&/*#__PURE__*/_jsx(\"div\",{style:{color:'red',fontSize:12},children:errors.payment_method.message})]})})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:16},children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:4},children:\"M\\xF4 t\\u1EA3\"}),/*#__PURE__*/_jsx(Input.TextArea,_objectSpread(_objectSpread({},register('description')),{},{placeholder:\"Nh\\u1EADp m\\xF4 t\\u1EA3 giao d\\u1ECBch\",rows:3}))]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:16},children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:4},children:\"Ng\\xE0y giao d\\u1ECBch\"}),/*#__PURE__*/_jsx(DatePicker,_objectSpread(_objectSpread({},register('transaction_date')),{},{style:{width:'100%'},onChange:date=>setValue('transaction_date',date),value:watch('transaction_date')}))]}),/*#__PURE__*/_jsx(\"div\",{style:{textAlign:'right',marginTop:24},children:/*#__PURE__*/_jsxs(Space,{children:[/*#__PURE__*/_jsx(Button,{onClick:()=>setModalVisible(false),children:\"H\\u1EE7y\"}),/*#__PURE__*/_jsx(Button,{type:\"primary\",htmlType:\"submit\",loading:isSubmitting,icon:/*#__PURE__*/_jsx(PlusOutlined,{}),children:\"Th\\xEAm giao d\\u1ECBch\"})]})})]})})]});};export default FinancialPage;","map":{"version":3,"names":["React","useState","useEffect","useForm","zodResolver","z","toast","Card","Table","Button","Modal","Input","Select","DatePicker","Space","Tag","Row","Col","Statistic","Tabs","InputNumber","Radio","PlusOutlined","FilterOutlined","DownloadOutlined","DollarOutlined","RiseOutlined","FallOutlined","BarChartOutlined","PieChartOutlined","LineChart","Line","BarChart","Bar","PieChart","Pie","Cell","XAxis","YAxis","CartesianGrid","Tooltip","Legend","ResponsiveContainer","financialAPI","reportsAPI","dayjs","jsx","_jsx","jsxs","_jsxs","Option","RangePicker","TabPane","transactionSchema","object","type","enum","errorMap","message","category","string","min","amount","number","description","optional","payment_method","transaction_date","any","customer_id","supplier_id","FinancialPage","_categories","transactions","setTransactions","loading","setLoading","modalVisible","setModalVisible","stats","setStats","totalIncome","totalExpense","netProfit","todayIncome","monthIncome","activeTab","setActiveTab","chartData","setChartData","register","handleSubmit","reset","setValue","watch","formState","errors","isSubmitting","resolver","defaultValues","categories","income","expense","paymentMethods","value","label","COLORS","fetchTransactions","fetchStats","length","generateChartData","response","getTransactions","data","success","error","mockTransactions","id","subtract","toISOString","user_name","getFinancialSummary","console","total_income","total_expense","net_profit","today_income","today_expense","today_profit","month_income","month_expense","month_profit","monthlyData","currentMonth","i","month","monthTransactions","filter","t","transactionDate","year","reduce","sum","push","format","profit","handleAddTransaction","_data$transaction_dat","transactionData","_objectSpread","Date","user_id","create","columns","title","dataIndex","key","render","date","sorter","a","b","unix","color","children","filters","text","onFilter","record","style","toLocaleString","ellipsis","method","methodMap","cash","card","transfer","ewallet","name","renderTransactionsTab","gutter","marginBottom","span","precision","valueStyle","prefix","suffix","extra","icon","onClick","dataSource","rowKey","pagination","showSizeChanger","showQuickJumper","showTotal","total","range","concat","renderChartsTab","width","height","strokeDasharray","dataKey","formatter","fill","stroke","strokeWidth","Object","entries","map","_ref","Math","random","cx","cy","labelLine","_ref2","percent","toFixed","outerRadius","entry","index","_ref3","_ref4","padding","activeKey","onChange","tab","open","onCancel","footer","onSubmit","display","Group","e","target","fontSize","placeholder","valueAsNumber","replace","parser","TextArea","rows","textAlign","marginTop","htmlType"],"sources":["C:/Users/ADMIN/Desktop/kho/kho/client/src/pages/FinancialPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useForm } from 'react-hook-form';\r\nimport { zodResolver } from '@hookform/resolvers/zod';\r\nimport { z } from 'zod';\r\nimport { toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport {\r\n  Card,\r\n  Table,\r\n  Button,\r\n  Modal,\r\n  Input,\r\n  Select,\r\n  DatePicker,\r\n  Space,\r\n  Tag,\r\n  Row,\r\n  Col,\r\n  Statistic,\r\n  Tabs,\r\n  InputNumber,\r\n  Radio,\r\n} from 'antd';\r\nimport {\r\n  PlusOutlined,\r\n  FilterOutlined,\r\n  DownloadOutlined,\r\n  DollarOutlined,\r\n  RiseOutlined,\r\n  FallOutlined,\r\n  BarChartOutlined,\r\n  PieChartOutlined,\r\n} from '@ant-design/icons';\r\nimport {\r\n  LineChart,\r\n  Line,\r\n  BarChart,\r\n  Bar,\r\n  PieChart,\r\n  Pie,\r\n  Cell,\r\n  XAxis,\r\n  YAxis,\r\n  CartesianGrid,\r\n  Tooltip,\r\n  Legend,\r\n  ResponsiveContainer,\r\n} from 'recharts';\r\nimport { financialAPI, reportsAPI } from '../services/api';\r\nimport dayjs from 'dayjs';\r\n\r\nconst { Option } = Select;\r\nconst { RangePicker } = DatePicker;\r\nconst { TabPane } = Tabs;\r\n\r\n// Zod schema for financial transaction validation\r\nconst transactionSchema = z.object({\r\n  type: z.enum(['income', 'expense'], {\r\n    errorMap: () => ({ message: 'Vui lòng chọn loại giao dịch' })\r\n  }),\r\n  category: z.string().min(1, 'Vui lòng chọn danh mục'),\r\n  amount: z.number().min(1, 'Số tiền phải lớn hơn 0'),\r\n  description: z.string().optional(),\r\n  payment_method: z.enum(['cash', 'card', 'transfer', 'ewallet'], {\r\n    errorMap: () => ({ message: 'Vui lòng chọn phương thức thanh toán' })\r\n  }),\r\n  transaction_date: z.any().optional(),\r\n  customer_id: z.number().optional(),\r\n  supplier_id: z.number().optional(),\r\n});\r\n\r\nconst FinancialPage = () => {\r\n  const [transactions, setTransactions] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [modalVisible, setModalVisible] = useState(false);\r\n  const [stats, setStats] = useState({\r\n    totalIncome: 0,\r\n    totalExpense: 0,\r\n    netProfit: 0,\r\n    todayIncome: 0,\r\n    monthIncome: 0,\r\n  });\r\n  const [activeTab, setActiveTab] = useState('transactions');\r\n  const [chartData, setChartData] = useState([]);\r\n\r\n  const {\r\n    register,\r\n    handleSubmit,\r\n    reset,\r\n    setValue,\r\n    watch,\r\n    formState: { errors, isSubmitting },\r\n  } = useForm({\r\n    resolver: zodResolver(transactionSchema),\r\n    defaultValues: {\r\n      type: 'income',\r\n      payment_method: 'cash',\r\n      transaction_date: dayjs(),\r\n    },\r\n  });\r\n\r\n  const categories = {\r\n    income: [\r\n      'Bán hàng',\r\n      'Dịch vụ',\r\n      'Thu khác',\r\n      'Lãi ngân hàng',\r\n      'Hoàn tiền',\r\n      'Thu nợ khách hàng',\r\n    ],\r\n    expense: [\r\n      'Nhập hàng',\r\n      'Tiền thuê',\r\n      'Điện nước',\r\n      'Lương nhân viên',\r\n      'Marketing',\r\n      'Vận chuyển',\r\n      'Bảo trì sửa chữa',\r\n      'Chi phí khác',\r\n      'Trả nợ nhà cung cấp',\r\n    ],\r\n  };\r\n\r\n  const paymentMethods = [\r\n    { value: 'cash', label: 'Tiền mặt' },\r\n    { value: 'card', label: 'Thẻ' },\r\n    { value: 'transfer', label: 'Chuyển khoản' },\r\n    { value: 'ewallet', label: 'Ví điện tử' },\r\n  ];\r\n\r\n  const COLORS = ['#0088FE', '#00C49F', '#FFBB28', '#FF8042', '#8884D8', '#82CA9D'];\r\n\r\n  useEffect(() => {\r\n    fetchTransactions();\r\n    fetchStats();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (transactions.length > 0) {\r\n      generateChartData();\r\n    }\r\n  }, [transactions]);\r\n\r\n  const fetchTransactions = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await financialAPI.getTransactions();\r\n      if (response.data.success) {\r\n        setTransactions(response.data.data);\r\n      }\r\n    } catch (error) {\r\n      toast.error('Lỗi khi tải dữ liệu thu chi');\r\n      // Mock data for demo\r\n      const mockTransactions = [\r\n        {\r\n          id: 1,\r\n          type: 'income',\r\n          category: 'Bán hàng',\r\n          amount: 1500000,\r\n          description: 'Doanh thu bán hàng ngày',\r\n          payment_method: 'cash',\r\n          transaction_date: dayjs().subtract(1, 'day').toISOString(),\r\n          user_name: 'Admin',\r\n        },\r\n        {\r\n          id: 2,\r\n          type: 'income',\r\n          category: 'Dịch vụ',\r\n          amount: 500000,\r\n          description: 'Phí dịch vụ tư vấn',\r\n          payment_method: 'transfer',\r\n          transaction_date: dayjs().subtract(2, 'day').toISOString(),\r\n          user_name: 'Admin',\r\n        },\r\n        {\r\n          id: 3,\r\n          type: 'expense',\r\n          category: 'Nhập hàng',\r\n          amount: 800000,\r\n          description: 'Nhập hàng từ nhà cung cấp',\r\n          payment_method: 'transfer',\r\n          transaction_date: dayjs().subtract(3, 'day').toISOString(),\r\n          user_name: 'Admin',\r\n        },\r\n      ];\r\n      setTransactions(mockTransactions);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const fetchStats = async () => {\r\n    try {\r\n      const response = await reportsAPI.getFinancialSummary();\r\n      if (response.data.success) {\r\n        setStats(response.data.data);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching stats:', error);\r\n      // Mock stats\r\n      setStats({\r\n        total_income: 2500000,\r\n        total_expense: 1200000,\r\n        net_profit: 1300000,\r\n        today_income: 500000,\r\n        today_expense: 200000,\r\n        today_profit: 300000,\r\n        month_income: 15000000,\r\n        month_expense: 8000000,\r\n        month_profit: 7000000,\r\n      });\r\n    }\r\n  };\r\n\r\n  const generateChartData = () => {\r\n    // Monthly data for line chart\r\n    const monthlyData = [];\r\n    const currentMonth = dayjs();\r\n    \r\n    for (let i = 5; i >= 0; i--) {\r\n      const month = currentMonth.subtract(i, 'month');\r\n      const monthTransactions = transactions.filter(t => {\r\n        const transactionDate = dayjs(t.transaction_date);\r\n        return transactionDate.month() === month.month() && \r\n               transactionDate.year() === month.year();\r\n      });\r\n      \r\n      const income = monthTransactions\r\n        .filter(t => t.type === 'income')\r\n        .reduce((sum, t) => sum + t.amount, 0);\r\n      \r\n      const expense = monthTransactions\r\n        .filter(t => t.type === 'expense')\r\n        .reduce((sum, t) => sum + t.amount, 0);\r\n      \r\n      monthlyData.push({\r\n        month: month.format('MM/YYYY'),\r\n        income,\r\n        expense,\r\n        profit: income - expense,\r\n      });\r\n    }\r\n    \r\n    setChartData(monthlyData);\r\n  };\r\n\r\n  const handleAddTransaction = async (data) => {\r\n    try {\r\n      const transactionData = {\r\n        ...data,\r\n        transaction_date: data.transaction_date?.toISOString() || new Date().toISOString(),\r\n        user_id: 1, // Current user ID\r\n      };\r\n\r\n      const response = await financialAPI.create(transactionData);\r\n      if (response.data.success) {\r\n        toast.success('Thêm giao dịch thành công');\r\n        setModalVisible(false);\r\n        reset();\r\n        fetchTransactions();\r\n        fetchStats();\r\n      }\r\n    } catch (error) {\r\n      toast.error('Lỗi khi thêm giao dịch');\r\n    }\r\n  };\r\n\r\n  const columns = [\r\n    {\r\n      title: 'Ngày',\r\n      dataIndex: 'transaction_date',\r\n      key: 'transaction_date',\r\n      render: (date) => dayjs(date).format('DD/MM/YYYY HH:mm'),\r\n      sorter: (a, b) => dayjs(a.transaction_date).unix() - dayjs(b.transaction_date).unix(),\r\n    },\r\n    {\r\n      title: 'Loại',\r\n      dataIndex: 'type',\r\n      key: 'type',\r\n      render: (type) => (\r\n        <Tag color={type === 'income' ? 'green' : 'red'}>\r\n          {type === 'income' ? 'Thu' : 'Chi'}\r\n        </Tag>\r\n      ),\r\n      filters: [\r\n        { text: 'Thu', value: 'income' },\r\n        { text: 'Chi', value: 'expense' },\r\n      ],\r\n      onFilter: (value, record) => record.type === value,\r\n    },\r\n    {\r\n      title: 'Danh mục',\r\n      dataIndex: 'category',\r\n      key: 'category',\r\n    },\r\n    {\r\n      title: 'Số tiền',\r\n      dataIndex: 'amount',\r\n      key: 'amount',\r\n      render: (amount, record) => (\r\n        <span style={{ color: record.type === 'income' ? '#52c41a' : '#ff4d4f' }}>\r\n          {record.type === 'income' ? '+' : '-'}{amount.toLocaleString('vi-VN')} ₫\r\n        </span>\r\n      ),\r\n      sorter: (a, b) => a.amount - b.amount,\r\n    },\r\n    {\r\n      title: 'Mô tả',\r\n      dataIndex: 'description',\r\n      key: 'description',\r\n      ellipsis: true,\r\n    },\r\n    {\r\n      title: 'Phương thức TT',\r\n      dataIndex: 'payment_method',\r\n      key: 'payment_method',\r\n      render: (method) => {\r\n        const methodMap = {\r\n          cash: 'Tiền mặt',\r\n          card: 'Thẻ',\r\n          transfer: 'Chuyển khoản',\r\n          ewallet: 'Ví điện tử',\r\n        };\r\n        return methodMap[method] || method;\r\n      },\r\n    },\r\n    {\r\n      title: 'Người tạo',\r\n      dataIndex: 'user_name',\r\n      key: 'user_name',\r\n      render: (name) => name || 'Chưa xác định',\r\n    },\r\n  ];\r\n\r\n  const renderTransactionsTab = () => (\r\n    <div>\r\n      <Row gutter={16} style={{ marginBottom: 16 }}>\r\n        <Col span={6}>\r\n          <Card>\r\n            <Statistic\r\n              title=\"Tổng thu\"\r\n              value={stats.total_income || stats.totalIncome}\r\n              precision={0}\r\n              valueStyle={{ color: '#3f8600' }}\r\n              prefix={<RiseOutlined />}\r\n              suffix=\"₫\"\r\n            />\r\n          </Card>\r\n        </Col>\r\n        <Col span={6}>\r\n          <Card>\r\n            <Statistic\r\n              title=\"Tổng chi\"\r\n              value={stats.total_expense || stats.totalExpense}\r\n              precision={0}\r\n              valueStyle={{ color: '#cf1322' }}\r\n              prefix={<FallOutlined />}\r\n              suffix=\"₫\"\r\n            />\r\n          </Card>\r\n        </Col>\r\n        <Col span={6}>\r\n          <Card>\r\n            <Statistic\r\n              title=\"Lợi nhuận\"\r\n              value={stats.net_profit || stats.netProfit}\r\n              precision={0}\r\n              valueStyle={{ color: '#1890ff' }}\r\n              prefix={<DollarOutlined />}\r\n              suffix=\"₫\"\r\n            />\r\n          </Card>\r\n        </Col>\r\n        <Col span={6}>\r\n          <Card>\r\n            <Statistic\r\n              title=\"Thu hôm nay\"\r\n              value={stats.today_income || stats.todayIncome}\r\n              precision={0}\r\n              valueStyle={{ color: '#52c41a' }}\r\n              prefix={<RiseOutlined />}\r\n              suffix=\"₫\"\r\n            />\r\n          </Card>\r\n        </Col>\r\n      </Row>\r\n\r\n      <Card\r\n        title=\"Giao dịch tài chính\"\r\n        extra={\r\n          <Space>\r\n            <Button icon={<FilterOutlined />}>\r\n              Lọc\r\n            </Button>\r\n            <Button icon={<DownloadOutlined />}>\r\n              Xuất báo cáo\r\n            </Button>\r\n            <Button\r\n              type=\"primary\"\r\n              icon={<PlusOutlined />}\r\n              onClick={() => setModalVisible(true)}\r\n            >\r\n              Thêm giao dịch\r\n            </Button>\r\n          </Space>\r\n        }\r\n      >\r\n        <Table\r\n          columns={columns}\r\n          dataSource={transactions}\r\n          loading={loading}\r\n          rowKey=\"id\"\r\n          pagination={{\r\n            showSizeChanger: true,\r\n            showQuickJumper: true,\r\n            showTotal: (total, range) =>\r\n              `${range[0]}-${range[1]} của ${total} giao dịch`,\r\n          }}\r\n        />\r\n      </Card>\r\n    </div>\r\n  );\r\n\r\n  const renderChartsTab = () => (\r\n    <div>\r\n      <Row gutter={16} style={{ marginBottom: 24 }}>\r\n        <Col span={12}>\r\n          <Card title=\"Biểu đồ doanh thu theo tháng\" icon={<BarChartOutlined />}>\r\n            <ResponsiveContainer width=\"100%\" height={300}>\r\n              <BarChart data={chartData}>\r\n                <CartesianGrid strokeDasharray=\"3 3\" />\r\n                <XAxis dataKey=\"month\" />\r\n                <YAxis />\r\n                <Tooltip formatter={(value) => `${value.toLocaleString('vi-VN')} ₫`} />\r\n                <Legend />\r\n                <Bar dataKey=\"income\" fill=\"#52c41a\" name=\"Thu\" />\r\n                <Bar dataKey=\"expense\" fill=\"#ff4d4f\" name=\"Chi\" />\r\n              </BarChart>\r\n            </ResponsiveContainer>\r\n          </Card>\r\n        </Col>\r\n        <Col span={12}>\r\n          <Card title=\"Biểu đồ lợi nhuận theo tháng\" icon={<LineChart />}>\r\n            <ResponsiveContainer width=\"100%\" height={300}>\r\n              <LineChart data={chartData}>\r\n                <CartesianGrid strokeDasharray=\"3 3\" />\r\n                <XAxis dataKey=\"month\" />\r\n                <YAxis />\r\n                <Tooltip formatter={(value) => `${value.toLocaleString('vi-VN')} ₫`} />\r\n                <Legend />\r\n                <Line\r\n                  type=\"monotone\"\r\n                  dataKey=\"profit\"\r\n                  stroke=\"#1890ff\"\r\n                  strokeWidth={2}\r\n                  name=\"Lợi nhuận\"\r\n                />\r\n              </LineChart>\r\n            </ResponsiveContainer>\r\n          </Card>\r\n        </Col>\r\n      </Row>\r\n\r\n      <Row gutter={16}>\r\n        <Col span={24}>\r\n          <Card title=\"Phân tích chi tiết\" icon={<PieChartOutlined />}>\r\n            <Row gutter={16}>\r\n              <Col span={12}>\r\n                <h4>Phân bổ thu nhập theo danh mục</h4>\r\n                <ResponsiveContainer width=\"100%\" height={300}>\r\n                  <PieChart>\r\n                    <Pie\r\n                      data={Object.entries(categories.income).map(([key, value]) => ({\r\n                        name: value,\r\n                        value: Math.random() * 1000000, // Mock data\r\n                      }))}\r\n                      cx=\"50%\"\r\n                      cy=\"50%\"\r\n                      labelLine={false}\r\n                      label={({ name, percent }) => `${name} ${(percent * 100).toFixed(0)}%`}\r\n                      outerRadius={80}\r\n                      fill=\"#8884d8\"\r\n                      dataKey=\"value\"\r\n                    >\r\n                      {Object.entries(categories.income).map((entry, index) => (\r\n                        <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />\r\n                      ))}\r\n                    </Pie>\r\n                    <Tooltip formatter={(value) => `${value.toLocaleString('vi-VN')} ₫`} />\r\n                  </PieChart>\r\n                </ResponsiveContainer>\r\n              </Col>\r\n              <Col span={12}>\r\n                <h4>Phân bổ chi phí theo danh mục</h4>\r\n                <ResponsiveContainer width=\"100%\" height={300}>\r\n                  <PieChart>\r\n                    <Pie\r\n                      data={Object.entries(categories.expense).map(([key, value]) => ({\r\n                        name: value,\r\n                        value: Math.random() * 500000, // Mock data\r\n                      }))}\r\n                      cx=\"50%\"\r\n                      cy=\"50%\"\r\n                      labelLine={false}\r\n                      label={({ name, percent }) => `${name} ${(percent * 100).toFixed(0)}%`}\r\n                      outerRadius={80}\r\n                      fill=\"#8884d8\"\r\n                      dataKey=\"value\"\r\n                    >\r\n                      {Object.entries(categories.expense).map((entry, index) => (\r\n                        <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />\r\n                      ))}\r\n                    </Pie>\r\n                    <Tooltip formatter={(value) => `${value.toLocaleString('vi-VN')} ₫`} />\r\n                  </PieChart>\r\n                </ResponsiveContainer>\r\n              </Col>\r\n            </Row>\r\n          </Card>\r\n        </Col>\r\n      </Row>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div style={{ padding: 24 }}>\r\n      <Tabs activeKey={activeTab} onChange={setActiveTab}>\r\n        <TabPane tab=\"Giao dịch\" key=\"transactions\">\r\n          {renderTransactionsTab()}\r\n        </TabPane>\r\n        <TabPane tab=\"Biểu đồ\" key=\"charts\">\r\n          {renderChartsTab()}\r\n        </TabPane>\r\n      </Tabs>\r\n\r\n      <Modal\r\n        title=\"Thêm giao dịch tài chính\"\r\n        open={modalVisible}\r\n        onCancel={() => setModalVisible(false)}\r\n        footer={null}\r\n        width={600}\r\n      >\r\n        <form onSubmit={handleSubmit(handleAddTransaction)}>\r\n          <Row gutter={16}>\r\n            <Col span={12}>\r\n              <div style={{ marginBottom: 16 }}>\r\n                <label style={{ display: 'block', marginBottom: 4 }}>\r\n                  Loại giao dịch <span style={{ color: 'red' }}>*</span>\r\n                </label>\r\n                <Radio.Group\r\n                  {...register('type')}\r\n                  onChange={(e) => setValue('type', e.target.value)}\r\n                  value={watch('type')}\r\n                >\r\n                  <Radio value=\"income\">Thu</Radio>\r\n                  <Radio value=\"expense\">Chi</Radio>\r\n                </Radio.Group>\r\n                {errors.type && (\r\n                  <div style={{ color: 'red', fontSize: 12 }}>\r\n                    {errors.type.message}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </Col>\r\n            <Col span={12}>\r\n              <div style={{ marginBottom: 16 }}>\r\n                <label style={{ display: 'block', marginBottom: 4 }}>\r\n                  Danh mục <span style={{ color: 'red' }}>*</span>\r\n                </label>\r\n                <Select\r\n                  placeholder=\"Chọn danh mục\"\r\n                  style={{ width: '100%' }}\r\n                  onChange={(value) => setValue('category', value)}\r\n                  value={watch('category')}\r\n                >\r\n                  {categories[watch('type') || 'income']?.map((category) => (\r\n                    <Option key={category} value={category}>\r\n                      {category}\r\n                    </Option>\r\n                  ))}\r\n                </Select>\r\n                {errors.category && (\r\n                  <div style={{ color: 'red', fontSize: 12 }}>\r\n                    {errors.category.message}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </Col>\r\n          </Row>\r\n\r\n          <Row gutter={16}>\r\n            <Col span={12}>\r\n              <div style={{ marginBottom: 16 }}>\r\n                <label style={{ display: 'block', marginBottom: 4 }}>\r\n                  Số tiền <span style={{ color: 'red' }}>*</span>\r\n                </label>\r\n                <InputNumber\r\n                  {...register('amount', { valueAsNumber: true })}\r\n                  placeholder=\"Nhập số tiền\"\r\n                  style={{ width: '100%' }}\r\n                  formatter={(value) => `${value}`.replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',')}\r\n                  parser={(value) => value.replace(/\\$\\s?|(,*)/g, '')}\r\n                  min={0}\r\n                />\r\n                {errors.amount && (\r\n                  <div style={{ color: 'red', fontSize: 12 }}>\r\n                    {errors.amount.message}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </Col>\r\n            <Col span={12}>\r\n              <div style={{ marginBottom: 16 }}>\r\n                <label style={{ display: 'block', marginBottom: 4 }}>\r\n                  Phương thức thanh toán <span style={{ color: 'red' }}>*</span>\r\n                </label>\r\n                <Select\r\n                  placeholder=\"Chọn phương thức\"\r\n                  style={{ width: '100%' }}\r\n                  onChange={(value) => setValue('payment_method', value)}\r\n                  value={watch('payment_method')}\r\n                >\r\n                  {paymentMethods.map((method) => (\r\n                    <Option key={method.value} value={method.value}>\r\n                      {method.label}\r\n                    </Option>\r\n                  ))}\r\n                </Select>\r\n                {errors.payment_method && (\r\n                  <div style={{ color: 'red', fontSize: 12 }}>\r\n                    {errors.payment_method.message}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </Col>\r\n          </Row>\r\n\r\n          <div style={{ marginBottom: 16 }}>\r\n            <label style={{ display: 'block', marginBottom: 4 }}>\r\n              Mô tả\r\n            </label>\r\n            <Input.TextArea\r\n              {...register('description')}\r\n              placeholder=\"Nhập mô tả giao dịch\"\r\n              rows={3}\r\n            />\r\n          </div>\r\n\r\n          <div style={{ marginBottom: 16 }}>\r\n            <label style={{ display: 'block', marginBottom: 4 }}>\r\n              Ngày giao dịch\r\n            </label>\r\n            <DatePicker\r\n              {...register('transaction_date')}\r\n              style={{ width: '100%' }}\r\n              onChange={(date) => setValue('transaction_date', date)}\r\n              value={watch('transaction_date')}\r\n            />\r\n          </div>\r\n\r\n          <div style={{ textAlign: 'right', marginTop: 24 }}>\r\n            <Space>\r\n              <Button onClick={() => setModalVisible(false)}>\r\n                Hủy\r\n              </Button>\r\n              <Button\r\n                type=\"primary\"\r\n                htmlType=\"submit\"\r\n                loading={isSubmitting}\r\n                icon={<PlusOutlined />}\r\n              >\r\n                Thêm giao dịch\r\n              </Button>\r\n            </Space>\r\n          </div>\r\n        </form>\r\n      </Modal>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FinancialPage; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}