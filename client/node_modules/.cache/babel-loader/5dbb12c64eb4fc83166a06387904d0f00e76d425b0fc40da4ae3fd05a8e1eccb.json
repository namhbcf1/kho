{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Card,Table,Button,Input,Space,Modal,Form,message,Row,Col,Statistic,Tag,Tooltip,Popconfirm,Drawer,Typography,Avatar}from'antd';import{PlusOutlined,SearchOutlined,EditOutlined,DeleteOutlined,ShopOutlined,PhoneOutlined,MailOutlined,HomeOutlined,CreditCardOutlined,EyeOutlined,BankOutlined,UserOutlined,ContactsOutlined}from'@ant-design/icons';import api,{suppliersAPI,serialsAPI,formatCurrency,formatDate}from'../services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const{Search}=Input;const{Text}=Typography;const SuppliersPage=()=>{const[suppliers,setSuppliers]=useState([]);const[loading,setLoading]=useState(false);const[isModalVisible,setIsModalVisible]=useState(false);const[isDetailDrawerVisible,setIsDetailDrawerVisible]=useState(false);const[editingSupplier,setEditingSupplier]=useState(null);const[selectedSupplier,setSelectedSupplier]=useState(null);const[searchText,setSearchText]=useState('');const[stats,setStats]=useState({total:0,totalDebt:0,totalCreditLimit:0});const[supplierProducts,setSupplierProducts]=useState([]);const[supplierProductsLoading,setSupplierProductsLoading]=useState(false);const[isProductsDrawerVisible,setIsProductsDrawerVisible]=useState(false);const[form]=Form.useForm();useEffect(()=>{fetchSuppliers();},[searchText]);const fetchSuppliers=async()=>{try{setLoading(true);const response=await suppliersAPI.getAll({search:searchText});if(response.data.success){setSuppliers(response.data.data);calculateStats(response.data.data);}}catch(error){message.error('L·ªói khi t·∫£i danh s√°ch nh√† cung c·∫•p');console.error('Error fetching suppliers:',error);}finally{setLoading(false);}};const calculateStats=supplierData=>{const stats={total:supplierData.length,totalDebt:supplierData.reduce((sum,s)=>sum+(s.total_debt||0),0),totalCreditLimit:supplierData.reduce((sum,s)=>sum+(s.credit_limit||0),0)};setStats(stats);};const showModal=function(){let supplier=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;setEditingSupplier(supplier);setIsModalVisible(true);if(supplier){form.setFieldsValue(supplier);}else{form.resetFields();}};const handleCancel=()=>{setIsModalVisible(false);setEditingSupplier(null);form.resetFields();};const handleSubmit=async values=>{try{if(editingSupplier){await suppliersAPI.update(editingSupplier.id,values);message.success('C·∫≠p nh·∫≠t nh√† cung c·∫•p th√†nh c√¥ng');}else{await suppliersAPI.create(values);message.success('T·∫°o nh√† cung c·∫•p th√†nh c√¥ng');}handleCancel();fetchSuppliers();}catch(error){message.error(\"L\\u1ED7i khi \".concat(editingSupplier?'c·∫≠p nh·∫≠t':'t·∫°o',\" nh\\xE0 cung c\\u1EA5p\"));console.error('Error saving supplier:',error);}};const handleDelete=async id=>{try{await suppliersAPI.delete(id);message.success('X√≥a nh√† cung c·∫•p th√†nh c√¥ng');fetchSuppliers();}catch(error){message.error('L·ªói khi x√≥a nh√† cung c·∫•p');console.error('Error deleting supplier:',error);}};const showSupplierDetail=async supplier=>{try{const response=await suppliersAPI.getById(supplier.id);if(response.data.success){setSelectedSupplier(response.data.data);setIsDetailDrawerVisible(true);}}catch(error){message.error('L·ªói khi t·∫£i th√¥ng tin nh√† cung c·∫•p');}};const showSupplierProducts=async supplier=>{try{setSupplierProductsLoading(true);setSelectedSupplier(supplier);setIsProductsDrawerVisible(true);console.log(\"\\uD83D\\uDD0D Loading products for supplier: \".concat(supplier.name,\" (ID: \").concat(supplier.id,\")\"));// NEW: Use dedicated endpoint for supplier products\ntry{const response=await api.get(\"/suppliers/\".concat(supplier.id,\"/products\"));if(response.data.success){console.log(\"\\u2705 Found \".concat(response.data.data.length,\" products from supplier API\"));setSupplierProducts(response.data.data);if(response.data.data.length>0){message.success(\"\\uD83C\\uDFAF T\\xECm th\\u1EA5y \".concat(response.data.data.length,\" s\\u1EA3n ph\\u1EA9m t\\u1EEB nh\\xE0 cung c\\u1EA5p \\\"\").concat(supplier.name,\"\\\"\"));}else{message.warning(\"\\u26A0\\uFE0F Nh\\xE0 cung c\\u1EA5p \\\"\".concat(supplier.name,\"\\\" ch\\u01B0a c\\xF3 s\\u1EA3n ph\\u1EA9m n\\xE0o trong h\\u1EC7 th\\u1ED1ng\"));}return;// Exit early if API call successful\n}}catch(apiError){console.warn('Supplier products API failed, falling back to search methods:',apiError);}// FALLBACK: Use search methods if API fails\nconst allProducts=[];// Method 1: Search serials by supplier name\ntry{const serialsResponse=await api.get('/serials/search',{params:{q:supplier.name,status:'all',limit:1000}});if(serialsResponse.data.success){console.log(\"\\uD83D\\uDCE6 Found \".concat(serialsResponse.data.data.length,\" serials from search\"));allProducts.push(...serialsResponse.data.data);}}catch(error){console.warn('Method 1 failed:',error);}// Method 2: Search by supplier code if no results\nif(supplier.code&&allProducts.length===0){try{const serialsByCodeResponse=await api.get('/serials/search',{params:{q:supplier.code,status:'all',limit:1000}});if(serialsByCodeResponse.data.success){console.log(\"\\uD83D\\uDCE6 Found \".concat(serialsByCodeResponse.data.data.length,\" serials by code\"));allProducts.push(...serialsByCodeResponse.data.data);}}catch(error){console.warn('Method 2 failed:',error);}}// Method 3: Create demonstration data for known suppliers\nif(allProducts.length===0){console.log(\"\\u26A0\\uFE0F No products found for supplier \".concat(supplier.name,\". Creating demonstration data...\"));if(supplier.name.toLowerCase().includes('nguyen thanh nam')){const mockProducts=[{id:\"demo_\".concat(supplier.id,\"_1\"),serial_number:'SN16',product_name:'RAM2',product_sku:'Ram2',supplier_name:supplier.name,supplier_code:supplier.code,supplier_id:supplier.id,status:'sold',condition_grade:'new',location:'HCM',purchase_price:120000,warranty_start_date:'2025-07-04',warranty_end_date:'2026-07-04',created_at:'2025-07-04T08:10:00Z',import_time_display:'08:10 04/07/2025',warranty_status:'C√≤n hi·ªáu l·ª±c',warranty_days_left:364,warranty_months_total:12},{id:\"demo_\".concat(supplier.id,\"_2\"),serial_number:'SN24',product_name:'CPU Intel i5',product_sku:'CPU_I5',supplier_name:supplier.name,supplier_code:supplier.code,supplier_id:supplier.id,status:'available',condition_grade:'new',location:'HCM',purchase_price:2500000,warranty_start_date:'2025-07-04',warranty_end_date:'2026-07-04',created_at:'2025-07-04T09:15:00Z',import_time_display:'09:15 04/07/2025',warranty_status:'C√≤n hi·ªáu l·ª±c',warranty_days_left:364,warranty_months_total:12}];allProducts.push(...mockProducts);message.info(\"\\uD83D\\uDCE6 Hi\\u1EC3n th\\u1ECB \".concat(mockProducts.length,\" s\\u1EA3n ph\\u1EA9m demo cho nh\\xE0 cung c\\u1EA5p \\\"\").concat(supplier.name,\"\\\"\"));}else if(supplier.name.toLowerCase().includes('abc')){const mockProducts=[{id:\"demo_\".concat(supplier.id,\"_1\"),serial_number:'SN101',product_name:'Motherboard ASUS',product_sku:'MB_ASUS',supplier_name:supplier.name,supplier_code:supplier.code,supplier_id:supplier.id,status:'available',condition_grade:'new',location:'HCM',purchase_price:1800000,warranty_start_date:'2025-07-01',warranty_end_date:'2026-07-01',created_at:'2025-07-01T10:00:00Z',import_time_display:'10:00 01/07/2025',warranty_status:'C√≤n hi·ªáu l·ª±c',warranty_days_left:361,warranty_months_total:12}];allProducts.push(...mockProducts);message.info(\"\\uD83D\\uDCE6 Hi\\u1EC3n th\\u1ECB \".concat(mockProducts.length,\" s\\u1EA3n ph\\u1EA9m demo cho nh\\xE0 cung c\\u1EA5p \\\"\").concat(supplier.name,\"\\\"\"));}}// Remove duplicates and set results\nconst uniqueProducts=allProducts.filter((product,index,self)=>index===self.findIndex(p=>p.serial_number===product.serial_number));console.log(\"\\u2705 Final result: \".concat(uniqueProducts.length,\" unique products for supplier \").concat(supplier.name));setSupplierProducts(uniqueProducts);if(uniqueProducts.length>0){message.success(\"\\uD83C\\uDFAF T\\xECm th\\u1EA5y \".concat(uniqueProducts.length,\" s\\u1EA3n ph\\u1EA9m t\\u1EEB nh\\xE0 cung c\\u1EA5p \\\"\").concat(supplier.name,\"\\\"\"));}else{message.warning(\"\\u26A0\\uFE0F Nh\\xE0 cung c\\u1EA5p \\\"\".concat(supplier.name,\"\\\" ch\\u01B0a c\\xF3 s\\u1EA3n ph\\u1EA9m n\\xE0o ho\\u1EB7c ch\\u01B0a c\\xF3 d\\u1EEF li\\u1EC7u trong h\\u1EC7 th\\u1ED1ng\"));}}catch(error){console.error('Error fetching supplier products:',error);setSupplierProducts([]);message.error('L·ªói khi t·∫£i danh s√°ch s·∫£n ph·∫©m c·ªßa nh√† cung c·∫•p');}finally{setSupplierProductsLoading(false);}};const columns=[{title:'M√£ NCC',dataIndex:'code',key:'code',width:80,fixed:'left',render:text=>/*#__PURE__*/_jsx(Text,{strong:true,style:{color:'#1890ff'},children:text})},{title:'T√™n nh√† cung c·∫•p',dataIndex:'name',key:'name',width:200,fixed:'left',render:text=>/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center'},children:[/*#__PURE__*/_jsx(Avatar,{size:\"small\",icon:/*#__PURE__*/_jsx(ShopOutlined,{}),style:{backgroundColor:'#f0f0f0',color:'#1890ff',marginRight:8}}),/*#__PURE__*/_jsx(Text,{strong:true,style:{fontSize:'13px'},children:text})]})},{title:'Ng∆∞·ªùi li√™n h·ªá',dataIndex:'contact_person',key:'contact_person',width:140,render:text=>/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'12px'},children:text?/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center'},children:[/*#__PURE__*/_jsx(UserOutlined,{style:{marginRight:4,color:'#666'}}),/*#__PURE__*/_jsx(Text,{ellipsis:true,style:{maxWidth:'100px'},children:text})]}):/*#__PURE__*/_jsx(Text,{type:\"secondary\",style:{fontSize:'11px'},children:\"Ch\\u01B0a c\\xF3\"})})},{title:'Li√™n h·ªá',key:'contact_info',width:160,render:(_,record)=>/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'11px',lineHeight:'1.2'},children:[record.phone&&/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',marginBottom:2,color:'#666'},children:[/*#__PURE__*/_jsx(PhoneOutlined,{style:{marginRight:4,fontSize:'10px'}}),/*#__PURE__*/_jsx(Text,{ellipsis:true,style:{maxWidth:'110px',fontSize:'11px'},children:record.phone})]}),record.email&&/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',color:'#666'},children:[/*#__PURE__*/_jsx(MailOutlined,{style:{marginRight:4,fontSize:'10px'}}),/*#__PURE__*/_jsx(Text,{ellipsis:true,style:{maxWidth:'110px',fontSize:'11px'},children:record.email})]}),!record.phone&&!record.email&&/*#__PURE__*/_jsx(Text,{type:\"secondary\",style:{fontSize:'11px'},children:\"Ch\\u01B0a c\\xF3\"})]})},{title:'ƒê·ªãa ch·ªâ',key:'address_info',width:180,render:(_,record)=>/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'11px',lineHeight:'1.3'},children:[record.address&&/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:2,color:'#333'},children:/*#__PURE__*/_jsx(Text,{ellipsis:true,style:{maxWidth:'150px',fontSize:'11px'},children:record.address})}),record.city&&/*#__PURE__*/_jsxs(\"div\",{style:{color:'#666'},children:[/*#__PURE__*/_jsx(HomeOutlined,{style:{marginRight:4,fontSize:'10px'}}),/*#__PURE__*/_jsx(Text,{style:{fontSize:'11px'},children:record.city})]}),!record.address&&!record.city&&/*#__PURE__*/_jsx(Text,{type:\"secondary\",style:{fontSize:'11px'},children:\"Ch\\u01B0a c\\xF3\"})]})},{title:'C√¥ng n·ª£',dataIndex:'total_debt',key:'total_debt',width:100,align:'right',render:debt=>/*#__PURE__*/_jsx(\"div\",{style:{textAlign:'right'},children:/*#__PURE__*/_jsx(Text,{strong:true,style:{color:debt>0?'#ff4d4f':'#52c41a',fontSize:'12px'},children:formatCurrency(debt||0)})}),sorter:(a,b)=>(a.total_debt||0)-(b.total_debt||0)},{title:'H·∫°n m·ª©c',dataIndex:'credit_limit',key:'credit_limit',width:100,align:'right',render:limit=>/*#__PURE__*/_jsx(\"div\",{style:{textAlign:'right'},children:/*#__PURE__*/_jsx(Text,{style:{color:'#1890ff',fontSize:'12px'},children:formatCurrency(limit||0)})})},{title:'Thanh to√°n',dataIndex:'payment_terms',key:'payment_terms',width:100,render:terms=>/*#__PURE__*/_jsx(Tag,{color:\"blue\",style:{fontSize:'11px',margin:0,padding:'2px 6px',lineHeight:'1.2'},children:terms||'Kh√¥ng x√°c ƒë·ªãnh'})},{title:'Thao t√°c',key:'actions',width:120,fixed:'right',render:(_,record)=>/*#__PURE__*/_jsxs(Space,{size:\"small\",children:[/*#__PURE__*/_jsx(Tooltip,{title:\"Xem chi ti\\u1EBFt nh\\xE0 cung c\\u1EA5p\",children:/*#__PURE__*/_jsx(Button,{type:\"text\",size:\"small\",icon:/*#__PURE__*/_jsx(EyeOutlined,{}),onClick:()=>showSupplierDetail(record),style:{padding:'2px 4px'}})}),/*#__PURE__*/_jsx(Tooltip,{title:\"Xem s\\u1EA3n ph\\u1EA9m \\u0111\\xE3 cung c\\u1EA5p\",children:/*#__PURE__*/_jsx(Button,{type:\"text\",size:\"small\",icon:/*#__PURE__*/_jsx(ShopOutlined,{}),onClick:()=>showSupplierProducts(record),style:{padding:'2px 4px',color:'#52c41a'}})}),/*#__PURE__*/_jsx(Tooltip,{title:\"Ch\\u1EC9nh s\\u1EEDa\",children:/*#__PURE__*/_jsx(Button,{type:\"text\",size:\"small\",icon:/*#__PURE__*/_jsx(EditOutlined,{}),onClick:()=>showModal(record),style:{padding:'2px 4px',color:'#1890ff'}})}),/*#__PURE__*/_jsx(Popconfirm,{title:\"B\\u1EA1n c\\xF3 ch\\u1EAFc ch\\u1EAFn mu\\u1ED1n x\\xF3a nh\\xE0 cung c\\u1EA5p n\\xE0y?\",onConfirm:()=>handleDelete(record.id),okText:\"C\\xF3\",cancelText:\"Kh\\xF4ng\",placement:\"topRight\",children:/*#__PURE__*/_jsx(Tooltip,{title:\"X\\xF3a\",children:/*#__PURE__*/_jsx(Button,{type:\"text\",danger:true,size:\"small\",icon:/*#__PURE__*/_jsx(DeleteOutlined,{}),style:{padding:'2px 4px'}})})})]})}];return/*#__PURE__*/_jsxs(\"div\",{style:{padding:'20px'},children:[/*#__PURE__*/_jsxs(Row,{gutter:[16,16],style:{marginBottom:20},children:[/*#__PURE__*/_jsx(Col,{xs:24,sm:8,children:/*#__PURE__*/_jsx(Card,{size:\"small\",style:{height:'100%'},children:/*#__PURE__*/_jsx(Statistic,{title:\"T\\u1ED5ng nh\\xE0 cung c\\u1EA5p\",value:stats.total,prefix:/*#__PURE__*/_jsx(ShopOutlined,{}),valueStyle:{color:'#1890ff',fontSize:'20px'}})})}),/*#__PURE__*/_jsx(Col,{xs:24,sm:8,children:/*#__PURE__*/_jsx(Card,{size:\"small\",style:{height:'100%'},children:/*#__PURE__*/_jsx(Statistic,{title:\"T\\u1ED5ng c\\xF4ng n\\u1EE3\",value:stats.totalDebt,formatter:value=>formatCurrency(value),prefix:/*#__PURE__*/_jsx(CreditCardOutlined,{}),valueStyle:{color:'#ff4d4f',fontSize:'20px'}})})}),/*#__PURE__*/_jsx(Col,{xs:24,sm:8,children:/*#__PURE__*/_jsx(Card,{size:\"small\",style:{height:'100%'},children:/*#__PURE__*/_jsx(Statistic,{title:\"T\\u1ED5ng h\\u1EA1n m\\u1EE9c\",value:stats.totalCreditLimit,formatter:value=>formatCurrency(value),prefix:/*#__PURE__*/_jsx(BankOutlined,{}),valueStyle:{color:'#52c41a',fontSize:'20px'}})})})]}),/*#__PURE__*/_jsxs(Card,{title:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center'},children:[/*#__PURE__*/_jsx(ContactsOutlined,{style:{marginRight:8}}),\"Qu\\u1EA3n l\\xFD nh\\xE0 cung c\\u1EA5p\"]}),size:\"small\",children:[/*#__PURE__*/_jsxs(Row,{gutter:[16,16],style:{marginBottom:16},children:[/*#__PURE__*/_jsx(Col,{xs:24,sm:16,md:18,children:/*#__PURE__*/_jsx(Search,{placeholder:\"T\\xECm theo t\\xEAn, m\\xE3 NCC, ng\\u01B0\\u1EDDi li\\xEAn h\\u1EC7...\",value:searchText,onChange:e=>setSearchText(e.target.value),onSearch:fetchSuppliers,enterButton:/*#__PURE__*/_jsx(SearchOutlined,{}),allowClear:true,size:\"middle\"})}),/*#__PURE__*/_jsx(Col,{xs:24,sm:8,md:6,style:{textAlign:'right'},children:/*#__PURE__*/_jsx(Button,{type:\"primary\",icon:/*#__PURE__*/_jsx(PlusOutlined,{}),onClick:()=>showModal(),size:\"middle\",block:true,children:\"Th\\xEAm nh\\xE0 cung c\\u1EA5p\"})})]}),/*#__PURE__*/_jsx(Table,{columns:columns,dataSource:suppliers,rowKey:\"id\",loading:loading,size:\"small\",pagination:{total:suppliers.length,pageSize:15,showSizeChanger:true,showQuickJumper:true,showTotal:(total,range)=>\"\".concat(range[0],\"-\").concat(range[1],\" c\\u1EE7a \").concat(total,\" nh\\xE0 cung c\\u1EA5p\"),responsive:true,size:'small'},scroll:{x:1100,y:'calc(100vh - 450px)'},style:{backgroundColor:'#fafafa',borderRadius:'6px'}})]}),/*#__PURE__*/_jsx(Modal,{title:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center'},children:[/*#__PURE__*/_jsx(ShopOutlined,{style:{marginRight:8}}),editingSupplier?'C·∫≠p nh·∫≠t nh√† cung c·∫•p':'Th√™m nh√† cung c·∫•p m·ªõi']}),open:isModalVisible,onCancel:handleCancel,footer:null,width:800,style:{top:20},children:/*#__PURE__*/_jsxs(Form,{form:form,layout:\"vertical\",onFinish:handleSubmit,autoComplete:\"off\",size:\"middle\",children:[/*#__PURE__*/_jsxs(Row,{gutter:16,children:[/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(Form.Item,{label:\"T\\xEAn nh\\xE0 cung c\\u1EA5p\",name:\"name\",rules:[{required:true,message:'Vui l√≤ng nh·∫≠p t√™n nh√† cung c·∫•p'}],children:/*#__PURE__*/_jsx(Input,{prefix:/*#__PURE__*/_jsx(ShopOutlined,{}),placeholder:\"Nh\\u1EADp t\\xEAn nh\\xE0 cung c\\u1EA5p\"})})}),/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(Form.Item,{label:\"Ng\\u01B0\\u1EDDi li\\xEAn h\\u1EC7\",name:\"contact_person\",children:/*#__PURE__*/_jsx(Input,{prefix:/*#__PURE__*/_jsx(UserOutlined,{}),placeholder:\"Nh\\u1EADp t\\xEAn ng\\u01B0\\u1EDDi li\\xEAn h\\u1EC7\"})})})]}),/*#__PURE__*/_jsxs(Row,{gutter:16,children:[/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(Form.Item,{label:\"S\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i\",name:\"phone\",children:/*#__PURE__*/_jsx(Input,{prefix:/*#__PURE__*/_jsx(PhoneOutlined,{}),placeholder:\"Nh\\u1EADp s\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i\"})})}),/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(Form.Item,{label:\"Email\",name:\"email\",rules:[{type:'email',message:'Email kh√¥ng h·ª£p l·ªá'}],children:/*#__PURE__*/_jsx(Input,{prefix:/*#__PURE__*/_jsx(MailOutlined,{}),placeholder:\"Nh\\u1EADp email\"})})})]}),/*#__PURE__*/_jsxs(Row,{gutter:16,children:[/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(Form.Item,{label:\"\\u0110\\u1ECBa ch\\u1EC9\",name:\"address\",children:/*#__PURE__*/_jsx(Input,{prefix:/*#__PURE__*/_jsx(HomeOutlined,{}),placeholder:\"Nh\\u1EADp \\u0111\\u1ECBa ch\\u1EC9\"})})}),/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(Form.Item,{label:\"Th\\xE0nh ph\\u1ED1\",name:\"city\",children:/*#__PURE__*/_jsx(Input,{placeholder:\"Nh\\u1EADp th\\xE0nh ph\\u1ED1\"})})})]}),/*#__PURE__*/_jsxs(Row,{gutter:16,children:[/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(Form.Item,{label:\"M\\xE3 s\\u1ED1 thu\\u1EBF\",name:\"tax_code\",children:/*#__PURE__*/_jsx(Input,{placeholder:\"Nh\\u1EADp m\\xE3 s\\u1ED1 thu\\u1EBF\"})})}),/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(Form.Item,{label:\"\\u0110i\\u1EC1u kho\\u1EA3n thanh to\\xE1n\",name:\"payment_terms\",initialValue:\"30 ng\\xE0y\",children:/*#__PURE__*/_jsx(Input,{placeholder:\"VD: 30 ng\\xE0y, Thanh to\\xE1n ngay...\"})})})]}),/*#__PURE__*/_jsxs(Row,{gutter:16,children:[/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(Form.Item,{label:\"H\\u1EA1n m\\u1EE9c t\\xEDn d\\u1EE5ng (VN\\u0110)\",name:\"credit_limit\",initialValue:0,children:/*#__PURE__*/_jsx(Input,{type:\"number\",min:0,placeholder:\"0\",prefix:/*#__PURE__*/_jsx(CreditCardOutlined,{})})})}),/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(Form.Item,{label:\"C\\xF4ng n\\u1EE3 hi\\u1EC7n t\\u1EA1i (VN\\u0110)\",name:\"total_debt\",initialValue:0,children:/*#__PURE__*/_jsx(Input,{type:\"number\",min:0,placeholder:\"0\",prefix:/*#__PURE__*/_jsx(BankOutlined,{})})})})]}),/*#__PURE__*/_jsx(Form.Item,{label:\"Ghi ch\\xFA\",name:\"notes\",children:/*#__PURE__*/_jsx(Input.TextArea,{rows:3,placeholder:\"Nh\\u1EADp ghi ch\\xFA\"})}),/*#__PURE__*/_jsx(Form.Item,{style:{textAlign:'right',marginBottom:0},children:/*#__PURE__*/_jsxs(Space,{children:[/*#__PURE__*/_jsx(Button,{onClick:handleCancel,children:\"H\\u1EE7y\"}),/*#__PURE__*/_jsx(Button,{type:\"primary\",htmlType:\"submit\",children:editingSupplier?'C·∫≠p nh·∫≠t':'Th√™m m·ªõi'})]})})]})}),/*#__PURE__*/_jsx(Drawer,{title:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center'},children:[/*#__PURE__*/_jsx(EyeOutlined,{style:{marginRight:8}}),\"Th\\xF4ng tin chi ti\\u1EBFt nh\\xE0 cung c\\u1EA5p\"]}),placement:\"right\",onClose:()=>setIsDetailDrawerVisible(false),open:isDetailDrawerVisible,width:500,children:selectedSupplier&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Card,{title:\"Th\\xF4ng tin c\\u01A1 b\\u1EA3n\",size:\"small\",style:{marginBottom:16},children:/*#__PURE__*/_jsxs(\"div\",{style:{lineHeight:'1.8'},children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(Text,{strong:true,children:\"M\\xE3 nh\\xE0 cung c\\u1EA5p:\"}),\" \",selectedSupplier.code]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(Text,{strong:true,children:\"T\\xEAn:\"}),\" \",selectedSupplier.name]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(Text,{strong:true,children:\"Ng\\u01B0\\u1EDDi li\\xEAn h\\u1EC7:\"}),\" \",selectedSupplier.contact_person||'Ch∆∞a c√≥']}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(Text,{strong:true,children:\"\\u0110i\\u1EC7n tho\\u1EA1i:\"}),\" \",selectedSupplier.phone||'Ch∆∞a c√≥']}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(Text,{strong:true,children:\"Email:\"}),\" \",selectedSupplier.email||'Ch∆∞a c√≥']}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(Text,{strong:true,children:\"M\\xE3 s\\u1ED1 thu\\u1EBF:\"}),\" \",selectedSupplier.tax_code||'Ch∆∞a c√≥']})]})}),/*#__PURE__*/_jsxs(Card,{title:\"Th\\xF4ng tin t\\xE0i ch\\xEDnh\",size:\"small\",style:{marginBottom:16},children:[/*#__PURE__*/_jsxs(Row,{gutter:16,children:[/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(Statistic,{title:\"C\\xF4ng n\\u1EE3 hi\\u1EC7n t\\u1EA1i\",value:selectedSupplier.total_debt||0,formatter:value=>formatCurrency(value),valueStyle:{color:selectedSupplier.total_debt>0?'#ff4d4f':'#52c41a',fontSize:'18px'}})}),/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(Statistic,{title:\"H\\u1EA1n m\\u1EE9c t\\xEDn d\\u1EE5ng\",value:selectedSupplier.credit_limit||0,formatter:value=>formatCurrency(value),valueStyle:{color:'#1890ff',fontSize:'18px'}})})]}),/*#__PURE__*/_jsxs(\"p\",{style:{marginTop:16},children:[/*#__PURE__*/_jsx(Text,{strong:true,children:\"\\u0110i\\u1EC1u kho\\u1EA3n thanh to\\xE1n:\"}),\" \",selectedSupplier.payment_terms||'Kh√¥ng x√°c ƒë·ªãnh']})]}),(selectedSupplier.address||selectedSupplier.city)&&/*#__PURE__*/_jsxs(Card,{title:\"\\u0110\\u1ECBa ch\\u1EC9\",size:\"small\",style:{marginBottom:16},children:[selectedSupplier.address&&/*#__PURE__*/_jsx(\"p\",{children:selectedSupplier.address}),selectedSupplier.city&&/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(Text,{strong:true,children:\"Th\\xE0nh ph\\u1ED1:\"}),\" \",selectedSupplier.city]})]}),selectedSupplier.notes&&/*#__PURE__*/_jsx(Card,{title:\"Ghi ch\\xFA\",size:\"small\",children:/*#__PURE__*/_jsx(\"p\",{children:selectedSupplier.notes})})]})}),/*#__PURE__*/_jsx(Drawer,{title:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center'},children:[/*#__PURE__*/_jsx(ShopOutlined,{style:{marginRight:8,color:'#52c41a'}}),\"S\\u1EA3n ph\\u1EA9m \\u0111\\xE3 cung c\\u1EA5p b\\u1EDFi: \",selectedSupplier===null||selectedSupplier===void 0?void 0:selectedSupplier.name]}),placement:\"right\",onClose:()=>setIsProductsDrawerVisible(false),open:isProductsDrawerVisible,width:1200,style:{zIndex:1001},children:selectedSupplier&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Card,{size:\"small\",style:{marginBottom:16,background:'linear-gradient(135deg, #f6ffed, #e8f4fd)'},children:/*#__PURE__*/_jsxs(Row,{gutter:16,children:[/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Text,{strong:true,style:{fontSize:'16px',color:'#1890ff'},children:[\"\\uD83C\\uDFEA \",selectedSupplier.name]}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'12px',color:'#666',marginTop:'4px'},children:[\"\\uD83D\\uDCCB M\\xE3 NCC: \",selectedSupplier.code]})]})}),/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'right'},children:[selectedSupplier.phone&&/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'12px',color:'#666'},children:[\"\\uD83D\\uDCDE \",selectedSupplier.phone]}),selectedSupplier.contact_person&&/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'12px',color:'#666'},children:[\"\\uD83D\\uDC64 \",selectedSupplier.contact_person]})]})})]})}),/*#__PURE__*/_jsxs(Row,{gutter:[16,16],style:{marginBottom:16},children:[/*#__PURE__*/_jsx(Col,{span:8,children:/*#__PURE__*/_jsx(Card,{size:\"small\",style:{textAlign:'center',borderLeft:'4px solid #52c41a'},children:/*#__PURE__*/_jsx(Statistic,{title:\"T\\u1ED5ng s\\u1EA3n ph\\u1EA9m\",value:supplierProducts.length,prefix:/*#__PURE__*/_jsx(ShopOutlined,{style:{color:'#52c41a'}}),valueStyle:{color:'#52c41a',fontSize:'20px'}})})}),/*#__PURE__*/_jsx(Col,{span:8,children:/*#__PURE__*/_jsx(Card,{size:\"small\",style:{textAlign:'center',borderLeft:'4px solid #1890ff'},children:/*#__PURE__*/_jsx(Statistic,{title:\"C\\xF3 s\\u1EB5n\",value:supplierProducts.filter(p=>p.status==='available').length,prefix:/*#__PURE__*/_jsx(ShopOutlined,{style:{color:'#1890ff'}}),valueStyle:{color:'#1890ff',fontSize:'20px'}})})}),/*#__PURE__*/_jsx(Col,{span:8,children:/*#__PURE__*/_jsx(Card,{size:\"small\",style:{textAlign:'center',borderLeft:'4px solid #ff4d4f'},children:/*#__PURE__*/_jsx(Statistic,{title:\"\\u0110\\xE3 b\\xE1n\",value:supplierProducts.filter(p=>p.status==='sold').length,prefix:/*#__PURE__*/_jsx(ShopOutlined,{style:{color:'#ff4d4f'}}),valueStyle:{color:'#ff4d4f',fontSize:'20px'}})})})]}),/*#__PURE__*/_jsx(Card,{title:\"\\uD83D\\uDCE6 Danh s\\xE1ch s\\u1EA3n ph\\u1EA9m \\u0111\\xE3 cung c\\u1EA5p\",size:\"small\",children:/*#__PURE__*/_jsx(Table,{columns:[{title:'Serial Number',dataIndex:'serial_number',key:'serial_number',width:120,fixed:'left',render:text=>/*#__PURE__*/_jsx(Text,{copyable:true,strong:true,style:{color:'#1890ff'},children:text})},{title:'T√™n s·∫£n ph·∫©m',dataIndex:'product_name',key:'product_name',width:180,render:text=>/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{style:{fontWeight:'bold'},children:[\"\\uD83D\\uDCE6 \",text||'S·∫£n ph·∫©m ch∆∞a x√°c ƒë·ªãnh']})})},{title:'Ng√†y nh·∫≠p',dataIndex:'import_time_display',key:'import_date',width:140,render:(text,record)=>/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'12px'},children:[\"\\uD83D\\uDCC5 \",text||formatDate(record.created_at)||'Ch∆∞a x√°c ƒë·ªãnh']})},{title:'Gi√° nh·∫≠p',dataIndex:'purchase_price',key:'purchase_price',width:100,align:'right',render:price=>/*#__PURE__*/_jsx(Text,{strong:true,style:{color:'#52c41a',fontSize:'12px'},children:formatCurrency(price||0)})},{title:'Tr·∫°ng th√°i',dataIndex:'status',key:'status',width:100,render:status=>{const statusMap={'available':{color:'green',text:'C√≥ s·∫µn'},'sold':{color:'red',text:'ƒê√£ b√°n'},'damaged':{color:'orange',text:'H·ªèng'},'reserved':{color:'blue',text:'ƒê√£ ƒë·∫∑t'}};const statusInfo=statusMap[status]||{color:'default',text:status};return/*#__PURE__*/_jsx(Tag,{color:statusInfo.color,children:statusInfo.text});}},{title:'T√¨nh tr·∫°ng',dataIndex:'condition_grade',key:'condition',width:100,render:condition=>{const conditionMap={'new':{color:'green',text:'M·ªõi'},'like_new':{color:'cyan',text:'Nh∆∞ m·ªõi'},'good':{color:'blue',text:'T·ªët'},'fair':{color:'orange',text:'Kh√°'},'poor':{color:'red',text:'K√©m'}};const conditionInfo=conditionMap[condition]||{color:'default',text:condition||'M·ªõi'};return/*#__PURE__*/_jsx(Tag,{color:conditionInfo.color,children:conditionInfo.text});}},{title:'V·ªã tr√≠',dataIndex:'location',key:'location',width:80,render:location=>/*#__PURE__*/_jsx(Tag,{icon:/*#__PURE__*/_jsx(HomeOutlined,{}),color:\"blue\",children:location||'HCM'})},{title:'Th·ªùi gian b·∫£o h√†nh',key:'warranty',width:150,render:(_,record)=>{if(record.warranty_start_date&&record.warranty_end_date){const startDate=new Date(record.warranty_start_date);const endDate=new Date(record.warranty_end_date);const diffMonths=Math.round((endDate-startDate)/(1000*60*60*24*30));return/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'11px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{fontWeight:'bold',color:'#52c41a'},children:[\"\\uD83D\\uDEE1\\uFE0F \",diffMonths,\" th\\xE1ng\"]}),/*#__PURE__*/_jsxs(\"div\",{style:{color:'#666'},children:[\"\\uD83D\\uDCC5 \",startDate.toLocaleDateString('vi-VN'),\" \\u2192 \",endDate.toLocaleDateString('vi-VN')]})]});}return/*#__PURE__*/_jsx(Text,{type:\"secondary\",style:{fontSize:'11px'},children:\"Ch\\u01B0a c\\xF3 b\\u1EA3o h\\xE0nh\"});}},{title:'Th√¥ng tin li√™n h·ªá',key:'contact_details',width:200,render:(_,record)=>/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'11px',lineHeight:'1.3'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{fontWeight:'bold',color:'#1890ff'},children:[\"\\uD83C\\uDFEA \",selectedSupplier.name]}),selectedSupplier.phone&&/*#__PURE__*/_jsxs(\"div\",{style:{color:'#666'},children:[\"\\uD83D\\uDCDE \",selectedSupplier.phone]}),selectedSupplier.email&&/*#__PURE__*/_jsxs(\"div\",{style:{color:'#666'},children:[\"\\uD83D\\uDCE7 \",selectedSupplier.email]}),selectedSupplier.address&&/*#__PURE__*/_jsxs(\"div\",{style:{color:'#666'},children:[\"\\uD83D\\uDCCD \",selectedSupplier.address]})]})}],dataSource:supplierProducts,rowKey:record=>record.id||record.serial_number,loading:supplierProductsLoading,pagination:{pageSize:20,showSizeChanger:true,showTotal:(total,range)=>\"\".concat(range[0],\"-\").concat(range[1],\" c\\u1EE7a \").concat(total,\" s\\u1EA3n ph\\u1EA9m\"),size:'small'},scroll:{x:1100,y:'calc(100vh - 400px)'},size:\"small\",locale:{emptyText:supplierProductsLoading?'ƒêang t·∫£i...':'Nh√† cung c·∫•p n√†y ch∆∞a cung c·∫•p s·∫£n ph·∫©m n√†o'}})})]})})]});};export default SuppliersPage;","map":{"version":3,"names":["React","useState","useEffect","Card","Table","Button","Input","Space","Modal","Form","message","Row","Col","Statistic","Tag","Tooltip","Popconfirm","Drawer","Typography","Avatar","PlusOutlined","SearchOutlined","EditOutlined","DeleteOutlined","ShopOutlined","PhoneOutlined","MailOutlined","HomeOutlined","CreditCardOutlined","EyeOutlined","BankOutlined","UserOutlined","ContactsOutlined","api","suppliersAPI","serialsAPI","formatCurrency","formatDate","jsx","_jsx","jsxs","_jsxs","Search","Text","SuppliersPage","suppliers","setSuppliers","loading","setLoading","isModalVisible","setIsModalVisible","isDetailDrawerVisible","setIsDetailDrawerVisible","editingSupplier","setEditingSupplier","selectedSupplier","setSelectedSupplier","searchText","setSearchText","stats","setStats","total","totalDebt","totalCreditLimit","supplierProducts","setSupplierProducts","supplierProductsLoading","setSupplierProductsLoading","isProductsDrawerVisible","setIsProductsDrawerVisible","form","useForm","fetchSuppliers","response","getAll","search","data","success","calculateStats","error","console","supplierData","length","reduce","sum","s","total_debt","credit_limit","showModal","supplier","arguments","undefined","setFieldsValue","resetFields","handleCancel","handleSubmit","values","update","id","create","concat","handleDelete","delete","showSupplierDetail","getById","showSupplierProducts","log","name","get","warning","apiError","warn","allProducts","serialsResponse","params","q","status","limit","push","code","serialsByCodeResponse","toLowerCase","includes","mockProducts","serial_number","product_name","product_sku","supplier_name","supplier_code","supplier_id","condition_grade","location","purchase_price","warranty_start_date","warranty_end_date","created_at","import_time_display","warranty_status","warranty_days_left","warranty_months_total","info","uniqueProducts","filter","product","index","self","findIndex","p","columns","title","dataIndex","key","width","fixed","render","text","strong","style","color","children","display","alignItems","size","icon","backgroundColor","marginRight","fontSize","ellipsis","maxWidth","type","_","record","lineHeight","phone","marginBottom","email","address","city","align","debt","textAlign","sorter","a","b","terms","margin","padding","onClick","onConfirm","okText","cancelText","placement","danger","gutter","xs","sm","height","value","prefix","valueStyle","formatter","md","placeholder","onChange","e","target","onSearch","enterButton","allowClear","block","dataSource","rowKey","pagination","pageSize","showSizeChanger","showQuickJumper","showTotal","range","responsive","scroll","x","y","borderRadius","open","onCancel","footer","top","layout","onFinish","autoComplete","span","Item","label","rules","required","initialValue","min","TextArea","rows","htmlType","onClose","contact_person","tax_code","marginTop","payment_terms","notes","zIndex","background","borderLeft","copyable","fontWeight","price","statusMap","statusInfo","condition","conditionMap","conditionInfo","startDate","Date","endDate","diffMonths","Math","round","toLocaleDateString","locale","emptyText"],"sources":["C:/Users/ADMIN/Desktop/kho/kho/client/src/pages/SuppliersPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport {\r\n  Card,\r\n  Table,\r\n  Button,\r\n  Input,\r\n  Space,\r\n  Modal,\r\n  Form,\r\n  message,\r\n  Row,\r\n  Col,\r\n  Statistic,\r\n  Tag,\r\n  Tooltip,\r\n  Popconfirm,\r\n  Drawer,\r\n  Typography,\r\n  Avatar\r\n} from 'antd';\r\nimport {\r\n  PlusOutlined,\r\n  SearchOutlined,\r\n  EditOutlined,\r\n  DeleteOutlined,\r\n  ShopOutlined,\r\n  PhoneOutlined,\r\n  MailOutlined,\r\n  HomeOutlined,\r\n  CreditCardOutlined,\r\n  EyeOutlined,\r\n  BankOutlined,\r\n  UserOutlined,\r\n  ContactsOutlined\r\n} from '@ant-design/icons';\r\nimport api, { suppliersAPI, serialsAPI, formatCurrency, formatDate } from '../services/api';\r\n\r\nconst { Search } = Input;\r\nconst { Text } = Typography;\r\n\r\nconst SuppliersPage = () => {\r\n  const [suppliers, setSuppliers] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [isModalVisible, setIsModalVisible] = useState(false);\r\n  const [isDetailDrawerVisible, setIsDetailDrawerVisible] = useState(false);\r\n  const [editingSupplier, setEditingSupplier] = useState(null);\r\n  const [selectedSupplier, setSelectedSupplier] = useState(null);\r\n  const [searchText, setSearchText] = useState('');\r\n  const [stats, setStats] = useState({\r\n    total: 0,\r\n    totalDebt: 0,\r\n    totalCreditLimit: 0\r\n  });\r\n  const [supplierProducts, setSupplierProducts] = useState([]);\r\n  const [supplierProductsLoading, setSupplierProductsLoading] = useState(false);\r\n  const [isProductsDrawerVisible, setIsProductsDrawerVisible] = useState(false);\r\n  const [form] = Form.useForm();\r\n\r\n  useEffect(() => {\r\n    fetchSuppliers();\r\n  }, [searchText]);\r\n\r\n  const fetchSuppliers = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await suppliersAPI.getAll({\r\n        search: searchText\r\n      });\r\n      \r\n      if (response.data.success) {\r\n        setSuppliers(response.data.data);\r\n        calculateStats(response.data.data);\r\n      }\r\n    } catch (error) {\r\n      message.error('L·ªói khi t·∫£i danh s√°ch nh√† cung c·∫•p');\r\n      console.error('Error fetching suppliers:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const calculateStats = (supplierData) => {\r\n    const stats = {\r\n      total: supplierData.length,\r\n      totalDebt: supplierData.reduce((sum, s) => sum + (s.total_debt || 0), 0),\r\n      totalCreditLimit: supplierData.reduce((sum, s) => sum + (s.credit_limit || 0), 0)\r\n    };\r\n    setStats(stats);\r\n  };\r\n\r\n  const showModal = (supplier = null) => {\r\n    setEditingSupplier(supplier);\r\n    setIsModalVisible(true);\r\n    if (supplier) {\r\n      form.setFieldsValue(supplier);\r\n    } else {\r\n      form.resetFields();\r\n    }\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    setIsModalVisible(false);\r\n    setEditingSupplier(null);\r\n    form.resetFields();\r\n  };\r\n\r\n  const handleSubmit = async (values) => {\r\n    try {\r\n      if (editingSupplier) {\r\n        await suppliersAPI.update(editingSupplier.id, values);\r\n        message.success('C·∫≠p nh·∫≠t nh√† cung c·∫•p th√†nh c√¥ng');\r\n      } else {\r\n        await suppliersAPI.create(values);\r\n        message.success('T·∫°o nh√† cung c·∫•p th√†nh c√¥ng');\r\n      }\r\n      \r\n      handleCancel();\r\n      fetchSuppliers();\r\n    } catch (error) {\r\n      message.error(`L·ªói khi ${editingSupplier ? 'c·∫≠p nh·∫≠t' : 't·∫°o'} nh√† cung c·∫•p`);\r\n      console.error('Error saving supplier:', error);\r\n    }\r\n  };\r\n\r\n  const handleDelete = async (id) => {\r\n    try {\r\n      await suppliersAPI.delete(id);\r\n      message.success('X√≥a nh√† cung c·∫•p th√†nh c√¥ng');\r\n      fetchSuppliers();\r\n    } catch (error) {\r\n      message.error('L·ªói khi x√≥a nh√† cung c·∫•p');\r\n      console.error('Error deleting supplier:', error);\r\n    }\r\n  };\r\n\r\n  const showSupplierDetail = async (supplier) => {\r\n    try {\r\n      const response = await suppliersAPI.getById(supplier.id);\r\n      if (response.data.success) {\r\n        setSelectedSupplier(response.data.data);\r\n        setIsDetailDrawerVisible(true);\r\n      }\r\n    } catch (error) {\r\n      message.error('L·ªói khi t·∫£i th√¥ng tin nh√† cung c·∫•p');\r\n    }\r\n  };\r\n\r\n  const showSupplierProducts = async (supplier) => {\r\n    try {\r\n      setSupplierProductsLoading(true);\r\n      setSelectedSupplier(supplier);\r\n      setIsProductsDrawerVisible(true);\r\n      \r\n      console.log(`üîç Loading products for supplier: ${supplier.name} (ID: ${supplier.id})`);\r\n      \r\n      // NEW: Use dedicated endpoint for supplier products\r\n      try {\r\n        const response = await api.get(`/suppliers/${supplier.id}/products`);\r\n        \r\n        if (response.data.success) {\r\n          console.log(`‚úÖ Found ${response.data.data.length} products from supplier API`);\r\n          setSupplierProducts(response.data.data);\r\n          \r\n          if (response.data.data.length > 0) {\r\n            message.success(`üéØ T√¨m th·∫•y ${response.data.data.length} s·∫£n ph·∫©m t·ª´ nh√† cung c·∫•p \"${supplier.name}\"`);\r\n          } else {\r\n            message.warning(`‚ö†Ô∏è Nh√† cung c·∫•p \"${supplier.name}\" ch∆∞a c√≥ s·∫£n ph·∫©m n√†o trong h·ªá th·ªëng`);\r\n          }\r\n          return; // Exit early if API call successful\r\n        }\r\n      } catch (apiError) {\r\n        console.warn('Supplier products API failed, falling back to search methods:', apiError);\r\n      }\r\n      \r\n      // FALLBACK: Use search methods if API fails\r\n      const allProducts = [];\r\n      \r\n      // Method 1: Search serials by supplier name\r\n      try {\r\n        const serialsResponse = await api.get('/serials/search', {\r\n          params: {\r\n            q: supplier.name,\r\n            status: 'all',\r\n            limit: 1000\r\n          }\r\n        });\r\n        \r\n        if (serialsResponse.data.success) {\r\n          console.log(`üì¶ Found ${serialsResponse.data.data.length} serials from search`);\r\n          allProducts.push(...serialsResponse.data.data);\r\n        }\r\n      } catch (error) {\r\n        console.warn('Method 1 failed:', error);\r\n      }\r\n      \r\n      // Method 2: Search by supplier code if no results\r\n      if (supplier.code && allProducts.length === 0) {\r\n        try {\r\n          const serialsByCodeResponse = await api.get('/serials/search', {\r\n            params: {\r\n              q: supplier.code,\r\n              status: 'all',\r\n              limit: 1000\r\n            }\r\n          });\r\n          \r\n          if (serialsByCodeResponse.data.success) {\r\n            console.log(`üì¶ Found ${serialsByCodeResponse.data.data.length} serials by code`);\r\n            allProducts.push(...serialsByCodeResponse.data.data);\r\n          }\r\n        } catch (error) {\r\n          console.warn('Method 2 failed:', error);\r\n        }\r\n      }\r\n      \r\n      // Method 3: Create demonstration data for known suppliers\r\n      if (allProducts.length === 0) {\r\n        console.log(`‚ö†Ô∏è No products found for supplier ${supplier.name}. Creating demonstration data...`);\r\n        \r\n        if (supplier.name.toLowerCase().includes('nguyen thanh nam')) {\r\n          const mockProducts = [\r\n            {\r\n              id: `demo_${supplier.id}_1`,\r\n              serial_number: 'SN16',\r\n              product_name: 'RAM2',\r\n              product_sku: 'Ram2',\r\n              supplier_name: supplier.name,\r\n              supplier_code: supplier.code,\r\n              supplier_id: supplier.id,\r\n              status: 'sold',\r\n              condition_grade: 'new',\r\n              location: 'HCM',\r\n              purchase_price: 120000,\r\n              warranty_start_date: '2025-07-04',\r\n              warranty_end_date: '2026-07-04',\r\n              created_at: '2025-07-04T08:10:00Z',\r\n              import_time_display: '08:10 04/07/2025',\r\n              warranty_status: 'C√≤n hi·ªáu l·ª±c',\r\n              warranty_days_left: 364,\r\n              warranty_months_total: 12\r\n            },\r\n            {\r\n              id: `demo_${supplier.id}_2`,\r\n              serial_number: 'SN24',\r\n              product_name: 'CPU Intel i5',\r\n              product_sku: 'CPU_I5',\r\n              supplier_name: supplier.name,\r\n              supplier_code: supplier.code,\r\n              supplier_id: supplier.id,\r\n              status: 'available',\r\n              condition_grade: 'new',\r\n              location: 'HCM',\r\n              purchase_price: 2500000,\r\n              warranty_start_date: '2025-07-04',\r\n              warranty_end_date: '2026-07-04',\r\n              created_at: '2025-07-04T09:15:00Z',\r\n              import_time_display: '09:15 04/07/2025',\r\n              warranty_status: 'C√≤n hi·ªáu l·ª±c',\r\n              warranty_days_left: 364,\r\n              warranty_months_total: 12\r\n            }\r\n          ];\r\n          allProducts.push(...mockProducts);\r\n          message.info(`üì¶ Hi·ªÉn th·ªã ${mockProducts.length} s·∫£n ph·∫©m demo cho nh√† cung c·∫•p \"${supplier.name}\"`);\r\n        } else if (supplier.name.toLowerCase().includes('abc')) {\r\n          const mockProducts = [\r\n            {\r\n              id: `demo_${supplier.id}_1`,\r\n              serial_number: 'SN101',\r\n              product_name: 'Motherboard ASUS',\r\n              product_sku: 'MB_ASUS',\r\n              supplier_name: supplier.name,\r\n              supplier_code: supplier.code,\r\n              supplier_id: supplier.id,\r\n              status: 'available',\r\n              condition_grade: 'new',\r\n              location: 'HCM',\r\n              purchase_price: 1800000,\r\n              warranty_start_date: '2025-07-01',\r\n              warranty_end_date: '2026-07-01',\r\n              created_at: '2025-07-01T10:00:00Z',\r\n              import_time_display: '10:00 01/07/2025',\r\n              warranty_status: 'C√≤n hi·ªáu l·ª±c',\r\n              warranty_days_left: 361,\r\n              warranty_months_total: 12\r\n            }\r\n          ];\r\n          allProducts.push(...mockProducts);\r\n          message.info(`üì¶ Hi·ªÉn th·ªã ${mockProducts.length} s·∫£n ph·∫©m demo cho nh√† cung c·∫•p \"${supplier.name}\"`);\r\n        }\r\n      }\r\n      \r\n      // Remove duplicates and set results\r\n      const uniqueProducts = allProducts.filter((product, index, self) => \r\n        index === self.findIndex(p => p.serial_number === product.serial_number)\r\n      );\r\n      \r\n      console.log(`‚úÖ Final result: ${uniqueProducts.length} unique products for supplier ${supplier.name}`);\r\n      setSupplierProducts(uniqueProducts);\r\n      \r\n      if (uniqueProducts.length > 0) {\r\n        message.success(`üéØ T√¨m th·∫•y ${uniqueProducts.length} s·∫£n ph·∫©m t·ª´ nh√† cung c·∫•p \"${supplier.name}\"`);\r\n      } else {\r\n        message.warning(`‚ö†Ô∏è Nh√† cung c·∫•p \"${supplier.name}\" ch∆∞a c√≥ s·∫£n ph·∫©m n√†o ho·∫∑c ch∆∞a c√≥ d·ªØ li·ªáu trong h·ªá th·ªëng`);\r\n      }\r\n      \r\n    } catch (error) {\r\n      console.error('Error fetching supplier products:', error);\r\n      setSupplierProducts([]);\r\n      message.error('L·ªói khi t·∫£i danh s√°ch s·∫£n ph·∫©m c·ªßa nh√† cung c·∫•p');\r\n    } finally {\r\n      setSupplierProductsLoading(false);\r\n    }\r\n  };\r\n\r\n  const columns = [\r\n    {\r\n      title: 'M√£ NCC',\r\n      dataIndex: 'code',\r\n      key: 'code',\r\n      width: 80,\r\n      fixed: 'left',\r\n      render: (text) => <Text strong style={{ color: '#1890ff' }}>{text}</Text>\r\n    },\r\n    {\r\n      title: 'T√™n nh√† cung c·∫•p',\r\n      dataIndex: 'name',\r\n      key: 'name',\r\n      width: 200,\r\n      fixed: 'left',\r\n      render: (text) => (\r\n        <div style={{ display: 'flex', alignItems: 'center' }}>\r\n          <Avatar \r\n            size=\"small\" \r\n            icon={<ShopOutlined />} \r\n            style={{ \r\n              backgroundColor: '#f0f0f0', \r\n              color: '#1890ff',\r\n              marginRight: 8 \r\n            }} \r\n          />\r\n          <Text strong style={{ fontSize: '13px' }}>{text}</Text>\r\n        </div>\r\n      )\r\n    },\r\n    {\r\n      title: 'Ng∆∞·ªùi li√™n h·ªá',\r\n      dataIndex: 'contact_person',\r\n      key: 'contact_person',\r\n      width: 140,\r\n      render: (text) => (\r\n        <div style={{ fontSize: '12px' }}>\r\n          {text ? (\r\n            <div style={{ display: 'flex', alignItems: 'center' }}>\r\n              <UserOutlined style={{ marginRight: 4, color: '#666' }} />\r\n              <Text ellipsis style={{ maxWidth: '100px' }}>{text}</Text>\r\n            </div>\r\n          ) : (\r\n            <Text type=\"secondary\" style={{ fontSize: '11px' }}>Ch∆∞a c√≥</Text>\r\n          )}\r\n        </div>\r\n      )\r\n    },\r\n    {\r\n      title: 'Li√™n h·ªá',\r\n      key: 'contact_info',\r\n      width: 160,\r\n      render: (_, record) => (\r\n        <div style={{ fontSize: '11px', lineHeight: '1.2' }}>\r\n          {record.phone && (\r\n            <div style={{ \r\n              display: 'flex', \r\n              alignItems: 'center', \r\n              marginBottom: 2,\r\n              color: '#666' \r\n            }}>\r\n              <PhoneOutlined style={{ marginRight: 4, fontSize: '10px' }} />\r\n              <Text ellipsis style={{ maxWidth: '110px', fontSize: '11px' }}>\r\n                {record.phone}\r\n              </Text>\r\n            </div>\r\n          )}\r\n          {record.email && (\r\n            <div style={{ \r\n              display: 'flex', \r\n              alignItems: 'center',\r\n              color: '#666' \r\n            }}>\r\n              <MailOutlined style={{ marginRight: 4, fontSize: '10px' }} />\r\n              <Text ellipsis style={{ maxWidth: '110px', fontSize: '11px' }}>\r\n                {record.email}\r\n              </Text>\r\n            </div>\r\n          )}\r\n          {!record.phone && !record.email && (\r\n            <Text type=\"secondary\" style={{ fontSize: '11px' }}>Ch∆∞a c√≥</Text>\r\n          )}\r\n        </div>\r\n      )\r\n    },\r\n    {\r\n      title: 'ƒê·ªãa ch·ªâ',\r\n      key: 'address_info',\r\n      width: 180,\r\n      render: (_, record) => (\r\n        <div style={{ fontSize: '11px', lineHeight: '1.3' }}>\r\n          {record.address && (\r\n            <div style={{ marginBottom: 2, color: '#333' }}>\r\n              <Text ellipsis style={{ maxWidth: '150px', fontSize: '11px' }}>\r\n                {record.address}\r\n              </Text>\r\n            </div>\r\n          )}\r\n          {record.city && (\r\n            <div style={{ color: '#666' }}>\r\n              <HomeOutlined style={{ marginRight: 4, fontSize: '10px' }} />\r\n              <Text style={{ fontSize: '11px' }}>{record.city}</Text>\r\n            </div>\r\n          )}\r\n          {!record.address && !record.city && (\r\n            <Text type=\"secondary\" style={{ fontSize: '11px' }}>Ch∆∞a c√≥</Text>\r\n          )}\r\n        </div>\r\n      )\r\n    },\r\n    {\r\n      title: 'C√¥ng n·ª£',\r\n      dataIndex: 'total_debt',\r\n      key: 'total_debt',\r\n      width: 100,\r\n      align: 'right',\r\n      render: (debt) => (\r\n        <div style={{ textAlign: 'right' }}>\r\n          <Text \r\n            strong \r\n            style={{ \r\n              color: debt > 0 ? '#ff4d4f' : '#52c41a',\r\n              fontSize: '12px'\r\n            }}\r\n          >\r\n            {formatCurrency(debt || 0)}\r\n          </Text>\r\n        </div>\r\n      ),\r\n      sorter: (a, b) => (a.total_debt || 0) - (b.total_debt || 0)\r\n    },\r\n    {\r\n      title: 'H·∫°n m·ª©c',\r\n      dataIndex: 'credit_limit',\r\n      key: 'credit_limit',\r\n      width: 100,\r\n      align: 'right',\r\n      render: (limit) => (\r\n        <div style={{ textAlign: 'right' }}>\r\n          <Text style={{ color: '#1890ff', fontSize: '12px' }}>\r\n            {formatCurrency(limit || 0)}\r\n          </Text>\r\n        </div>\r\n      )\r\n    },\r\n    {\r\n      title: 'Thanh to√°n',\r\n      dataIndex: 'payment_terms',\r\n      key: 'payment_terms',\r\n      width: 100,\r\n      render: (terms) => (\r\n        <Tag \r\n          color=\"blue\" \r\n          style={{ \r\n            fontSize: '11px',\r\n            margin: 0,\r\n            padding: '2px 6px',\r\n            lineHeight: '1.2'\r\n          }}\r\n        >\r\n          {terms || 'Kh√¥ng x√°c ƒë·ªãnh'}\r\n        </Tag>\r\n      )\r\n    },\r\n    {\r\n      title: 'Thao t√°c',\r\n      key: 'actions',\r\n      width: 120,\r\n      fixed: 'right',\r\n      render: (_, record) => (\r\n        <Space size=\"small\">\r\n          <Tooltip title=\"Xem chi ti·∫øt nh√† cung c·∫•p\">\r\n            <Button\r\n              type=\"text\"\r\n              size=\"small\"\r\n              icon={<EyeOutlined />}\r\n              onClick={() => showSupplierDetail(record)}\r\n              style={{ padding: '2px 4px' }}\r\n            />\r\n          </Tooltip>\r\n          <Tooltip title=\"Xem s·∫£n ph·∫©m ƒë√£ cung c·∫•p\">\r\n            <Button\r\n              type=\"text\"\r\n              size=\"small\"\r\n              icon={<ShopOutlined />}\r\n              onClick={() => showSupplierProducts(record)}\r\n              style={{ padding: '2px 4px', color: '#52c41a' }}\r\n            />\r\n          </Tooltip>\r\n          <Tooltip title=\"Ch·ªânh s·ª≠a\">\r\n            <Button\r\n              type=\"text\"\r\n              size=\"small\"\r\n              icon={<EditOutlined />}\r\n              onClick={() => showModal(record)}\r\n              style={{ padding: '2px 4px', color: '#1890ff' }}\r\n            />\r\n          </Tooltip>\r\n          <Popconfirm\r\n            title=\"B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a nh√† cung c·∫•p n√†y?\"\r\n            onConfirm={() => handleDelete(record.id)}\r\n            okText=\"C√≥\"\r\n            cancelText=\"Kh√¥ng\"\r\n            placement=\"topRight\"\r\n          >\r\n            <Tooltip title=\"X√≥a\">\r\n              <Button\r\n                type=\"text\"\r\n                danger\r\n                size=\"small\"\r\n                icon={<DeleteOutlined />}\r\n                style={{ padding: '2px 4px' }}\r\n              />\r\n            </Tooltip>\r\n          </Popconfirm>\r\n        </Space>\r\n      )\r\n    }\r\n  ];\r\n\r\n  return (\r\n    <div style={{ padding: '20px' }}>\r\n      {/* Header th·ªëng k√™ - Responsive */}\r\n      <Row gutter={[16, 16]} style={{ marginBottom: 20 }}>\r\n        <Col xs={24} sm={8}>\r\n          <Card size=\"small\" style={{ height: '100%' }}>\r\n            <Statistic\r\n              title=\"T·ªïng nh√† cung c·∫•p\"\r\n              value={stats.total}\r\n              prefix={<ShopOutlined />}\r\n              valueStyle={{ color: '#1890ff', fontSize: '20px' }}\r\n            />\r\n          </Card>\r\n        </Col>\r\n        <Col xs={24} sm={8}>\r\n          <Card size=\"small\" style={{ height: '100%' }}>\r\n            <Statistic\r\n              title=\"T·ªïng c√¥ng n·ª£\"\r\n              value={stats.totalDebt}\r\n              formatter={value => formatCurrency(value)}\r\n              prefix={<CreditCardOutlined />}\r\n              valueStyle={{ color: '#ff4d4f', fontSize: '20px' }}\r\n            />\r\n          </Card>\r\n        </Col>\r\n        <Col xs={24} sm={8}>\r\n          <Card size=\"small\" style={{ height: '100%' }}>\r\n            <Statistic\r\n              title=\"T·ªïng h·∫°n m·ª©c\"\r\n              value={stats.totalCreditLimit}\r\n              formatter={value => formatCurrency(value)}\r\n              prefix={<BankOutlined />}\r\n              valueStyle={{ color: '#52c41a', fontSize: '20px' }}\r\n            />\r\n          </Card>\r\n        </Col>\r\n      </Row>\r\n\r\n      {/* Main Content */}\r\n      <Card \r\n        title={\r\n          <div style={{ display: 'flex', alignItems: 'center' }}>\r\n            <ContactsOutlined style={{ marginRight: 8 }} />\r\n            Qu·∫£n l√Ω nh√† cung c·∫•p\r\n          </div>\r\n        }\r\n        size=\"small\"\r\n      >\r\n        {/* Filters - Responsive */}\r\n        <Row gutter={[16, 16]} style={{ marginBottom: 16 }}>\r\n          <Col xs={24} sm={16} md={18}>\r\n            <Search\r\n              placeholder=\"T√¨m theo t√™n, m√£ NCC, ng∆∞·ªùi li√™n h·ªá...\"\r\n              value={searchText}\r\n              onChange={(e) => setSearchText(e.target.value)}\r\n              onSearch={fetchSuppliers}\r\n              enterButton={<SearchOutlined />}\r\n              allowClear\r\n              size=\"middle\"\r\n            />\r\n          </Col>\r\n          <Col xs={24} sm={8} md={6} style={{ textAlign: 'right' }}>\r\n            <Button\r\n              type=\"primary\"\r\n              icon={<PlusOutlined />}\r\n              onClick={() => showModal()}\r\n              size=\"middle\"\r\n              block\r\n            >\r\n              Th√™m nh√† cung c·∫•p\r\n            </Button>\r\n          </Col>\r\n        </Row>\r\n\r\n        {/* Table v·ªõi responsive scroll */}\r\n        <Table\r\n          columns={columns}\r\n          dataSource={suppliers}\r\n          rowKey=\"id\"\r\n          loading={loading}\r\n          size=\"small\"\r\n          pagination={{\r\n            total: suppliers.length,\r\n            pageSize: 15,\r\n            showSizeChanger: true,\r\n            showQuickJumper: true,\r\n            showTotal: (total, range) => \r\n              `${range[0]}-${range[1]} c·ªßa ${total} nh√† cung c·∫•p`,\r\n            responsive: true,\r\n            size: 'small'\r\n          }}\r\n          scroll={{ \r\n            x: 1100,\r\n            y: 'calc(100vh - 450px)'\r\n          }}\r\n          style={{ \r\n            backgroundColor: '#fafafa',\r\n            borderRadius: '6px'\r\n          }}\r\n        />\r\n      </Card>\r\n\r\n      {/* Modal th√™m/s·ª≠a nh√† cung c·∫•p */}\r\n      <Modal\r\n        title={\r\n          <div style={{ display: 'flex', alignItems: 'center' }}>\r\n            <ShopOutlined style={{ marginRight: 8 }} />\r\n            {editingSupplier ? 'C·∫≠p nh·∫≠t nh√† cung c·∫•p' : 'Th√™m nh√† cung c·∫•p m·ªõi'}\r\n          </div>\r\n        }\r\n        open={isModalVisible}\r\n        onCancel={handleCancel}\r\n        footer={null}\r\n        width={800}\r\n        style={{ top: 20 }}\r\n      >\r\n        <Form\r\n          form={form}\r\n          layout=\"vertical\"\r\n          onFinish={handleSubmit}\r\n          autoComplete=\"off\"\r\n          size=\"middle\"\r\n        >\r\n          <Row gutter={16}>\r\n            <Col span={12}>\r\n              <Form.Item\r\n                label=\"T√™n nh√† cung c·∫•p\"\r\n                name=\"name\"\r\n                rules={[{ required: true, message: 'Vui l√≤ng nh·∫≠p t√™n nh√† cung c·∫•p' }]}\r\n              >\r\n                <Input prefix={<ShopOutlined />} placeholder=\"Nh·∫≠p t√™n nh√† cung c·∫•p\" />\r\n              </Form.Item>\r\n            </Col>\r\n            <Col span={12}>\r\n              <Form.Item\r\n                label=\"Ng∆∞·ªùi li√™n h·ªá\"\r\n                name=\"contact_person\"\r\n              >\r\n                <Input prefix={<UserOutlined />} placeholder=\"Nh·∫≠p t√™n ng∆∞·ªùi li√™n h·ªá\" />\r\n              </Form.Item>\r\n            </Col>\r\n          </Row>\r\n\r\n          <Row gutter={16}>\r\n            <Col span={12}>\r\n              <Form.Item\r\n                label=\"S·ªë ƒëi·ªán tho·∫°i\"\r\n                name=\"phone\"\r\n              >\r\n                <Input prefix={<PhoneOutlined />} placeholder=\"Nh·∫≠p s·ªë ƒëi·ªán tho·∫°i\" />\r\n              </Form.Item>\r\n            </Col>\r\n            <Col span={12}>\r\n              <Form.Item\r\n                label=\"Email\"\r\n                name=\"email\"\r\n                rules={[{ type: 'email', message: 'Email kh√¥ng h·ª£p l·ªá' }]}\r\n              >\r\n                <Input prefix={<MailOutlined />} placeholder=\"Nh·∫≠p email\" />\r\n              </Form.Item>\r\n            </Col>\r\n          </Row>\r\n\r\n          <Row gutter={16}>\r\n            <Col span={12}>\r\n              <Form.Item\r\n                label=\"ƒê·ªãa ch·ªâ\"\r\n                name=\"address\"\r\n              >\r\n                <Input prefix={<HomeOutlined />} placeholder=\"Nh·∫≠p ƒë·ªãa ch·ªâ\" />\r\n              </Form.Item>\r\n            </Col>\r\n            <Col span={12}>\r\n              <Form.Item\r\n                label=\"Th√†nh ph·ªë\"\r\n                name=\"city\"\r\n              >\r\n                <Input placeholder=\"Nh·∫≠p th√†nh ph·ªë\" />\r\n              </Form.Item>\r\n            </Col>\r\n          </Row>\r\n\r\n          <Row gutter={16}>\r\n            <Col span={12}>\r\n              <Form.Item\r\n                label=\"M√£ s·ªë thu·∫ø\"\r\n                name=\"tax_code\"\r\n              >\r\n                <Input placeholder=\"Nh·∫≠p m√£ s·ªë thu·∫ø\" />\r\n              </Form.Item>\r\n            </Col>\r\n            <Col span={12}>\r\n              <Form.Item\r\n                label=\"ƒêi·ªÅu kho·∫£n thanh to√°n\"\r\n                name=\"payment_terms\"\r\n                initialValue=\"30 ng√†y\"\r\n              >\r\n                <Input placeholder=\"VD: 30 ng√†y, Thanh to√°n ngay...\" />\r\n              </Form.Item>\r\n            </Col>\r\n          </Row>\r\n\r\n          <Row gutter={16}>\r\n            <Col span={12}>\r\n              <Form.Item\r\n                label=\"H·∫°n m·ª©c t√≠n d·ª•ng (VNƒê)\"\r\n                name=\"credit_limit\"\r\n                initialValue={0}\r\n              >\r\n                <Input \r\n                  type=\"number\" \r\n                  min={0} \r\n                  placeholder=\"0\"\r\n                  prefix={<CreditCardOutlined />}\r\n                />\r\n              </Form.Item>\r\n            </Col>\r\n            <Col span={12}>\r\n              <Form.Item\r\n                label=\"C√¥ng n·ª£ hi·ªán t·∫°i (VNƒê)\"\r\n                name=\"total_debt\"\r\n                initialValue={0}\r\n              >\r\n                <Input \r\n                  type=\"number\" \r\n                  min={0} \r\n                  placeholder=\"0\"\r\n                  prefix={<BankOutlined />}\r\n                />\r\n              </Form.Item>\r\n            </Col>\r\n          </Row>\r\n\r\n          <Form.Item\r\n            label=\"Ghi ch√∫\"\r\n            name=\"notes\"\r\n          >\r\n            <Input.TextArea rows={3} placeholder=\"Nh·∫≠p ghi ch√∫\" />\r\n          </Form.Item>\r\n\r\n          <Form.Item style={{ textAlign: 'right', marginBottom: 0 }}>\r\n            <Space>\r\n              <Button onClick={handleCancel}>\r\n                H·ªßy\r\n              </Button>\r\n              <Button type=\"primary\" htmlType=\"submit\">\r\n                {editingSupplier ? 'C·∫≠p nh·∫≠t' : 'Th√™m m·ªõi'}\r\n              </Button>\r\n            </Space>\r\n          </Form.Item>\r\n        </Form>\r\n      </Modal>\r\n\r\n      {/* Drawer chi ti·∫øt nh√† cung c·∫•p */}\r\n      <Drawer\r\n        title={\r\n          <div style={{ display: 'flex', alignItems: 'center' }}>\r\n            <EyeOutlined style={{ marginRight: 8 }} />\r\n            Th√¥ng tin chi ti·∫øt nh√† cung c·∫•p\r\n          </div>\r\n        }\r\n        placement=\"right\"\r\n        onClose={() => setIsDetailDrawerVisible(false)}\r\n        open={isDetailDrawerVisible}\r\n        width={500}\r\n      >\r\n        {selectedSupplier && (\r\n          <div>\r\n            <Card title=\"Th√¥ng tin c∆° b·∫£n\" size=\"small\" style={{ marginBottom: 16 }}>\r\n              <div style={{ lineHeight: '1.8' }}>\r\n                <p><Text strong>M√£ nh√† cung c·∫•p:</Text> {selectedSupplier.code}</p>\r\n                <p><Text strong>T√™n:</Text> {selectedSupplier.name}</p>\r\n                <p><Text strong>Ng∆∞·ªùi li√™n h·ªá:</Text> {selectedSupplier.contact_person || 'Ch∆∞a c√≥'}</p>\r\n                <p><Text strong>ƒêi·ªán tho·∫°i:</Text> {selectedSupplier.phone || 'Ch∆∞a c√≥'}</p>\r\n                <p><Text strong>Email:</Text> {selectedSupplier.email || 'Ch∆∞a c√≥'}</p>\r\n                <p><Text strong>M√£ s·ªë thu·∫ø:</Text> {selectedSupplier.tax_code || 'Ch∆∞a c√≥'}</p>\r\n              </div>\r\n            </Card>\r\n\r\n            <Card title=\"Th√¥ng tin t√†i ch√≠nh\" size=\"small\" style={{ marginBottom: 16 }}>\r\n              <Row gutter={16}>\r\n                <Col span={12}>\r\n                  <Statistic\r\n                    title=\"C√¥ng n·ª£ hi·ªán t·∫°i\"\r\n                    value={selectedSupplier.total_debt || 0}\r\n                    formatter={value => formatCurrency(value)}\r\n                    valueStyle={{ \r\n                      color: selectedSupplier.total_debt > 0 ? '#ff4d4f' : '#52c41a',\r\n                      fontSize: '18px'\r\n                    }}\r\n                  />\r\n                </Col>\r\n                <Col span={12}>\r\n                  <Statistic\r\n                    title=\"H·∫°n m·ª©c t√≠n d·ª•ng\"\r\n                    value={selectedSupplier.credit_limit || 0}\r\n                    formatter={value => formatCurrency(value)}\r\n                    valueStyle={{ color: '#1890ff', fontSize: '18px' }}\r\n                  />\r\n                </Col>\r\n              </Row>\r\n              <p style={{ marginTop: 16 }}>\r\n                <Text strong>ƒêi·ªÅu kho·∫£n thanh to√°n:</Text> {selectedSupplier.payment_terms || 'Kh√¥ng x√°c ƒë·ªãnh'}\r\n              </p>\r\n            </Card>\r\n\r\n            {(selectedSupplier.address || selectedSupplier.city) && (\r\n              <Card title=\"ƒê·ªãa ch·ªâ\" size=\"small\" style={{ marginBottom: 16 }}>\r\n                {selectedSupplier.address && <p>{selectedSupplier.address}</p>}\r\n                {selectedSupplier.city && <p><Text strong>Th√†nh ph·ªë:</Text> {selectedSupplier.city}</p>}\r\n              </Card>\r\n            )}\r\n\r\n            {selectedSupplier.notes && (\r\n              <Card title=\"Ghi ch√∫\" size=\"small\">\r\n                <p>{selectedSupplier.notes}</p>\r\n              </Card>\r\n            )}\r\n          </div>\r\n        )}\r\n      </Drawer>\r\n\r\n      {/* üéØ NEW: Drawer hi·ªÉn th·ªã s·∫£n ph·∫©m c·ªßa nh√† cung c·∫•p */}\r\n      <Drawer\r\n        title={\r\n          <div style={{ display: 'flex', alignItems: 'center' }}>\r\n            <ShopOutlined style={{ marginRight: 8, color: '#52c41a' }} />\r\n            S·∫£n ph·∫©m ƒë√£ cung c·∫•p b·ªüi: {selectedSupplier?.name}\r\n          </div>\r\n        }\r\n        placement=\"right\"\r\n        onClose={() => setIsProductsDrawerVisible(false)}\r\n        open={isProductsDrawerVisible}\r\n        width={1200}\r\n        style={{ zIndex: 1001 }}\r\n      >\r\n        {selectedSupplier && (\r\n          <div>\r\n            {/* Supplier Info Header */}\r\n            <Card size=\"small\" style={{ marginBottom: 16, background: 'linear-gradient(135deg, #f6ffed, #e8f4fd)' }}>\r\n              <Row gutter={16}>\r\n                <Col span={12}>\r\n                  <div>\r\n                    <Text strong style={{ fontSize: '16px', color: '#1890ff' }}>\r\n                      üè™ {selectedSupplier.name}\r\n                    </Text>\r\n                    <div style={{ fontSize: '12px', color: '#666', marginTop: '4px' }}>\r\n                      üìã M√£ NCC: {selectedSupplier.code}\r\n                    </div>\r\n                  </div>\r\n                </Col>\r\n                <Col span={12}>\r\n                  <div style={{ textAlign: 'right' }}>\r\n                    {selectedSupplier.phone && (\r\n                      <div style={{ fontSize: '12px', color: '#666' }}>\r\n                        üìû {selectedSupplier.phone}\r\n                      </div>\r\n                    )}\r\n                    {selectedSupplier.contact_person && (\r\n                      <div style={{ fontSize: '12px', color: '#666' }}>\r\n                        üë§ {selectedSupplier.contact_person}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </Col>\r\n              </Row>\r\n            </Card>\r\n\r\n            {/* Products Summary Stats */}\r\n            <Row gutter={[16, 16]} style={{ marginBottom: 16 }}>\r\n              <Col span={8}>\r\n                <Card size=\"small\" style={{ textAlign: 'center', borderLeft: '4px solid #52c41a' }}>\r\n                  <Statistic\r\n                    title=\"T·ªïng s·∫£n ph·∫©m\"\r\n                    value={supplierProducts.length}\r\n                    prefix={<ShopOutlined style={{ color: '#52c41a' }} />}\r\n                    valueStyle={{ color: '#52c41a', fontSize: '20px' }}\r\n                  />\r\n                </Card>\r\n              </Col>\r\n              <Col span={8}>\r\n                <Card size=\"small\" style={{ textAlign: 'center', borderLeft: '4px solid #1890ff' }}>\r\n                  <Statistic\r\n                    title=\"C√≥ s·∫µn\"\r\n                    value={supplierProducts.filter(p => p.status === 'available').length}\r\n                    prefix={<ShopOutlined style={{ color: '#1890ff' }} />}\r\n                    valueStyle={{ color: '#1890ff', fontSize: '20px' }}\r\n                  />\r\n                </Card>\r\n              </Col>\r\n              <Col span={8}>\r\n                <Card size=\"small\" style={{ textAlign: 'center', borderLeft: '4px solid #ff4d4f' }}>\r\n                  <Statistic\r\n                    title=\"ƒê√£ b√°n\"\r\n                    value={supplierProducts.filter(p => p.status === 'sold').length}\r\n                    prefix={<ShopOutlined style={{ color: '#ff4d4f' }} />}\r\n                    valueStyle={{ color: '#ff4d4f', fontSize: '20px' }}\r\n                  />\r\n                </Card>\r\n              </Col>\r\n            </Row>\r\n\r\n            {/* Products Table */}\r\n            <Card title=\"üì¶ Danh s√°ch s·∫£n ph·∫©m ƒë√£ cung c·∫•p\" size=\"small\">\r\n              <Table\r\n                columns={[\r\n                  {\r\n                    title: 'Serial Number',\r\n                    dataIndex: 'serial_number',\r\n                    key: 'serial_number',\r\n                    width: 120,\r\n                    fixed: 'left',\r\n                    render: (text) => (\r\n                      <Text copyable strong style={{ color: '#1890ff' }}>\r\n                        {text}\r\n                      </Text>\r\n                    )\r\n                  },\r\n                  {\r\n                    title: 'T√™n s·∫£n ph·∫©m',\r\n                    dataIndex: 'product_name',\r\n                    key: 'product_name',\r\n                    width: 180,\r\n                    render: (text) => (\r\n                      <div>\r\n                        <div style={{ fontWeight: 'bold' }}>\r\n                          üì¶ {text || 'S·∫£n ph·∫©m ch∆∞a x√°c ƒë·ªãnh'}\r\n                        </div>\r\n                      </div>\r\n                    )\r\n                  },\r\n                  {\r\n                    title: 'Ng√†y nh·∫≠p',\r\n                    dataIndex: 'import_time_display',\r\n                    key: 'import_date',\r\n                    width: 140,\r\n                    render: (text, record) => (\r\n                      <div style={{ fontSize: '12px' }}>\r\n                        üìÖ {text || formatDate(record.created_at) || 'Ch∆∞a x√°c ƒë·ªãnh'}\r\n                      </div>\r\n                    )\r\n                  },\r\n                  {\r\n                    title: 'Gi√° nh·∫≠p',\r\n                    dataIndex: 'purchase_price',\r\n                    key: 'purchase_price',\r\n                    width: 100,\r\n                    align: 'right',\r\n                    render: (price) => (\r\n                      <Text strong style={{ color: '#52c41a', fontSize: '12px' }}>\r\n                        {formatCurrency(price || 0)}\r\n                      </Text>\r\n                    )\r\n                  },\r\n                  {\r\n                    title: 'Tr·∫°ng th√°i',\r\n                    dataIndex: 'status',\r\n                    key: 'status',\r\n                    width: 100,\r\n                    render: (status) => {\r\n                      const statusMap = {\r\n                        'available': { color: 'green', text: 'C√≥ s·∫µn' },\r\n                        'sold': { color: 'red', text: 'ƒê√£ b√°n' },\r\n                        'damaged': { color: 'orange', text: 'H·ªèng' },\r\n                        'reserved': { color: 'blue', text: 'ƒê√£ ƒë·∫∑t' }\r\n                      };\r\n                      const statusInfo = statusMap[status] || { color: 'default', text: status };\r\n                      return <Tag color={statusInfo.color}>{statusInfo.text}</Tag>;\r\n                    }\r\n                  },\r\n                  {\r\n                    title: 'T√¨nh tr·∫°ng',\r\n                    dataIndex: 'condition_grade',\r\n                    key: 'condition',\r\n                    width: 100,\r\n                    render: (condition) => {\r\n                      const conditionMap = {\r\n                        'new': { color: 'green', text: 'M·ªõi' },\r\n                        'like_new': { color: 'cyan', text: 'Nh∆∞ m·ªõi' },\r\n                        'good': { color: 'blue', text: 'T·ªët' },\r\n                        'fair': { color: 'orange', text: 'Kh√°' },\r\n                        'poor': { color: 'red', text: 'K√©m' }\r\n                      };\r\n                      const conditionInfo = conditionMap[condition] || { color: 'default', text: condition || 'M·ªõi' };\r\n                      return <Tag color={conditionInfo.color}>{conditionInfo.text}</Tag>;\r\n                    }\r\n                  },\r\n                  {\r\n                    title: 'V·ªã tr√≠',\r\n                    dataIndex: 'location',\r\n                    key: 'location',\r\n                    width: 80,\r\n                    render: (location) => (\r\n                      <Tag icon={<HomeOutlined />} color=\"blue\">\r\n                        {location || 'HCM'}\r\n                      </Tag>\r\n                    )\r\n                  },\r\n                  {\r\n                    title: 'Th·ªùi gian b·∫£o h√†nh',\r\n                    key: 'warranty',\r\n                    width: 150,\r\n                    render: (_, record) => {\r\n                      if (record.warranty_start_date && record.warranty_end_date) {\r\n                        const startDate = new Date(record.warranty_start_date);\r\n                        const endDate = new Date(record.warranty_end_date);\r\n                        const diffMonths = Math.round((endDate - startDate) / (1000 * 60 * 60 * 24 * 30));\r\n                        \r\n                        return (\r\n                          <div style={{ fontSize: '11px' }}>\r\n                            <div style={{ fontWeight: 'bold', color: '#52c41a' }}>\r\n                              üõ°Ô∏è {diffMonths} th√°ng\r\n                            </div>\r\n                            <div style={{ color: '#666' }}>\r\n                              üìÖ {startDate.toLocaleDateString('vi-VN')} ‚Üí {endDate.toLocaleDateString('vi-VN')}\r\n                            </div>\r\n                          </div>\r\n                        );\r\n                      }\r\n                      return <Text type=\"secondary\" style={{ fontSize: '11px' }}>Ch∆∞a c√≥ b·∫£o h√†nh</Text>;\r\n                    }\r\n                  },\r\n                  {\r\n                    title: 'Th√¥ng tin li√™n h·ªá',\r\n                    key: 'contact_details',\r\n                    width: 200,\r\n                    render: (_, record) => (\r\n                      <div style={{ fontSize: '11px', lineHeight: '1.3' }}>\r\n                        <div style={{ fontWeight: 'bold', color: '#1890ff' }}>\r\n                          üè™ {selectedSupplier.name}\r\n                        </div>\r\n                        {selectedSupplier.phone && (\r\n                          <div style={{ color: '#666' }}>\r\n                            üìû {selectedSupplier.phone}\r\n                          </div>\r\n                        )}\r\n                        {selectedSupplier.email && (\r\n                          <div style={{ color: '#666' }}>\r\n                            üìß {selectedSupplier.email}\r\n                          </div>\r\n                        )}\r\n                        {selectedSupplier.address && (\r\n                          <div style={{ color: '#666' }}>\r\n                            üìç {selectedSupplier.address}\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    )\r\n                  }\r\n                ]}\r\n                dataSource={supplierProducts}\r\n                rowKey={(record) => record.id || record.serial_number}\r\n                loading={supplierProductsLoading}\r\n                pagination={{\r\n                  pageSize: 20,\r\n                  showSizeChanger: true,\r\n                  showTotal: (total, range) => \r\n                    `${range[0]}-${range[1]} c·ªßa ${total} s·∫£n ph·∫©m`,\r\n                  size: 'small'\r\n                }}\r\n                scroll={{ x: 1100, y: 'calc(100vh - 400px)' }}\r\n                size=\"small\"\r\n                locale={{\r\n                  emptyText: supplierProductsLoading ? 'ƒêang t·∫£i...' : 'Nh√† cung c·∫•p n√†y ch∆∞a cung c·∫•p s·∫£n ph·∫©m n√†o'\r\n                }}\r\n              />\r\n            </Card>\r\n          </div>\r\n        )}\r\n      </Drawer>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SuppliersPage; "],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OACEC,IAAI,CACJC,KAAK,CACLC,MAAM,CACNC,KAAK,CACLC,KAAK,CACLC,KAAK,CACLC,IAAI,CACJC,OAAO,CACPC,GAAG,CACHC,GAAG,CACHC,SAAS,CACTC,GAAG,CACHC,OAAO,CACPC,UAAU,CACVC,MAAM,CACNC,UAAU,CACVC,MAAM,KACD,MAAM,CACb,OACEC,YAAY,CACZC,cAAc,CACdC,YAAY,CACZC,cAAc,CACdC,YAAY,CACZC,aAAa,CACbC,YAAY,CACZC,YAAY,CACZC,kBAAkB,CAClBC,WAAW,CACXC,YAAY,CACZC,YAAY,CACZC,gBAAgB,KACX,mBAAmB,CAC1B,MAAO,CAAAC,GAAG,EAAIC,YAAY,CAAEC,UAAU,CAAEC,cAAc,CAAEC,UAAU,KAAQ,iBAAiB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE5F,KAAM,CAAEC,MAAO,CAAC,CAAGpC,KAAK,CACxB,KAAM,CAAEqC,IAAK,CAAC,CAAGzB,UAAU,CAE3B,KAAM,CAAA0B,aAAa,CAAGA,CAAA,GAAM,CAC1B,KAAM,CAACC,SAAS,CAAEC,YAAY,CAAC,CAAG7C,QAAQ,CAAC,EAAE,CAAC,CAC9C,KAAM,CAAC8C,OAAO,CAAEC,UAAU,CAAC,CAAG/C,QAAQ,CAAC,KAAK,CAAC,CAC7C,KAAM,CAACgD,cAAc,CAAEC,iBAAiB,CAAC,CAAGjD,QAAQ,CAAC,KAAK,CAAC,CAC3D,KAAM,CAACkD,qBAAqB,CAAEC,wBAAwB,CAAC,CAAGnD,QAAQ,CAAC,KAAK,CAAC,CACzE,KAAM,CAACoD,eAAe,CAAEC,kBAAkB,CAAC,CAAGrD,QAAQ,CAAC,IAAI,CAAC,CAC5D,KAAM,CAACsD,gBAAgB,CAAEC,mBAAmB,CAAC,CAAGvD,QAAQ,CAAC,IAAI,CAAC,CAC9D,KAAM,CAACwD,UAAU,CAAEC,aAAa,CAAC,CAAGzD,QAAQ,CAAC,EAAE,CAAC,CAChD,KAAM,CAAC0D,KAAK,CAAEC,QAAQ,CAAC,CAAG3D,QAAQ,CAAC,CACjC4D,KAAK,CAAE,CAAC,CACRC,SAAS,CAAE,CAAC,CACZC,gBAAgB,CAAE,CACpB,CAAC,CAAC,CACF,KAAM,CAACC,gBAAgB,CAAEC,mBAAmB,CAAC,CAAGhE,QAAQ,CAAC,EAAE,CAAC,CAC5D,KAAM,CAACiE,uBAAuB,CAAEC,0BAA0B,CAAC,CAAGlE,QAAQ,CAAC,KAAK,CAAC,CAC7E,KAAM,CAACmE,uBAAuB,CAAEC,0BAA0B,CAAC,CAAGpE,QAAQ,CAAC,KAAK,CAAC,CAC7E,KAAM,CAACqE,IAAI,CAAC,CAAG7D,IAAI,CAAC8D,OAAO,CAAC,CAAC,CAE7BrE,SAAS,CAAC,IAAM,CACdsE,cAAc,CAAC,CAAC,CAClB,CAAC,CAAE,CAACf,UAAU,CAAC,CAAC,CAEhB,KAAM,CAAAe,cAAc,CAAG,KAAAA,CAAA,GAAY,CACjC,GAAI,CACFxB,UAAU,CAAC,IAAI,CAAC,CAChB,KAAM,CAAAyB,QAAQ,CAAG,KAAM,CAAAvC,YAAY,CAACwC,MAAM,CAAC,CACzCC,MAAM,CAAElB,UACV,CAAC,CAAC,CAEF,GAAIgB,QAAQ,CAACG,IAAI,CAACC,OAAO,CAAE,CACzB/B,YAAY,CAAC2B,QAAQ,CAACG,IAAI,CAACA,IAAI,CAAC,CAChCE,cAAc,CAACL,QAAQ,CAACG,IAAI,CAACA,IAAI,CAAC,CACpC,CACF,CAAE,MAAOG,KAAK,CAAE,CACdrE,OAAO,CAACqE,KAAK,CAAC,oCAAoC,CAAC,CACnDC,OAAO,CAACD,KAAK,CAAC,2BAA2B,CAAEA,KAAK,CAAC,CACnD,CAAC,OAAS,CACR/B,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAED,KAAM,CAAA8B,cAAc,CAAIG,YAAY,EAAK,CACvC,KAAM,CAAAtB,KAAK,CAAG,CACZE,KAAK,CAAEoB,YAAY,CAACC,MAAM,CAC1BpB,SAAS,CAAEmB,YAAY,CAACE,MAAM,CAAC,CAACC,GAAG,CAAEC,CAAC,GAAKD,GAAG,EAAIC,CAAC,CAACC,UAAU,EAAI,CAAC,CAAC,CAAE,CAAC,CAAC,CACxEvB,gBAAgB,CAAEkB,YAAY,CAACE,MAAM,CAAC,CAACC,GAAG,CAAEC,CAAC,GAAKD,GAAG,EAAIC,CAAC,CAACE,YAAY,EAAI,CAAC,CAAC,CAAE,CAAC,CAClF,CAAC,CACD3B,QAAQ,CAACD,KAAK,CAAC,CACjB,CAAC,CAED,KAAM,CAAA6B,SAAS,CAAG,QAAAA,CAAA,CAAqB,IAApB,CAAAC,QAAQ,CAAAC,SAAA,CAAAR,MAAA,IAAAQ,SAAA,MAAAC,SAAA,CAAAD,SAAA,IAAG,IAAI,CAChCpC,kBAAkB,CAACmC,QAAQ,CAAC,CAC5BvC,iBAAiB,CAAC,IAAI,CAAC,CACvB,GAAIuC,QAAQ,CAAE,CACZnB,IAAI,CAACsB,cAAc,CAACH,QAAQ,CAAC,CAC/B,CAAC,IAAM,CACLnB,IAAI,CAACuB,WAAW,CAAC,CAAC,CACpB,CACF,CAAC,CAED,KAAM,CAAAC,YAAY,CAAGA,CAAA,GAAM,CACzB5C,iBAAiB,CAAC,KAAK,CAAC,CACxBI,kBAAkB,CAAC,IAAI,CAAC,CACxBgB,IAAI,CAACuB,WAAW,CAAC,CAAC,CACpB,CAAC,CAED,KAAM,CAAAE,YAAY,CAAG,KAAO,CAAAC,MAAM,EAAK,CACrC,GAAI,CACF,GAAI3C,eAAe,CAAE,CACnB,KAAM,CAAAnB,YAAY,CAAC+D,MAAM,CAAC5C,eAAe,CAAC6C,EAAE,CAAEF,MAAM,CAAC,CACrDtF,OAAO,CAACmE,OAAO,CAAC,kCAAkC,CAAC,CACrD,CAAC,IAAM,CACL,KAAM,CAAA3C,YAAY,CAACiE,MAAM,CAACH,MAAM,CAAC,CACjCtF,OAAO,CAACmE,OAAO,CAAC,6BAA6B,CAAC,CAChD,CAEAiB,YAAY,CAAC,CAAC,CACdtB,cAAc,CAAC,CAAC,CAClB,CAAE,MAAOO,KAAK,CAAE,CACdrE,OAAO,CAACqE,KAAK,iBAAAqB,MAAA,CAAY/C,eAAe,CAAG,UAAU,CAAG,KAAK,yBAAe,CAAC,CAC7E2B,OAAO,CAACD,KAAK,CAAC,wBAAwB,CAAEA,KAAK,CAAC,CAChD,CACF,CAAC,CAED,KAAM,CAAAsB,YAAY,CAAG,KAAO,CAAAH,EAAE,EAAK,CACjC,GAAI,CACF,KAAM,CAAAhE,YAAY,CAACoE,MAAM,CAACJ,EAAE,CAAC,CAC7BxF,OAAO,CAACmE,OAAO,CAAC,6BAA6B,CAAC,CAC9CL,cAAc,CAAC,CAAC,CAClB,CAAE,MAAOO,KAAK,CAAE,CACdrE,OAAO,CAACqE,KAAK,CAAC,0BAA0B,CAAC,CACzCC,OAAO,CAACD,KAAK,CAAC,0BAA0B,CAAEA,KAAK,CAAC,CAClD,CACF,CAAC,CAED,KAAM,CAAAwB,kBAAkB,CAAG,KAAO,CAAAd,QAAQ,EAAK,CAC7C,GAAI,CACF,KAAM,CAAAhB,QAAQ,CAAG,KAAM,CAAAvC,YAAY,CAACsE,OAAO,CAACf,QAAQ,CAACS,EAAE,CAAC,CACxD,GAAIzB,QAAQ,CAACG,IAAI,CAACC,OAAO,CAAE,CACzBrB,mBAAmB,CAACiB,QAAQ,CAACG,IAAI,CAACA,IAAI,CAAC,CACvCxB,wBAAwB,CAAC,IAAI,CAAC,CAChC,CACF,CAAE,MAAO2B,KAAK,CAAE,CACdrE,OAAO,CAACqE,KAAK,CAAC,oCAAoC,CAAC,CACrD,CACF,CAAC,CAED,KAAM,CAAA0B,oBAAoB,CAAG,KAAO,CAAAhB,QAAQ,EAAK,CAC/C,GAAI,CACFtB,0BAA0B,CAAC,IAAI,CAAC,CAChCX,mBAAmB,CAACiC,QAAQ,CAAC,CAC7BpB,0BAA0B,CAAC,IAAI,CAAC,CAEhCW,OAAO,CAAC0B,GAAG,gDAAAN,MAAA,CAAsCX,QAAQ,CAACkB,IAAI,WAAAP,MAAA,CAASX,QAAQ,CAACS,EAAE,KAAG,CAAC,CAEtF;AACA,GAAI,CACF,KAAM,CAAAzB,QAAQ,CAAG,KAAM,CAAAxC,GAAG,CAAC2E,GAAG,eAAAR,MAAA,CAAeX,QAAQ,CAACS,EAAE,aAAW,CAAC,CAEpE,GAAIzB,QAAQ,CAACG,IAAI,CAACC,OAAO,CAAE,CACzBG,OAAO,CAAC0B,GAAG,iBAAAN,MAAA,CAAY3B,QAAQ,CAACG,IAAI,CAACA,IAAI,CAACM,MAAM,+BAA6B,CAAC,CAC9EjB,mBAAmB,CAACQ,QAAQ,CAACG,IAAI,CAACA,IAAI,CAAC,CAEvC,GAAIH,QAAQ,CAACG,IAAI,CAACA,IAAI,CAACM,MAAM,CAAG,CAAC,CAAE,CACjCxE,OAAO,CAACmE,OAAO,kCAAAuB,MAAA,CAAgB3B,QAAQ,CAACG,IAAI,CAACA,IAAI,CAACM,MAAM,wDAAAkB,MAAA,CAA8BX,QAAQ,CAACkB,IAAI,MAAG,CAAC,CACzG,CAAC,IAAM,CACLjG,OAAO,CAACmG,OAAO,wCAAAT,MAAA,CAAqBX,QAAQ,CAACkB,IAAI,yEAAuC,CAAC,CAC3F,CACA,OAAQ;AACV,CACF,CAAE,MAAOG,QAAQ,CAAE,CACjB9B,OAAO,CAAC+B,IAAI,CAAC,+DAA+D,CAAED,QAAQ,CAAC,CACzF,CAEA;AACA,KAAM,CAAAE,WAAW,CAAG,EAAE,CAEtB;AACA,GAAI,CACF,KAAM,CAAAC,eAAe,CAAG,KAAM,CAAAhF,GAAG,CAAC2E,GAAG,CAAC,iBAAiB,CAAE,CACvDM,MAAM,CAAE,CACNC,CAAC,CAAE1B,QAAQ,CAACkB,IAAI,CAChBS,MAAM,CAAE,KAAK,CACbC,KAAK,CAAE,IACT,CACF,CAAC,CAAC,CAEF,GAAIJ,eAAe,CAACrC,IAAI,CAACC,OAAO,CAAE,CAChCG,OAAO,CAAC0B,GAAG,uBAAAN,MAAA,CAAaa,eAAe,CAACrC,IAAI,CAACA,IAAI,CAACM,MAAM,wBAAsB,CAAC,CAC/E8B,WAAW,CAACM,IAAI,CAAC,GAAGL,eAAe,CAACrC,IAAI,CAACA,IAAI,CAAC,CAChD,CACF,CAAE,MAAOG,KAAK,CAAE,CACdC,OAAO,CAAC+B,IAAI,CAAC,kBAAkB,CAAEhC,KAAK,CAAC,CACzC,CAEA;AACA,GAAIU,QAAQ,CAAC8B,IAAI,EAAIP,WAAW,CAAC9B,MAAM,GAAK,CAAC,CAAE,CAC7C,GAAI,CACF,KAAM,CAAAsC,qBAAqB,CAAG,KAAM,CAAAvF,GAAG,CAAC2E,GAAG,CAAC,iBAAiB,CAAE,CAC7DM,MAAM,CAAE,CACNC,CAAC,CAAE1B,QAAQ,CAAC8B,IAAI,CAChBH,MAAM,CAAE,KAAK,CACbC,KAAK,CAAE,IACT,CACF,CAAC,CAAC,CAEF,GAAIG,qBAAqB,CAAC5C,IAAI,CAACC,OAAO,CAAE,CACtCG,OAAO,CAAC0B,GAAG,uBAAAN,MAAA,CAAaoB,qBAAqB,CAAC5C,IAAI,CAACA,IAAI,CAACM,MAAM,oBAAkB,CAAC,CACjF8B,WAAW,CAACM,IAAI,CAAC,GAAGE,qBAAqB,CAAC5C,IAAI,CAACA,IAAI,CAAC,CACtD,CACF,CAAE,MAAOG,KAAK,CAAE,CACdC,OAAO,CAAC+B,IAAI,CAAC,kBAAkB,CAAEhC,KAAK,CAAC,CACzC,CACF,CAEA;AACA,GAAIiC,WAAW,CAAC9B,MAAM,GAAK,CAAC,CAAE,CAC5BF,OAAO,CAAC0B,GAAG,gDAAAN,MAAA,CAAsCX,QAAQ,CAACkB,IAAI,oCAAkC,CAAC,CAEjG,GAAIlB,QAAQ,CAACkB,IAAI,CAACc,WAAW,CAAC,CAAC,CAACC,QAAQ,CAAC,kBAAkB,CAAC,CAAE,CAC5D,KAAM,CAAAC,YAAY,CAAG,CACnB,CACEzB,EAAE,SAAAE,MAAA,CAAUX,QAAQ,CAACS,EAAE,MAAI,CAC3B0B,aAAa,CAAE,MAAM,CACrBC,YAAY,CAAE,MAAM,CACpBC,WAAW,CAAE,MAAM,CACnBC,aAAa,CAAEtC,QAAQ,CAACkB,IAAI,CAC5BqB,aAAa,CAAEvC,QAAQ,CAAC8B,IAAI,CAC5BU,WAAW,CAAExC,QAAQ,CAACS,EAAE,CACxBkB,MAAM,CAAE,MAAM,CACdc,eAAe,CAAE,KAAK,CACtBC,QAAQ,CAAE,KAAK,CACfC,cAAc,CAAE,MAAM,CACtBC,mBAAmB,CAAE,YAAY,CACjCC,iBAAiB,CAAE,YAAY,CAC/BC,UAAU,CAAE,sBAAsB,CAClCC,mBAAmB,CAAE,kBAAkB,CACvCC,eAAe,CAAE,cAAc,CAC/BC,kBAAkB,CAAE,GAAG,CACvBC,qBAAqB,CAAE,EACzB,CAAC,CACD,CACEzC,EAAE,SAAAE,MAAA,CAAUX,QAAQ,CAACS,EAAE,MAAI,CAC3B0B,aAAa,CAAE,MAAM,CACrBC,YAAY,CAAE,cAAc,CAC5BC,WAAW,CAAE,QAAQ,CACrBC,aAAa,CAAEtC,QAAQ,CAACkB,IAAI,CAC5BqB,aAAa,CAAEvC,QAAQ,CAAC8B,IAAI,CAC5BU,WAAW,CAAExC,QAAQ,CAACS,EAAE,CACxBkB,MAAM,CAAE,WAAW,CACnBc,eAAe,CAAE,KAAK,CACtBC,QAAQ,CAAE,KAAK,CACfC,cAAc,CAAE,OAAO,CACvBC,mBAAmB,CAAE,YAAY,CACjCC,iBAAiB,CAAE,YAAY,CAC/BC,UAAU,CAAE,sBAAsB,CAClCC,mBAAmB,CAAE,kBAAkB,CACvCC,eAAe,CAAE,cAAc,CAC/BC,kBAAkB,CAAE,GAAG,CACvBC,qBAAqB,CAAE,EACzB,CAAC,CACF,CACD3B,WAAW,CAACM,IAAI,CAAC,GAAGK,YAAY,CAAC,CACjCjH,OAAO,CAACkI,IAAI,oCAAAxC,MAAA,CAAgBuB,YAAY,CAACzC,MAAM,yDAAAkB,MAAA,CAAoCX,QAAQ,CAACkB,IAAI,MAAG,CAAC,CACtG,CAAC,IAAM,IAAIlB,QAAQ,CAACkB,IAAI,CAACc,WAAW,CAAC,CAAC,CAACC,QAAQ,CAAC,KAAK,CAAC,CAAE,CACtD,KAAM,CAAAC,YAAY,CAAG,CACnB,CACEzB,EAAE,SAAAE,MAAA,CAAUX,QAAQ,CAACS,EAAE,MAAI,CAC3B0B,aAAa,CAAE,OAAO,CACtBC,YAAY,CAAE,kBAAkB,CAChCC,WAAW,CAAE,SAAS,CACtBC,aAAa,CAAEtC,QAAQ,CAACkB,IAAI,CAC5BqB,aAAa,CAAEvC,QAAQ,CAAC8B,IAAI,CAC5BU,WAAW,CAAExC,QAAQ,CAACS,EAAE,CACxBkB,MAAM,CAAE,WAAW,CACnBc,eAAe,CAAE,KAAK,CACtBC,QAAQ,CAAE,KAAK,CACfC,cAAc,CAAE,OAAO,CACvBC,mBAAmB,CAAE,YAAY,CACjCC,iBAAiB,CAAE,YAAY,CAC/BC,UAAU,CAAE,sBAAsB,CAClCC,mBAAmB,CAAE,kBAAkB,CACvCC,eAAe,CAAE,cAAc,CAC/BC,kBAAkB,CAAE,GAAG,CACvBC,qBAAqB,CAAE,EACzB,CAAC,CACF,CACD3B,WAAW,CAACM,IAAI,CAAC,GAAGK,YAAY,CAAC,CACjCjH,OAAO,CAACkI,IAAI,oCAAAxC,MAAA,CAAgBuB,YAAY,CAACzC,MAAM,yDAAAkB,MAAA,CAAoCX,QAAQ,CAACkB,IAAI,MAAG,CAAC,CACtG,CACF,CAEA;AACA,KAAM,CAAAkC,cAAc,CAAG7B,WAAW,CAAC8B,MAAM,CAAC,CAACC,OAAO,CAAEC,KAAK,CAAEC,IAAI,GAC7DD,KAAK,GAAKC,IAAI,CAACC,SAAS,CAACC,CAAC,EAAIA,CAAC,CAACvB,aAAa,GAAKmB,OAAO,CAACnB,aAAa,CACzE,CAAC,CAED5C,OAAO,CAAC0B,GAAG,yBAAAN,MAAA,CAAoByC,cAAc,CAAC3D,MAAM,mCAAAkB,MAAA,CAAiCX,QAAQ,CAACkB,IAAI,CAAE,CAAC,CACrG1C,mBAAmB,CAAC4E,cAAc,CAAC,CAEnC,GAAIA,cAAc,CAAC3D,MAAM,CAAG,CAAC,CAAE,CAC7BxE,OAAO,CAACmE,OAAO,kCAAAuB,MAAA,CAAgByC,cAAc,CAAC3D,MAAM,wDAAAkB,MAAA,CAA8BX,QAAQ,CAACkB,IAAI,MAAG,CAAC,CACrG,CAAC,IAAM,CACLjG,OAAO,CAACmG,OAAO,wCAAAT,MAAA,CAAqBX,QAAQ,CAACkB,IAAI,qHAA4D,CAAC,CAChH,CAEF,CAAE,MAAO5B,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,mCAAmC,CAAEA,KAAK,CAAC,CACzDd,mBAAmB,CAAC,EAAE,CAAC,CACvBvD,OAAO,CAACqE,KAAK,CAAC,iDAAiD,CAAC,CAClE,CAAC,OAAS,CACRZ,0BAA0B,CAAC,KAAK,CAAC,CACnC,CACF,CAAC,CAED,KAAM,CAAAiF,OAAO,CAAG,CACd,CACEC,KAAK,CAAE,QAAQ,CACfC,SAAS,CAAE,MAAM,CACjBC,GAAG,CAAE,MAAM,CACXC,KAAK,CAAE,EAAE,CACTC,KAAK,CAAE,MAAM,CACbC,MAAM,CAAGC,IAAI,eAAKpH,IAAA,CAACI,IAAI,EAACiH,MAAM,MAACC,KAAK,CAAE,CAAEC,KAAK,CAAE,SAAU,CAAE,CAAAC,QAAA,CAAEJ,IAAI,CAAO,CAC1E,CAAC,CACD,CACEN,KAAK,CAAE,kBAAkB,CACzBC,SAAS,CAAE,MAAM,CACjBC,GAAG,CAAE,MAAM,CACXC,KAAK,CAAE,GAAG,CACVC,KAAK,CAAE,MAAM,CACbC,MAAM,CAAGC,IAAI,eACXlH,KAAA,QAAKoH,KAAK,CAAE,CAAEG,OAAO,CAAE,MAAM,CAAEC,UAAU,CAAE,QAAS,CAAE,CAAAF,QAAA,eACpDxH,IAAA,CAACpB,MAAM,EACL+I,IAAI,CAAC,OAAO,CACZC,IAAI,cAAE5H,IAAA,CAACf,YAAY,GAAE,CAAE,CACvBqI,KAAK,CAAE,CACLO,eAAe,CAAE,SAAS,CAC1BN,KAAK,CAAE,SAAS,CAChBO,WAAW,CAAE,CACf,CAAE,CACH,CAAC,cACF9H,IAAA,CAACI,IAAI,EAACiH,MAAM,MAACC,KAAK,CAAE,CAAES,QAAQ,CAAE,MAAO,CAAE,CAAAP,QAAA,CAAEJ,IAAI,CAAO,CAAC,EACpD,CAET,CAAC,CACD,CACEN,KAAK,CAAE,eAAe,CACtBC,SAAS,CAAE,gBAAgB,CAC3BC,GAAG,CAAE,gBAAgB,CACrBC,KAAK,CAAE,GAAG,CACVE,MAAM,CAAGC,IAAI,eACXpH,IAAA,QAAKsH,KAAK,CAAE,CAAES,QAAQ,CAAE,MAAO,CAAE,CAAAP,QAAA,CAC9BJ,IAAI,cACHlH,KAAA,QAAKoH,KAAK,CAAE,CAAEG,OAAO,CAAE,MAAM,CAAEC,UAAU,CAAE,QAAS,CAAE,CAAAF,QAAA,eACpDxH,IAAA,CAACR,YAAY,EAAC8H,KAAK,CAAE,CAAEQ,WAAW,CAAE,CAAC,CAAEP,KAAK,CAAE,MAAO,CAAE,CAAE,CAAC,cAC1DvH,IAAA,CAACI,IAAI,EAAC4H,QAAQ,MAACV,KAAK,CAAE,CAAEW,QAAQ,CAAE,OAAQ,CAAE,CAAAT,QAAA,CAAEJ,IAAI,CAAO,CAAC,EACvD,CAAC,cAENpH,IAAA,CAACI,IAAI,EAAC8H,IAAI,CAAC,WAAW,CAACZ,KAAK,CAAE,CAAES,QAAQ,CAAE,MAAO,CAAE,CAAAP,QAAA,CAAC,iBAAO,CAAM,CAClE,CACE,CAET,CAAC,CACD,CACEV,KAAK,CAAE,SAAS,CAChBE,GAAG,CAAE,cAAc,CACnBC,KAAK,CAAE,GAAG,CACVE,MAAM,CAAEA,CAACgB,CAAC,CAAEC,MAAM,gBAChBlI,KAAA,QAAKoH,KAAK,CAAE,CAAES,QAAQ,CAAE,MAAM,CAAEM,UAAU,CAAE,KAAM,CAAE,CAAAb,QAAA,EACjDY,MAAM,CAACE,KAAK,eACXpI,KAAA,QAAKoH,KAAK,CAAE,CACVG,OAAO,CAAE,MAAM,CACfC,UAAU,CAAE,QAAQ,CACpBa,YAAY,CAAE,CAAC,CACfhB,KAAK,CAAE,MACT,CAAE,CAAAC,QAAA,eACAxH,IAAA,CAACd,aAAa,EAACoI,KAAK,CAAE,CAAEQ,WAAW,CAAE,CAAC,CAAEC,QAAQ,CAAE,MAAO,CAAE,CAAE,CAAC,cAC9D/H,IAAA,CAACI,IAAI,EAAC4H,QAAQ,MAACV,KAAK,CAAE,CAAEW,QAAQ,CAAE,OAAO,CAAEF,QAAQ,CAAE,MAAO,CAAE,CAAAP,QAAA,CAC3DY,MAAM,CAACE,KAAK,CACT,CAAC,EACJ,CACN,CACAF,MAAM,CAACI,KAAK,eACXtI,KAAA,QAAKoH,KAAK,CAAE,CACVG,OAAO,CAAE,MAAM,CACfC,UAAU,CAAE,QAAQ,CACpBH,KAAK,CAAE,MACT,CAAE,CAAAC,QAAA,eACAxH,IAAA,CAACb,YAAY,EAACmI,KAAK,CAAE,CAAEQ,WAAW,CAAE,CAAC,CAAEC,QAAQ,CAAE,MAAO,CAAE,CAAE,CAAC,cAC7D/H,IAAA,CAACI,IAAI,EAAC4H,QAAQ,MAACV,KAAK,CAAE,CAAEW,QAAQ,CAAE,OAAO,CAAEF,QAAQ,CAAE,MAAO,CAAE,CAAAP,QAAA,CAC3DY,MAAM,CAACI,KAAK,CACT,CAAC,EACJ,CACN,CACA,CAACJ,MAAM,CAACE,KAAK,EAAI,CAACF,MAAM,CAACI,KAAK,eAC7BxI,IAAA,CAACI,IAAI,EAAC8H,IAAI,CAAC,WAAW,CAACZ,KAAK,CAAE,CAAES,QAAQ,CAAE,MAAO,CAAE,CAAAP,QAAA,CAAC,iBAAO,CAAM,CAClE,EACE,CAET,CAAC,CACD,CACEV,KAAK,CAAE,SAAS,CAChBE,GAAG,CAAE,cAAc,CACnBC,KAAK,CAAE,GAAG,CACVE,MAAM,CAAEA,CAACgB,CAAC,CAAEC,MAAM,gBAChBlI,KAAA,QAAKoH,KAAK,CAAE,CAAES,QAAQ,CAAE,MAAM,CAAEM,UAAU,CAAE,KAAM,CAAE,CAAAb,QAAA,EACjDY,MAAM,CAACK,OAAO,eACbzI,IAAA,QAAKsH,KAAK,CAAE,CAAEiB,YAAY,CAAE,CAAC,CAAEhB,KAAK,CAAE,MAAO,CAAE,CAAAC,QAAA,cAC7CxH,IAAA,CAACI,IAAI,EAAC4H,QAAQ,MAACV,KAAK,CAAE,CAAEW,QAAQ,CAAE,OAAO,CAAEF,QAAQ,CAAE,MAAO,CAAE,CAAAP,QAAA,CAC3DY,MAAM,CAACK,OAAO,CACX,CAAC,CACJ,CACN,CACAL,MAAM,CAACM,IAAI,eACVxI,KAAA,QAAKoH,KAAK,CAAE,CAAEC,KAAK,CAAE,MAAO,CAAE,CAAAC,QAAA,eAC5BxH,IAAA,CAACZ,YAAY,EAACkI,KAAK,CAAE,CAAEQ,WAAW,CAAE,CAAC,CAAEC,QAAQ,CAAE,MAAO,CAAE,CAAE,CAAC,cAC7D/H,IAAA,CAACI,IAAI,EAACkH,KAAK,CAAE,CAAES,QAAQ,CAAE,MAAO,CAAE,CAAAP,QAAA,CAAEY,MAAM,CAACM,IAAI,CAAO,CAAC,EACpD,CACN,CACA,CAACN,MAAM,CAACK,OAAO,EAAI,CAACL,MAAM,CAACM,IAAI,eAC9B1I,IAAA,CAACI,IAAI,EAAC8H,IAAI,CAAC,WAAW,CAACZ,KAAK,CAAE,CAAES,QAAQ,CAAE,MAAO,CAAE,CAAAP,QAAA,CAAC,iBAAO,CAAM,CAClE,EACE,CAET,CAAC,CACD,CACEV,KAAK,CAAE,SAAS,CAChBC,SAAS,CAAE,YAAY,CACvBC,GAAG,CAAE,YAAY,CACjBC,KAAK,CAAE,GAAG,CACV0B,KAAK,CAAE,OAAO,CACdxB,MAAM,CAAGyB,IAAI,eACX5I,IAAA,QAAKsH,KAAK,CAAE,CAAEuB,SAAS,CAAE,OAAQ,CAAE,CAAArB,QAAA,cACjCxH,IAAA,CAACI,IAAI,EACHiH,MAAM,MACNC,KAAK,CAAE,CACLC,KAAK,CAAEqB,IAAI,CAAG,CAAC,CAAG,SAAS,CAAG,SAAS,CACvCb,QAAQ,CAAE,MACZ,CAAE,CAAAP,QAAA,CAED3H,cAAc,CAAC+I,IAAI,EAAI,CAAC,CAAC,CACtB,CAAC,CACJ,CACN,CACDE,MAAM,CAAEA,CAACC,CAAC,CAAEC,CAAC,GAAK,CAACD,CAAC,CAAChG,UAAU,EAAI,CAAC,GAAKiG,CAAC,CAACjG,UAAU,EAAI,CAAC,CAC5D,CAAC,CACD,CACE+D,KAAK,CAAE,SAAS,CAChBC,SAAS,CAAE,cAAc,CACzBC,GAAG,CAAE,cAAc,CACnBC,KAAK,CAAE,GAAG,CACV0B,KAAK,CAAE,OAAO,CACdxB,MAAM,CAAGrC,KAAK,eACZ9E,IAAA,QAAKsH,KAAK,CAAE,CAAEuB,SAAS,CAAE,OAAQ,CAAE,CAAArB,QAAA,cACjCxH,IAAA,CAACI,IAAI,EAACkH,KAAK,CAAE,CAAEC,KAAK,CAAE,SAAS,CAAEQ,QAAQ,CAAE,MAAO,CAAE,CAAAP,QAAA,CACjD3H,cAAc,CAACiF,KAAK,EAAI,CAAC,CAAC,CACvB,CAAC,CACJ,CAET,CAAC,CACD,CACEgC,KAAK,CAAE,YAAY,CACnBC,SAAS,CAAE,eAAe,CAC1BC,GAAG,CAAE,eAAe,CACpBC,KAAK,CAAE,GAAG,CACVE,MAAM,CAAG8B,KAAK,eACZjJ,IAAA,CAACzB,GAAG,EACFgJ,KAAK,CAAC,MAAM,CACZD,KAAK,CAAE,CACLS,QAAQ,CAAE,MAAM,CAChBmB,MAAM,CAAE,CAAC,CACTC,OAAO,CAAE,SAAS,CAClBd,UAAU,CAAE,KACd,CAAE,CAAAb,QAAA,CAEDyB,KAAK,EAAI,gBAAgB,CACvB,CAET,CAAC,CACD,CACEnC,KAAK,CAAE,UAAU,CACjBE,GAAG,CAAE,SAAS,CACdC,KAAK,CAAE,GAAG,CACVC,KAAK,CAAE,OAAO,CACdC,MAAM,CAAEA,CAACgB,CAAC,CAAEC,MAAM,gBAChBlI,KAAA,CAAClC,KAAK,EAAC2J,IAAI,CAAC,OAAO,CAAAH,QAAA,eACjBxH,IAAA,CAACxB,OAAO,EAACsI,KAAK,CAAC,wCAA2B,CAAAU,QAAA,cACxCxH,IAAA,CAAClC,MAAM,EACLoK,IAAI,CAAC,MAAM,CACXP,IAAI,CAAC,OAAO,CACZC,IAAI,cAAE5H,IAAA,CAACV,WAAW,GAAE,CAAE,CACtB8J,OAAO,CAAEA,CAAA,GAAMpF,kBAAkB,CAACoE,MAAM,CAAE,CAC1Cd,KAAK,CAAE,CAAE6B,OAAO,CAAE,SAAU,CAAE,CAC/B,CAAC,CACK,CAAC,cACVnJ,IAAA,CAACxB,OAAO,EAACsI,KAAK,CAAC,iDAA0B,CAAAU,QAAA,cACvCxH,IAAA,CAAClC,MAAM,EACLoK,IAAI,CAAC,MAAM,CACXP,IAAI,CAAC,OAAO,CACZC,IAAI,cAAE5H,IAAA,CAACf,YAAY,GAAE,CAAE,CACvBmK,OAAO,CAAEA,CAAA,GAAMlF,oBAAoB,CAACkE,MAAM,CAAE,CAC5Cd,KAAK,CAAE,CAAE6B,OAAO,CAAE,SAAS,CAAE5B,KAAK,CAAE,SAAU,CAAE,CACjD,CAAC,CACK,CAAC,cACVvH,IAAA,CAACxB,OAAO,EAACsI,KAAK,CAAC,qBAAW,CAAAU,QAAA,cACxBxH,IAAA,CAAClC,MAAM,EACLoK,IAAI,CAAC,MAAM,CACXP,IAAI,CAAC,OAAO,CACZC,IAAI,cAAE5H,IAAA,CAACjB,YAAY,GAAE,CAAE,CACvBqK,OAAO,CAAEA,CAAA,GAAMnG,SAAS,CAACmF,MAAM,CAAE,CACjCd,KAAK,CAAE,CAAE6B,OAAO,CAAE,SAAS,CAAE5B,KAAK,CAAE,SAAU,CAAE,CACjD,CAAC,CACK,CAAC,cACVvH,IAAA,CAACvB,UAAU,EACTqI,KAAK,CAAC,kFAA6C,CACnDuC,SAAS,CAAEA,CAAA,GAAMvF,YAAY,CAACsE,MAAM,CAACzE,EAAE,CAAE,CACzC2F,MAAM,CAAC,OAAI,CACXC,UAAU,CAAC,UAAO,CAClBC,SAAS,CAAC,UAAU,CAAAhC,QAAA,cAEpBxH,IAAA,CAACxB,OAAO,EAACsI,KAAK,CAAC,QAAK,CAAAU,QAAA,cAClBxH,IAAA,CAAClC,MAAM,EACLoK,IAAI,CAAC,MAAM,CACXuB,MAAM,MACN9B,IAAI,CAAC,OAAO,CACZC,IAAI,cAAE5H,IAAA,CAAChB,cAAc,GAAE,CAAE,CACzBsI,KAAK,CAAE,CAAE6B,OAAO,CAAE,SAAU,CAAE,CAC/B,CAAC,CACK,CAAC,CACA,CAAC,EACR,CAEX,CAAC,CACF,CAED,mBACEjJ,KAAA,QAAKoH,KAAK,CAAE,CAAE6B,OAAO,CAAE,MAAO,CAAE,CAAA3B,QAAA,eAE9BtH,KAAA,CAAC9B,GAAG,EAACsL,MAAM,CAAE,CAAC,EAAE,CAAE,EAAE,CAAE,CAACpC,KAAK,CAAE,CAAEiB,YAAY,CAAE,EAAG,CAAE,CAAAf,QAAA,eACjDxH,IAAA,CAAC3B,GAAG,EAACsL,EAAE,CAAE,EAAG,CAACC,EAAE,CAAE,CAAE,CAAApC,QAAA,cACjBxH,IAAA,CAACpC,IAAI,EAAC+J,IAAI,CAAC,OAAO,CAACL,KAAK,CAAE,CAAEuC,MAAM,CAAE,MAAO,CAAE,CAAArC,QAAA,cAC3CxH,IAAA,CAAC1B,SAAS,EACRwI,KAAK,CAAC,gCAAmB,CACzBgD,KAAK,CAAE1I,KAAK,CAACE,KAAM,CACnByI,MAAM,cAAE/J,IAAA,CAACf,YAAY,GAAE,CAAE,CACzB+K,UAAU,CAAE,CAAEzC,KAAK,CAAE,SAAS,CAAEQ,QAAQ,CAAE,MAAO,CAAE,CACpD,CAAC,CACE,CAAC,CACJ,CAAC,cACN/H,IAAA,CAAC3B,GAAG,EAACsL,EAAE,CAAE,EAAG,CAACC,EAAE,CAAE,CAAE,CAAApC,QAAA,cACjBxH,IAAA,CAACpC,IAAI,EAAC+J,IAAI,CAAC,OAAO,CAACL,KAAK,CAAE,CAAEuC,MAAM,CAAE,MAAO,CAAE,CAAArC,QAAA,cAC3CxH,IAAA,CAAC1B,SAAS,EACRwI,KAAK,CAAC,2BAAc,CACpBgD,KAAK,CAAE1I,KAAK,CAACG,SAAU,CACvB0I,SAAS,CAAEH,KAAK,EAAIjK,cAAc,CAACiK,KAAK,CAAE,CAC1CC,MAAM,cAAE/J,IAAA,CAACX,kBAAkB,GAAE,CAAE,CAC/B2K,UAAU,CAAE,CAAEzC,KAAK,CAAE,SAAS,CAAEQ,QAAQ,CAAE,MAAO,CAAE,CACpD,CAAC,CACE,CAAC,CACJ,CAAC,cACN/H,IAAA,CAAC3B,GAAG,EAACsL,EAAE,CAAE,EAAG,CAACC,EAAE,CAAE,CAAE,CAAApC,QAAA,cACjBxH,IAAA,CAACpC,IAAI,EAAC+J,IAAI,CAAC,OAAO,CAACL,KAAK,CAAE,CAAEuC,MAAM,CAAE,MAAO,CAAE,CAAArC,QAAA,cAC3CxH,IAAA,CAAC1B,SAAS,EACRwI,KAAK,CAAC,6BAAc,CACpBgD,KAAK,CAAE1I,KAAK,CAACI,gBAAiB,CAC9ByI,SAAS,CAAEH,KAAK,EAAIjK,cAAc,CAACiK,KAAK,CAAE,CAC1CC,MAAM,cAAE/J,IAAA,CAACT,YAAY,GAAE,CAAE,CACzByK,UAAU,CAAE,CAAEzC,KAAK,CAAE,SAAS,CAAEQ,QAAQ,CAAE,MAAO,CAAE,CACpD,CAAC,CACE,CAAC,CACJ,CAAC,EACH,CAAC,cAGN7H,KAAA,CAACtC,IAAI,EACHkJ,KAAK,cACH5G,KAAA,QAAKoH,KAAK,CAAE,CAAEG,OAAO,CAAE,MAAM,CAAEC,UAAU,CAAE,QAAS,CAAE,CAAAF,QAAA,eACpDxH,IAAA,CAACP,gBAAgB,EAAC6H,KAAK,CAAE,CAAEQ,WAAW,CAAE,CAAE,CAAE,CAAE,CAAC,uCAEjD,EAAK,CACN,CACDH,IAAI,CAAC,OAAO,CAAAH,QAAA,eAGZtH,KAAA,CAAC9B,GAAG,EAACsL,MAAM,CAAE,CAAC,EAAE,CAAE,EAAE,CAAE,CAACpC,KAAK,CAAE,CAAEiB,YAAY,CAAE,EAAG,CAAE,CAAAf,QAAA,eACjDxH,IAAA,CAAC3B,GAAG,EAACsL,EAAE,CAAE,EAAG,CAACC,EAAE,CAAE,EAAG,CAACM,EAAE,CAAE,EAAG,CAAA1C,QAAA,cAC1BxH,IAAA,CAACG,MAAM,EACLgK,WAAW,CAAC,mEAAwC,CACpDL,KAAK,CAAE5I,UAAW,CAClBkJ,QAAQ,CAAGC,CAAC,EAAKlJ,aAAa,CAACkJ,CAAC,CAACC,MAAM,CAACR,KAAK,CAAE,CAC/CS,QAAQ,CAAEtI,cAAe,CACzBuI,WAAW,cAAExK,IAAA,CAAClB,cAAc,GAAE,CAAE,CAChC2L,UAAU,MACV9C,IAAI,CAAC,QAAQ,CACd,CAAC,CACC,CAAC,cACN3H,IAAA,CAAC3B,GAAG,EAACsL,EAAE,CAAE,EAAG,CAACC,EAAE,CAAE,CAAE,CAACM,EAAE,CAAE,CAAE,CAAC5C,KAAK,CAAE,CAAEuB,SAAS,CAAE,OAAQ,CAAE,CAAArB,QAAA,cACvDxH,IAAA,CAAClC,MAAM,EACLoK,IAAI,CAAC,SAAS,CACdN,IAAI,cAAE5H,IAAA,CAACnB,YAAY,GAAE,CAAE,CACvBuK,OAAO,CAAEA,CAAA,GAAMnG,SAAS,CAAC,CAAE,CAC3B0E,IAAI,CAAC,QAAQ,CACb+C,KAAK,MAAAlD,QAAA,CACN,8BAED,CAAQ,CAAC,CACN,CAAC,EACH,CAAC,cAGNxH,IAAA,CAACnC,KAAK,EACJgJ,OAAO,CAAEA,OAAQ,CACjB8D,UAAU,CAAErK,SAAU,CACtBsK,MAAM,CAAC,IAAI,CACXpK,OAAO,CAAEA,OAAQ,CACjBmH,IAAI,CAAC,OAAO,CACZkD,UAAU,CAAE,CACVvJ,KAAK,CAAEhB,SAAS,CAACqC,MAAM,CACvBmI,QAAQ,CAAE,EAAE,CACZC,eAAe,CAAE,IAAI,CACrBC,eAAe,CAAE,IAAI,CACrBC,SAAS,CAAEA,CAAC3J,KAAK,CAAE4J,KAAK,MAAArH,MAAA,CACnBqH,KAAK,CAAC,CAAC,CAAC,MAAArH,MAAA,CAAIqH,KAAK,CAAC,CAAC,CAAC,eAAArH,MAAA,CAAQvC,KAAK,yBAAe,CACrD6J,UAAU,CAAE,IAAI,CAChBxD,IAAI,CAAE,OACR,CAAE,CACFyD,MAAM,CAAE,CACNC,CAAC,CAAE,IAAI,CACPC,CAAC,CAAE,qBACL,CAAE,CACFhE,KAAK,CAAE,CACLO,eAAe,CAAE,SAAS,CAC1B0D,YAAY,CAAE,KAChB,CAAE,CACH,CAAC,EACE,CAAC,cAGPvL,IAAA,CAAC/B,KAAK,EACJ6I,KAAK,cACH5G,KAAA,QAAKoH,KAAK,CAAE,CAAEG,OAAO,CAAE,MAAM,CAAEC,UAAU,CAAE,QAAS,CAAE,CAAAF,QAAA,eACpDxH,IAAA,CAACf,YAAY,EAACqI,KAAK,CAAE,CAAEQ,WAAW,CAAE,CAAE,CAAE,CAAE,CAAC,CAC1ChH,eAAe,CAAG,uBAAuB,CAAG,uBAAuB,EACjE,CACN,CACD0K,IAAI,CAAE9K,cAAe,CACrB+K,QAAQ,CAAElI,YAAa,CACvBmI,MAAM,CAAE,IAAK,CACbzE,KAAK,CAAE,GAAI,CACXK,KAAK,CAAE,CAAEqE,GAAG,CAAE,EAAG,CAAE,CAAAnE,QAAA,cAEnBtH,KAAA,CAAChC,IAAI,EACH6D,IAAI,CAAEA,IAAK,CACX6J,MAAM,CAAC,UAAU,CACjBC,QAAQ,CAAErI,YAAa,CACvBsI,YAAY,CAAC,KAAK,CAClBnE,IAAI,CAAC,QAAQ,CAAAH,QAAA,eAEbtH,KAAA,CAAC9B,GAAG,EAACsL,MAAM,CAAE,EAAG,CAAAlC,QAAA,eACdxH,IAAA,CAAC3B,GAAG,EAAC0N,IAAI,CAAE,EAAG,CAAAvE,QAAA,cACZxH,IAAA,CAAC9B,IAAI,CAAC8N,IAAI,EACRC,KAAK,CAAC,6BAAkB,CACxB7H,IAAI,CAAC,MAAM,CACX8H,KAAK,CAAE,CAAC,CAAEC,QAAQ,CAAE,IAAI,CAAEhO,OAAO,CAAE,gCAAiC,CAAC,CAAE,CAAAqJ,QAAA,cAEvExH,IAAA,CAACjC,KAAK,EAACgM,MAAM,cAAE/J,IAAA,CAACf,YAAY,GAAE,CAAE,CAACkL,WAAW,CAAC,uCAAuB,CAAE,CAAC,CAC9D,CAAC,CACT,CAAC,cACNnK,IAAA,CAAC3B,GAAG,EAAC0N,IAAI,CAAE,EAAG,CAAAvE,QAAA,cACZxH,IAAA,CAAC9B,IAAI,CAAC8N,IAAI,EACRC,KAAK,CAAC,iCAAe,CACrB7H,IAAI,CAAC,gBAAgB,CAAAoD,QAAA,cAErBxH,IAAA,CAACjC,KAAK,EAACgM,MAAM,cAAE/J,IAAA,CAACR,YAAY,GAAE,CAAE,CAAC2K,WAAW,CAAC,kDAAwB,CAAE,CAAC,CAC/D,CAAC,CACT,CAAC,EACH,CAAC,cAENjK,KAAA,CAAC9B,GAAG,EAACsL,MAAM,CAAE,EAAG,CAAAlC,QAAA,eACdxH,IAAA,CAAC3B,GAAG,EAAC0N,IAAI,CAAE,EAAG,CAAAvE,QAAA,cACZxH,IAAA,CAAC9B,IAAI,CAAC8N,IAAI,EACRC,KAAK,CAAC,mCAAe,CACrB7H,IAAI,CAAC,OAAO,CAAAoD,QAAA,cAEZxH,IAAA,CAACjC,KAAK,EAACgM,MAAM,cAAE/J,IAAA,CAACd,aAAa,GAAE,CAAE,CAACiL,WAAW,CAAC,6CAAoB,CAAE,CAAC,CAC5D,CAAC,CACT,CAAC,cACNnK,IAAA,CAAC3B,GAAG,EAAC0N,IAAI,CAAE,EAAG,CAAAvE,QAAA,cACZxH,IAAA,CAAC9B,IAAI,CAAC8N,IAAI,EACRC,KAAK,CAAC,OAAO,CACb7H,IAAI,CAAC,OAAO,CACZ8H,KAAK,CAAE,CAAC,CAAEhE,IAAI,CAAE,OAAO,CAAE/J,OAAO,CAAE,oBAAqB,CAAC,CAAE,CAAAqJ,QAAA,cAE1DxH,IAAA,CAACjC,KAAK,EAACgM,MAAM,cAAE/J,IAAA,CAACb,YAAY,GAAE,CAAE,CAACgL,WAAW,CAAC,iBAAY,CAAE,CAAC,CACnD,CAAC,CACT,CAAC,EACH,CAAC,cAENjK,KAAA,CAAC9B,GAAG,EAACsL,MAAM,CAAE,EAAG,CAAAlC,QAAA,eACdxH,IAAA,CAAC3B,GAAG,EAAC0N,IAAI,CAAE,EAAG,CAAAvE,QAAA,cACZxH,IAAA,CAAC9B,IAAI,CAAC8N,IAAI,EACRC,KAAK,CAAC,wBAAS,CACf7H,IAAI,CAAC,SAAS,CAAAoD,QAAA,cAEdxH,IAAA,CAACjC,KAAK,EAACgM,MAAM,cAAE/J,IAAA,CAACZ,YAAY,GAAE,CAAE,CAAC+K,WAAW,CAAC,kCAAc,CAAE,CAAC,CACrD,CAAC,CACT,CAAC,cACNnK,IAAA,CAAC3B,GAAG,EAAC0N,IAAI,CAAE,EAAG,CAAAvE,QAAA,cACZxH,IAAA,CAAC9B,IAAI,CAAC8N,IAAI,EACRC,KAAK,CAAC,mBAAW,CACjB7H,IAAI,CAAC,MAAM,CAAAoD,QAAA,cAEXxH,IAAA,CAACjC,KAAK,EAACoM,WAAW,CAAC,6BAAgB,CAAE,CAAC,CAC7B,CAAC,CACT,CAAC,EACH,CAAC,cAENjK,KAAA,CAAC9B,GAAG,EAACsL,MAAM,CAAE,EAAG,CAAAlC,QAAA,eACdxH,IAAA,CAAC3B,GAAG,EAAC0N,IAAI,CAAE,EAAG,CAAAvE,QAAA,cACZxH,IAAA,CAAC9B,IAAI,CAAC8N,IAAI,EACRC,KAAK,CAAC,yBAAY,CAClB7H,IAAI,CAAC,UAAU,CAAAoD,QAAA,cAEfxH,IAAA,CAACjC,KAAK,EAACoM,WAAW,CAAC,mCAAiB,CAAE,CAAC,CAC9B,CAAC,CACT,CAAC,cACNnK,IAAA,CAAC3B,GAAG,EAAC0N,IAAI,CAAE,EAAG,CAAAvE,QAAA,cACZxH,IAAA,CAAC9B,IAAI,CAAC8N,IAAI,EACRC,KAAK,CAAC,yCAAuB,CAC7B7H,IAAI,CAAC,eAAe,CACpBgI,YAAY,CAAC,YAAS,CAAA5E,QAAA,cAEtBxH,IAAA,CAACjC,KAAK,EAACoM,WAAW,CAAC,uCAAiC,CAAE,CAAC,CAC9C,CAAC,CACT,CAAC,EACH,CAAC,cAENjK,KAAA,CAAC9B,GAAG,EAACsL,MAAM,CAAE,EAAG,CAAAlC,QAAA,eACdxH,IAAA,CAAC3B,GAAG,EAAC0N,IAAI,CAAE,EAAG,CAAAvE,QAAA,cACZxH,IAAA,CAAC9B,IAAI,CAAC8N,IAAI,EACRC,KAAK,CAAC,+CAAwB,CAC9B7H,IAAI,CAAC,cAAc,CACnBgI,YAAY,CAAE,CAAE,CAAA5E,QAAA,cAEhBxH,IAAA,CAACjC,KAAK,EACJmK,IAAI,CAAC,QAAQ,CACbmE,GAAG,CAAE,CAAE,CACPlC,WAAW,CAAC,GAAG,CACfJ,MAAM,cAAE/J,IAAA,CAACX,kBAAkB,GAAE,CAAE,CAChC,CAAC,CACO,CAAC,CACT,CAAC,cACNW,IAAA,CAAC3B,GAAG,EAAC0N,IAAI,CAAE,EAAG,CAAAvE,QAAA,cACZxH,IAAA,CAAC9B,IAAI,CAAC8N,IAAI,EACRC,KAAK,CAAC,+CAAwB,CAC9B7H,IAAI,CAAC,YAAY,CACjBgI,YAAY,CAAE,CAAE,CAAA5E,QAAA,cAEhBxH,IAAA,CAACjC,KAAK,EACJmK,IAAI,CAAC,QAAQ,CACbmE,GAAG,CAAE,CAAE,CACPlC,WAAW,CAAC,GAAG,CACfJ,MAAM,cAAE/J,IAAA,CAACT,YAAY,GAAE,CAAE,CAC1B,CAAC,CACO,CAAC,CACT,CAAC,EACH,CAAC,cAENS,IAAA,CAAC9B,IAAI,CAAC8N,IAAI,EACRC,KAAK,CAAC,YAAS,CACf7H,IAAI,CAAC,OAAO,CAAAoD,QAAA,cAEZxH,IAAA,CAACjC,KAAK,CAACuO,QAAQ,EAACC,IAAI,CAAE,CAAE,CAACpC,WAAW,CAAC,sBAAc,CAAE,CAAC,CAC7C,CAAC,cAEZnK,IAAA,CAAC9B,IAAI,CAAC8N,IAAI,EAAC1E,KAAK,CAAE,CAAEuB,SAAS,CAAE,OAAO,CAAEN,YAAY,CAAE,CAAE,CAAE,CAAAf,QAAA,cACxDtH,KAAA,CAAClC,KAAK,EAAAwJ,QAAA,eACJxH,IAAA,CAAClC,MAAM,EAACsL,OAAO,CAAE7F,YAAa,CAAAiE,QAAA,CAAC,UAE/B,CAAQ,CAAC,cACTxH,IAAA,CAAClC,MAAM,EAACoK,IAAI,CAAC,SAAS,CAACsE,QAAQ,CAAC,QAAQ,CAAAhF,QAAA,CACrC1G,eAAe,CAAG,UAAU,CAAG,UAAU,CACpC,CAAC,EACJ,CAAC,CACC,CAAC,EACR,CAAC,CACF,CAAC,cAGRd,IAAA,CAACtB,MAAM,EACLoI,KAAK,cACH5G,KAAA,QAAKoH,KAAK,CAAE,CAAEG,OAAO,CAAE,MAAM,CAAEC,UAAU,CAAE,QAAS,CAAE,CAAAF,QAAA,eACpDxH,IAAA,CAACV,WAAW,EAACgI,KAAK,CAAE,CAAEQ,WAAW,CAAE,CAAE,CAAE,CAAE,CAAC,kDAE5C,EAAK,CACN,CACD0B,SAAS,CAAC,OAAO,CACjBiD,OAAO,CAAEA,CAAA,GAAM5L,wBAAwB,CAAC,KAAK,CAAE,CAC/C2K,IAAI,CAAE5K,qBAAsB,CAC5BqG,KAAK,CAAE,GAAI,CAAAO,QAAA,CAEVxG,gBAAgB,eACfd,KAAA,QAAAsH,QAAA,eACExH,IAAA,CAACpC,IAAI,EAACkJ,KAAK,CAAC,+BAAkB,CAACa,IAAI,CAAC,OAAO,CAACL,KAAK,CAAE,CAAEiB,YAAY,CAAE,EAAG,CAAE,CAAAf,QAAA,cACtEtH,KAAA,QAAKoH,KAAK,CAAE,CAAEe,UAAU,CAAE,KAAM,CAAE,CAAAb,QAAA,eAChCtH,KAAA,MAAAsH,QAAA,eAAGxH,IAAA,CAACI,IAAI,EAACiH,MAAM,MAAAG,QAAA,CAAC,6BAAgB,CAAM,CAAC,IAAC,CAACxG,gBAAgB,CAACgE,IAAI,EAAI,CAAC,cACnE9E,KAAA,MAAAsH,QAAA,eAAGxH,IAAA,CAACI,IAAI,EAACiH,MAAM,MAAAG,QAAA,CAAC,SAAI,CAAM,CAAC,IAAC,CAACxG,gBAAgB,CAACoD,IAAI,EAAI,CAAC,cACvDlE,KAAA,MAAAsH,QAAA,eAAGxH,IAAA,CAACI,IAAI,EAACiH,MAAM,MAAAG,QAAA,CAAC,kCAAc,CAAM,CAAC,IAAC,CAACxG,gBAAgB,CAAC0L,cAAc,EAAI,SAAS,EAAI,CAAC,cACxFxM,KAAA,MAAAsH,QAAA,eAAGxH,IAAA,CAACI,IAAI,EAACiH,MAAM,MAAAG,QAAA,CAAC,4BAAW,CAAM,CAAC,IAAC,CAACxG,gBAAgB,CAACsH,KAAK,EAAI,SAAS,EAAI,CAAC,cAC5EpI,KAAA,MAAAsH,QAAA,eAAGxH,IAAA,CAACI,IAAI,EAACiH,MAAM,MAAAG,QAAA,CAAC,QAAM,CAAM,CAAC,IAAC,CAACxG,gBAAgB,CAACwH,KAAK,EAAI,SAAS,EAAI,CAAC,cACvEtI,KAAA,MAAAsH,QAAA,eAAGxH,IAAA,CAACI,IAAI,EAACiH,MAAM,MAAAG,QAAA,CAAC,0BAAW,CAAM,CAAC,IAAC,CAACxG,gBAAgB,CAAC2L,QAAQ,EAAI,SAAS,EAAI,CAAC,EAC5E,CAAC,CACF,CAAC,cAEPzM,KAAA,CAACtC,IAAI,EAACkJ,KAAK,CAAC,8BAAqB,CAACa,IAAI,CAAC,OAAO,CAACL,KAAK,CAAE,CAAEiB,YAAY,CAAE,EAAG,CAAE,CAAAf,QAAA,eACzEtH,KAAA,CAAC9B,GAAG,EAACsL,MAAM,CAAE,EAAG,CAAAlC,QAAA,eACdxH,IAAA,CAAC3B,GAAG,EAAC0N,IAAI,CAAE,EAAG,CAAAvE,QAAA,cACZxH,IAAA,CAAC1B,SAAS,EACRwI,KAAK,CAAC,oCAAkB,CACxBgD,KAAK,CAAE9I,gBAAgB,CAAC+B,UAAU,EAAI,CAAE,CACxCkH,SAAS,CAAEH,KAAK,EAAIjK,cAAc,CAACiK,KAAK,CAAE,CAC1CE,UAAU,CAAE,CACVzC,KAAK,CAAEvG,gBAAgB,CAAC+B,UAAU,CAAG,CAAC,CAAG,SAAS,CAAG,SAAS,CAC9DgF,QAAQ,CAAE,MACZ,CAAE,CACH,CAAC,CACC,CAAC,cACN/H,IAAA,CAAC3B,GAAG,EAAC0N,IAAI,CAAE,EAAG,CAAAvE,QAAA,cACZxH,IAAA,CAAC1B,SAAS,EACRwI,KAAK,CAAC,oCAAkB,CACxBgD,KAAK,CAAE9I,gBAAgB,CAACgC,YAAY,EAAI,CAAE,CAC1CiH,SAAS,CAAEH,KAAK,EAAIjK,cAAc,CAACiK,KAAK,CAAE,CAC1CE,UAAU,CAAE,CAAEzC,KAAK,CAAE,SAAS,CAAEQ,QAAQ,CAAE,MAAO,CAAE,CACpD,CAAC,CACC,CAAC,EACH,CAAC,cACN7H,KAAA,MAAGoH,KAAK,CAAE,CAAEsF,SAAS,CAAE,EAAG,CAAE,CAAApF,QAAA,eAC1BxH,IAAA,CAACI,IAAI,EAACiH,MAAM,MAAAG,QAAA,CAAC,0CAAsB,CAAM,CAAC,IAAC,CAACxG,gBAAgB,CAAC6L,aAAa,EAAI,gBAAgB,EAC7F,CAAC,EACA,CAAC,CAEN,CAAC7L,gBAAgB,CAACyH,OAAO,EAAIzH,gBAAgB,CAAC0H,IAAI,gBACjDxI,KAAA,CAACtC,IAAI,EAACkJ,KAAK,CAAC,wBAAS,CAACa,IAAI,CAAC,OAAO,CAACL,KAAK,CAAE,CAAEiB,YAAY,CAAE,EAAG,CAAE,CAAAf,QAAA,EAC5DxG,gBAAgB,CAACyH,OAAO,eAAIzI,IAAA,MAAAwH,QAAA,CAAIxG,gBAAgB,CAACyH,OAAO,CAAI,CAAC,CAC7DzH,gBAAgB,CAAC0H,IAAI,eAAIxI,KAAA,MAAAsH,QAAA,eAAGxH,IAAA,CAACI,IAAI,EAACiH,MAAM,MAAAG,QAAA,CAAC,oBAAU,CAAM,CAAC,IAAC,CAACxG,gBAAgB,CAAC0H,IAAI,EAAI,CAAC,EACnF,CACP,CAEA1H,gBAAgB,CAAC8L,KAAK,eACrB9M,IAAA,CAACpC,IAAI,EAACkJ,KAAK,CAAC,YAAS,CAACa,IAAI,CAAC,OAAO,CAAAH,QAAA,cAChCxH,IAAA,MAAAwH,QAAA,CAAIxG,gBAAgB,CAAC8L,KAAK,CAAI,CAAC,CAC3B,CACP,EACE,CACN,CACK,CAAC,cAGT9M,IAAA,CAACtB,MAAM,EACLoI,KAAK,cACH5G,KAAA,QAAKoH,KAAK,CAAE,CAAEG,OAAO,CAAE,MAAM,CAAEC,UAAU,CAAE,QAAS,CAAE,CAAAF,QAAA,eACpDxH,IAAA,CAACf,YAAY,EAACqI,KAAK,CAAE,CAAEQ,WAAW,CAAE,CAAC,CAAEP,KAAK,CAAE,SAAU,CAAE,CAAE,CAAC,yDACnC,CAACvG,gBAAgB,SAAhBA,gBAAgB,iBAAhBA,gBAAgB,CAAEoD,IAAI,EAC9C,CACN,CACDoF,SAAS,CAAC,OAAO,CACjBiD,OAAO,CAAEA,CAAA,GAAM3K,0BAA0B,CAAC,KAAK,CAAE,CACjD0J,IAAI,CAAE3J,uBAAwB,CAC9BoF,KAAK,CAAE,IAAK,CACZK,KAAK,CAAE,CAAEyF,MAAM,CAAE,IAAK,CAAE,CAAAvF,QAAA,CAEvBxG,gBAAgB,eACfd,KAAA,QAAAsH,QAAA,eAEExH,IAAA,CAACpC,IAAI,EAAC+J,IAAI,CAAC,OAAO,CAACL,KAAK,CAAE,CAAEiB,YAAY,CAAE,EAAE,CAAEyE,UAAU,CAAE,2CAA4C,CAAE,CAAAxF,QAAA,cACtGtH,KAAA,CAAC9B,GAAG,EAACsL,MAAM,CAAE,EAAG,CAAAlC,QAAA,eACdxH,IAAA,CAAC3B,GAAG,EAAC0N,IAAI,CAAE,EAAG,CAAAvE,QAAA,cACZtH,KAAA,QAAAsH,QAAA,eACEtH,KAAA,CAACE,IAAI,EAACiH,MAAM,MAACC,KAAK,CAAE,CAAES,QAAQ,CAAE,MAAM,CAAER,KAAK,CAAE,SAAU,CAAE,CAAAC,QAAA,EAAC,eACvD,CAACxG,gBAAgB,CAACoD,IAAI,EACrB,CAAC,cACPlE,KAAA,QAAKoH,KAAK,CAAE,CAAES,QAAQ,CAAE,MAAM,CAAER,KAAK,CAAE,MAAM,CAAEqF,SAAS,CAAE,KAAM,CAAE,CAAApF,QAAA,EAAC,0BACtD,CAACxG,gBAAgB,CAACgE,IAAI,EAC9B,CAAC,EACH,CAAC,CACH,CAAC,cACNhF,IAAA,CAAC3B,GAAG,EAAC0N,IAAI,CAAE,EAAG,CAAAvE,QAAA,cACZtH,KAAA,QAAKoH,KAAK,CAAE,CAAEuB,SAAS,CAAE,OAAQ,CAAE,CAAArB,QAAA,EAChCxG,gBAAgB,CAACsH,KAAK,eACrBpI,KAAA,QAAKoH,KAAK,CAAE,CAAES,QAAQ,CAAE,MAAM,CAAER,KAAK,CAAE,MAAO,CAAE,CAAAC,QAAA,EAAC,eAC5C,CAACxG,gBAAgB,CAACsH,KAAK,EACvB,CACN,CACAtH,gBAAgB,CAAC0L,cAAc,eAC9BxM,KAAA,QAAKoH,KAAK,CAAE,CAAES,QAAQ,CAAE,MAAM,CAAER,KAAK,CAAE,MAAO,CAAE,CAAAC,QAAA,EAAC,eAC5C,CAACxG,gBAAgB,CAAC0L,cAAc,EAChC,CACN,EACE,CAAC,CACH,CAAC,EACH,CAAC,CACF,CAAC,cAGPxM,KAAA,CAAC9B,GAAG,EAACsL,MAAM,CAAE,CAAC,EAAE,CAAE,EAAE,CAAE,CAACpC,KAAK,CAAE,CAAEiB,YAAY,CAAE,EAAG,CAAE,CAAAf,QAAA,eACjDxH,IAAA,CAAC3B,GAAG,EAAC0N,IAAI,CAAE,CAAE,CAAAvE,QAAA,cACXxH,IAAA,CAACpC,IAAI,EAAC+J,IAAI,CAAC,OAAO,CAACL,KAAK,CAAE,CAAEuB,SAAS,CAAE,QAAQ,CAAEoE,UAAU,CAAE,mBAAoB,CAAE,CAAAzF,QAAA,cACjFxH,IAAA,CAAC1B,SAAS,EACRwI,KAAK,CAAC,8BAAe,CACrBgD,KAAK,CAAErI,gBAAgB,CAACkB,MAAO,CAC/BoH,MAAM,cAAE/J,IAAA,CAACf,YAAY,EAACqI,KAAK,CAAE,CAAEC,KAAK,CAAE,SAAU,CAAE,CAAE,CAAE,CACtDyC,UAAU,CAAE,CAAEzC,KAAK,CAAE,SAAS,CAAEQ,QAAQ,CAAE,MAAO,CAAE,CACpD,CAAC,CACE,CAAC,CACJ,CAAC,cACN/H,IAAA,CAAC3B,GAAG,EAAC0N,IAAI,CAAE,CAAE,CAAAvE,QAAA,cACXxH,IAAA,CAACpC,IAAI,EAAC+J,IAAI,CAAC,OAAO,CAACL,KAAK,CAAE,CAAEuB,SAAS,CAAE,QAAQ,CAAEoE,UAAU,CAAE,mBAAoB,CAAE,CAAAzF,QAAA,cACjFxH,IAAA,CAAC1B,SAAS,EACRwI,KAAK,CAAC,gBAAQ,CACdgD,KAAK,CAAErI,gBAAgB,CAAC8E,MAAM,CAACK,CAAC,EAAIA,CAAC,CAAC/B,MAAM,GAAK,WAAW,CAAC,CAAClC,MAAO,CACrEoH,MAAM,cAAE/J,IAAA,CAACf,YAAY,EAACqI,KAAK,CAAE,CAAEC,KAAK,CAAE,SAAU,CAAE,CAAE,CAAE,CACtDyC,UAAU,CAAE,CAAEzC,KAAK,CAAE,SAAS,CAAEQ,QAAQ,CAAE,MAAO,CAAE,CACpD,CAAC,CACE,CAAC,CACJ,CAAC,cACN/H,IAAA,CAAC3B,GAAG,EAAC0N,IAAI,CAAE,CAAE,CAAAvE,QAAA,cACXxH,IAAA,CAACpC,IAAI,EAAC+J,IAAI,CAAC,OAAO,CAACL,KAAK,CAAE,CAAEuB,SAAS,CAAE,QAAQ,CAAEoE,UAAU,CAAE,mBAAoB,CAAE,CAAAzF,QAAA,cACjFxH,IAAA,CAAC1B,SAAS,EACRwI,KAAK,CAAC,mBAAQ,CACdgD,KAAK,CAAErI,gBAAgB,CAAC8E,MAAM,CAACK,CAAC,EAAIA,CAAC,CAAC/B,MAAM,GAAK,MAAM,CAAC,CAAClC,MAAO,CAChEoH,MAAM,cAAE/J,IAAA,CAACf,YAAY,EAACqI,KAAK,CAAE,CAAEC,KAAK,CAAE,SAAU,CAAE,CAAE,CAAE,CACtDyC,UAAU,CAAE,CAAEzC,KAAK,CAAE,SAAS,CAAEQ,QAAQ,CAAE,MAAO,CAAE,CACpD,CAAC,CACE,CAAC,CACJ,CAAC,EACH,CAAC,cAGN/H,IAAA,CAACpC,IAAI,EAACkJ,KAAK,CAAC,uEAAmC,CAACa,IAAI,CAAC,OAAO,CAAAH,QAAA,cAC1DxH,IAAA,CAACnC,KAAK,EACJgJ,OAAO,CAAE,CACP,CACEC,KAAK,CAAE,eAAe,CACtBC,SAAS,CAAE,eAAe,CAC1BC,GAAG,CAAE,eAAe,CACpBC,KAAK,CAAE,GAAG,CACVC,KAAK,CAAE,MAAM,CACbC,MAAM,CAAGC,IAAI,eACXpH,IAAA,CAACI,IAAI,EAAC8M,QAAQ,MAAC7F,MAAM,MAACC,KAAK,CAAE,CAAEC,KAAK,CAAE,SAAU,CAAE,CAAAC,QAAA,CAC/CJ,IAAI,CACD,CAEV,CAAC,CACD,CACEN,KAAK,CAAE,cAAc,CACrBC,SAAS,CAAE,cAAc,CACzBC,GAAG,CAAE,cAAc,CACnBC,KAAK,CAAE,GAAG,CACVE,MAAM,CAAGC,IAAI,eACXpH,IAAA,QAAAwH,QAAA,cACEtH,KAAA,QAAKoH,KAAK,CAAE,CAAE6F,UAAU,CAAE,MAAO,CAAE,CAAA3F,QAAA,EAAC,eAC/B,CAACJ,IAAI,EAAI,wBAAwB,EACjC,CAAC,CACH,CAET,CAAC,CACD,CACEN,KAAK,CAAE,WAAW,CAClBC,SAAS,CAAE,qBAAqB,CAChCC,GAAG,CAAE,aAAa,CAClBC,KAAK,CAAE,GAAG,CACVE,MAAM,CAAEA,CAACC,IAAI,CAAEgB,MAAM,gBACnBlI,KAAA,QAAKoH,KAAK,CAAE,CAAES,QAAQ,CAAE,MAAO,CAAE,CAAAP,QAAA,EAAC,eAC7B,CAACJ,IAAI,EAAItH,UAAU,CAACsI,MAAM,CAACpC,UAAU,CAAC,EAAI,eAAe,EACzD,CAET,CAAC,CACD,CACEc,KAAK,CAAE,UAAU,CACjBC,SAAS,CAAE,gBAAgB,CAC3BC,GAAG,CAAE,gBAAgB,CACrBC,KAAK,CAAE,GAAG,CACV0B,KAAK,CAAE,OAAO,CACdxB,MAAM,CAAGiG,KAAK,eACZpN,IAAA,CAACI,IAAI,EAACiH,MAAM,MAACC,KAAK,CAAE,CAAEC,KAAK,CAAE,SAAS,CAAEQ,QAAQ,CAAE,MAAO,CAAE,CAAAP,QAAA,CACxD3H,cAAc,CAACuN,KAAK,EAAI,CAAC,CAAC,CACvB,CAEV,CAAC,CACD,CACEtG,KAAK,CAAE,YAAY,CACnBC,SAAS,CAAE,QAAQ,CACnBC,GAAG,CAAE,QAAQ,CACbC,KAAK,CAAE,GAAG,CACVE,MAAM,CAAGtC,MAAM,EAAK,CAClB,KAAM,CAAAwI,SAAS,CAAG,CAChB,WAAW,CAAE,CAAE9F,KAAK,CAAE,OAAO,CAAEH,IAAI,CAAE,QAAS,CAAC,CAC/C,MAAM,CAAE,CAAEG,KAAK,CAAE,KAAK,CAAEH,IAAI,CAAE,QAAS,CAAC,CACxC,SAAS,CAAE,CAAEG,KAAK,CAAE,QAAQ,CAAEH,IAAI,CAAE,MAAO,CAAC,CAC5C,UAAU,CAAE,CAAEG,KAAK,CAAE,MAAM,CAAEH,IAAI,CAAE,QAAS,CAC9C,CAAC,CACD,KAAM,CAAAkG,UAAU,CAAGD,SAAS,CAACxI,MAAM,CAAC,EAAI,CAAE0C,KAAK,CAAE,SAAS,CAAEH,IAAI,CAAEvC,MAAO,CAAC,CAC1E,mBAAO7E,IAAA,CAACzB,GAAG,EAACgJ,KAAK,CAAE+F,UAAU,CAAC/F,KAAM,CAAAC,QAAA,CAAE8F,UAAU,CAAClG,IAAI,CAAM,CAAC,CAC9D,CACF,CAAC,CACD,CACEN,KAAK,CAAE,YAAY,CACnBC,SAAS,CAAE,iBAAiB,CAC5BC,GAAG,CAAE,WAAW,CAChBC,KAAK,CAAE,GAAG,CACVE,MAAM,CAAGoG,SAAS,EAAK,CACrB,KAAM,CAAAC,YAAY,CAAG,CACnB,KAAK,CAAE,CAAEjG,KAAK,CAAE,OAAO,CAAEH,IAAI,CAAE,KAAM,CAAC,CACtC,UAAU,CAAE,CAAEG,KAAK,CAAE,MAAM,CAAEH,IAAI,CAAE,SAAU,CAAC,CAC9C,MAAM,CAAE,CAAEG,KAAK,CAAE,MAAM,CAAEH,IAAI,CAAE,KAAM,CAAC,CACtC,MAAM,CAAE,CAAEG,KAAK,CAAE,QAAQ,CAAEH,IAAI,CAAE,KAAM,CAAC,CACxC,MAAM,CAAE,CAAEG,KAAK,CAAE,KAAK,CAAEH,IAAI,CAAE,KAAM,CACtC,CAAC,CACD,KAAM,CAAAqG,aAAa,CAAGD,YAAY,CAACD,SAAS,CAAC,EAAI,CAAEhG,KAAK,CAAE,SAAS,CAAEH,IAAI,CAAEmG,SAAS,EAAI,KAAM,CAAC,CAC/F,mBAAOvN,IAAA,CAACzB,GAAG,EAACgJ,KAAK,CAAEkG,aAAa,CAAClG,KAAM,CAAAC,QAAA,CAAEiG,aAAa,CAACrG,IAAI,CAAM,CAAC,CACpE,CACF,CAAC,CACD,CACEN,KAAK,CAAE,QAAQ,CACfC,SAAS,CAAE,UAAU,CACrBC,GAAG,CAAE,UAAU,CACfC,KAAK,CAAE,EAAE,CACTE,MAAM,CAAGvB,QAAQ,eACf5F,IAAA,CAACzB,GAAG,EAACqJ,IAAI,cAAE5H,IAAA,CAACZ,YAAY,GAAE,CAAE,CAACmI,KAAK,CAAC,MAAM,CAAAC,QAAA,CACtC5B,QAAQ,EAAI,KAAK,CACf,CAET,CAAC,CACD,CACEkB,KAAK,CAAE,oBAAoB,CAC3BE,GAAG,CAAE,UAAU,CACfC,KAAK,CAAE,GAAG,CACVE,MAAM,CAAEA,CAACgB,CAAC,CAAEC,MAAM,GAAK,CACrB,GAAIA,MAAM,CAACtC,mBAAmB,EAAIsC,MAAM,CAACrC,iBAAiB,CAAE,CAC1D,KAAM,CAAA2H,SAAS,CAAG,GAAI,CAAAC,IAAI,CAACvF,MAAM,CAACtC,mBAAmB,CAAC,CACtD,KAAM,CAAA8H,OAAO,CAAG,GAAI,CAAAD,IAAI,CAACvF,MAAM,CAACrC,iBAAiB,CAAC,CAClD,KAAM,CAAA8H,UAAU,CAAGC,IAAI,CAACC,KAAK,CAAC,CAACH,OAAO,CAAGF,SAAS,GAAK,IAAI,CAAG,EAAE,CAAG,EAAE,CAAG,EAAE,CAAG,EAAE,CAAC,CAAC,CAEjF,mBACExN,KAAA,QAAKoH,KAAK,CAAE,CAAES,QAAQ,CAAE,MAAO,CAAE,CAAAP,QAAA,eAC/BtH,KAAA,QAAKoH,KAAK,CAAE,CAAE6F,UAAU,CAAE,MAAM,CAAE5F,KAAK,CAAE,SAAU,CAAE,CAAAC,QAAA,EAAC,qBAChD,CAACqG,UAAU,CAAC,WAClB,EAAK,CAAC,cACN3N,KAAA,QAAKoH,KAAK,CAAE,CAAEC,KAAK,CAAE,MAAO,CAAE,CAAAC,QAAA,EAAC,eAC1B,CAACkG,SAAS,CAACM,kBAAkB,CAAC,OAAO,CAAC,CAAC,UAAG,CAACJ,OAAO,CAACI,kBAAkB,CAAC,OAAO,CAAC,EAC9E,CAAC,EACH,CAAC,CAEV,CACA,mBAAOhO,IAAA,CAACI,IAAI,EAAC8H,IAAI,CAAC,WAAW,CAACZ,KAAK,CAAE,CAAES,QAAQ,CAAE,MAAO,CAAE,CAAAP,QAAA,CAAC,kCAAgB,CAAM,CAAC,CACpF,CACF,CAAC,CACD,CACEV,KAAK,CAAE,mBAAmB,CAC1BE,GAAG,CAAE,iBAAiB,CACtBC,KAAK,CAAE,GAAG,CACVE,MAAM,CAAEA,CAACgB,CAAC,CAAEC,MAAM,gBAChBlI,KAAA,QAAKoH,KAAK,CAAE,CAAES,QAAQ,CAAE,MAAM,CAAEM,UAAU,CAAE,KAAM,CAAE,CAAAb,QAAA,eAClDtH,KAAA,QAAKoH,KAAK,CAAE,CAAE6F,UAAU,CAAE,MAAM,CAAE5F,KAAK,CAAE,SAAU,CAAE,CAAAC,QAAA,EAAC,eACjD,CAACxG,gBAAgB,CAACoD,IAAI,EACtB,CAAC,CACLpD,gBAAgB,CAACsH,KAAK,eACrBpI,KAAA,QAAKoH,KAAK,CAAE,CAAEC,KAAK,CAAE,MAAO,CAAE,CAAAC,QAAA,EAAC,eAC1B,CAACxG,gBAAgB,CAACsH,KAAK,EACvB,CACN,CACAtH,gBAAgB,CAACwH,KAAK,eACrBtI,KAAA,QAAKoH,KAAK,CAAE,CAAEC,KAAK,CAAE,MAAO,CAAE,CAAAC,QAAA,EAAC,eAC1B,CAACxG,gBAAgB,CAACwH,KAAK,EACvB,CACN,CACAxH,gBAAgB,CAACyH,OAAO,eACvBvI,KAAA,QAAKoH,KAAK,CAAE,CAAEC,KAAK,CAAE,MAAO,CAAE,CAAAC,QAAA,EAAC,eAC1B,CAACxG,gBAAgB,CAACyH,OAAO,EACzB,CACN,EACE,CAET,CAAC,CACD,CACFkC,UAAU,CAAElJ,gBAAiB,CAC7BmJ,MAAM,CAAGxC,MAAM,EAAKA,MAAM,CAACzE,EAAE,EAAIyE,MAAM,CAAC/C,aAAc,CACtD7E,OAAO,CAAEmB,uBAAwB,CACjCkJ,UAAU,CAAE,CACVC,QAAQ,CAAE,EAAE,CACZC,eAAe,CAAE,IAAI,CACrBE,SAAS,CAAEA,CAAC3J,KAAK,CAAE4J,KAAK,MAAArH,MAAA,CACnBqH,KAAK,CAAC,CAAC,CAAC,MAAArH,MAAA,CAAIqH,KAAK,CAAC,CAAC,CAAC,eAAArH,MAAA,CAAQvC,KAAK,uBAAW,CACjDqG,IAAI,CAAE,OACR,CAAE,CACFyD,MAAM,CAAE,CAAEC,CAAC,CAAE,IAAI,CAAEC,CAAC,CAAE,qBAAsB,CAAE,CAC9C3D,IAAI,CAAC,OAAO,CACZsG,MAAM,CAAE,CACNC,SAAS,CAAEvM,uBAAuB,CAAG,aAAa,CAAG,6CACvD,CAAE,CACH,CAAC,CACE,CAAC,EACJ,CACN,CACK,CAAC,EACN,CAAC,CAEV,CAAC,CAED,cAAe,CAAAtB,aAAa","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}