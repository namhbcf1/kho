{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Card,Table,Button,Input,Space,Modal,Form,Select,message,Row,Col,Statistic,Tag,Tooltip,DatePicker,Tabs,Badge,Popconfirm,Drawer,Typography,Alert,Divider,InputNumber}from'antd';import{InboxOutlined,WarningOutlined,SettingOutlined,HistoryOutlined,ImportOutlined,ExportOutlined,SearchOutlined,BarChartOutlined,QrcodeOutlined,PlusOutlined,EditOutlined,DeleteOutlined,EyeOutlined}from'@ant-design/icons';import{inventoryAPI,productsAPI,formatCurrency,formatDate}from'../services/api';import moment from'moment';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const{Search}=Input;const{Option}=Select;const{TabPane}=Tabs;const{RangePicker}=DatePicker;const{Text,Title}=Typography;const InventoryPage=()=>{const[products,setProducts]=useState([]);const[transactions,setTransactions]=useState([]);const[loading,setLoading]=useState(false);const[isAdjustModalVisible,setIsAdjustModalVisible]=useState(false);const[isSerialDrawerVisible,setIsSerialDrawerVisible]=useState(false);const[isAddSerialModalVisible,setIsAddSerialModalVisible]=useState(false);const[selectedProduct,setSelectedProduct]=useState(null);const[productSerials,setProductSerials]=useState([]);const[searchText,setSearchText]=useState('');const[activeTab,setActiveTab]=useState('stock');const[stats,setStats]=useState({totalProducts:0,lowStockProducts:0,totalValue:0,outOfStock:0,totalSerials:0,availableSerials:0});const[form]=Form.useForm();const[serialForm]=Form.useForm();const serialStatuses=[{value:'available',label:'Có sẵn',color:'green'},{value:'sold',label:'Đã bán',color:'red'},{value:'reserved',label:'Đã đặt',color:'orange'},{value:'defective',label:'Lỗi',color:'red'}];const conditionGrades=[{value:'new',label:'Mới',color:'green'},{value:'used_like_new',label:'Cũ như mới',color:'blue'},{value:'used_good',label:'Cũ tốt',color:'orange'},{value:'used_fair',label:'Cũ khá',color:'yellow'},{value:'refurbished',label:'Tân trang',color:'purple'},{value:'damaged',label:'Hư hỏng',color:'red'}];// Mock serial data for demonstration\nconst generateMockSerials=(productId,quantity,productName)=>{const serials=[];for(let i=1;i<=quantity;i++){const serialNumber=\"\".concat(productName.substring(0,3).toUpperCase()).concat(Date.now().toString().slice(-6)).concat(i.toString().padStart(3,'0'));serials.push({id:\"\".concat(productId,\"_\").concat(i),serial_number:serialNumber,status:Math.random()>0.2?'available':'sold',condition_grade:Math.random()>0.8?'used_like_new':'new',warranty_start_date:moment().subtract(Math.floor(Math.random()*30),'days').format('YYYY-MM-DD'),warranty_end_date:moment().add(Math.floor(Math.random()*24+12),'months').format('YYYY-MM-DD'),location:\"\".concat(String.fromCharCode(65+Math.floor(Math.random()*3))).concat(Math.floor(Math.random()*5+1),\"-\").concat(i.toString().padStart(2,'0')),notes:Math.random()>0.7?'Kiểm tra định kỳ':null,created_at:moment().subtract(Math.floor(Math.random()*60),'days').toISOString()});}return serials;};useEffect(()=>{if(activeTab==='stock'){fetchProducts();}else if(activeTab==='transactions'){fetchTransactions();}},[activeTab,searchText]);const fetchProducts=async()=>{try{setLoading(true);const response=await productsAPI.getAll({search:searchText});if(response.data.success){setProducts(response.data.data);calculateStats(response.data.data);}}catch(error){message.error('Lỗi khi tải danh sách sản phẩm');console.error('Error fetching products:',error);}finally{setLoading(false);}};const fetchTransactions=async()=>{try{setLoading(true);const response=await inventoryAPI.getTransactions({limit:100});if(response.data.success){setTransactions(response.data.data);}}catch(error){message.error('Lỗi khi tải lịch sử giao dịch');console.error('Error fetching transactions:',error);}finally{setLoading(false);}};const fetchProductSerials=async product=>{try{setLoading(true);// For demo purposes, generate mock serial data\nconst mockSerials=generateMockSerials(product.id,product.quantity,product.name);setProductSerials(mockSerials);}catch(error){message.error('Lỗi khi tải danh sách serial');console.error('Error fetching serials:',error);}finally{setLoading(false);}};const calculateStats=productData=>{const stats={totalProducts:productData.length,lowStockProducts:productData.filter(p=>p.quantity<=(p.min_stock||10)).length,totalValue:productData.reduce((sum,p)=>sum+p.quantity*(p.cost_price||p.price),0),outOfStock:productData.filter(p=>p.quantity===0).length,totalSerials:productData.reduce((sum,p)=>sum+(p.quantity||0),0),availableSerials:productData.reduce((sum,p)=>sum+(p.quantity||0),0)};setStats(stats);};const showAdjustModal=product=>{setSelectedProduct(product);setIsAdjustModalVisible(true);form.setFieldsValue({current_quantity:product.quantity,new_quantity:product.quantity,reason:''});};const showSerialDrawer=async product=>{setSelectedProduct(product);setIsSerialDrawerVisible(true);await fetchProductSerials(product);};const showAddSerialModal=product=>{setSelectedProduct(product);setIsAddSerialModalVisible(true);serialForm.resetFields();serialForm.setFieldsValue({condition_grade:'new',status:'available',warranty_start_date:moment(),warranty_period:12});};const handleAdjustStock=async values=>{try{await inventoryAPI.adjustStock({product_id:selectedProduct.id,new_quantity:values.new_quantity,reason:values.reason,user_id:1});message.success('Điều chỉnh tồn kho thành công');setIsAdjustModalVisible(false);form.resetFields();fetchProducts();}catch(error){message.error('Lỗi khi điều chỉnh tồn kho');console.error('Error adjusting stock:',error);}};const handleAddSerials=async values=>{try{const serials=[];if(values.serial_list&&values.serial_list.trim()){const lines=values.serial_list.split('\\n').map(s=>s.trim()).filter(Boolean);for(const serial of lines){serials.push({serial_number:serial,status:values.status,condition_grade:values.condition_grade,warranty_start_date:values.warranty_start_date?values.warranty_start_date.format('YYYY-MM-DD'):null,warranty_end_date:values.warranty_start_date&&values.warranty_period?values.warranty_start_date.clone().add(values.warranty_period,'months').format('YYYY-MM-DD'):null,location:values.location,notes:values.notes});}}else{const prefix=values.serial_prefix||selectedProduct.sku||selectedProduct.name.substring(0,3).toUpperCase();for(let i=1;i<=values.quantity;i++){serials.push({serial_number:\"\".concat(prefix,\"-\").concat(Date.now(),\"-\").concat(i),status:values.status,condition_grade:values.condition_grade,warranty_start_date:values.warranty_start_date?values.warranty_start_date.format('YYYY-MM-DD'):null,warranty_end_date:values.warranty_start_date&&values.warranty_period?values.warranty_start_date.clone().add(values.warranty_period,'months').format('YYYY-MM-DD'):null,location:values.location,notes:values.notes});}}await productsAPI.addSerials(selectedProduct.id,{serials});message.success(\"Th\\xEAm \".concat(serials.length,\" serial th\\xE0nh c\\xF4ng!\"));setIsAddSerialModalVisible(false);serialForm.resetFields();if(isSerialDrawerVisible){fetchProductSerials(selectedProduct);}fetchProducts();}catch(error){message.error('Lỗi khi thêm serial');console.error('Error adding serials:',error);}};const handleDeleteSerial=async serialId=>{try{message.success('Xóa serial thành công (Demo)');const updatedSerials=productSerials.filter(s=>s.id!==serialId);setProductSerials(updatedSerials);}catch(error){message.error('Lỗi khi xóa serial');console.error('Error deleting serial:',error);}};const getStockStatus=(quantity,minStock)=>{if(quantity===0){return{status:'Hết hàng',color:'red'};}else if(quantity<=minStock){return{status:'Sắp hết',color:'orange'};}else{return{status:'Còn hàng',color:'green'};}};const getWarrantyStatus=warrantyEnd=>{if(!warrantyEnd)return{status:'N/A',color:'default'};const endDate=moment(warrantyEnd);const now=moment();const daysLeft=endDate.diff(now,'days');if(daysLeft<0){return{status:'Hết hạn',color:'red'};}else if(daysLeft<=30){return{status:\"\".concat(daysLeft,\" ng\\xE0y\"),color:'orange'};}else{return{status:\"\".concat(Math.floor(daysLeft/30),\" th\\xE1ng\"),color:'green'};}};const stockColumns=[{title:'Sản phẩm',key:'product_info',render:(_,record)=>/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:'bold'},children:record.name}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'12px',color:'#666'},children:[\"SKU: \",record.sku||'N/A',\" | Barcode: \",record.barcode||'N/A']})]})},{title:'Danh mục',dataIndex:'category',key:'category',width:120,render:category=>category||'Chưa phân loại'},{title:'Tồn kho',key:'stock_info',width:150,render:(_,record)=>{const stockStatus=getStockStatus(record.quantity,record.min_stock||10);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'16px',fontWeight:'bold'},children:[record.quantity,\" \",record.unit||'cái']}),/*#__PURE__*/_jsx(Tag,{color:stockStatus.color,children:stockStatus.status}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'11px',color:'#666',marginTop:2},children:[\"Min: \",record.min_stock||10]})]});},sorter:(a,b)=>a.quantity-b.quantity},{title:'Serial Numbers',key:'serials',width:140,render:(_,record)=>/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Badge,{count:record.quantity,style:{backgroundColor:'#52c41a'},children:/*#__PURE__*/_jsx(Button,{size:\"small\",icon:/*#__PURE__*/_jsx(QrcodeOutlined,{}),onClick:()=>showSerialDrawer(record),children:\"Xem Serial\"})}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'11px',color:'#666',marginTop:4},children:/*#__PURE__*/_jsx(Text,{type:\"secondary\",children:\"Qu\\u1EA3n l\\xFD t\\u1EEBng serial\"})})]})},{title:'Giá vốn/Bán',key:'pricing',width:150,render:(_,record)=>/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:'bold'},children:formatCurrency(record.price)}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'12px',color:'#666'},children:[\"V\\u1ED1n: \",formatCurrency(record.cost_price||record.price*0.7)]})]})},{title:'Giá trị tồn kho',key:'stock_value',width:150,render:(_,record)=>{const value=record.quantity*(record.cost_price||record.price*0.7||0);return/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:'bold',color:'#52c41a'},children:formatCurrency(value)});},sorter:(a,b)=>{const valueA=a.quantity*(a.cost_price||a.price*0.7||0);const valueB=b.quantity*(b.cost_price||b.price*0.7||0);return valueA-valueB;}},{title:'Thao tác',key:'actions',width:200,render:(_,record)=>/*#__PURE__*/_jsxs(Space,{children:[/*#__PURE__*/_jsx(Tooltip,{title:\"Xem Serial Numbers\",children:/*#__PURE__*/_jsx(Button,{size:\"small\",icon:/*#__PURE__*/_jsx(EyeOutlined,{}),onClick:()=>showSerialDrawer(record)})}),/*#__PURE__*/_jsx(Tooltip,{title:\"Th\\xEAm Serial\",children:/*#__PURE__*/_jsx(Button,{size:\"small\",icon:/*#__PURE__*/_jsx(PlusOutlined,{}),onClick:()=>showAddSerialModal(record)})}),/*#__PURE__*/_jsx(Tooltip,{title:\"\\u0110i\\u1EC1u ch\\u1EC9nh t\\u1ED3n kho\",children:/*#__PURE__*/_jsx(Button,{size:\"small\",icon:/*#__PURE__*/_jsx(SettingOutlined,{}),onClick:()=>showAdjustModal(record)})})]})}];const serialColumns=[{title:'Serial Number',dataIndex:'serial_number',key:'serial_number',render:serial=>/*#__PURE__*/_jsx(Text,{code:true,copyable:true,style:{fontWeight:'bold'},children:serial})},{title:'Trạng thái',dataIndex:'status',key:'status',render:status=>{const statusInfo=serialStatuses.find(s=>s.value===status);return/*#__PURE__*/_jsx(Tag,{color:statusInfo===null||statusInfo===void 0?void 0:statusInfo.color,children:(statusInfo===null||statusInfo===void 0?void 0:statusInfo.label)||status});}},{title:'Tình trạng',dataIndex:'condition_grade',key:'condition_grade',render:condition=>{const conditionInfo=conditionGrades.find(c=>c.value===condition);return/*#__PURE__*/_jsx(Tag,{color:conditionInfo===null||conditionInfo===void 0?void 0:conditionInfo.color,children:(conditionInfo===null||conditionInfo===void 0?void 0:conditionInfo.label)||condition});}},{title:'Vị trí',dataIndex:'location',key:'location',render:location=>location||'N/A'},{title:'Bảo hành',key:'warranty',render:(_,record)=>{const warranty=getWarrantyStatus(record.warranty_end_date);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Tag,{color:warranty.color,children:warranty.status}),record.warranty_end_date&&/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'11px',color:'#666'},children:[\"\\u0110\\u1EBFn: \",moment(record.warranty_end_date).format('DD/MM/YYYY')]})]});}},{title:'Thao tác',key:'actions',render:(_,record)=>/*#__PURE__*/_jsxs(Space,{children:[/*#__PURE__*/_jsx(Button,{size:\"small\",icon:/*#__PURE__*/_jsx(EditOutlined,{}),onClick:()=>{message.info('Tính năng chỉnh sửa serial sẽ có trong phiên bản tiếp theo');}}),/*#__PURE__*/_jsx(Popconfirm,{title:\"B\\u1EA1n c\\xF3 ch\\u1EAFc mu\\u1ED1n x\\xF3a serial n\\xE0y?\",onConfirm:()=>handleDeleteSerial(record.id),okText:\"X\\xF3a\",cancelText:\"H\\u1EE7y\",children:/*#__PURE__*/_jsx(Button,{size:\"small\",danger:true,icon:/*#__PURE__*/_jsx(DeleteOutlined,{})})})]})}];const transactionColumns=[{title:'Thời gian',dataIndex:'created_at',key:'created_at',width:150,render:date=>formatDate(date),sorter:(a,b)=>new Date(a.created_at)-new Date(b.created_at)},{title:'Loại giao dịch',dataIndex:'type',key:'type',width:120,render:type=>{const typeConfig={import:{label:'Nhập kho',color:'green',icon:/*#__PURE__*/_jsx(ImportOutlined,{})},export:{label:'Xuất kho',color:'red',icon:/*#__PURE__*/_jsx(ExportOutlined,{})},adjustment:{label:'Điều chỉnh',color:'blue',icon:/*#__PURE__*/_jsx(SettingOutlined,{})},return:{label:'Trả hàng',color:'orange',icon:/*#__PURE__*/_jsx(HistoryOutlined,{})}};const config=typeConfig[type]||{label:type,color:'default'};return/*#__PURE__*/_jsx(Tag,{color:config.color,icon:config.icon,children:config.label});}},{title:'Sản phẩm',dataIndex:'product_name',key:'product_name'},{title:'Số lượng trước',dataIndex:'quantity_before',key:'quantity_before',width:120,render:qty=>/*#__PURE__*/_jsx(\"span\",{children:qty})},{title:'Thay đổi',dataIndex:'quantity_change',key:'quantity_change',width:100,render:change=>/*#__PURE__*/_jsxs(\"span\",{style:{color:change>0?'#52c41a':'#ff4d4f',fontWeight:'bold'},children:[change>0?'+':'',change]})},{title:'Số lượng sau',dataIndex:'quantity_after',key:'quantity_after',width:120,render:qty=>/*#__PURE__*/_jsx(\"strong\",{children:qty})},{title:'Nhân viên',dataIndex:'user_name',key:'user_name',width:120,render:name=>name||'Hệ thống'},{title:'Ghi chú',dataIndex:'notes',key:'notes'}];const lowStockProducts=products.filter(p=>p.quantity<=(p.min_stock||10));return/*#__PURE__*/_jsxs(\"div\",{style:{padding:'24px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:24},children:[/*#__PURE__*/_jsx(Title,{level:2,children:\"Qu\\u1EA3n l\\xFD kho - Serial Number Tracking\"}),/*#__PURE__*/_jsx(Text,{type:\"secondary\",children:\"Theo d\\xF5i chi ti\\u1EBFt t\\u1EEBng serial number v\\xE0 qu\\u1EA3n l\\xFD t\\u1ED3n kho th\\xF4ng minh cho c\\u1EEDa h\\xE0ng m\\xE1y t\\xEDnh\"})]}),/*#__PURE__*/_jsx(Alert,{message:\"\\uD83C\\uDFAF T\\xEDnh n\\u0103ng Serial Number Management\",description:\"H\\u1EC7 th\\u1ED1ng \\u0111\\xE3 s\\u1EB5n s\\xE0ng cho vi\\u1EC7c qu\\u1EA3n l\\xFD chi ti\\u1EBFt t\\u1EEBng serial number. M\\u1ED7i s\\u1EA3n ph\\u1EA9m s\\u1EBD c\\xF3 danh s\\xE1ch serial ri\\xEAng v\\u1EDBi theo d\\xF5i b\\u1EA3o h\\xE0nh, v\\u1ECB tr\\xED kho, v\\xE0 tr\\u1EA1ng th\\xE1i. Khi b\\xE1n h\\xE0ng, serial s\\u1EBD \\u0111\\u01B0\\u1EE3c chuy\\u1EC3n t\\u1EEB kho sang danh s\\xE1ch \\u0111\\xE3 b\\xE1n.\",type:\"info\",showIcon:true,style:{marginBottom:24}}),/*#__PURE__*/_jsxs(Row,{gutter:[16,16],style:{marginBottom:24},children:[/*#__PURE__*/_jsx(Col,{span:4,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(Statistic,{title:\"T\\u1ED5ng s\\u1EA3n ph\\u1EA9m\",value:stats.totalProducts,prefix:/*#__PURE__*/_jsx(InboxOutlined,{}),valueStyle:{color:'#1890ff'}})})}),/*#__PURE__*/_jsx(Col,{span:4,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(Statistic,{title:\"S\\u1EAFp h\\u1EBFt h\\xE0ng\",value:stats.lowStockProducts,prefix:/*#__PURE__*/_jsx(WarningOutlined,{}),valueStyle:{color:'#faad14'}})})}),/*#__PURE__*/_jsx(Col,{span:4,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(Statistic,{title:\"H\\u1EBFt h\\xE0ng\",value:stats.outOfStock,prefix:/*#__PURE__*/_jsx(WarningOutlined,{}),valueStyle:{color:'#ff4d4f'}})})}),/*#__PURE__*/_jsx(Col,{span:4,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(Statistic,{title:\"T\\u1ED5ng Serial\",value:stats.totalSerials,prefix:/*#__PURE__*/_jsx(QrcodeOutlined,{}),valueStyle:{color:'#722ed1'}})})}),/*#__PURE__*/_jsx(Col,{span:4,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(Statistic,{title:\"Serial c\\xF3 s\\u1EB5n\",value:stats.availableSerials,prefix:/*#__PURE__*/_jsx(QrcodeOutlined,{}),valueStyle:{color:'#52c41a'}})})}),/*#__PURE__*/_jsx(Col,{span:4,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(Statistic,{title:\"Gi\\xE1 tr\\u1ECB t\\u1ED3n kho\",value:stats.totalValue,formatter:value=>formatCurrency(value),prefix:/*#__PURE__*/_jsx(BarChartOutlined,{}),valueStyle:{color:'#13c2c2'}})})})]}),/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(Tabs,{activeKey:activeTab,onChange:setActiveTab,children:[/*#__PURE__*/_jsxs(TabPane,{tab:\"T\\u1ED3n kho & Serial\",children:[/*#__PURE__*/_jsxs(Row,{gutter:[16,16],style:{marginBottom:16},children:[/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(Search,{placeholder:\"T\\xECm s\\u1EA3n ph\\u1EA9m theo t\\xEAn, SKU, barcode...\",value:searchText,onChange:e=>setSearchText(e.target.value),onSearch:fetchProducts,enterButton:/*#__PURE__*/_jsx(SearchOutlined,{}),allowClear:true})}),/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsxs(Space,{style:{float:'right'},children:[/*#__PURE__*/_jsx(Button,{icon:/*#__PURE__*/_jsx(ImportOutlined,{}),children:\"Import Serial\"}),/*#__PURE__*/_jsx(Button,{icon:/*#__PURE__*/_jsx(ExportOutlined,{}),children:\"Export Data\"})]})})]}),/*#__PURE__*/_jsx(Table,{columns:stockColumns,dataSource:products,rowKey:\"id\",loading:loading,pagination:{total:products.length,pageSize:15,showSizeChanger:true,showQuickJumper:true,showTotal:(total,range)=>\"\".concat(range[0],\"-\").concat(range[1],\" c\\u1EE7a \").concat(total,\" s\\u1EA3n ph\\u1EA9m\")},scroll:{x:1400}})]},\"stock\"),/*#__PURE__*/_jsxs(TabPane,{tab:\"L\\u1ECBch s\\u1EED giao d\\u1ECBch\",children:[/*#__PURE__*/_jsxs(Row,{gutter:[16,16],style:{marginBottom:16},children:[/*#__PURE__*/_jsx(Col,{span:8,children:/*#__PURE__*/_jsx(Search,{placeholder:\"T\\xECm theo s\\u1EA3n ph\\u1EA9m...\",onSearch:value=>{setSearchText(value);fetchTransactions();},enterButton:/*#__PURE__*/_jsx(SearchOutlined,{}),allowClear:true})}),/*#__PURE__*/_jsx(Col,{span:6,children:/*#__PURE__*/_jsxs(Select,{style:{width:'100%'},placeholder:\"L\\u1ECDc theo lo\\u1EA1i giao d\\u1ECBch\",allowClear:true,onChange:value=>{// TODO: Filter transactions by type\n},children:[/*#__PURE__*/_jsx(Option,{value:\"import\",children:\"Nh\\u1EADp kho\"}),/*#__PURE__*/_jsx(Option,{value:\"export\",children:\"Xu\\u1EA5t kho\"}),/*#__PURE__*/_jsx(Option,{value:\"adjustment\",children:\"\\u0110i\\u1EC1u ch\\u1EC9nh\"}),/*#__PURE__*/_jsx(Option,{value:\"return\",children:\"Tr\\u1EA3 h\\xE0ng\"})]})}),/*#__PURE__*/_jsx(Col,{span:10,children:/*#__PURE__*/_jsx(RangePicker,{style:{width:'100%'},placeholder:['Từ ngày','Đến ngày'],onChange:dates=>{// TODO: Filter transactions by date range\n}})})]}),/*#__PURE__*/_jsx(Table,{columns:transactionColumns,dataSource:transactions,rowKey:\"id\",loading:loading,pagination:{total:transactions.length,pageSize:15,showSizeChanger:true,showQuickJumper:true,showTotal:(total,range)=>\"\".concat(range[0],\"-\").concat(range[1],\" c\\u1EE7a \").concat(total,\" giao d\\u1ECBch\")},scroll:{x:1200}})]},\"transactions\"),/*#__PURE__*/_jsx(TabPane,{tab:\"C\\u1EA3nh b\\xE1o t\\u1ED3n kho\",children:/*#__PURE__*/_jsxs(Card,{title:\"S\\u1EA3n ph\\u1EA9m s\\u1EAFp h\\u1EBFt h\\xE0ng\",style:{marginBottom:16},children:[/*#__PURE__*/_jsx(Alert,{message:\"C\\u1EA3nh b\\xE1o t\\u1ED3n kho\",description:\"C\\xF3 \".concat(lowStockProducts.length,\" s\\u1EA3n ph\\u1EA9m s\\u1EAFp h\\u1EBFt h\\xE0ng. H\\xE3y li\\xEAn h\\u1EC7 nh\\xE0 cung c\\u1EA5p \\u0111\\u1EC3 nh\\u1EADp th\\xEAm.\"),type:\"warning\",showIcon:true,style:{marginBottom:16}}),/*#__PURE__*/_jsx(Table,{columns:stockColumns.filter(col=>['product_info','stock_info','serials','actions'].includes(col.key)),dataSource:lowStockProducts,rowKey:\"id\",pagination:false,size:\"small\"})]})},\"alerts\")]})}),/*#__PURE__*/_jsx(Drawer,{title:\"Serial Numbers - \".concat(selectedProduct===null||selectedProduct===void 0?void 0:selectedProduct.name),width:900,visible:isSerialDrawerVisible,onClose:()=>setIsSerialDrawerVisible(false),extra:/*#__PURE__*/_jsxs(Space,{children:[/*#__PURE__*/_jsx(Button,{type:\"primary\",icon:/*#__PURE__*/_jsx(PlusOutlined,{}),onClick:()=>showAddSerialModal(selectedProduct),children:\"Th\\xEAm Serial\"}),/*#__PURE__*/_jsx(Button,{icon:/*#__PURE__*/_jsx(ExportOutlined,{}),children:\"Export\"})]}),children:selectedProduct&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Card,{size:\"small\",style:{marginBottom:16},children:/*#__PURE__*/_jsxs(Row,{gutter:16,children:[/*#__PURE__*/_jsxs(Col,{span:12,children:[/*#__PURE__*/_jsx(Text,{strong:true,children:\"S\\u1EA3n ph\\u1EA9m: \"}),selectedProduct.name]}),/*#__PURE__*/_jsxs(Col,{span:12,children:[/*#__PURE__*/_jsx(Text,{strong:true,children:\"SKU: \"}),selectedProduct.sku||'N/A']}),/*#__PURE__*/_jsxs(Col,{span:12,children:[/*#__PURE__*/_jsx(Text,{strong:true,children:\"T\\u1ED3n kho: \"}),selectedProduct.quantity,\" c\\xE1i\"]}),/*#__PURE__*/_jsxs(Col,{span:12,children:[/*#__PURE__*/_jsx(Text,{strong:true,children:\"Serial c\\xF3 s\\u1EB5n: \"}),productSerials.filter(s=>s.status==='available').length,\" c\\xE1i\"]})]})}),/*#__PURE__*/_jsx(Alert,{message:\"Demo: Qu\\u1EA3n l\\xFD Serial Number\",description:\"\\u0110\\xE2y l\\xE0 giao di\\u1EC7n demo cho vi\\u1EC7c qu\\u1EA3n l\\xFD serial number. Trong phi\\xEAn b\\u1EA3n \\u0111\\u1EA7y \\u0111\\u1EE7, m\\u1ED7i serial s\\u1EBD \\u0111\\u01B0\\u1EE3c l\\u01B0u tr\\u1EEF ri\\xEAng bi\\u1EC7t v\\u1EDBi \\u0111\\u1EA7y \\u0111\\u1EE7 th\\xF4ng tin b\\u1EA3o h\\xE0nh, v\\u1ECB tr\\xED kho, v\\xE0 l\\u1ECBch s\\u1EED.\",type:\"info\",style:{marginBottom:16}}),/*#__PURE__*/_jsx(Table,{columns:serialColumns,dataSource:productSerials,rowKey:\"id\",loading:loading,pagination:{pageSize:10,showSizeChanger:true,showTotal:(total,range)=>\"\".concat(range[0],\"-\").concat(range[1],\" c\\u1EE7a \").concat(total,\" serial\")},scroll:{x:700}})]})}),/*#__PURE__*/_jsx(Modal,{title:\"Th\\xEAm Serial cho \".concat(selectedProduct===null||selectedProduct===void 0?void 0:selectedProduct.name),visible:isAddSerialModalVisible,onCancel:()=>setIsAddSerialModalVisible(false),footer:null,width:700,children:/*#__PURE__*/_jsxs(Form,{form:serialForm,layout:\"vertical\",onFinish:handleAddSerials,children:[/*#__PURE__*/_jsx(Alert,{message:\"Th\\xEAm Serial Numbers\",description:\"B\\u1EA1n c\\xF3 th\\u1EC3 th\\xEAm m\\u1ED9t ho\\u1EB7c nhi\\u1EC1u serial numbers c\\xF9ng l\\xFAc. H\\u1EC7 th\\u1ED1ng s\\u1EBD t\\u1EF1 \\u0111\\u1ED9ng t\\u1EA1o serial number theo format n\\u1EBFu kh\\xF4ng nh\\u1EADp th\\u1EE7 c\\xF4ng.\",type:\"info\",style:{marginBottom:16}}),/*#__PURE__*/_jsxs(Row,{gutter:16,children:[/*#__PURE__*/_jsx(Col,{span:8,children:/*#__PURE__*/_jsx(Form.Item,{label:\"S\\u1ED1 l\\u01B0\\u1EE3ng\",name:\"quantity\",rules:[{required:true,message:'Vui lòng nhập số lượng'}],initialValue:1,children:/*#__PURE__*/_jsx(InputNumber,{min:1,max:100,style:{width:'100%'}})})}),/*#__PURE__*/_jsx(Col,{span:8,children:/*#__PURE__*/_jsx(Form.Item,{label:\"Tr\\u1EA1ng th\\xE1i\",name:\"status\",rules:[{required:true,message:'Vui lòng chọn trạng thái'}],children:/*#__PURE__*/_jsx(Select,{children:serialStatuses.map(status=>/*#__PURE__*/_jsx(Option,{value:status.value,children:/*#__PURE__*/_jsx(Tag,{color:status.color,children:status.label})},status.value))})})}),/*#__PURE__*/_jsx(Col,{span:8,children:/*#__PURE__*/_jsx(Form.Item,{label:\"T\\xECnh tr\\u1EA1ng\",name:\"condition_grade\",rules:[{required:true,message:'Vui lòng chọn tình trạng'}],children:/*#__PURE__*/_jsx(Select,{children:conditionGrades.map(condition=>/*#__PURE__*/_jsx(Option,{value:condition.value,children:/*#__PURE__*/_jsx(Tag,{color:condition.color,children:condition.label})},condition.value))})})})]}),/*#__PURE__*/_jsxs(Row,{gutter:16,children:[/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(Form.Item,{label:\"Prefix Serial (t\\xF9y ch\\u1ECDn)\",name:\"serial_prefix\",tooltip:\"VD: CPU2024, GPU2024 - H\\u1EC7 th\\u1ED1ng s\\u1EBD t\\u1EF1 \\u0111\\u1ED9ng t\\u1EA1o serial theo format\",children:/*#__PURE__*/_jsx(Input,{placeholder:\"VD: CPU2024, GPU2024\"})})}),/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(Form.Item,{label:\"V\\u1ECB tr\\xED kho\",name:\"location\",children:/*#__PURE__*/_jsx(Input,{placeholder:\"VD: A1-01, B2-05\"})})})]}),/*#__PURE__*/_jsxs(Row,{gutter:16,children:[/*#__PURE__*/_jsx(Col,{span:8,children:/*#__PURE__*/_jsx(Form.Item,{label:\"Ng\\xE0y b\\u1EAFt \\u0111\\u1EA7u BH\",name:\"warranty_start_date\",children:/*#__PURE__*/_jsx(DatePicker,{style:{width:'100%'},format:\"DD/MM/YYYY\"})})}),/*#__PURE__*/_jsx(Col,{span:8,children:/*#__PURE__*/_jsx(Form.Item,{label:\"Th\\u1EDDi h\\u1EA1n BH (th\\xE1ng)\",name:\"warranty_period\",children:/*#__PURE__*/_jsx(InputNumber,{min:0,max:120,style:{width:'100%'}})})}),/*#__PURE__*/_jsx(Col,{span:8,children:/*#__PURE__*/_jsx(Form.Item,{shouldUpdate:(prevValues,currentValues)=>prevValues.warranty_start_date!==currentValues.warranty_start_date||prevValues.warranty_period!==currentValues.warranty_period,children:_ref=>{let{getFieldValue}=_ref;const startDate=getFieldValue('warranty_start_date');const period=getFieldValue('warranty_period');const endDate=startDate&&period?startDate.clone().add(period,'months'):null;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Text,{type:\"secondary\",children:\"Ng\\xE0y k\\u1EBFt th\\xFAc BH:\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:'bold'},children:endDate?endDate.format('DD/MM/YYYY'):'N/A'})]});}})})]}),/*#__PURE__*/_jsx(Form.Item,{label:\"Ghi ch\\xFA\",name:\"notes\",children:/*#__PURE__*/_jsx(Input.TextArea,{rows:2,placeholder:\"Ghi ch\\xFA th\\xEAm v\\u1EC1 serial...\"})}),/*#__PURE__*/_jsx(Form.Item,{label:\"Nh\\u1EADp danh s\\xE1ch serial (m\\u1ED7i d\\xF2ng 1 serial)\",name:\"serial_list\",children:/*#__PURE__*/_jsx(Input.TextArea,{rows:3,placeholder:\"Nh\\u1EADp serial th\\u1EE7 c\\xF4ng, m\\u1ED7i d\\xF2ng 1 serial (t\\xF9y ch\\u1ECDn)\"})}),/*#__PURE__*/_jsx(\"div\",{style:{textAlign:'right'},children:/*#__PURE__*/_jsxs(Space,{children:[/*#__PURE__*/_jsx(Button,{onClick:()=>setIsAddSerialModalVisible(false),children:\"H\\u1EE7y\"}),/*#__PURE__*/_jsx(Button,{type:\"primary\",htmlType:\"submit\",children:\"Th\\xEAm Serial\"})]})})]})}),/*#__PURE__*/_jsx(Modal,{title:\"\\u0110i\\u1EC1u ch\\u1EC9nh t\\u1ED3n kho\",visible:isAdjustModalVisible,onCancel:()=>setIsAdjustModalVisible(false),footer:null,width:500,children:selectedProduct&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Card,{size:\"small\",style:{marginBottom:16,backgroundColor:'#f5f5f5'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"S\\u1EA3n ph\\u1EA9m:\"}),\" \",selectedProduct.name]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"SKU:\"}),\" \",selectedProduct.sku||'N/A']}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"T\\u1ED3n kho hi\\u1EC7n t\\u1EA1i:\"}),\" \",selectedProduct.quantity,\" \",selectedProduct.unit||'cái']})]}),/*#__PURE__*/_jsxs(Form,{form:form,layout:\"vertical\",onFinish:handleAdjustStock,children:[/*#__PURE__*/_jsxs(Row,{gutter:16,children:[/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(Form.Item,{label:\"S\\u1ED1 l\\u01B0\\u1EE3ng hi\\u1EC7n t\\u1EA1i\",name:\"current_quantity\",children:/*#__PURE__*/_jsx(Input,{disabled:true})})}),/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(Form.Item,{label:\"S\\u1ED1 l\\u01B0\\u1EE3ng m\\u1EDBi\",name:\"new_quantity\",rules:[{required:true,message:'Vui lòng nhập số lượng mới'},{type:'number',min:0,message:'Số lượng phải >= 0'}],children:/*#__PURE__*/_jsx(Input,{type:\"number\",min:0,placeholder:\"Nh\\u1EADp s\\u1ED1 l\\u01B0\\u1EE3ng m\\u1EDBi\"})})})]}),/*#__PURE__*/_jsx(Form.Item,{label:\"L\\xFD do \\u0111i\\u1EC1u ch\\u1EC9nh\",name:\"reason\",rules:[{required:true,message:'Vui lòng nhập lý do'}],children:/*#__PURE__*/_jsx(Input.TextArea,{rows:3,placeholder:\"Nh\\u1EADp l\\xFD do \\u0111i\\u1EC1u ch\\u1EC9nh t\\u1ED3n kho...\"})}),/*#__PURE__*/_jsx(\"div\",{style:{textAlign:'right'},children:/*#__PURE__*/_jsxs(Space,{children:[/*#__PURE__*/_jsx(Button,{onClick:()=>setIsAdjustModalVisible(false),children:\"H\\u1EE7y\"}),/*#__PURE__*/_jsx(Button,{type:\"primary\",htmlType:\"submit\",children:\"X\\xE1c nh\\u1EADn \\u0111i\\u1EC1u ch\\u1EC9nh\"})]})})]})]})})]});};export default InventoryPage;","map":{"version":3,"names":["React","useState","useEffect","Card","Table","Button","Input","Space","Modal","Form","Select","message","Row","Col","Statistic","Tag","Tooltip","DatePicker","Tabs","Badge","Popconfirm","Drawer","Typography","Alert","Divider","InputNumber","InboxOutlined","WarningOutlined","SettingOutlined","HistoryOutlined","ImportOutlined","ExportOutlined","SearchOutlined","BarChartOutlined","QrcodeOutlined","PlusOutlined","EditOutlined","DeleteOutlined","EyeOutlined","inventoryAPI","productsAPI","formatCurrency","formatDate","moment","jsx","_jsx","jsxs","_jsxs","Search","Option","TabPane","RangePicker","Text","Title","InventoryPage","products","setProducts","transactions","setTransactions","loading","setLoading","isAdjustModalVisible","setIsAdjustModalVisible","isSerialDrawerVisible","setIsSerialDrawerVisible","isAddSerialModalVisible","setIsAddSerialModalVisible","selectedProduct","setSelectedProduct","productSerials","setProductSerials","searchText","setSearchText","activeTab","setActiveTab","stats","setStats","totalProducts","lowStockProducts","totalValue","outOfStock","totalSerials","availableSerials","form","useForm","serialForm","serialStatuses","value","label","color","conditionGrades","generateMockSerials","productId","quantity","productName","serials","i","serialNumber","concat","substring","toUpperCase","Date","now","toString","slice","padStart","push","id","serial_number","status","Math","random","condition_grade","warranty_start_date","subtract","floor","format","warranty_end_date","add","location","String","fromCharCode","notes","created_at","toISOString","fetchProducts","fetchTransactions","response","getAll","search","data","success","calculateStats","error","console","getTransactions","limit","fetchProductSerials","product","mockSerials","name","productData","length","filter","p","min_stock","reduce","sum","cost_price","price","showAdjustModal","setFieldsValue","current_quantity","new_quantity","reason","showSerialDrawer","showAddSerialModal","resetFields","warranty_period","handleAdjustStock","values","adjustStock","product_id","user_id","handleAddSerials","serial_list","trim","lines","split","map","s","Boolean","serial","clone","prefix","serial_prefix","sku","addSerials","handleDeleteSerial","serialId","updatedSerials","getStockStatus","minStock","getWarrantyStatus","warrantyEnd","endDate","daysLeft","diff","stockColumns","title","key","render","_","record","children","style","fontWeight","fontSize","barcode","dataIndex","width","category","stockStatus","unit","marginTop","sorter","a","b","count","backgroundColor","size","icon","onClick","type","valueA","valueB","serialColumns","code","copyable","statusInfo","find","condition","conditionInfo","c","warranty","info","onConfirm","okText","cancelText","danger","transactionColumns","date","typeConfig","import","export","adjustment","return","config","qty","change","padding","marginBottom","level","description","showIcon","gutter","span","valueStyle","formatter","activeKey","onChange","tab","placeholder","e","target","onSearch","enterButton","allowClear","float","columns","dataSource","rowKey","pagination","total","pageSize","showSizeChanger","showQuickJumper","showTotal","range","scroll","x","dates","col","includes","visible","onClose","extra","strong","onCancel","footer","layout","onFinish","Item","rules","required","initialValue","min","max","tooltip","shouldUpdate","prevValues","currentValues","_ref","getFieldValue","startDate","period","TextArea","rows","textAlign","htmlType","disabled"],"sources":["C:/Users/ADMIN/Desktop/kho/kho/client/src/pages/InventoryPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport {\r\n  Card,\r\n  Table,\r\n  Button,\r\n  Input,\r\n  Space,\r\n  Modal,\r\n  Form,\r\n  Select,\r\n  message,\r\n  Row,\r\n  Col,\r\n  Statistic,\r\n  Tag,\r\n  Tooltip,\r\n  DatePicker,\r\n  Tabs,\r\n  Badge,\r\n  Popconfirm,\r\n  Drawer,\r\n  Typography,\r\n  Alert,\r\n  Divider,\r\n  InputNumber,\r\n} from 'antd';\r\nimport {\r\n  InboxOutlined,\r\n  WarningOutlined,\r\n  SettingOutlined,\r\n  HistoryOutlined,\r\n  ImportOutlined,\r\n  ExportOutlined,\r\n  SearchOutlined,\r\n  BarChartOutlined,\r\n  QrcodeOutlined,\r\n  PlusOutlined,\r\n  EditOutlined,\r\n  DeleteOutlined,\r\n  EyeOutlined,\r\n} from '@ant-design/icons';\r\nimport { inventoryAPI, productsAPI, formatCurrency, formatDate } from '../services/api';\r\nimport moment from 'moment';\r\n\r\nconst { Search } = Input;\r\nconst { Option } = Select;\r\nconst { TabPane } = Tabs;\r\nconst { RangePicker } = DatePicker;\r\nconst { Text, Title } = Typography;\r\n\r\nconst InventoryPage = () => {\r\n  const [products, setProducts] = useState([]);\r\n  const [transactions, setTransactions] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [isAdjustModalVisible, setIsAdjustModalVisible] = useState(false);\r\n  const [isSerialDrawerVisible, setIsSerialDrawerVisible] = useState(false);\r\n  const [isAddSerialModalVisible, setIsAddSerialModalVisible] = useState(false);\r\n  const [selectedProduct, setSelectedProduct] = useState(null);\r\n  const [productSerials, setProductSerials] = useState([]);\r\n  const [searchText, setSearchText] = useState('');\r\n  const [activeTab, setActiveTab] = useState('stock');\r\n  const [stats, setStats] = useState({\r\n    totalProducts: 0,\r\n    lowStockProducts: 0,\r\n    totalValue: 0,\r\n    outOfStock: 0,\r\n    totalSerials: 0,\r\n    availableSerials: 0,\r\n  });\r\n  const [form] = Form.useForm();\r\n  const [serialForm] = Form.useForm();\r\n\r\n  const serialStatuses = [\r\n    { value: 'available', label: 'Có sẵn', color: 'green' },\r\n    { value: 'sold', label: 'Đã bán', color: 'red' },\r\n    { value: 'reserved', label: 'Đã đặt', color: 'orange' },\r\n    { value: 'defective', label: 'Lỗi', color: 'red' },\r\n  ];\r\n\r\n  const conditionGrades = [\r\n    { value: 'new', label: 'Mới', color: 'green' },\r\n    { value: 'used_like_new', label: 'Cũ như mới', color: 'blue' },\r\n    { value: 'used_good', label: 'Cũ tốt', color: 'orange' },\r\n    { value: 'used_fair', label: 'Cũ khá', color: 'yellow' },\r\n    { value: 'refurbished', label: 'Tân trang', color: 'purple' },\r\n    { value: 'damaged', label: 'Hư hỏng', color: 'red' },\r\n  ];\r\n\r\n  // Mock serial data for demonstration\r\n  const generateMockSerials = (productId, quantity, productName) => {\r\n    const serials = [];\r\n    for (let i = 1; i <= quantity; i++) {\r\n      const serialNumber = `${productName.substring(0, 3).toUpperCase()}${Date.now().toString().slice(-6)}${i.toString().padStart(3, '0')}`;\r\n      serials.push({\r\n        id: `${productId}_${i}`,\r\n        serial_number: serialNumber,\r\n        status: Math.random() > 0.2 ? 'available' : 'sold',\r\n        condition_grade: Math.random() > 0.8 ? 'used_like_new' : 'new',\r\n        warranty_start_date: moment().subtract(Math.floor(Math.random() * 30), 'days').format('YYYY-MM-DD'),\r\n        warranty_end_date: moment().add(Math.floor(Math.random() * 24 + 12), 'months').format('YYYY-MM-DD'),\r\n        location: `${String.fromCharCode(65 + Math.floor(Math.random() * 3))}${Math.floor(Math.random() * 5 + 1)}-${i.toString().padStart(2, '0')}`,\r\n        notes: Math.random() > 0.7 ? 'Kiểm tra định kỳ' : null,\r\n        created_at: moment().subtract(Math.floor(Math.random() * 60), 'days').toISOString(),\r\n      });\r\n    }\r\n    return serials;\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (activeTab === 'stock') {\r\n      fetchProducts();\r\n    } else if (activeTab === 'transactions') {\r\n      fetchTransactions();\r\n    }\r\n  }, [activeTab, searchText]);\r\n\r\n  const fetchProducts = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await productsAPI.getAll({ search: searchText });\r\n      \r\n      if (response.data.success) {\r\n        setProducts(response.data.data);\r\n        calculateStats(response.data.data);\r\n      }\r\n    } catch (error) {\r\n      message.error('Lỗi khi tải danh sách sản phẩm');\r\n      console.error('Error fetching products:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const fetchTransactions = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await inventoryAPI.getTransactions({ limit: 100 });\r\n      \r\n      if (response.data.success) {\r\n        setTransactions(response.data.data);\r\n      }\r\n    } catch (error) {\r\n      message.error('Lỗi khi tải lịch sử giao dịch');\r\n      console.error('Error fetching transactions:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const fetchProductSerials = async (product) => {\r\n    try {\r\n      setLoading(true);\r\n      // For demo purposes, generate mock serial data\r\n      const mockSerials = generateMockSerials(product.id, product.quantity, product.name);\r\n      setProductSerials(mockSerials);\r\n    } catch (error) {\r\n      message.error('Lỗi khi tải danh sách serial');\r\n      console.error('Error fetching serials:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const calculateStats = (productData) => {\r\n    const stats = {\r\n      totalProducts: productData.length,\r\n      lowStockProducts: productData.filter(p => p.quantity <= (p.min_stock || 10)).length,\r\n      totalValue: productData.reduce((sum, p) => sum + (p.quantity * (p.cost_price || p.price)), 0),\r\n      outOfStock: productData.filter(p => p.quantity === 0).length,\r\n      totalSerials: productData.reduce((sum, p) => sum + (p.quantity || 0), 0),\r\n      availableSerials: productData.reduce((sum, p) => sum + (p.quantity || 0), 0),\r\n    };\r\n    setStats(stats);\r\n  };\r\n\r\n  const showAdjustModal = (product) => {\r\n    setSelectedProduct(product);\r\n    setIsAdjustModalVisible(true);\r\n    form.setFieldsValue({\r\n      current_quantity: product.quantity,\r\n      new_quantity: product.quantity,\r\n      reason: ''\r\n    });\r\n  };\r\n\r\n  const showSerialDrawer = async (product) => {\r\n    setSelectedProduct(product);\r\n    setIsSerialDrawerVisible(true);\r\n    await fetchProductSerials(product);\r\n  };\r\n\r\n  const showAddSerialModal = (product) => {\r\n    setSelectedProduct(product);\r\n    setIsAddSerialModalVisible(true);\r\n    serialForm.resetFields();\r\n    serialForm.setFieldsValue({\r\n      condition_grade: 'new',\r\n      status: 'available',\r\n      warranty_start_date: moment(),\r\n      warranty_period: 12,\r\n    });\r\n  };\r\n\r\n  const handleAdjustStock = async (values) => {\r\n    try {\r\n      await inventoryAPI.adjustStock({\r\n        product_id: selectedProduct.id,\r\n        new_quantity: values.new_quantity,\r\n        reason: values.reason,\r\n        user_id: 1\r\n      });\r\n      \r\n      message.success('Điều chỉnh tồn kho thành công');\r\n      setIsAdjustModalVisible(false);\r\n      form.resetFields();\r\n      fetchProducts();\r\n    } catch (error) {\r\n      message.error('Lỗi khi điều chỉnh tồn kho');\r\n      console.error('Error adjusting stock:', error);\r\n    }\r\n  };\r\n\r\n  const handleAddSerials = async (values) => {\r\n    try {\r\n      const serials = [];\r\n      if (values.serial_list && values.serial_list.trim()) {\r\n        const lines = values.serial_list.split('\\n').map(s => s.trim()).filter(Boolean);\r\n        for (const serial of lines) {\r\n          serials.push({\r\n            serial_number: serial,\r\n            status: values.status,\r\n            condition_grade: values.condition_grade,\r\n            warranty_start_date: values.warranty_start_date ? values.warranty_start_date.format('YYYY-MM-DD') : null,\r\n            warranty_end_date: values.warranty_start_date && values.warranty_period ? values.warranty_start_date.clone().add(values.warranty_period, 'months').format('YYYY-MM-DD') : null,\r\n            location: values.location,\r\n            notes: values.notes\r\n          });\r\n        }\r\n      } else {\r\n        const prefix = values.serial_prefix || selectedProduct.sku || selectedProduct.name.substring(0, 3).toUpperCase();\r\n        for (let i = 1; i <= values.quantity; i++) {\r\n          serials.push({\r\n            serial_number: `${prefix}-${Date.now()}-${i}`,\r\n            status: values.status,\r\n            condition_grade: values.condition_grade,\r\n            warranty_start_date: values.warranty_start_date ? values.warranty_start_date.format('YYYY-MM-DD') : null,\r\n            warranty_end_date: values.warranty_start_date && values.warranty_period ? values.warranty_start_date.clone().add(values.warranty_period, 'months').format('YYYY-MM-DD') : null,\r\n            location: values.location,\r\n            notes: values.notes\r\n          });\r\n        }\r\n      }\r\n              await productsAPI.addSerials(selectedProduct.id, { serials });\r\n      message.success(`Thêm ${serials.length} serial thành công!`);\r\n      setIsAddSerialModalVisible(false);\r\n      serialForm.resetFields();\r\n      if (isSerialDrawerVisible) {\r\n        fetchProductSerials(selectedProduct);\r\n      }\r\n      fetchProducts();\r\n    } catch (error) {\r\n      message.error('Lỗi khi thêm serial');\r\n      console.error('Error adding serials:', error);\r\n    }\r\n  };\r\n\r\n  const handleDeleteSerial = async (serialId) => {\r\n    try {\r\n      message.success('Xóa serial thành công (Demo)');\r\n      const updatedSerials = productSerials.filter(s => s.id !== serialId);\r\n      setProductSerials(updatedSerials);\r\n    } catch (error) {\r\n      message.error('Lỗi khi xóa serial');\r\n      console.error('Error deleting serial:', error);\r\n    }\r\n  };\r\n\r\n  const getStockStatus = (quantity, minStock) => {\r\n    if (quantity === 0) {\r\n      return { status: 'Hết hàng', color: 'red' };\r\n    } else if (quantity <= minStock) {\r\n      return { status: 'Sắp hết', color: 'orange' };\r\n    } else {\r\n      return { status: 'Còn hàng', color: 'green' };\r\n    }\r\n  };\r\n\r\n  const getWarrantyStatus = (warrantyEnd) => {\r\n    if (!warrantyEnd) return { status: 'N/A', color: 'default' };\r\n    \r\n    const endDate = moment(warrantyEnd);\r\n    const now = moment();\r\n    const daysLeft = endDate.diff(now, 'days');\r\n    \r\n    if (daysLeft < 0) {\r\n      return { status: 'Hết hạn', color: 'red' };\r\n    } else if (daysLeft <= 30) {\r\n      return { status: `${daysLeft} ngày`, color: 'orange' };\r\n    } else {\r\n      return { status: `${Math.floor(daysLeft / 30)} tháng`, color: 'green' };\r\n    }\r\n  };\r\n\r\n  const stockColumns = [\r\n    {\r\n      title: 'Sản phẩm',\r\n      key: 'product_info',\r\n      render: (_, record) => (\r\n        <div>\r\n          <div style={{ fontWeight: 'bold' }}>{record.name}</div>\r\n          <div style={{ fontSize: '12px', color: '#666' }}>\r\n            SKU: {record.sku || 'N/A'} | Barcode: {record.barcode || 'N/A'}\r\n          </div>\r\n        </div>\r\n      )\r\n    },\r\n    {\r\n      title: 'Danh mục',\r\n      dataIndex: 'category',\r\n      key: 'category',\r\n      width: 120,\r\n      render: (category) => category || 'Chưa phân loại'\r\n    },\r\n    {\r\n      title: 'Tồn kho',\r\n      key: 'stock_info',\r\n      width: 150,\r\n      render: (_, record) => {\r\n        const stockStatus = getStockStatus(record.quantity, record.min_stock || 10);\r\n        return (\r\n          <div>\r\n            <div style={{ fontSize: '16px', fontWeight: 'bold' }}>\r\n              {record.quantity} {record.unit || 'cái'}\r\n            </div>\r\n            <Tag color={stockStatus.color}>{stockStatus.status}</Tag>\r\n            <div style={{ fontSize: '11px', color: '#666', marginTop: 2 }}>\r\n              Min: {record.min_stock || 10}\r\n            </div>\r\n          </div>\r\n        );\r\n      },\r\n      sorter: (a, b) => a.quantity - b.quantity\r\n    },\r\n    {\r\n      title: 'Serial Numbers',\r\n      key: 'serials',\r\n      width: 140,\r\n      render: (_, record) => (\r\n        <div>\r\n          <Badge count={record.quantity} style={{ backgroundColor: '#52c41a' }}>\r\n            <Button\r\n              size=\"small\"\r\n              icon={<QrcodeOutlined />}\r\n              onClick={() => showSerialDrawer(record)}\r\n            >\r\n              Xem Serial\r\n            </Button>\r\n          </Badge>\r\n          <div style={{ fontSize: '11px', color: '#666', marginTop: 4 }}>\r\n            <Text type=\"secondary\">Quản lý từng serial</Text>\r\n          </div>\r\n        </div>\r\n      )\r\n    },\r\n    {\r\n      title: 'Giá vốn/Bán',\r\n      key: 'pricing',\r\n      width: 150,\r\n      render: (_, record) => (\r\n        <div>\r\n          <div style={{ fontWeight: 'bold' }}>{formatCurrency(record.price)}</div>\r\n          <div style={{ fontSize: '12px', color: '#666' }}>\r\n            Vốn: {formatCurrency(record.cost_price || record.price * 0.7)}\r\n          </div>\r\n        </div>\r\n      )\r\n    },\r\n    {\r\n      title: 'Giá trị tồn kho',\r\n      key: 'stock_value',\r\n      width: 150,\r\n      render: (_, record) => {\r\n        const value = record.quantity * (record.cost_price || record.price * 0.7 || 0);\r\n        return <span style={{ fontWeight: 'bold', color: '#52c41a' }}>\r\n          {formatCurrency(value)}\r\n        </span>;\r\n      },\r\n      sorter: (a, b) => {\r\n        const valueA = a.quantity * (a.cost_price || a.price * 0.7 || 0);\r\n        const valueB = b.quantity * (b.cost_price || b.price * 0.7 || 0);\r\n        return valueA - valueB;\r\n      }\r\n    },\r\n    {\r\n      title: 'Thao tác',\r\n      key: 'actions',\r\n      width: 200,\r\n      render: (_, record) => (\r\n        <Space>\r\n          <Tooltip title=\"Xem Serial Numbers\">\r\n            <Button\r\n              size=\"small\"\r\n              icon={<EyeOutlined />}\r\n              onClick={() => showSerialDrawer(record)}\r\n            />\r\n          </Tooltip>\r\n          <Tooltip title=\"Thêm Serial\">\r\n            <Button\r\n              size=\"small\"\r\n              icon={<PlusOutlined />}\r\n              onClick={() => showAddSerialModal(record)}\r\n            />\r\n          </Tooltip>\r\n          <Tooltip title=\"Điều chỉnh tồn kho\">\r\n            <Button\r\n              size=\"small\"\r\n              icon={<SettingOutlined />}\r\n              onClick={() => showAdjustModal(record)}\r\n            />\r\n          </Tooltip>\r\n        </Space>\r\n      )\r\n    }\r\n  ];\r\n\r\n  const serialColumns = [\r\n    {\r\n      title: 'Serial Number',\r\n      dataIndex: 'serial_number',\r\n      key: 'serial_number',\r\n      render: (serial) => (\r\n        <Text code copyable style={{ fontWeight: 'bold' }}>\r\n          {serial}\r\n        </Text>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Trạng thái',\r\n      dataIndex: 'status',\r\n      key: 'status',\r\n      render: (status) => {\r\n        const statusInfo = serialStatuses.find(s => s.value === status);\r\n        return (\r\n          <Tag color={statusInfo?.color}>\r\n            {statusInfo?.label || status}\r\n          </Tag>\r\n        );\r\n      },\r\n    },\r\n    {\r\n      title: 'Tình trạng',\r\n      dataIndex: 'condition_grade',\r\n      key: 'condition_grade',\r\n      render: (condition) => {\r\n        const conditionInfo = conditionGrades.find(c => c.value === condition);\r\n        return (\r\n          <Tag color={conditionInfo?.color}>\r\n            {conditionInfo?.label || condition}\r\n          </Tag>\r\n        );\r\n      },\r\n    },\r\n    {\r\n      title: 'Vị trí',\r\n      dataIndex: 'location',\r\n      key: 'location',\r\n      render: (location) => location || 'N/A',\r\n    },\r\n    {\r\n      title: 'Bảo hành',\r\n      key: 'warranty',\r\n      render: (_, record) => {\r\n        const warranty = getWarrantyStatus(record.warranty_end_date);\r\n        return (\r\n          <div>\r\n            <Tag color={warranty.color}>{warranty.status}</Tag>\r\n            {record.warranty_end_date && (\r\n              <div style={{ fontSize: '11px', color: '#666' }}>\r\n                Đến: {moment(record.warranty_end_date).format('DD/MM/YYYY')}\r\n              </div>\r\n            )}\r\n          </div>\r\n        );\r\n      },\r\n    },\r\n    {\r\n      title: 'Thao tác',\r\n      key: 'actions',\r\n      render: (_, record) => (\r\n        <Space>\r\n          <Button\r\n            size=\"small\"\r\n            icon={<EditOutlined />}\r\n            onClick={() => {\r\n              message.info('Tính năng chỉnh sửa serial sẽ có trong phiên bản tiếp theo');\r\n            }}\r\n          />\r\n          <Popconfirm\r\n            title=\"Bạn có chắc muốn xóa serial này?\"\r\n            onConfirm={() => handleDeleteSerial(record.id)}\r\n            okText=\"Xóa\"\r\n            cancelText=\"Hủy\"\r\n          >\r\n            <Button\r\n              size=\"small\"\r\n              danger\r\n              icon={<DeleteOutlined />}\r\n            />\r\n          </Popconfirm>\r\n        </Space>\r\n      ),\r\n    },\r\n  ];\r\n\r\n  const transactionColumns = [\r\n    {\r\n      title: 'Thời gian',\r\n      dataIndex: 'created_at',\r\n      key: 'created_at',\r\n      width: 150,\r\n      render: (date) => formatDate(date),\r\n      sorter: (a, b) => new Date(a.created_at) - new Date(b.created_at)\r\n    },\r\n    {\r\n      title: 'Loại giao dịch',\r\n      dataIndex: 'type',\r\n      key: 'type',\r\n      width: 120,\r\n      render: (type) => {\r\n        const typeConfig = {\r\n          import: { label: 'Nhập kho', color: 'green', icon: <ImportOutlined /> },\r\n          export: { label: 'Xuất kho', color: 'red', icon: <ExportOutlined /> },\r\n          adjustment: { label: 'Điều chỉnh', color: 'blue', icon: <SettingOutlined /> },\r\n          return: { label: 'Trả hàng', color: 'orange', icon: <HistoryOutlined /> }\r\n        };\r\n        const config = typeConfig[type] || { label: type, color: 'default' };\r\n        return (\r\n          <Tag color={config.color} icon={config.icon}>\r\n            {config.label}\r\n          </Tag>\r\n        );\r\n      }\r\n    },\r\n    {\r\n      title: 'Sản phẩm',\r\n      dataIndex: 'product_name',\r\n      key: 'product_name'\r\n    },\r\n    {\r\n      title: 'Số lượng trước',\r\n      dataIndex: 'quantity_before',\r\n      key: 'quantity_before',\r\n      width: 120,\r\n      render: (qty) => <span>{qty}</span>\r\n    },\r\n    {\r\n      title: 'Thay đổi',\r\n      dataIndex: 'quantity_change',\r\n      key: 'quantity_change',\r\n      width: 100,\r\n      render: (change) => (\r\n        <span style={{ \r\n          color: change > 0 ? '#52c41a' : '#ff4d4f',\r\n          fontWeight: 'bold'\r\n        }}>\r\n          {change > 0 ? '+' : ''}{change}\r\n        </span>\r\n      )\r\n    },\r\n    {\r\n      title: 'Số lượng sau',\r\n      dataIndex: 'quantity_after',\r\n      key: 'quantity_after',\r\n      width: 120,\r\n      render: (qty) => <strong>{qty}</strong>\r\n    },\r\n    {\r\n      title: 'Nhân viên',\r\n      dataIndex: 'user_name',\r\n      key: 'user_name',\r\n      width: 120,\r\n      render: (name) => name || 'Hệ thống'\r\n    },\r\n    {\r\n      title: 'Ghi chú',\r\n      dataIndex: 'notes',\r\n      key: 'notes'\r\n    }\r\n  ];\r\n\r\n  const lowStockProducts = products.filter(p => p.quantity <= (p.min_stock || 10));\r\n\r\n  return (\r\n    <div style={{ padding: '24px' }}>\r\n      <div style={{ marginBottom: 24 }}>\r\n        <Title level={2}>Quản lý kho - Serial Number Tracking</Title>\r\n        <Text type=\"secondary\">\r\n          Theo dõi chi tiết từng serial number và quản lý tồn kho thông minh cho cửa hàng máy tính\r\n        </Text>\r\n      </div>\r\n\r\n      <Alert\r\n        message=\"🎯 Tính năng Serial Number Management\"\r\n        description=\"Hệ thống đã sẵn sàng cho việc quản lý chi tiết từng serial number. Mỗi sản phẩm sẽ có danh sách serial riêng với theo dõi bảo hành, vị trí kho, và trạng thái. Khi bán hàng, serial sẽ được chuyển từ kho sang danh sách đã bán.\"\r\n        type=\"info\"\r\n        showIcon\r\n        style={{ marginBottom: 24 }}\r\n      />\r\n\r\n      {/* Header với thống kê */}\r\n      <Row gutter={[16, 16]} style={{ marginBottom: 24 }}>\r\n        <Col span={4}>\r\n          <Card>\r\n            <Statistic\r\n              title=\"Tổng sản phẩm\"\r\n              value={stats.totalProducts}\r\n              prefix={<InboxOutlined />}\r\n              valueStyle={{ color: '#1890ff' }}\r\n            />\r\n          </Card>\r\n        </Col>\r\n        <Col span={4}>\r\n          <Card>\r\n            <Statistic\r\n              title=\"Sắp hết hàng\"\r\n              value={stats.lowStockProducts}\r\n              prefix={<WarningOutlined />}\r\n              valueStyle={{ color: '#faad14' }}\r\n            />\r\n          </Card>\r\n        </Col>\r\n        <Col span={4}>\r\n          <Card>\r\n            <Statistic\r\n              title=\"Hết hàng\"\r\n              value={stats.outOfStock}\r\n              prefix={<WarningOutlined />}\r\n              valueStyle={{ color: '#ff4d4f' }}\r\n            />\r\n          </Card>\r\n        </Col>\r\n        <Col span={4}>\r\n          <Card>\r\n            <Statistic\r\n              title=\"Tổng Serial\"\r\n              value={stats.totalSerials}\r\n              prefix={<QrcodeOutlined />}\r\n              valueStyle={{ color: '#722ed1' }}\r\n            />\r\n          </Card>\r\n        </Col>\r\n        <Col span={4}>\r\n          <Card>\r\n            <Statistic\r\n              title=\"Serial có sẵn\"\r\n              value={stats.availableSerials}\r\n              prefix={<QrcodeOutlined />}\r\n              valueStyle={{ color: '#52c41a' }}\r\n            />\r\n          </Card>\r\n        </Col>\r\n        <Col span={4}>\r\n          <Card>\r\n            <Statistic\r\n              title=\"Giá trị tồn kho\"\r\n              value={stats.totalValue}\r\n              formatter={value => formatCurrency(value)}\r\n              prefix={<BarChartOutlined />}\r\n              valueStyle={{ color: '#13c2c2' }}\r\n            />\r\n          </Card>\r\n        </Col>\r\n      </Row>\r\n\r\n      {/* Main Content */}\r\n      <Card>\r\n        <Tabs activeKey={activeTab} onChange={setActiveTab}>\r\n          <TabPane tab=\"Tồn kho & Serial\" key=\"stock\">\r\n            <Row gutter={[16, 16]} style={{ marginBottom: 16 }}>\r\n              <Col span={12}>\r\n                <Search\r\n                  placeholder=\"Tìm sản phẩm theo tên, SKU, barcode...\"\r\n                  value={searchText}\r\n                  onChange={(e) => setSearchText(e.target.value)}\r\n                  onSearch={fetchProducts}\r\n                  enterButton={<SearchOutlined />}\r\n                  allowClear\r\n                />\r\n              </Col>\r\n              <Col span={12}>\r\n                <Space style={{ float: 'right' }}>\r\n                  <Button icon={<ImportOutlined />}>\r\n                    Import Serial\r\n                  </Button>\r\n                  <Button icon={<ExportOutlined />}>\r\n                    Export Data\r\n                  </Button>\r\n                </Space>\r\n              </Col>\r\n            </Row>\r\n\r\n            <Table\r\n              columns={stockColumns}\r\n              dataSource={products}\r\n              rowKey=\"id\"\r\n              loading={loading}\r\n              pagination={{\r\n                total: products.length,\r\n                pageSize: 15,\r\n                showSizeChanger: true,\r\n                showQuickJumper: true,\r\n                showTotal: (total, range) => \r\n                  `${range[0]}-${range[1]} của ${total} sản phẩm`\r\n              }}\r\n              scroll={{ x: 1400 }}\r\n            />\r\n          </TabPane>\r\n\r\n          <TabPane tab=\"Lịch sử giao dịch\" key=\"transactions\">\r\n            <Row gutter={[16, 16]} style={{ marginBottom: 16 }}>\r\n              <Col span={8}>\r\n                <Search\r\n                  placeholder=\"Tìm theo sản phẩm...\"\r\n                  onSearch={(value) => {\r\n                    setSearchText(value);\r\n                    fetchTransactions();\r\n                  }}\r\n                  enterButton={<SearchOutlined />}\r\n                  allowClear\r\n                />\r\n              </Col>\r\n              <Col span={6}>\r\n                <Select\r\n                  style={{ width: '100%' }}\r\n                  placeholder=\"Lọc theo loại giao dịch\"\r\n                  allowClear\r\n                  onChange={(value) => {\r\n                    // TODO: Filter transactions by type\r\n                  }}\r\n                >\r\n                  <Option value=\"import\">Nhập kho</Option>\r\n                  <Option value=\"export\">Xuất kho</Option>\r\n                  <Option value=\"adjustment\">Điều chỉnh</Option>\r\n                  <Option value=\"return\">Trả hàng</Option>\r\n                </Select>\r\n              </Col>\r\n              <Col span={10}>\r\n                <RangePicker\r\n                  style={{ width: '100%' }}\r\n                  placeholder={['Từ ngày', 'Đến ngày']}\r\n                  onChange={(dates) => {\r\n                    // TODO: Filter transactions by date range\r\n                  }}\r\n                />\r\n              </Col>\r\n            </Row>\r\n\r\n            <Table\r\n              columns={transactionColumns}\r\n              dataSource={transactions}\r\n              rowKey=\"id\"\r\n              loading={loading}\r\n              pagination={{\r\n                total: transactions.length,\r\n                pageSize: 15,\r\n                showSizeChanger: true,\r\n                showQuickJumper: true,\r\n                showTotal: (total, range) => \r\n                  `${range[0]}-${range[1]} của ${total} giao dịch`\r\n              }}\r\n              scroll={{ x: 1200 }}\r\n            />\r\n          </TabPane>\r\n\r\n          <TabPane tab=\"Cảnh báo tồn kho\" key=\"alerts\">\r\n            <Card title=\"Sản phẩm sắp hết hàng\" style={{ marginBottom: 16 }}>\r\n              <Alert\r\n                message=\"Cảnh báo tồn kho\"\r\n                description={`Có ${lowStockProducts.length} sản phẩm sắp hết hàng. Hãy liên hệ nhà cung cấp để nhập thêm.`}\r\n                type=\"warning\"\r\n                showIcon\r\n                style={{ marginBottom: 16 }}\r\n              />\r\n              <Table\r\n                columns={stockColumns.filter(col => \r\n                  ['product_info', 'stock_info', 'serials', 'actions'].includes(col.key)\r\n                )}\r\n                dataSource={lowStockProducts}\r\n                rowKey=\"id\"\r\n                pagination={false}\r\n                size=\"small\"\r\n              />\r\n            </Card>\r\n          </TabPane>\r\n        </Tabs>\r\n      </Card>\r\n\r\n      {/* Serial Number Drawer */}\r\n      <Drawer\r\n        title={`Serial Numbers - ${selectedProduct?.name}`}\r\n        width={900}\r\n        visible={isSerialDrawerVisible}\r\n        onClose={() => setIsSerialDrawerVisible(false)}\r\n        extra={\r\n          <Space>\r\n            <Button\r\n              type=\"primary\"\r\n              icon={<PlusOutlined />}\r\n              onClick={() => showAddSerialModal(selectedProduct)}\r\n            >\r\n              Thêm Serial\r\n            </Button>\r\n            <Button icon={<ExportOutlined />}>\r\n              Export\r\n            </Button>\r\n          </Space>\r\n        }\r\n      >\r\n        {selectedProduct && (\r\n          <div>\r\n            <Card size=\"small\" style={{ marginBottom: 16 }}>\r\n              <Row gutter={16}>\r\n                <Col span={12}>\r\n                  <Text strong>Sản phẩm: </Text>{selectedProduct.name}\r\n                </Col>\r\n                <Col span={12}>\r\n                  <Text strong>SKU: </Text>{selectedProduct.sku || 'N/A'}\r\n                </Col>\r\n                <Col span={12}>\r\n                  <Text strong>Tồn kho: </Text>{selectedProduct.quantity} cái\r\n                </Col>\r\n                <Col span={12}>\r\n                  <Text strong>Serial có sẵn: </Text>\r\n                  {productSerials.filter(s => s.status === 'available').length} cái\r\n                </Col>\r\n              </Row>\r\n            </Card>\r\n\r\n            <Alert\r\n              message=\"Demo: Quản lý Serial Number\"\r\n              description=\"Đây là giao diện demo cho việc quản lý serial number. Trong phiên bản đầy đủ, mỗi serial sẽ được lưu trữ riêng biệt với đầy đủ thông tin bảo hành, vị trí kho, và lịch sử.\"\r\n              type=\"info\"\r\n              style={{ marginBottom: 16 }}\r\n            />\r\n\r\n            <Table\r\n              columns={serialColumns}\r\n              dataSource={productSerials}\r\n              rowKey=\"id\"\r\n              loading={loading}\r\n              pagination={{\r\n                pageSize: 10,\r\n                showSizeChanger: true,\r\n                showTotal: (total, range) => \r\n                  `${range[0]}-${range[1]} của ${total} serial`\r\n              }}\r\n              scroll={{ x: 700 }}\r\n            />\r\n          </div>\r\n        )}\r\n      </Drawer>\r\n\r\n      {/* Add Serial Modal */}\r\n      <Modal\r\n        title={`Thêm Serial cho ${selectedProduct?.name}`}\r\n        visible={isAddSerialModalVisible}\r\n        onCancel={() => setIsAddSerialModalVisible(false)}\r\n        footer={null}\r\n        width={700}\r\n      >\r\n        <Form\r\n          form={serialForm}\r\n          layout=\"vertical\"\r\n          onFinish={handleAddSerials}\r\n        >\r\n          <Alert\r\n            message=\"Thêm Serial Numbers\"\r\n            description=\"Bạn có thể thêm một hoặc nhiều serial numbers cùng lúc. Hệ thống sẽ tự động tạo serial number theo format nếu không nhập thủ công.\"\r\n            type=\"info\"\r\n            style={{ marginBottom: 16 }}\r\n          />\r\n\r\n          <Row gutter={16}>\r\n            <Col span={8}>\r\n              <Form.Item\r\n                label=\"Số lượng\"\r\n                name=\"quantity\"\r\n                rules={[{ required: true, message: 'Vui lòng nhập số lượng' }]}\r\n                initialValue={1}\r\n              >\r\n                <InputNumber min={1} max={100} style={{ width: '100%' }} />\r\n              </Form.Item>\r\n            </Col>\r\n            <Col span={8}>\r\n              <Form.Item\r\n                label=\"Trạng thái\"\r\n                name=\"status\"\r\n                rules={[{ required: true, message: 'Vui lòng chọn trạng thái' }]}\r\n              >\r\n                <Select>\r\n                  {serialStatuses.map(status => (\r\n                    <Option key={status.value} value={status.value}>\r\n                      <Tag color={status.color}>{status.label}</Tag>\r\n                    </Option>\r\n                  ))}\r\n                </Select>\r\n              </Form.Item>\r\n            </Col>\r\n            <Col span={8}>\r\n              <Form.Item\r\n                label=\"Tình trạng\"\r\n                name=\"condition_grade\"\r\n                rules={[{ required: true, message: 'Vui lòng chọn tình trạng' }]}\r\n              >\r\n                <Select>\r\n                  {conditionGrades.map(condition => (\r\n                    <Option key={condition.value} value={condition.value}>\r\n                      <Tag color={condition.color}>{condition.label}</Tag>\r\n                    </Option>\r\n                  ))}\r\n                </Select>\r\n              </Form.Item>\r\n            </Col>\r\n          </Row>\r\n\r\n          <Row gutter={16}>\r\n            <Col span={12}>\r\n              <Form.Item\r\n                label=\"Prefix Serial (tùy chọn)\"\r\n                name=\"serial_prefix\"\r\n                tooltip=\"VD: CPU2024, GPU2024 - Hệ thống sẽ tự động tạo serial theo format\"\r\n              >\r\n                <Input placeholder=\"VD: CPU2024, GPU2024\" />\r\n              </Form.Item>\r\n            </Col>\r\n            <Col span={12}>\r\n              <Form.Item label=\"Vị trí kho\" name=\"location\">\r\n                <Input placeholder=\"VD: A1-01, B2-05\" />\r\n              </Form.Item>\r\n            </Col>\r\n          </Row>\r\n\r\n          <Row gutter={16}>\r\n            <Col span={8}>\r\n              <Form.Item label=\"Ngày bắt đầu BH\" name=\"warranty_start_date\">\r\n                <DatePicker style={{ width: '100%' }} format=\"DD/MM/YYYY\" />\r\n              </Form.Item>\r\n            </Col>\r\n            <Col span={8}>\r\n              <Form.Item label=\"Thời hạn BH (tháng)\" name=\"warranty_period\">\r\n                <InputNumber min={0} max={120} style={{ width: '100%' }} />\r\n              </Form.Item>\r\n            </Col>\r\n            <Col span={8}>\r\n              <Form.Item shouldUpdate={(prevValues, currentValues) => \r\n                prevValues.warranty_start_date !== currentValues.warranty_start_date ||\r\n                prevValues.warranty_period !== currentValues.warranty_period\r\n              }>\r\n                {({ getFieldValue }) => {\r\n                  const startDate = getFieldValue('warranty_start_date');\r\n                  const period = getFieldValue('warranty_period');\r\n                  const endDate = startDate && period ? \r\n                    startDate.clone().add(period, 'months') : null;\r\n                  return (\r\n                    <div>\r\n                      <Text type=\"secondary\">Ngày kết thúc BH:</Text>\r\n                      <div style={{ fontWeight: 'bold' }}>\r\n                        {endDate ? endDate.format('DD/MM/YYYY') : 'N/A'}\r\n                      </div>\r\n                    </div>\r\n                  );\r\n                }}\r\n              </Form.Item>\r\n            </Col>\r\n          </Row>\r\n\r\n          <Form.Item label=\"Ghi chú\" name=\"notes\">\r\n            <Input.TextArea rows={2} placeholder=\"Ghi chú thêm về serial...\" />\r\n          </Form.Item>\r\n\r\n          <Form.Item label=\"Nhập danh sách serial (mỗi dòng 1 serial)\" name=\"serial_list\">\r\n            <Input.TextArea rows={3} placeholder=\"Nhập serial thủ công, mỗi dòng 1 serial (tùy chọn)\" />\r\n          </Form.Item>\r\n\r\n          <div style={{ textAlign: 'right' }}>\r\n            <Space>\r\n              <Button onClick={() => setIsAddSerialModalVisible(false)}>\r\n                Hủy\r\n              </Button>\r\n              <Button type=\"primary\" htmlType=\"submit\">\r\n                Thêm Serial\r\n              </Button>\r\n            </Space>\r\n          </div>\r\n        </Form>\r\n      </Modal>\r\n\r\n      {/* Stock Adjustment Modal */}\r\n      <Modal\r\n        title=\"Điều chỉnh tồn kho\"\r\n        visible={isAdjustModalVisible}\r\n        onCancel={() => setIsAdjustModalVisible(false)}\r\n        footer={null}\r\n        width={500}\r\n      >\r\n        {selectedProduct && (\r\n          <div>\r\n            <Card size=\"small\" style={{ marginBottom: 16, backgroundColor: '#f5f5f5' }}>\r\n              <div><strong>Sản phẩm:</strong> {selectedProduct.name}</div>\r\n              <div><strong>SKU:</strong> {selectedProduct.sku || 'N/A'}</div>\r\n              <div><strong>Tồn kho hiện tại:</strong> {selectedProduct.quantity} {selectedProduct.unit || 'cái'}</div>\r\n            </Card>\r\n\r\n            <Form\r\n              form={form}\r\n              layout=\"vertical\"\r\n              onFinish={handleAdjustStock}\r\n            >\r\n              <Row gutter={16}>\r\n                <Col span={12}>\r\n                  <Form.Item\r\n                    label=\"Số lượng hiện tại\"\r\n                    name=\"current_quantity\"\r\n                  >\r\n                    <Input disabled />\r\n                  </Form.Item>\r\n                </Col>\r\n                <Col span={12}>\r\n                  <Form.Item\r\n                    label=\"Số lượng mới\"\r\n                    name=\"new_quantity\"\r\n                    rules={[\r\n                      { required: true, message: 'Vui lòng nhập số lượng mới' },\r\n                      { type: 'number', min: 0, message: 'Số lượng phải >= 0' }\r\n                    ]}\r\n                  >\r\n                    <Input type=\"number\" min={0} placeholder=\"Nhập số lượng mới\" />\r\n                  </Form.Item>\r\n                </Col>\r\n              </Row>\r\n\r\n              <Form.Item\r\n                label=\"Lý do điều chỉnh\"\r\n                name=\"reason\"\r\n                rules={[{ required: true, message: 'Vui lòng nhập lý do' }]}\r\n              >\r\n                <Input.TextArea\r\n                  rows={3}\r\n                  placeholder=\"Nhập lý do điều chỉnh tồn kho...\"\r\n                />\r\n              </Form.Item>\r\n\r\n              <div style={{ textAlign: 'right' }}>\r\n                <Space>\r\n                  <Button onClick={() => setIsAdjustModalVisible(false)}>\r\n                    Hủy\r\n                  </Button>\r\n                  <Button type=\"primary\" htmlType=\"submit\">\r\n                    Xác nhận điều chỉnh\r\n                  </Button>\r\n                </Space>\r\n              </div>\r\n            </Form>\r\n          </div>\r\n        )}\r\n      </Modal>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default InventoryPage; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}