{"ast":null,"code":"import _objectSpread from\"C:/Users/ADMIN/Desktop/kho/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{Row,Col,Card,Input,Button,List,Typography,message,Modal,Form,InputNumber,Space,Tag,Divider,Spin}from'antd';import{PlusOutlined,MinusOutlined,DeleteOutlined,ShoppingCartOutlined,PrinterOutlined,SearchOutlined,ShoppingOutlined}from'@ant-design/icons';import{productsAPI,ordersAPI}from'../services/api';import{formatCurrency}from'../utils/format';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const{Title,Text}=Typography;const{Search}=Input;function POSPage(){const[products,setProducts]=useState([]);const[filteredProducts,setFilteredProducts]=useState([]);const[cart,setCart]=useState([]);const[loading,setLoading]=useState(false);const[orderModalVisible,setOrderModalVisible]=useState(false);const[customerForm]=Form.useForm();useEffect(()=>{fetchProducts();},[]);const fetchProducts=async()=>{try{setLoading(true);const response=await productsAPI.getAll();if(response.data.success){setProducts(response.data.data||[]);setFilteredProducts(response.data.data||[]);}else{setProducts([]);console.error('API returned error:',response.data.message);}}catch(error){console.error('Error fetching products:',error);setProducts([]);// Don't show error message to user, just silently handle it\n}finally{setLoading(false);}};const handleSearch=value=>{const filtered=products.filter(product=>{var _product$sku,_product$barcode;return product.name.toLowerCase().includes(value.toLowerCase())||((_product$sku=product.sku)===null||_product$sku===void 0?void 0:_product$sku.toLowerCase().includes(value.toLowerCase()))||((_product$barcode=product.barcode)===null||_product$barcode===void 0?void 0:_product$barcode.toLowerCase().includes(value.toLowerCase()));});setFilteredProducts(filtered);};const addToCart=product=>{if(product.quantity<=0){message.warning('Sản phẩm đã hết hàng');return;}const existingItem=cart.find(item=>item.product_id===product.id);if(existingItem){if(existingItem.quantity>=product.quantity){message.warning('Không thể thêm, vượt quá số lượng tồn kho');return;}setCart(cart.map(item=>item.product_id===product.id?_objectSpread(_objectSpread({},item),{},{quantity:item.quantity+1}):item));}else{setCart([...cart,{product_id:product.id,name:product.name,price:product.price,quantity:1,max_quantity:product.quantity}]);}};const updateCartQuantity=(product_id,newQuantity)=>{if(newQuantity<=0){removeFromCart(product_id);return;}const product=products.find(p=>p.id===product_id);if(newQuantity>product.quantity){message.warning('Vượt quá số lượng tồn kho');return;}setCart(cart.map(item=>item.product_id===product_id?_objectSpread(_objectSpread({},item),{},{quantity:newQuantity}):item));};const removeFromCart=product_id=>{setCart(cart.filter(item=>item.product_id!==product_id));};const clearCart=()=>{setCart([]);};const getTotalAmount=()=>{return cart.reduce((total,item)=>total+item.price*item.quantity,0);};const getTotalItems=()=>{return cart.reduce((total,item)=>total+item.quantity,0);};const handleCheckout=()=>{if(cart.length===0){message.warning('Giỏ hàng trống');return;}setOrderModalVisible(true);};const submitOrder=async values=>{try{setLoading(true);const orderData={customer_name:values.customer_name||'Khách hàng',customer_phone:values.customer_phone,notes:values.notes,items:cart.map(item=>({product_id:item.product_id,quantity:item.quantity}))};const response=await ordersAPI.create(orderData);if(response.data.success){message.success('Tạo đơn hàng thành công!');// Reset form và giỏ hàng\ncustomerForm.resetFields();clearCart();setOrderModalVisible(false);// Reload products để cập nhật tồn kho\nfetchProducts();// Mở modal in hóa đơn\nshowPrintModal(response.data.data);}}catch(error){var _error$response,_error$response$data;message.error(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||'Lỗi khi tạo đơn hàng');}finally{setLoading(false);}};const showPrintModal=order=>{Modal.info({title:'Hóa đơn bán hàng',width:500,content:/*#__PURE__*/_jsxs(\"div\",{style:{padding:'20px 0'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center',marginBottom:'20px'},children:[/*#__PURE__*/_jsx(Title,{level:4,children:\"H\\xD3A \\u0110\\u01A0N B\\xC1N H\\xC0NG\"}),/*#__PURE__*/_jsxs(Text,{children:[\"S\\u1ED1 h\\xF3a \\u0111\\u01A1n: \",order.order_number]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Text,{type:\"secondary\",children:new Date(order.created_at).toLocaleString('vi-VN')})]}),/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'16px'},children:[/*#__PURE__*/_jsx(Text,{strong:true,children:\"Kh\\xE1ch h\\xE0ng: \"}),/*#__PURE__*/_jsx(Text,{children:order.customer_name}),/*#__PURE__*/_jsx(\"br\",{}),order.customer_phone&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Text,{strong:true,children:\"S\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i: \"}),/*#__PURE__*/_jsx(Text,{children:order.customer_phone})]})]}),/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsx(List,{size:\"small\",dataSource:order.items,renderItem:item=>/*#__PURE__*/_jsx(List.Item,{style:{padding:'8px 0'},children:/*#__PURE__*/_jsxs(\"div\",{style:{width:'100%',display:'flex',justifyContent:'space-between'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Text,{children:item.product_name}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(Text,{type:\"secondary\",children:[item.quantity,\" x \",formatCurrency(item.price)]})]}),/*#__PURE__*/_jsx(Text,{strong:true,children:formatCurrency(item.subtotal)})]})})}),/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsx(\"div\",{style:{textAlign:'right'},children:/*#__PURE__*/_jsxs(Title,{level:4,style:{margin:0},children:[\"T\\u1ED5ng c\\u1ED9ng: \",formatCurrency(order.total_amount)]})})]}),footer:/*#__PURE__*/_jsx(Button,{type:\"primary\",icon:/*#__PURE__*/_jsx(PrinterOutlined,{}),onClick:()=>window.print(),children:\"In h\\xF3a \\u0111\\u01A1n\"})});};return/*#__PURE__*/_jsxs(Row,{gutter:24,children:[/*#__PURE__*/_jsx(Col,{xs:24,lg:16,children:/*#__PURE__*/_jsx(Card,{title:\"S\\u1EA3n ph\\u1EA9m (\".concat(filteredProducts.length,\")\"),style:{height:'100%'},children:loading?/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center',padding:'50px'},children:[/*#__PURE__*/_jsx(Spin,{size:\"large\"}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:16},children:\"\\u0110ang t\\u1EA3i s\\u1EA3n ph\\u1EA9m...\"})]}):filteredProducts.length===0?/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center',padding:'50px',color:'#999'},children:[/*#__PURE__*/_jsx(ShoppingOutlined,{style:{fontSize:'48px',marginBottom:16}}),/*#__PURE__*/_jsx(\"div\",{children:\"Ch\\u01B0a c\\xF3 s\\u1EA3n ph\\u1EA9m n\\xE0o\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'12px',marginTop:8},children:\"Vui l\\xF2ng th\\xEAm s\\u1EA3n ph\\u1EA9m trong trang qu\\u1EA3n l\\xFD\"})]}):/*#__PURE__*/_jsx(Row,{gutter:[8,8],children:filteredProducts.map(product=>/*#__PURE__*/_jsx(Col,{xs:12,sm:8,md:6,lg:4,children:/*#__PURE__*/_jsx(Card,{className:\"pos-product-card\",size:\"small\",hoverable:true,onClick:()=>addToCart(product),title:product.name,extra:/*#__PURE__*/_jsx(Tag,{color:product.quantity>0?'green':'red',children:product.quantity>0?\"C\\xF2n \".concat(product.quantity):'Hết hàng'}),children:/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center'},children:[/*#__PURE__*/_jsx(Title,{level:4,style:{margin:'8px 0',color:'#1890ff'},children:formatCurrency(product.price)}),/*#__PURE__*/_jsx(Text,{type:\"secondary\",children:product.category}),/*#__PURE__*/_jsx(\"br\",{}),product.sku&&/*#__PURE__*/_jsxs(Text,{type:\"secondary\",children:[\"M\\xE3: \",product.sku]})]})})},product.id))})})}),/*#__PURE__*/_jsx(Col,{xs:24,lg:8,children:/*#__PURE__*/_jsxs(Card,{title:\"Gi\\u1ECF h\\xE0ng (\".concat(getTotalItems(),\" m\\xF3n)\"),style:{height:'700px'},extra:/*#__PURE__*/_jsx(Button,{danger:true,size:\"small\",onClick:clearCart,disabled:cart.length===0,children:\"X\\xF3a t\\u1EA5t c\\u1EA3\"}),children:[/*#__PURE__*/_jsx(\"div\",{className:\"pos-cart\",children:cart.length===0?/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center',padding:'40px 0',color:'#999'},children:[/*#__PURE__*/_jsx(ShoppingCartOutlined,{style:{fontSize:'48px',marginBottom:'16px'}}),/*#__PURE__*/_jsx(\"div\",{children:\"Gi\\u1ECF h\\xE0ng tr\\u1ED1ng\"}),/*#__PURE__*/_jsx(\"div\",{children:\"Ch\\u1ECDn s\\u1EA3n ph\\u1EA9m \\u0111\\u1EC3 th\\xEAm v\\xE0o gi\\u1ECF h\\xE0ng\"})]}):/*#__PURE__*/_jsx(List,{dataSource:cart,renderItem:item=>/*#__PURE__*/_jsx(List.Item,{style:{padding:'12px 0'},children:/*#__PURE__*/_jsxs(\"div\",{style:{width:'100%'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'flex-start',marginBottom:'8px'},children:[/*#__PURE__*/_jsx(Text,{strong:true,children:item.name}),/*#__PURE__*/_jsx(Button,{danger:true,size:\"small\",type:\"text\",icon:/*#__PURE__*/_jsx(DeleteOutlined,{}),onClick:()=>removeFromCart(item.product_id)})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsxs(Space,{children:[/*#__PURE__*/_jsx(Button,{size:\"small\",icon:/*#__PURE__*/_jsx(MinusOutlined,{}),onClick:()=>updateCartQuantity(item.product_id,item.quantity-1)}),/*#__PURE__*/_jsx(InputNumber,{size:\"small\",min:1,max:item.max_quantity,value:item.quantity,onChange:value=>updateCartQuantity(item.product_id,value),style:{width:'60px'}}),/*#__PURE__*/_jsx(Button,{size:\"small\",icon:/*#__PURE__*/_jsx(PlusOutlined,{}),onClick:()=>updateCartQuantity(item.product_id,item.quantity+1)})]}),/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'right'},children:[/*#__PURE__*/_jsxs(Text,{type:\"secondary\",children:[formatCurrency(item.price),\" x \",item.quantity]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Text,{strong:true,children:formatCurrency(item.price*item.quantity)})]})]})]})})})}),cart.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"pos-total\",children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',marginBottom:'16px'},children:[/*#__PURE__*/_jsx(Title,{level:4,style:{margin:0},children:\"T\\u1ED5ng c\\u1ED9ng:\"}),/*#__PURE__*/_jsx(Title,{level:3,style:{margin:0,color:'#52c41a'},children:formatCurrency(getTotalAmount())})]}),/*#__PURE__*/_jsx(Button,{type:\"primary\",size:\"large\",block:true,onClick:handleCheckout,loading:loading,children:\"Thanh to\\xE1n\"})]})]})}),/*#__PURE__*/_jsx(Modal,{title:\"Th\\xF4ng tin \\u0111\\u01A1n h\\xE0ng\",open:orderModalVisible,onCancel:()=>setOrderModalVisible(false),footer:null,children:/*#__PURE__*/_jsxs(Form,{form:customerForm,layout:\"vertical\",onFinish:submitOrder,children:[/*#__PURE__*/_jsx(Form.Item,{label:\"T\\xEAn kh\\xE1ch h\\xE0ng\",name:\"customer_name\",children:/*#__PURE__*/_jsx(Input,{placeholder:\"Nh\\u1EADp t\\xEAn kh\\xE1ch h\\xE0ng (t\\xF9y ch\\u1ECDn)\"})}),/*#__PURE__*/_jsx(Form.Item,{label:\"S\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i\",name:\"customer_phone\",children:/*#__PURE__*/_jsx(Input,{placeholder:\"Nh\\u1EADp s\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i (t\\xF9y ch\\u1ECDn)\"})}),/*#__PURE__*/_jsx(Form.Item,{label:\"Ghi ch\\xFA\",name:\"notes\",children:/*#__PURE__*/_jsx(Input.TextArea,{rows:3,placeholder:\"Ghi ch\\xFA \\u0111\\u01A1n h\\xE0ng (t\\xF9y ch\\u1ECDn)\"})}),/*#__PURE__*/_jsxs(\"div\",{style:{background:'#f6ffed',border:'1px solid #b7eb8f',borderRadius:'6px',padding:'16px',marginBottom:'16px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between'},children:[/*#__PURE__*/_jsx(Text,{children:\"S\\u1ED1 l\\u01B0\\u1EE3ng m\\xF3n:\"}),/*#__PURE__*/_jsx(Text,{strong:true,children:getTotalItems()})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between'},children:[/*#__PURE__*/_jsx(Text,{children:\"T\\u1ED5ng ti\\u1EC1n:\"}),/*#__PURE__*/_jsx(Text,{strong:true,style:{fontSize:'18px',color:'#52c41a'},children:formatCurrency(getTotalAmount())})]})]}),/*#__PURE__*/_jsx(Form.Item,{style:{marginBottom:0},children:/*#__PURE__*/_jsxs(Space,{style:{width:'100%',justifyContent:'flex-end'},children:[/*#__PURE__*/_jsx(Button,{onClick:()=>setOrderModalVisible(false),children:\"H\\u1EE7y\"}),/*#__PURE__*/_jsx(Button,{type:\"primary\",htmlType:\"submit\",loading:loading,children:\"X\\xE1c nh\\u1EADn \\u0111\\u01A1n h\\xE0ng\"})]})})]})})]});}export default POSPage;","map":{"version":3,"names":["React","useState","useEffect","Row","Col","Card","Input","Button","List","Typography","message","Modal","Form","InputNumber","Space","Tag","Divider","Spin","PlusOutlined","MinusOutlined","DeleteOutlined","ShoppingCartOutlined","PrinterOutlined","SearchOutlined","ShoppingOutlined","productsAPI","ordersAPI","formatCurrency","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Title","Text","Search","POSPage","products","setProducts","filteredProducts","setFilteredProducts","cart","setCart","loading","setLoading","orderModalVisible","setOrderModalVisible","customerForm","useForm","fetchProducts","response","getAll","data","success","console","error","handleSearch","value","filtered","filter","product","_product$sku","_product$barcode","name","toLowerCase","includes","sku","barcode","addToCart","quantity","warning","existingItem","find","item","product_id","id","map","_objectSpread","price","max_quantity","updateCartQuantity","newQuantity","removeFromCart","p","clearCart","getTotalAmount","reduce","total","getTotalItems","handleCheckout","length","submitOrder","values","orderData","customer_name","customer_phone","notes","items","create","resetFields","showPrintModal","_error$response","_error$response$data","order","info","title","width","content","style","padding","children","textAlign","marginBottom","level","order_number","type","Date","created_at","toLocaleString","strong","size","dataSource","renderItem","Item","display","justifyContent","product_name","subtotal","margin","total_amount","footer","icon","onClick","window","print","gutter","xs","lg","concat","height","marginTop","color","fontSize","sm","md","className","hoverable","extra","category","danger","disabled","alignItems","min","max","onChange","block","open","onCancel","form","layout","onFinish","label","placeholder","TextArea","rows","background","border","borderRadius","htmlType"],"sources":["C:/Users/ADMIN/Desktop/kho/client/src/pages/POSPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { \r\n  Row, \r\n  Col, \r\n  Card, \r\n  Input, \r\n  Button, \r\n  List, \r\n  Typography, \r\n  message, \r\n  Modal,\r\n  Form,\r\n  InputNumber,\r\n  Space,\r\n  Tag,\r\n  Divider,\r\n  Spin\r\n} from 'antd';\r\nimport { \r\n  PlusOutlined, \r\n  MinusOutlined, \r\n  DeleteOutlined,\r\n  ShoppingCartOutlined,\r\n  PrinterOutlined,\r\n  SearchOutlined,\r\n  ShoppingOutlined\r\n} from '@ant-design/icons';\r\n\r\nimport { productsAPI, ordersAPI } from '../services/api';\r\nimport { formatCurrency } from '../utils/format';\r\n\r\nconst { Title, Text } = Typography;\r\nconst { Search } = Input;\r\n\r\nfunction POSPage() {\r\n  const [products, setProducts] = useState([]);\r\n  const [filteredProducts, setFilteredProducts] = useState([]);\r\n  const [cart, setCart] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [orderModalVisible, setOrderModalVisible] = useState(false);\r\n  const [customerForm] = Form.useForm();\r\n\r\n  useEffect(() => {\r\n    fetchProducts();\r\n  }, []);\r\n\r\n  const fetchProducts = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await productsAPI.getAll();\r\n      if (response.data.success) {\r\n        setProducts(response.data.data || []);\r\n        setFilteredProducts(response.data.data || []);\r\n      } else {\r\n        setProducts([]);\r\n        console.error('API returned error:', response.data.message);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching products:', error);\r\n      setProducts([]);\r\n      // Don't show error message to user, just silently handle it\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleSearch = (value) => {\r\n    const filtered = products.filter(product =>\r\n      product.name.toLowerCase().includes(value.toLowerCase()) ||\r\n      product.sku?.toLowerCase().includes(value.toLowerCase()) ||\r\n      product.barcode?.toLowerCase().includes(value.toLowerCase())\r\n    );\r\n    setFilteredProducts(filtered);\r\n  };\r\n\r\n  const addToCart = (product) => {\r\n    if (product.quantity <= 0) {\r\n      message.warning('Sản phẩm đã hết hàng');\r\n      return;\r\n    }\r\n\r\n    const existingItem = cart.find(item => item.product_id === product.id);\r\n    \r\n    if (existingItem) {\r\n      if (existingItem.quantity >= product.quantity) {\r\n        message.warning('Không thể thêm, vượt quá số lượng tồn kho');\r\n        return;\r\n      }\r\n      setCart(cart.map(item =>\r\n        item.product_id === product.id\r\n          ? { ...item, quantity: item.quantity + 1 }\r\n          : item\r\n      ));\r\n    } else {\r\n      setCart([...cart, {\r\n        product_id: product.id,\r\n        name: product.name,\r\n        price: product.price,\r\n        quantity: 1,\r\n        max_quantity: product.quantity\r\n      }]);\r\n    }\r\n  };\r\n\r\n  const updateCartQuantity = (product_id, newQuantity) => {\r\n    if (newQuantity <= 0) {\r\n      removeFromCart(product_id);\r\n      return;\r\n    }\r\n\r\n    const product = products.find(p => p.id === product_id);\r\n    if (newQuantity > product.quantity) {\r\n      message.warning('Vượt quá số lượng tồn kho');\r\n      return;\r\n    }\r\n\r\n    setCart(cart.map(item =>\r\n      item.product_id === product_id\r\n        ? { ...item, quantity: newQuantity }\r\n        : item\r\n    ));\r\n  };\r\n\r\n  const removeFromCart = (product_id) => {\r\n    setCart(cart.filter(item => item.product_id !== product_id));\r\n  };\r\n\r\n  const clearCart = () => {\r\n    setCart([]);\r\n  };\r\n\r\n  const getTotalAmount = () => {\r\n    return cart.reduce((total, item) => total + (item.price * item.quantity), 0);\r\n  };\r\n\r\n  const getTotalItems = () => {\r\n    return cart.reduce((total, item) => total + item.quantity, 0);\r\n  };\r\n\r\n  const handleCheckout = () => {\r\n    if (cart.length === 0) {\r\n      message.warning('Giỏ hàng trống');\r\n      return;\r\n    }\r\n    setOrderModalVisible(true);\r\n  };\r\n\r\n  const submitOrder = async (values) => {\r\n    try {\r\n      setLoading(true);\r\n      \r\n      const orderData = {\r\n        customer_name: values.customer_name || 'Khách hàng',\r\n        customer_phone: values.customer_phone,\r\n        notes: values.notes,\r\n        items: cart.map(item => ({\r\n          product_id: item.product_id,\r\n          quantity: item.quantity\r\n        }))\r\n      };\r\n\r\n      const response = await ordersAPI.create(orderData);\r\n      \r\n      if (response.data.success) {\r\n        message.success('Tạo đơn hàng thành công!');\r\n        \r\n        // Reset form và giỏ hàng\r\n        customerForm.resetFields();\r\n        clearCart();\r\n        setOrderModalVisible(false);\r\n        \r\n        // Reload products để cập nhật tồn kho\r\n        fetchProducts();\r\n        \r\n        // Mở modal in hóa đơn\r\n        showPrintModal(response.data.data);\r\n      }\r\n    } catch (error) {\r\n      message.error(error.response?.data?.message || 'Lỗi khi tạo đơn hàng');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const showPrintModal = (order) => {\r\n    Modal.info({\r\n      title: 'Hóa đơn bán hàng',\r\n      width: 500,\r\n      content: (\r\n        <div style={{ padding: '20px 0' }}>\r\n          <div style={{ textAlign: 'center', marginBottom: '20px' }}>\r\n            <Title level={4}>HÓA ĐƠN BÁN HÀNG</Title>\r\n            <Text>Số hóa đơn: {order.order_number}</Text><br/>\r\n            <Text type=\"secondary\">\r\n              {new Date(order.created_at).toLocaleString('vi-VN')}\r\n            </Text>\r\n          </div>\r\n          \r\n          <Divider />\r\n          \r\n          <div style={{ marginBottom: '16px' }}>\r\n            <Text strong>Khách hàng: </Text>\r\n            <Text>{order.customer_name}</Text><br/>\r\n            {order.customer_phone && (\r\n              <>\r\n                <Text strong>Số điện thoại: </Text>\r\n                <Text>{order.customer_phone}</Text>\r\n              </>\r\n            )}\r\n          </div>\r\n          \r\n          <Divider />\r\n          \r\n          <List\r\n            size=\"small\"\r\n            dataSource={order.items}\r\n            renderItem={item => (\r\n              <List.Item style={{ padding: '8px 0' }}>\r\n                <div style={{ width: '100%', display: 'flex', justifyContent: 'space-between' }}>\r\n                  <div>\r\n                    <Text>{item.product_name}</Text><br/>\r\n                    <Text type=\"secondary\">{item.quantity} x {formatCurrency(item.price)}</Text>\r\n                  </div>\r\n                  <Text strong>{formatCurrency(item.subtotal)}</Text>\r\n                </div>\r\n              </List.Item>\r\n            )}\r\n          />\r\n          \r\n          <Divider />\r\n          \r\n          <div style={{ textAlign: 'right' }}>\r\n            <Title level={4} style={{ margin: 0 }}>\r\n              Tổng cộng: {formatCurrency(order.total_amount)}\r\n            </Title>\r\n          </div>\r\n        </div>\r\n      ),\r\n      footer: (\r\n        <Button \r\n          type=\"primary\" \r\n          icon={<PrinterOutlined />}\r\n          onClick={() => window.print()}\r\n        >\r\n          In hóa đơn\r\n        </Button>\r\n      )\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Row gutter={24}>\r\n      {/* Danh sách sản phẩm */}\r\n      <Col xs={24} lg={16}>\r\n        <Card \r\n          title={`Sản phẩm (${filteredProducts.length})`} \r\n          style={{ height: '100%' }}\r\n        >\r\n          {loading ? (\r\n            <div style={{ textAlign: 'center', padding: '50px' }}>\r\n              <Spin size=\"large\" />\r\n              <div style={{ marginTop: 16 }}>Đang tải sản phẩm...</div>\r\n            </div>\r\n          ) : filteredProducts.length === 0 ? (\r\n            <div style={{ textAlign: 'center', padding: '50px', color: '#999' }}>\r\n              <ShoppingOutlined style={{ fontSize: '48px', marginBottom: 16 }} />\r\n              <div>Chưa có sản phẩm nào</div>\r\n              <div style={{ fontSize: '12px', marginTop: 8 }}>\r\n                Vui lòng thêm sản phẩm trong trang quản lý\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <Row gutter={[8, 8]}>\r\n              {filteredProducts.map((product) => (\r\n                <Col key={product.id} xs={12} sm={8} md={6} lg={4}>\r\n                  <Card\r\n                    className=\"pos-product-card\"\r\n                    size=\"small\"\r\n                    hoverable\r\n                    onClick={() => addToCart(product)}\r\n                    title={product.name}\r\n                    extra={\r\n                      <Tag color={product.quantity > 0 ? 'green' : 'red'}>\r\n                        {product.quantity > 0 ? `Còn ${product.quantity}` : 'Hết hàng'}\r\n                      </Tag>\r\n                    }\r\n                  >\r\n                    <div style={{ textAlign: 'center' }}>\r\n                      <Title level={4} style={{ margin: '8px 0', color: '#1890ff' }}>\r\n                        {formatCurrency(product.price)}\r\n                      </Title>\r\n                      <Text type=\"secondary\">{product.category}</Text><br/>\r\n                      {product.sku && <Text type=\"secondary\">Mã: {product.sku}</Text>}\r\n                    </div>\r\n                  </Card>\r\n                </Col>\r\n              ))}\r\n            </Row>\r\n          )}\r\n        </Card>\r\n      </Col>\r\n\r\n      {/* Giỏ hàng */}\r\n      <Col xs={24} lg={8}>\r\n        <Card \r\n          title={`Giỏ hàng (${getTotalItems()} món)`}\r\n          style={{ height: '700px' }}\r\n          extra={\r\n            <Button \r\n              danger \r\n              size=\"small\" \r\n              onClick={clearCart}\r\n              disabled={cart.length === 0}\r\n            >\r\n              Xóa tất cả\r\n            </Button>\r\n          }\r\n        >\r\n          <div className=\"pos-cart\">\r\n            {cart.length === 0 ? (\r\n              <div style={{ \r\n                textAlign: 'center', \r\n                padding: '40px 0',\r\n                color: '#999' \r\n              }}>\r\n                <ShoppingCartOutlined style={{ fontSize: '48px', marginBottom: '16px' }} />\r\n                <div>Giỏ hàng trống</div>\r\n                <div>Chọn sản phẩm để thêm vào giỏ hàng</div>\r\n              </div>\r\n            ) : (\r\n              <List\r\n                dataSource={cart}\r\n                renderItem={item => (\r\n                  <List.Item style={{ padding: '12px 0' }}>\r\n                    <div style={{ width: '100%' }}>\r\n                      <div style={{ \r\n                        display: 'flex', \r\n                        justifyContent: 'space-between',\r\n                        alignItems: 'flex-start',\r\n                        marginBottom: '8px'\r\n                      }}>\r\n                        <Text strong>{item.name}</Text>\r\n                        <Button\r\n                          danger\r\n                          size=\"small\"\r\n                          type=\"text\"\r\n                          icon={<DeleteOutlined />}\r\n                          onClick={() => removeFromCart(item.product_id)}\r\n                        />\r\n                      </div>\r\n                      \r\n                      <div style={{ \r\n                        display: 'flex', \r\n                        justifyContent: 'space-between',\r\n                        alignItems: 'center'\r\n                      }}>\r\n                        <Space>\r\n                          <Button\r\n                            size=\"small\"\r\n                            icon={<MinusOutlined />}\r\n                            onClick={() => updateCartQuantity(item.product_id, item.quantity - 1)}\r\n                          />\r\n                          <InputNumber\r\n                            size=\"small\"\r\n                            min={1}\r\n                            max={item.max_quantity}\r\n                            value={item.quantity}\r\n                            onChange={(value) => updateCartQuantity(item.product_id, value)}\r\n                            style={{ width: '60px' }}\r\n                          />\r\n                          <Button\r\n                            size=\"small\"\r\n                            icon={<PlusOutlined />}\r\n                            onClick={() => updateCartQuantity(item.product_id, item.quantity + 1)}\r\n                          />\r\n                        </Space>\r\n                        \r\n                        <div style={{ textAlign: 'right' }}>\r\n                          <Text type=\"secondary\">{formatCurrency(item.price)} x {item.quantity}</Text><br/>\r\n                          <Text strong>{formatCurrency(item.price * item.quantity)}</Text>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </List.Item>\r\n                )}\r\n              />\r\n            )}\r\n          </div>\r\n\r\n          {cart.length > 0 && (\r\n            <div className=\"pos-total\">\r\n              <div style={{ \r\n                display: 'flex', \r\n                justifyContent: 'space-between',\r\n                marginBottom: '16px'\r\n              }}>\r\n                <Title level={4} style={{ margin: 0 }}>Tổng cộng:</Title>\r\n                <Title level={3} style={{ margin: 0, color: '#52c41a' }}>\r\n                  {formatCurrency(getTotalAmount())}\r\n                </Title>\r\n              </div>\r\n              \r\n              <Button\r\n                type=\"primary\"\r\n                size=\"large\"\r\n                block\r\n                onClick={handleCheckout}\r\n                loading={loading}\r\n              >\r\n                Thanh toán\r\n              </Button>\r\n            </div>\r\n          )}\r\n        </Card>\r\n      </Col>\r\n\r\n      {/* Modal tạo đơn hàng */}\r\n      <Modal\r\n        title=\"Thông tin đơn hàng\"\r\n        open={orderModalVisible}\r\n        onCancel={() => setOrderModalVisible(false)}\r\n        footer={null}\r\n      >\r\n        <Form\r\n          form={customerForm}\r\n          layout=\"vertical\"\r\n          onFinish={submitOrder}\r\n        >\r\n          <Form.Item\r\n            label=\"Tên khách hàng\"\r\n            name=\"customer_name\"\r\n          >\r\n            <Input placeholder=\"Nhập tên khách hàng (tùy chọn)\" />\r\n          </Form.Item>\r\n\r\n          <Form.Item\r\n            label=\"Số điện thoại\"\r\n            name=\"customer_phone\"\r\n          >\r\n            <Input placeholder=\"Nhập số điện thoại (tùy chọn)\" />\r\n          </Form.Item>\r\n\r\n          <Form.Item\r\n            label=\"Ghi chú\"\r\n            name=\"notes\"\r\n          >\r\n            <Input.TextArea rows={3} placeholder=\"Ghi chú đơn hàng (tùy chọn)\" />\r\n          </Form.Item>\r\n\r\n          <div style={{ \r\n            background: '#f6ffed', \r\n            border: '1px solid #b7eb8f',\r\n            borderRadius: '6px',\r\n            padding: '16px',\r\n            marginBottom: '16px'\r\n          }}>\r\n            <div style={{ display: 'flex', justifyContent: 'space-between' }}>\r\n              <Text>Số lượng món:</Text>\r\n              <Text strong>{getTotalItems()}</Text>\r\n            </div>\r\n            <div style={{ display: 'flex', justifyContent: 'space-between' }}>\r\n              <Text>Tổng tiền:</Text>\r\n              <Text strong style={{ fontSize: '18px', color: '#52c41a' }}>\r\n                {formatCurrency(getTotalAmount())}\r\n              </Text>\r\n            </div>\r\n          </div>\r\n\r\n          <Form.Item style={{ marginBottom: 0 }}>\r\n            <Space style={{ width: '100%', justifyContent: 'flex-end' }}>\r\n              <Button onClick={() => setOrderModalVisible(false)}>\r\n                Hủy\r\n              </Button>\r\n              <Button type=\"primary\" htmlType=\"submit\" loading={loading}>\r\n                Xác nhận đơn hàng\r\n              </Button>\r\n            </Space>\r\n          </Form.Item>\r\n        </Form>\r\n      </Modal>\r\n    </Row>\r\n  );\r\n}\r\n\r\nexport default POSPage; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}