{"ast":null,"code":"import React from'react';import{Drawer,Descriptions,Spin,Timeline,List,Typography,Tag}from'antd';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const{Text}=Typography;const CustomerDetailDrawer=_ref=>{var _customer$total_spent;let{visible,onClose,customer,loading,purchaseHistory,orderSerials,purchaseHistoryLoading}=_ref;return/*#__PURE__*/_jsxs(Drawer,{open:visible,title:\"Chi ti\\u1EBFt kh\\xE1ch h\\xE0ng: \".concat((customer===null||customer===void 0?void 0:customer.name)||''),onClose:onClose,width:600,destroyOnClose:true,children:[/*#__PURE__*/_jsx(Spin,{spinning:loading,tip:\"\\u0110ang t\\u1EA3i...\",children:customer?/*#__PURE__*/_jsxs(Descriptions,{column:1,bordered:true,size:\"small\",children:[/*#__PURE__*/_jsx(Descriptions.Item,{label:\"T\\xEAn kh\\xE1ch h\\xE0ng\",children:customer.name}),/*#__PURE__*/_jsx(Descriptions.Item,{label:\"S\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i\",children:customer.phone}),/*#__PURE__*/_jsx(Descriptions.Item,{label:\"Email\",children:customer.email}),/*#__PURE__*/_jsx(Descriptions.Item,{label:\"\\u0110\\u1ECBa ch\\u1EC9\",children:customer.address}),/*#__PURE__*/_jsx(Descriptions.Item,{label:\"Lo\\u1EA1i KH\",children:/*#__PURE__*/_jsx(Tag,{color:customer.customer_type==='vip'?'gold':customer.customer_type==='wholesale'?'purple':'default',children:customer.customer_type})}),/*#__PURE__*/_jsxs(Descriptions.Item,{label:\"Chi\\u1EBFt kh\\u1EA5u\",children:[customer.discount_rate||0,\"%\"]}),/*#__PURE__*/_jsx(Descriptions.Item,{label:\"T\\u1ED5ng chi ti\\xEAu\",children:/*#__PURE__*/_jsxs(Text,{strong:true,style:{color:'#52c41a'},children:[(_customer$total_spent=customer.total_spent)===null||_customer$total_spent===void 0?void 0:_customer$total_spent.toLocaleString('vi-VN'),\" \\u20AB\"]})}),/*#__PURE__*/_jsx(Descriptions.Item,{label:\"S\\u1ED1 l\\u1EA7n mua\",children:/*#__PURE__*/_jsx(Text,{children:customer.visit_count||0})}),/*#__PURE__*/_jsx(Descriptions.Item,{label:\"Ghi ch\\xFA\",children:customer.notes})]}):/*#__PURE__*/_jsx(\"div\",{children:\"Kh\\xF4ng c\\xF3 d\\u1EEF li\\u1EC7u kh\\xE1ch h\\xE0ng.\"})}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:24},children:[/*#__PURE__*/_jsx(Text,{strong:true,children:\"L\\u1ECBch s\\u1EED mua h\\xE0ng\"}),/*#__PURE__*/_jsx(Spin,{spinning:purchaseHistoryLoading,tip:\"\\u0110ang t\\u1EA3i l\\u1ECBch s\\u1EED...\",children:/*#__PURE__*/_jsx(Timeline,{style:{marginTop:16},children:purchaseHistory&&purchaseHistory.length>0?purchaseHistory.map(order=>/*#__PURE__*/_jsx(Timeline.Item,{color:order.status==='completed'?'green':'blue',children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Text,{strong:true,children:[\"\\u0110\\u01A1n h\\xE0ng: \",order.order_number]}),\" - \",order.created_at,/*#__PURE__*/_jsx(List,{size:\"small\",dataSource:order.items,renderItem:item=>/*#__PURE__*/_jsxs(List.Item,{children:[/*#__PURE__*/_jsxs(Text,{children:[item.product_name,\" x \",item.quantity]}),orderSerials&&orderSerials[\"\".concat(order.id,\"_\").concat(item.product_id)]&&/*#__PURE__*/_jsxs(\"span\",{style:{marginLeft:8,color:'#888'},children:[\"Serial: \",orderSerials[\"\".concat(order.id,\"_\").concat(item.product_id)].map(s=>s.serial_number).join(', ')]})]})})]})},order.id)):/*#__PURE__*/_jsx(Timeline.Item,{color:\"gray\",children:\"Ch\\u01B0a c\\xF3 l\\u1ECBch s\\u1EED mua h\\xE0ng\"})})})]})]});};export default CustomerDetailDrawer;","map":{"version":3,"names":["React","Drawer","Descriptions","Spin","Timeline","List","Typography","Tag","jsx","_jsx","jsxs","_jsxs","Text","CustomerDetailDrawer","_ref","_customer$total_spent","visible","onClose","customer","loading","purchaseHistory","orderSerials","purchaseHistoryLoading","open","title","concat","name","width","destroyOnClose","children","spinning","tip","column","bordered","size","Item","label","phone","email","address","color","customer_type","discount_rate","strong","style","total_spent","toLocaleString","visit_count","notes","marginTop","length","map","order","status","order_number","created_at","dataSource","items","renderItem","item","product_name","quantity","id","product_id","marginLeft","s","serial_number","join"],"sources":["C:/Users/ADMIN/Desktop/kho/kho/client/src/components/CustomerDetailDrawer.js"],"sourcesContent":["import React from 'react';\r\nimport { Drawer, Descriptions, Spin, Timeline, List, Typography, Tag } from 'antd';\r\n\r\nconst { Text } = Typography;\r\n\r\nconst CustomerDetailDrawer = ({ visible, onClose, customer, loading, purchaseHistory, orderSerials, purchaseHistoryLoading }) => (\r\n  <Drawer\r\n    open={visible}\r\n    title={`Chi tiết khách hàng: ${customer?.name || ''}`}\r\n    onClose={onClose}\r\n    width={600}\r\n    destroyOnClose\r\n  >\r\n    <Spin spinning={loading} tip=\"Đang tải...\">\r\n      {customer ? (\r\n        <Descriptions column={1} bordered size=\"small\">\r\n          <Descriptions.Item label=\"Tên khách hàng\">{customer.name}</Descriptions.Item>\r\n          <Descriptions.Item label=\"Số điện thoại\">{customer.phone}</Descriptions.Item>\r\n          <Descriptions.Item label=\"Email\">{customer.email}</Descriptions.Item>\r\n          <Descriptions.Item label=\"Địa chỉ\">{customer.address}</Descriptions.Item>\r\n          <Descriptions.Item label=\"Loại KH\">\r\n            <Tag color={customer.customer_type === 'vip' ? 'gold' : customer.customer_type === 'wholesale' ? 'purple' : 'default'}>\r\n              {customer.customer_type}\r\n            </Tag>\r\n          </Descriptions.Item>\r\n          <Descriptions.Item label=\"Chiết khấu\">{customer.discount_rate || 0}%</Descriptions.Item>\r\n          <Descriptions.Item label=\"Tổng chi tiêu\">\r\n            <Text strong style={{ color: '#52c41a' }}>{customer.total_spent?.toLocaleString('vi-VN')} ₫</Text>\r\n          </Descriptions.Item>\r\n          <Descriptions.Item label=\"Số lần mua\">\r\n            <Text>{customer.visit_count || 0}</Text>\r\n          </Descriptions.Item>\r\n          <Descriptions.Item label=\"Ghi chú\">{customer.notes}</Descriptions.Item>\r\n        </Descriptions>\r\n      ) : (\r\n        <div>Không có dữ liệu khách hàng.</div>\r\n      )}\r\n    </Spin>\r\n    <div style={{ marginTop: 24 }}>\r\n      <Text strong>Lịch sử mua hàng</Text>\r\n      <Spin spinning={purchaseHistoryLoading} tip=\"Đang tải lịch sử...\">\r\n        <Timeline style={{ marginTop: 16 }}>\r\n          {purchaseHistory && purchaseHistory.length > 0 ? purchaseHistory.map(order => (\r\n            <Timeline.Item key={order.id} color={order.status === 'completed' ? 'green' : 'blue'}>\r\n              <div>\r\n                <Text strong>Đơn hàng: {order.order_number}</Text> - {order.created_at}\r\n                <List\r\n                  size=\"small\"\r\n                  dataSource={order.items}\r\n                  renderItem={item => (\r\n                    <List.Item>\r\n                      <Text>{item.product_name} x {item.quantity}</Text>\r\n                      {orderSerials && orderSerials[`${order.id}_${item.product_id}`] && (\r\n                        <span style={{ marginLeft: 8, color: '#888' }}>\r\n                          Serial: {orderSerials[`${order.id}_${item.product_id}`].map(s => s.serial_number).join(', ')}\r\n                        </span>\r\n                      )}\r\n                    </List.Item>\r\n                  )}\r\n                />\r\n              </div>\r\n            </Timeline.Item>\r\n          )) : <Timeline.Item color=\"gray\">Chưa có lịch sử mua hàng</Timeline.Item>}\r\n        </Timeline>\r\n      </Spin>\r\n    </div>\r\n  </Drawer>\r\n);\r\n\r\nexport default CustomerDetailDrawer; "],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,MAAM,CAAEC,YAAY,CAAEC,IAAI,CAAEC,QAAQ,CAAEC,IAAI,CAAEC,UAAU,CAAEC,GAAG,KAAQ,MAAM,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEnF,KAAM,CAAEC,IAAK,CAAC,CAAGN,UAAU,CAE3B,KAAM,CAAAO,oBAAoB,CAAGC,IAAA,OAAAC,qBAAA,IAAC,CAAEC,OAAO,CAAEC,OAAO,CAAEC,QAAQ,CAAEC,OAAO,CAAEC,eAAe,CAAEC,YAAY,CAAEC,sBAAuB,CAAC,CAAAR,IAAA,oBAC1HH,KAAA,CAACV,MAAM,EACLsB,IAAI,CAAEP,OAAQ,CACdQ,KAAK,oCAAAC,MAAA,CAA0B,CAAAP,QAAQ,SAARA,QAAQ,iBAARA,QAAQ,CAAEQ,IAAI,GAAI,EAAE,CAAG,CACtDT,OAAO,CAAEA,OAAQ,CACjBU,KAAK,CAAE,GAAI,CACXC,cAAc,MAAAC,QAAA,eAEdpB,IAAA,CAACN,IAAI,EAAC2B,QAAQ,CAAEX,OAAQ,CAACY,GAAG,CAAC,uBAAa,CAAAF,QAAA,CACvCX,QAAQ,cACPP,KAAA,CAACT,YAAY,EAAC8B,MAAM,CAAE,CAAE,CAACC,QAAQ,MAACC,IAAI,CAAC,OAAO,CAAAL,QAAA,eAC5CpB,IAAA,CAACP,YAAY,CAACiC,IAAI,EAACC,KAAK,CAAC,yBAAgB,CAAAP,QAAA,CAAEX,QAAQ,CAACQ,IAAI,CAAoB,CAAC,cAC7EjB,IAAA,CAACP,YAAY,CAACiC,IAAI,EAACC,KAAK,CAAC,mCAAe,CAAAP,QAAA,CAAEX,QAAQ,CAACmB,KAAK,CAAoB,CAAC,cAC7E5B,IAAA,CAACP,YAAY,CAACiC,IAAI,EAACC,KAAK,CAAC,OAAO,CAAAP,QAAA,CAAEX,QAAQ,CAACoB,KAAK,CAAoB,CAAC,cACrE7B,IAAA,CAACP,YAAY,CAACiC,IAAI,EAACC,KAAK,CAAC,wBAAS,CAAAP,QAAA,CAAEX,QAAQ,CAACqB,OAAO,CAAoB,CAAC,cACzE9B,IAAA,CAACP,YAAY,CAACiC,IAAI,EAACC,KAAK,CAAC,cAAS,CAAAP,QAAA,cAChCpB,IAAA,CAACF,GAAG,EAACiC,KAAK,CAAEtB,QAAQ,CAACuB,aAAa,GAAK,KAAK,CAAG,MAAM,CAAGvB,QAAQ,CAACuB,aAAa,GAAK,WAAW,CAAG,QAAQ,CAAG,SAAU,CAAAZ,QAAA,CACnHX,QAAQ,CAACuB,aAAa,CACpB,CAAC,CACW,CAAC,cACpB9B,KAAA,CAACT,YAAY,CAACiC,IAAI,EAACC,KAAK,CAAC,sBAAY,CAAAP,QAAA,EAAEX,QAAQ,CAACwB,aAAa,EAAI,CAAC,CAAC,GAAC,EAAmB,CAAC,cACxFjC,IAAA,CAACP,YAAY,CAACiC,IAAI,EAACC,KAAK,CAAC,uBAAe,CAAAP,QAAA,cACtClB,KAAA,CAACC,IAAI,EAAC+B,MAAM,MAACC,KAAK,CAAE,CAAEJ,KAAK,CAAE,SAAU,CAAE,CAAAX,QAAA,GAAAd,qBAAA,CAAEG,QAAQ,CAAC2B,WAAW,UAAA9B,qBAAA,iBAApBA,qBAAA,CAAsB+B,cAAc,CAAC,OAAO,CAAC,CAAC,SAAE,EAAM,CAAC,CACjF,CAAC,cACpBrC,IAAA,CAACP,YAAY,CAACiC,IAAI,EAACC,KAAK,CAAC,sBAAY,CAAAP,QAAA,cACnCpB,IAAA,CAACG,IAAI,EAAAiB,QAAA,CAAEX,QAAQ,CAAC6B,WAAW,EAAI,CAAC,CAAO,CAAC,CACvB,CAAC,cACpBtC,IAAA,CAACP,YAAY,CAACiC,IAAI,EAACC,KAAK,CAAC,YAAS,CAAAP,QAAA,CAAEX,QAAQ,CAAC8B,KAAK,CAAoB,CAAC,EAC3D,CAAC,cAEfvC,IAAA,QAAAoB,QAAA,CAAK,oDAA4B,CAAK,CACvC,CACG,CAAC,cACPlB,KAAA,QAAKiC,KAAK,CAAE,CAAEK,SAAS,CAAE,EAAG,CAAE,CAAApB,QAAA,eAC5BpB,IAAA,CAACG,IAAI,EAAC+B,MAAM,MAAAd,QAAA,CAAC,+BAAgB,CAAM,CAAC,cACpCpB,IAAA,CAACN,IAAI,EAAC2B,QAAQ,CAAER,sBAAuB,CAACS,GAAG,CAAC,yCAAqB,CAAAF,QAAA,cAC/DpB,IAAA,CAACL,QAAQ,EAACwC,KAAK,CAAE,CAAEK,SAAS,CAAE,EAAG,CAAE,CAAApB,QAAA,CAChCT,eAAe,EAAIA,eAAe,CAAC8B,MAAM,CAAG,CAAC,CAAG9B,eAAe,CAAC+B,GAAG,CAACC,KAAK,eACxE3C,IAAA,CAACL,QAAQ,CAAC+B,IAAI,EAAgBK,KAAK,CAAEY,KAAK,CAACC,MAAM,GAAK,WAAW,CAAG,OAAO,CAAG,MAAO,CAAAxB,QAAA,cACnFlB,KAAA,QAAAkB,QAAA,eACElB,KAAA,CAACC,IAAI,EAAC+B,MAAM,MAAAd,QAAA,EAAC,yBAAU,CAACuB,KAAK,CAACE,YAAY,EAAO,CAAC,MAAG,CAACF,KAAK,CAACG,UAAU,cACtE9C,IAAA,CAACJ,IAAI,EACH6B,IAAI,CAAC,OAAO,CACZsB,UAAU,CAAEJ,KAAK,CAACK,KAAM,CACxBC,UAAU,CAAEC,IAAI,eACdhD,KAAA,CAACN,IAAI,CAAC8B,IAAI,EAAAN,QAAA,eACRlB,KAAA,CAACC,IAAI,EAAAiB,QAAA,EAAE8B,IAAI,CAACC,YAAY,CAAC,KAAG,CAACD,IAAI,CAACE,QAAQ,EAAO,CAAC,CACjDxC,YAAY,EAAIA,YAAY,IAAAI,MAAA,CAAI2B,KAAK,CAACU,EAAE,MAAArC,MAAA,CAAIkC,IAAI,CAACI,UAAU,EAAG,eAC7DpD,KAAA,SAAMiC,KAAK,CAAE,CAAEoB,UAAU,CAAE,CAAC,CAAExB,KAAK,CAAE,MAAO,CAAE,CAAAX,QAAA,EAAC,UACrC,CAACR,YAAY,IAAAI,MAAA,CAAI2B,KAAK,CAACU,EAAE,MAAArC,MAAA,CAAIkC,IAAI,CAACI,UAAU,EAAG,CAACZ,GAAG,CAACc,CAAC,EAAIA,CAAC,CAACC,aAAa,CAAC,CAACC,IAAI,CAAC,IAAI,CAAC,EACxF,CACP,EACQ,CACX,CACH,CAAC,EACC,CAAC,EAjBYf,KAAK,CAACU,EAkBX,CAChB,CAAC,cAAGrD,IAAA,CAACL,QAAQ,CAAC+B,IAAI,EAACK,KAAK,CAAC,MAAM,CAAAX,QAAA,CAAC,+CAAwB,CAAe,CAAC,CACjE,CAAC,CACP,CAAC,EACJ,CAAC,EACA,CAAC,EACV,CAED,cAAe,CAAAhB,oBAAoB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}