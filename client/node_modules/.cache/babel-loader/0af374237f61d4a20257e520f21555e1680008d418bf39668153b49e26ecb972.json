{"ast":null,"code":"import React,{useEffect,useRef,useState,useCallback}from'react';import{Modal,Button,Space,message,Alert,Typography,Divider}from'antd';import{CameraOutlined,CloseOutlined,ReloadOutlined,CheckCircleOutlined}from'@ant-design/icons';import{Html5Qrcode}from'html5-qrcode';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const{Text}=Typography;const SUPPORTED_FORMATS=[Html5Qrcode.FORMATS.QR_CODE,Html5Qrcode.FORMATS.CODE_128,Html5Qrcode.FORMATS.CODE_39,Html5Qrcode.FORMATS.CODE_93,Html5Qrcode.FORMATS.EAN_13,Html5Qrcode.FORMATS.EAN_8,Html5Qrcode.FORMATS.UPC_A,Html5Qrcode.FORMATS.UPC_E];const QRScanner=_ref=>{let{visible,onClose,onScan,title=\"Quét Serial Number\",placeholder=\"Đưa camera vào mã QR hoặc Barcode\"}=_ref;const videoRef=useRef(null);const[isScanning,setIsScanning]=useState(false);const[error,setError]=useState(null);const[scannerInstance,setScannerInstance]=useState(null);const[permissionState,setPermissionState]=useState('unknown');const[isClosing,setIsClosing]=useState(false);const[cameraDevices,setCameraDevices]=useState([]);const[selectedCameraId,setSelectedCameraId]=useState(null);// Safe cleanup function\nconst stopScanner=useCallback(async()=>{try{if(scannerInstance&&scannerInstance.isScanning){await scannerInstance.stop();}setScannerInstance(null);setIsScanning(false);}catch(err){console.warn('Scanner cleanup warning:',err);setScannerInstance(null);setIsScanning(false);}},[scannerInstance]);// Main effect for lifecycle management\nuseEffect(()=>{if(visible&&!isClosing){initializeScanner();}else if(!visible){stopScanner();}return()=>{stopScanner();};},[visible,isClosing,stopScanner]);// Initialize scanner\nconst initializeScanner=async()=>{try{setError(null);await checkCameraPermission();await getCameraDevices();await startScanner();}catch(err){handleCameraError(err);}};// Check camera permission\nconst checkCameraPermission=async()=>{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){throw new Error('Trình duyệt không hỗ trợ truy cập camera');}if(navigator.permissions){try{const permission=await navigator.permissions.query({name:'camera'});setPermissionState(permission.state);permission.onchange=()=>setPermissionState(permission.state);}catch(_unused){}}};// Get camera devices\nconst getCameraDevices=async()=>{try{const devices=await navigator.mediaDevices.enumerateDevices();const videoDevices=devices.filter(device=>device.kind==='videoinput');setCameraDevices(videoDevices);const backCamera=videoDevices.find(device=>device.label.toLowerCase().includes('back')||device.label.toLowerCase().includes('rear')||device.label.toLowerCase().includes('environment'));if(backCamera){setSelectedCameraId(backCamera.deviceId);}else if(videoDevices.length>0){setSelectedCameraId(videoDevices[0].deviceId);}}catch(err){console.warn('Error getting camera devices:',err);}};// Request camera permission\nconst requestCameraPermission=async()=>{try{setError(null);const stream=await navigator.mediaDevices.getUserMedia({video:{facingMode:'environment'}});stream.getTracks().forEach(track=>track.stop());setPermissionState('granted');message.success('✅ Đã cấp quyền truy cập camera!');await startScanner();}catch(err){setPermissionState('denied');handleCameraError(err);}};// Handle camera errors\nconst handleCameraError=err=>{if(err.name==='NotAllowedError'||err.name==='PermissionDeniedError'){setError('Quyền truy cập camera bị từ chối. Vui lòng cho phép truy cập camera trong cài đặt trình duyệt.');setPermissionState('denied');}else if(err.name==='NotFoundError'||err.name==='DevicesNotFoundError'){setError('Không tìm thấy camera. Vui lòng kiểm tra kết nối camera.');}else if(err.name==='NotSupportedError'){setError('Trình duyệt không hỗ trợ truy cập camera.');}else if(err.name==='NotReadableError'){setError('Camera đang được sử dụng bởi ứng dụng khác.');}else{setError(\"L\\u1ED7i camera: \".concat(err.message||'Không thể truy cập camera'));}};// Start scanner with full control\nconst startScanner=async()=>{try{if(scannerInstance){await stopScanner();await new Promise(resolve=>setTimeout(resolve,100));}const videoElement=videoRef.current;if(!videoElement){throw new Error('Video element not found');}const html5QrCode=new Html5Qrcode(\"qr-reader\");const config={fps:10,qrbox:{width:250,height:250},aspectRatio:1.0,disableFlip:false,videoConstraints:{facingMode:'environment',deviceId:selectedCameraId?{exact:selectedCameraId}:undefined}};await html5QrCode.start({facingMode:'environment'},config,decodedText=>{message.success(\"\\uD83D\\uDCF1 \\u0110\\xE3 qu\\xE9t th\\xE0nh c\\xF4ng: \".concat(decodedText));onScan(decodedText);handleClose();},error=>{if(error&&!error.includes('NotFoundException')){console.warn(\"QR scan error: \".concat(error));}});setScannerInstance(html5QrCode);setIsScanning(true);setPermissionState('granted');}catch(err){console.error('Scanner start error:',err);handleCameraError(err);setIsScanning(false);}};// Handle close with proper cleanup\nconst handleClose=async()=>{setIsClosing(true);try{await stopScanner();setError(null);setPermissionState('unknown');setIsClosing(false);onClose();}catch(err){console.warn('Close error:',err);setIsClosing(false);onClose();}};// Handle restart\nconst handleRestart=async()=>{setError(null);await stopScanner();setTimeout(()=>{initializeScanner();},500);};// Render permission request UI\nconst renderPermissionRequest=()=>/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center',padding:'40px 20px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'64px',marginBottom:'20px'},children:\"\\uD83D\\uDCF1\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'18px',fontWeight:'bold',marginBottom:'12px'},children:\"C\\u1EA7n quy\\u1EC1n truy c\\u1EADp Camera\"}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'14px',color:'#666',marginBottom:'24px',lineHeight:'1.5'},children:[\"\\u0110\\u1EC3 qu\\xE9t m\\xE3 QR/Barcode, \\u1EE9ng d\\u1EE5ng c\\u1EA7n quy\\u1EC1n truy c\\u1EADp camera c\\u1EE7a thi\\u1EBFt b\\u1ECB.\",/*#__PURE__*/_jsx(\"br\",{}),\"Vui l\\xF2ng b\\u1EA5m \\\"Cho ph\\xE9p\\\" khi tr\\xECnh duy\\u1EC7t h\\u1ECFi.\"]}),/*#__PURE__*/_jsx(Button,{type:\"primary\",size:\"large\",icon:/*#__PURE__*/_jsx(CameraOutlined,{}),onClick:requestCameraPermission,style:{background:'#52c41a',borderColor:'#52c41a',height:'48px',fontSize:'16px',fontWeight:'bold'},children:\"\\uD83D\\uDD13 C\\u1EA5p quy\\u1EC1n Camera\"}),/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'12px',color:'#999',textAlign:'left'},children:[/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:'8px',fontWeight:'bold'},children:\"\\uD83D\\uDCA1 L\\u01B0u \\xFD:\"}),/*#__PURE__*/_jsxs(\"div\",{children:[\"\\u2022 Tr\\xEAn \",/*#__PURE__*/_jsx(\"strong\",{children:\"iPhone/iPad\"}),\": B\\u1EA5m \\\"Cho ph\\xE9p\\\" khi Safari h\\u1ECFi\"]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"\\u2022 Tr\\xEAn \",/*#__PURE__*/_jsx(\"strong\",{children:\"Android\"}),\": B\\u1EA5m \\\"Allow\\\" khi Chrome h\\u1ECFi\"]}),/*#__PURE__*/_jsx(\"div\",{children:\"\\u2022 N\\u1EBFu \\u0111\\xE3 t\\u1EEB ch\\u1ED1i: V\\xE0o Settings \\u2192 Camera \\u2192 Cho ph\\xE9p trang web n\\xE0y\"})]})]});return/*#__PURE__*/_jsx(Modal,{title:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'8px'},children:[/*#__PURE__*/_jsx(CameraOutlined,{style:{color:'#1890ff'}}),/*#__PURE__*/_jsx(\"span\",{children:title}),permissionState==='granted'&&/*#__PURE__*/_jsx(CheckCircleOutlined,{style:{color:'#52c41a',marginLeft:'8px'}})]}),open:visible,onCancel:handleClose,width:Math.min(600,window.innerWidth-32),footer:/*#__PURE__*/_jsxs(Space,{children:[/*#__PURE__*/_jsx(Button,{onClick:handleRestart,icon:/*#__PURE__*/_jsx(ReloadOutlined,{}),disabled:isClosing,children:\"Th\\u1EED l\\u1EA1i\"}),/*#__PURE__*/_jsx(Button,{onClick:handleClose,icon:/*#__PURE__*/_jsx(CloseOutlined,{}),disabled:isClosing,children:\"\\u0110\\xF3ng\"})]}),centered:true,style:{top:20},confirmLoading:isClosing,children:/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center',padding:'20px 0'},children:[(permissionState==='denied'||permissionState==='prompt'||permissionState==='unknown')&&!scannerInstance&&renderPermissionRequest(),error&&/*#__PURE__*/_jsx(Alert,{message:\"L\\u1ED7i Camera\",description:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{children:error}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'12px',fontSize:'12px'},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"C\\xE1ch kh\\u1EAFc ph\\u1EE5c:\"}),/*#__PURE__*/_jsx(\"br\",{}),\"\\u2022 \\u0110\\u1EA3m b\\u1EA3o trang web \\u0111\\u01B0\\u1EE3c truy c\\u1EADp qua HTTPS\",/*#__PURE__*/_jsx(\"br\",{}),\"\\u2022 Ki\\u1EC3m tra c\\xE0i \\u0111\\u1EB7t quy\\u1EC1n camera trong tr\\xECnh duy\\u1EC7t\",/*#__PURE__*/_jsx(\"br\",{}),\"\\u2022 Th\\u1EED t\\u1EA3i l\\u1EA1i trang v\\xE0 c\\u1EA5p quy\\u1EC1n l\\u1EA1i\"]})]}),type:\"error\",showIcon:true,style:{marginBottom:16,textAlign:'left'},action:/*#__PURE__*/_jsx(Button,{size:\"small\",onClick:requestCameraPermission,children:\"Th\\u1EED l\\u1EA1i\"})}),permissionState==='granted'&&!error&&/*#__PURE__*/_jsx(Alert,{message:\"Camera \\u0111\\xE3 s\\u1EB5n s\\xE0ng\",description:placeholder,type:\"success\",showIcon:true,style:{marginBottom:16}}),permissionState==='granted'&&!error&&/*#__PURE__*/_jsxs(\"div\",{id:\"qr-reader\",style:{width:'100%',maxWidth:'500px',margin:'0 auto',border:'2px dashed #52c41a',borderRadius:'8px',minHeight:'300px',display:'flex',alignItems:'center',justifyContent:'center',position:'relative'},children:[!isScanning&&/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center',color:'#999'},children:[/*#__PURE__*/_jsx(CameraOutlined,{style:{fontSize:'48px',marginBottom:'16px'}}),/*#__PURE__*/_jsx(\"div\",{children:\"\\u0110ang kh\\u1EDFi t\\u1EA1o camera...\"})]}),/*#__PURE__*/_jsx(\"video\",{ref:videoRef,style:{width:'100%',height:'100%',objectFit:'cover',borderRadius:'6px',display:isScanning?'block':'none'},autoPlay:true,playsInline:true,muted:true})]}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:16,fontSize:'12px',color:'#666'},children:/*#__PURE__*/_jsx(Text,{type:\"secondary\",children:\"\\uD83D\\uDCA1 H\\u1ED7 tr\\u1EE3 qu\\xE9t: QR Code, Code 128, Code 39, EAN-13, UPC-A v\\xE0 nhi\\u1EC1u \\u0111\\u1ECBnh d\\u1EA1ng kh\\xE1c\"})})]})});};export default QRScanner;","map":{"version":3,"names":["React","useEffect","useRef","useState","useCallback","Modal","Button","Space","message","Alert","Typography","Divider","CameraOutlined","CloseOutlined","ReloadOutlined","CheckCircleOutlined","Html5Qrcode","jsx","_jsx","jsxs","_jsxs","Text","SUPPORTED_FORMATS","FORMATS","QR_CODE","CODE_128","CODE_39","CODE_93","EAN_13","EAN_8","UPC_A","UPC_E","QRScanner","_ref","visible","onClose","onScan","title","placeholder","videoRef","isScanning","setIsScanning","error","setError","scannerInstance","setScannerInstance","permissionState","setPermissionState","isClosing","setIsClosing","cameraDevices","setCameraDevices","selectedCameraId","setSelectedCameraId","stopScanner","stop","err","console","warn","initializeScanner","checkCameraPermission","getCameraDevices","startScanner","handleCameraError","navigator","mediaDevices","getUserMedia","Error","permissions","permission","query","name","state","onchange","_unused","devices","enumerateDevices","videoDevices","filter","device","kind","backCamera","find","label","toLowerCase","includes","deviceId","length","requestCameraPermission","stream","video","facingMode","getTracks","forEach","track","success","concat","Promise","resolve","setTimeout","videoElement","current","html5QrCode","config","fps","qrbox","width","height","aspectRatio","disableFlip","videoConstraints","exact","undefined","start","decodedText","handleClose","handleRestart","renderPermissionRequest","style","textAlign","padding","children","fontSize","marginBottom","fontWeight","color","lineHeight","type","size","icon","onClick","background","borderColor","display","alignItems","gap","marginLeft","open","onCancel","Math","min","window","innerWidth","footer","disabled","centered","top","confirmLoading","description","marginTop","showIcon","action","id","maxWidth","margin","border","borderRadius","minHeight","justifyContent","position","ref","objectFit","autoPlay","playsInline","muted"],"sources":["C:/Users/ADMIN/Desktop/kho/kho/client/src/components/QRScanner.js"],"sourcesContent":["import React, { useEffect, useRef, useState, useCallback } from 'react';\r\nimport { Modal, Button, Space, message, Alert, Typography, Divider } from 'antd';\r\nimport { CameraOutlined, CloseOutlined, ReloadOutlined, CheckCircleOutlined } from '@ant-design/icons';\r\nimport { Html5Qrcode } from 'html5-qrcode';\r\n\r\nconst { Text } = Typography;\r\n\r\nconst SUPPORTED_FORMATS = [\r\n  Html5Qrcode.FORMATS.QR_CODE,\r\n  Html5Qrcode.FORMATS.CODE_128,\r\n  Html5Qrcode.FORMATS.CODE_39,\r\n  Html5Qrcode.FORMATS.CODE_93,\r\n  Html5Qrcode.FORMATS.EAN_13,\r\n  Html5Qrcode.FORMATS.EAN_8,\r\n  Html5Qrcode.FORMATS.UPC_A,\r\n  Html5Qrcode.FORMATS.UPC_E\r\n];\r\n\r\nconst QRScanner = ({ \r\n  visible, \r\n  onClose, \r\n  onScan, \r\n  title = \"Quét Serial Number\",\r\n  placeholder = \"Đưa camera vào mã QR hoặc Barcode\" \r\n}) => {\r\n  const videoRef = useRef(null);\r\n  const [isScanning, setIsScanning] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [scannerInstance, setScannerInstance] = useState(null);\r\n  const [permissionState, setPermissionState] = useState('unknown');\r\n  const [isClosing, setIsClosing] = useState(false);\r\n  const [cameraDevices, setCameraDevices] = useState([]);\r\n  const [selectedCameraId, setSelectedCameraId] = useState(null);\r\n\r\n  // Safe cleanup function\r\n  const stopScanner = useCallback(async () => {\r\n    try {\r\n      if (scannerInstance && scannerInstance.isScanning) {\r\n        await scannerInstance.stop();\r\n      }\r\n      setScannerInstance(null);\r\n      setIsScanning(false);\r\n    } catch (err) {\r\n      console.warn('Scanner cleanup warning:', err);\r\n      setScannerInstance(null);\r\n      setIsScanning(false);\r\n    }\r\n  }, [scannerInstance]);\r\n\r\n  // Main effect for lifecycle management\r\n  useEffect(() => {\r\n    if (visible && !isClosing) {\r\n      initializeScanner();\r\n    } else if (!visible) {\r\n      stopScanner();\r\n    }\r\n\r\n    return () => {\r\n      stopScanner();\r\n    };\r\n  }, [visible, isClosing, stopScanner]);\r\n\r\n  // Initialize scanner\r\n  const initializeScanner = async () => {\r\n    try {\r\n      setError(null);\r\n      await checkCameraPermission();\r\n      await getCameraDevices();\r\n      await startScanner();\r\n    } catch (err) {\r\n      handleCameraError(err);\r\n    }\r\n  };\r\n\r\n  // Check camera permission\r\n  const checkCameraPermission = async () => {\r\n    if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {\r\n      throw new Error('Trình duyệt không hỗ trợ truy cập camera');\r\n    }\r\n\r\n    if (navigator.permissions) {\r\n      try {\r\n        const permission = await navigator.permissions.query({ name: 'camera' });\r\n        setPermissionState(permission.state);\r\n        permission.onchange = () => setPermissionState(permission.state);\r\n      } catch {}\r\n    }\r\n  };\r\n\r\n  // Get camera devices\r\n  const getCameraDevices = async () => {\r\n    try {\r\n      const devices = await navigator.mediaDevices.enumerateDevices();\r\n      const videoDevices = devices.filter(device => device.kind === 'videoinput');\r\n      setCameraDevices(videoDevices);\r\n      \r\n      const backCamera = videoDevices.find(device =>\r\n        device.label.toLowerCase().includes('back') ||\r\n        device.label.toLowerCase().includes('rear') ||\r\n        device.label.toLowerCase().includes('environment')\r\n      );\r\n      \r\n      if (backCamera) {\r\n        setSelectedCameraId(backCamera.deviceId);\r\n      } else if (videoDevices.length > 0) {\r\n        setSelectedCameraId(videoDevices[0].deviceId);\r\n      }\r\n    } catch (err) {\r\n      console.warn('Error getting camera devices:', err);\r\n    }\r\n  };\r\n\r\n  // Request camera permission\r\n  const requestCameraPermission = async () => {\r\n    try {\r\n      setError(null);\r\n      const stream = await navigator.mediaDevices.getUserMedia({ \r\n        video: { facingMode: 'environment' } \r\n      });\r\n      stream.getTracks().forEach(track => track.stop());\r\n      setPermissionState('granted');\r\n      message.success('✅ Đã cấp quyền truy cập camera!');\r\n      await startScanner();\r\n    } catch (err) {\r\n      setPermissionState('denied');\r\n      handleCameraError(err);\r\n    }\r\n  };\r\n\r\n  // Handle camera errors\r\n  const handleCameraError = (err) => {\r\n    if (err.name === 'NotAllowedError' || err.name === 'PermissionDeniedError') {\r\n      setError('Quyền truy cập camera bị từ chối. Vui lòng cho phép truy cập camera trong cài đặt trình duyệt.');\r\n      setPermissionState('denied');\r\n    } else if (err.name === 'NotFoundError' || err.name === 'DevicesNotFoundError') {\r\n      setError('Không tìm thấy camera. Vui lòng kiểm tra kết nối camera.');\r\n    } else if (err.name === 'NotSupportedError') {\r\n      setError('Trình duyệt không hỗ trợ truy cập camera.');\r\n    } else if (err.name === 'NotReadableError') {\r\n      setError('Camera đang được sử dụng bởi ứng dụng khác.');\r\n    } else {\r\n      setError(`Lỗi camera: ${err.message || 'Không thể truy cập camera'}`);\r\n    }\r\n  };\r\n\r\n  // Start scanner with full control\r\n  const startScanner = async () => {\r\n    try {\r\n      if (scannerInstance) {\r\n        await stopScanner();\r\n        await new Promise(resolve => setTimeout(resolve, 100));\r\n      }\r\n\r\n      const videoElement = videoRef.current;\r\n      if (!videoElement) {\r\n        throw new Error('Video element not found');\r\n      }\r\n\r\n      const html5QrCode = new Html5Qrcode(\"qr-reader\");\r\n      \r\n      const config = {\r\n        fps: 10,\r\n        qrbox: { width: 250, height: 250 },\r\n        aspectRatio: 1.0,\r\n        disableFlip: false,\r\n        videoConstraints: {\r\n          facingMode: 'environment',\r\n          deviceId: selectedCameraId ? { exact: selectedCameraId } : undefined\r\n        }\r\n      };\r\n\r\n      await html5QrCode.start(\r\n        { facingMode: 'environment' },\r\n        config,\r\n        (decodedText) => {\r\n          message.success(`📱 Đã quét thành công: ${decodedText}`);\r\n          onScan(decodedText);\r\n          handleClose();\r\n        },\r\n        (error) => {\r\n          if (error && !error.includes('NotFoundException')) {\r\n            console.warn(`QR scan error: ${error}`);\r\n          }\r\n        }\r\n      );\r\n\r\n      setScannerInstance(html5QrCode);\r\n      setIsScanning(true);\r\n      setPermissionState('granted');\r\n\r\n    } catch (err) {\r\n      console.error('Scanner start error:', err);\r\n      handleCameraError(err);\r\n      setIsScanning(false);\r\n    }\r\n  };\r\n\r\n  // Handle close with proper cleanup\r\n  const handleClose = async () => {\r\n    setIsClosing(true);\r\n    try {\r\n      await stopScanner();\r\n      setError(null);\r\n      setPermissionState('unknown');\r\n      setIsClosing(false);\r\n      onClose();\r\n    } catch (err) {\r\n      console.warn('Close error:', err);\r\n      setIsClosing(false);\r\n      onClose();\r\n    }\r\n  };\r\n\r\n  // Handle restart\r\n  const handleRestart = async () => {\r\n    setError(null);\r\n    await stopScanner();\r\n    setTimeout(() => {\r\n      initializeScanner();\r\n    }, 500);\r\n  };\r\n\r\n  // Render permission request UI\r\n  const renderPermissionRequest = () => (\r\n    <div style={{ textAlign: 'center', padding: '40px 20px' }}>\r\n      <div style={{ fontSize: '64px', marginBottom: '20px' }}>📱</div>\r\n      <div style={{ fontSize: '18px', fontWeight: 'bold', marginBottom: '12px' }}>\r\n        Cần quyền truy cập Camera\r\n      </div>\r\n      <div style={{ fontSize: '14px', color: '#666', marginBottom: '24px', lineHeight: '1.5' }}>\r\n        Để quét mã QR/Barcode, ứng dụng cần quyền truy cập camera của thiết bị.\r\n        <br />\r\n        Vui lòng bấm \"Cho phép\" khi trình duyệt hỏi.\r\n      </div>\r\n      <Button \r\n        type=\"primary\" \r\n        size=\"large\"\r\n        icon={<CameraOutlined />}\r\n        onClick={requestCameraPermission}\r\n        style={{ \r\n          background: '#52c41a',\r\n          borderColor: '#52c41a',\r\n          height: '48px',\r\n          fontSize: '16px',\r\n          fontWeight: 'bold'\r\n        }}\r\n      >\r\n        🔓 Cấp quyền Camera\r\n      </Button>\r\n      \r\n      <Divider />\r\n      \r\n      <div style={{ fontSize: '12px', color: '#999', textAlign: 'left' }}>\r\n        <div style={{ marginBottom: '8px', fontWeight: 'bold' }}>💡 Lưu ý:</div>\r\n        <div>• Trên <strong>iPhone/iPad</strong>: Bấm \"Cho phép\" khi Safari hỏi</div>\r\n        <div>• Trên <strong>Android</strong>: Bấm \"Allow\" khi Chrome hỏi</div>\r\n        <div>• Nếu đã từ chối: Vào Settings → Camera → Cho phép trang web này</div>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <Modal\r\n      title={\r\n        <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\r\n          <CameraOutlined style={{ color: '#1890ff' }} />\r\n          <span>{title}</span>\r\n          {permissionState === 'granted' && (\r\n            <CheckCircleOutlined style={{ color: '#52c41a', marginLeft: '8px' }} />\r\n          )}\r\n        </div>\r\n      }\r\n      open={visible}\r\n      onCancel={handleClose}\r\n      width={Math.min(600, window.innerWidth - 32)}\r\n      footer={\r\n        <Space>\r\n          <Button onClick={handleRestart} icon={<ReloadOutlined />} disabled={isClosing}>\r\n            Thử lại\r\n          </Button>\r\n          <Button onClick={handleClose} icon={<CloseOutlined />} disabled={isClosing}>\r\n            Đóng\r\n          </Button>\r\n        </Space>\r\n      }\r\n      centered\r\n      style={{ top: 20 }}\r\n      confirmLoading={isClosing}\r\n    >\r\n      <div style={{ textAlign: 'center', padding: '20px 0' }}>\r\n        {/* Permission request UI */}\r\n        {(permissionState === 'denied' || permissionState === 'prompt' || permissionState === 'unknown') && !scannerInstance && (\r\n          renderPermissionRequest()\r\n        )}\r\n\r\n        {/* Error display */}\r\n        {error && (\r\n          <Alert\r\n            message=\"Lỗi Camera\"\r\n            description={\r\n              <div>\r\n                <div>{error}</div>\r\n                <div style={{ marginTop: '12px', fontSize: '12px' }}>\r\n                  <strong>Cách khắc phục:</strong>\r\n                  <br />• Đảm bảo trang web được truy cập qua HTTPS\r\n                  <br />• Kiểm tra cài đặt quyền camera trong trình duyệt\r\n                  <br />• Thử tải lại trang và cấp quyền lại\r\n                </div>\r\n              </div>\r\n            }\r\n            type=\"error\"\r\n            showIcon\r\n            style={{ marginBottom: 16, textAlign: 'left' }}\r\n            action={\r\n              <Button size=\"small\" onClick={requestCameraPermission}>\r\n                Thử lại\r\n              </Button>\r\n            }\r\n          />\r\n        )}\r\n\r\n        {/* Success message when camera is ready */}\r\n        {permissionState === 'granted' && !error && (\r\n          <Alert\r\n            message=\"Camera đã sẵn sàng\"\r\n            description={placeholder}\r\n            type=\"success\"\r\n            showIcon\r\n            style={{ marginBottom: 16 }}\r\n          />\r\n        )}\r\n\r\n        {/* Scanner container with controlled video element */}\r\n        {permissionState === 'granted' && !error && (\r\n          <div \r\n            id=\"qr-reader\"\r\n            style={{ \r\n              width: '100%',\r\n              maxWidth: '500px',\r\n              margin: '0 auto',\r\n              border: '2px dashed #52c41a',\r\n              borderRadius: '8px',\r\n              minHeight: '300px',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              justifyContent: 'center',\r\n              position: 'relative'\r\n            }}\r\n          >\r\n            {!isScanning && (\r\n              <div style={{ textAlign: 'center', color: '#999' }}>\r\n                <CameraOutlined style={{ fontSize: '48px', marginBottom: '16px' }} />\r\n                <div>Đang khởi tạo camera...</div>\r\n              </div>\r\n            )}\r\n            <video\r\n              ref={videoRef}\r\n              style={{\r\n                width: '100%',\r\n                height: '100%',\r\n                objectFit: 'cover',\r\n                borderRadius: '6px',\r\n                display: isScanning ? 'block' : 'none'\r\n              }}\r\n              autoPlay\r\n              playsInline\r\n              muted\r\n            />\r\n          </div>\r\n        )}\r\n\r\n        <div style={{ marginTop: 16, fontSize: '12px', color: '#666' }}>\r\n          <Text type=\"secondary\">\r\n            💡 Hỗ trợ quét: QR Code, Code 128, Code 39, EAN-13, UPC-A và nhiều định dạng khác\r\n          </Text>\r\n        </div>\r\n      </div>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default QRScanner; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}