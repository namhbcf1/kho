{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Card,Table,Button,Modal,Form,Input,Select,DatePicker,Space,Tag,Row,Col,Statistic,Tabs,message,InputNumber,Alert,Badge,Typography}from'antd';import{PlusOutlined,UserOutlined,ShopOutlined,DollarOutlined,ExclamationCircleOutlined,CheckCircleOutlined}from'@ant-design/icons';import{customersAPI,suppliersAPI,financialAPI}from'../services/api';import moment from'moment';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const{Option}=Select;const{TabPane}=Tabs;const{Text}=Typography;const DebtPage=()=>{var _form$getFieldValue;const[customerDebts,setCustomerDebts]=useState([]);const[supplierDebts,setSupplierDebts]=useState([]);const[customers,setCustomers]=useState([]);const[suppliers,setSuppliers]=useState([]);const[loading,setLoading]=useState(false);const[modalVisible,setModalVisible]=useState(false);const[form]=Form.useForm();const[activeTab,setActiveTab]=useState('customers');const[modalType,setModalType]=useState('payment');// 'payment' or 'debt'\nconst[debtStats,setDebtStats]=useState({totalCustomerDebt:0,totalSupplierDebt:0,overduCustomerDebt:0,overdueSupplierDebt:0});useEffect(()=>{fetchData();},[]);const fetchData=async()=>{setLoading(true);try{await Promise.all([fetchCustomerDebts(),fetchSupplierDebts(),fetchCustomers(),fetchSuppliers()]);}catch(error){message.error('Lỗi khi tải dữ liệu');}finally{setLoading(false);}};const fetchCustomerDebts=async()=>{try{const response=await customersAPI.getAll();if(response.data.success){const customers=response.data.data.filter(c=>c.current_debt>0);setCustomerDebts(customers);}}catch(error){console.error('Error fetching customer debts:',error);}};const fetchSupplierDebts=async()=>{try{const response=await suppliersAPI.getAll();if(response.data.success){const suppliers=response.data.data.filter(s=>s.current_debt>0);setSupplierDebts(suppliers);}}catch(error){console.error('Error fetching supplier debts:',error);}};const fetchCustomers=async()=>{try{const response=await customersAPI.getAll();if(response.data.success){setCustomers(response.data.data);}}catch(error){console.error('Error fetching customers:',error);}};const fetchSuppliers=async()=>{try{const response=await suppliersAPI.getAll();if(response.data.success){setSuppliers(response.data.data);}}catch(error){console.error('Error fetching suppliers:',error);}};const handlePayDebt=async values=>{try{var _values$transaction_d;const transactionData={type:activeTab==='customers'?'income':'expense',category:activeTab==='customers'?'Thu nợ khách hàng':'Trả nợ nhà cung cấp',amount:values.amount,description:values.description,customer_id:activeTab==='customers'?values.entity_id:null,supplier_id:activeTab==='suppliers'?values.entity_id:null,payment_method:values.payment_method,transaction_date:((_values$transaction_d=values.transaction_date)===null||_values$transaction_d===void 0?void 0:_values$transaction_d.toISOString())||new Date().toISOString(),user_id:1};const response=await financialAPI.create(transactionData);if(response.data.success){message.success('Ghi nhận thanh toán thành công');setModalVisible(false);form.resetFields();fetchData();}}catch(error){message.error('Lỗi khi ghi nhận thanh toán');}};const customerColumns=[{title:'Mã KH',dataIndex:'code',key:'code',width:100},{title:'Tên khách hàng',dataIndex:'name',key:'name',render:(name,record)=>/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{children:name}),record.phone&&/*#__PURE__*/_jsx(Text,{type:\"secondary\",style:{fontSize:12},children:record.phone})]})},{title:'Loại KH',dataIndex:'customer_type',key:'customer_type',render:type=>{const colors={regular:'default',vip:'gold',wholesale:'blue'};const labels={regular:'Thường',vip:'VIP',wholesale:'Sỉ'};return/*#__PURE__*/_jsx(Tag,{color:colors[type],children:labels[type]});}},{title:'Số nợ',dataIndex:'current_debt',key:'current_debt',render:debt=>/*#__PURE__*/_jsxs(Text,{strong:true,style:{color:debt>0?'#ff4d4f':'#52c41a'},children:[debt.toLocaleString('vi-VN'),\" \\u20AB\"]}),sorter:(a,b)=>a.current_debt-b.current_debt},{title:'Tổng chi tiêu',dataIndex:'total_spent',key:'total_spent',render:amount=>\"\".concat(amount.toLocaleString('vi-VN'),\" \\u20AB\")},{title:'Lần cuối mua',dataIndex:'last_visit',key:'last_visit',render:date=>date?moment(date).format('DD/MM/YYYY'):'Chưa có'},{title:'Thao tác',key:'action',render:(_,record)=>/*#__PURE__*/_jsx(Space,{children:/*#__PURE__*/_jsx(Button,{type:\"primary\",size:\"small\",onClick:()=>{setModalType('payment');setModalVisible(true);form.setFieldsValue({entity_id:record.id,entity_name:record.name,current_debt:record.current_debt});},children:\"Thu n\\u1EE3\"})})}];const supplierColumns=[{title:'Mã NCC',dataIndex:'code',key:'code',width:100},{title:'Tên nhà cung cấp',dataIndex:'name',key:'name',render:(name,record)=>/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{children:name}),record.contact_person&&/*#__PURE__*/_jsxs(Text,{type:\"secondary\",style:{fontSize:12},children:[\"Li\\xEAn h\\u1EC7: \",record.contact_person]})]})},{title:'Điều khoản TT',dataIndex:'payment_terms',key:'payment_terms'},{title:'Hạn mức tín dụng',dataIndex:'credit_limit',key:'credit_limit',render:limit=>\"\".concat(limit.toLocaleString('vi-VN'),\" \\u20AB\")},{title:'Số nợ hiện tại',dataIndex:'current_debt',key:'current_debt',render:(debt,record)=>/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Text,{strong:true,style:{color:debt>0?'#ff4d4f':'#52c41a'},children:[debt.toLocaleString('vi-VN'),\" \\u20AB\"]}),debt>record.credit_limit&&/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Badge,{status:\"error\",text:\"V\\u01B0\\u1EE3t h\\u1EA1n m\\u1EE9c\"})})]}),sorter:(a,b)=>a.current_debt-b.current_debt},{title:'Thao tác',key:'action',render:(_,record)=>/*#__PURE__*/_jsx(Space,{children:/*#__PURE__*/_jsx(Button,{type:\"primary\",size:\"small\",onClick:()=>{setModalType('payment');setModalVisible(true);form.setFieldsValue({entity_id:record.id,entity_name:record.name,current_debt:record.current_debt});},children:\"Tr\\u1EA3 n\\u1EE3\"})})}];const renderDebtSummary=()=>{const totalCustomerDebt=customerDebts.reduce((sum,c)=>sum+(c.current_debt||0),0);const totalSupplierDebt=supplierDebts.reduce((sum,s)=>sum+(s.current_debt||0),0);return/*#__PURE__*/_jsxs(Row,{gutter:16,style:{marginBottom:24},children:[/*#__PURE__*/_jsx(Col,{span:6,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(Statistic,{title:\"T\\u1ED5ng n\\u1EE3 kh\\xE1ch h\\xE0ng\",value:totalCustomerDebt,prefix:/*#__PURE__*/_jsx(UserOutlined,{}),suffix:\"\\u20AB\",valueStyle:{color:'#ff4d4f'}})})}),/*#__PURE__*/_jsx(Col,{span:6,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(Statistic,{title:\"T\\u1ED5ng n\\u1EE3 nh\\xE0 cung c\\u1EA5p\",value:totalSupplierDebt,prefix:/*#__PURE__*/_jsx(ShopOutlined,{}),suffix:\"\\u20AB\",valueStyle:{color:'#fa8c16'}})})}),/*#__PURE__*/_jsx(Col,{span:6,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(Statistic,{title:\"Kh\\xE1ch h\\xE0ng c\\xF3 n\\u1EE3\",value:customerDebts.length,prefix:/*#__PURE__*/_jsx(ExclamationCircleOutlined,{}),valueStyle:{color:'#1890ff'}})})}),/*#__PURE__*/_jsx(Col,{span:6,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(Statistic,{title:\"Nh\\xE0 cung c\\u1EA5p c\\xF3 n\\u1EE3\",value:supplierDebts.length,prefix:/*#__PURE__*/_jsx(ExclamationCircleOutlined,{}),valueStyle:{color:'#1890ff'}})})})]});};return/*#__PURE__*/_jsxs(\"div\",{style:{padding:'24px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:24},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Qu\\u1EA3n l\\xFD c\\xF4ng n\\u1EE3\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Theo d\\xF5i v\\xE0 qu\\u1EA3n l\\xFD n\\u1EE3 ph\\u1EA3i thu t\\u1EEB kh\\xE1ch h\\xE0ng v\\xE0 n\\u1EE3 ph\\u1EA3i tr\\u1EA3 cho nh\\xE0 cung c\\u1EA5p\"})]}),renderDebtSummary(),/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(Tabs,{activeKey:activeTab,onChange:setActiveTab,children:[/*#__PURE__*/_jsxs(TabPane,{tab:/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(UserOutlined,{}),\"N\\u1EE3 kh\\xE1ch h\\xE0ng (\",customerDebts.length,\")\"]}),children:[/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:16},children:/*#__PURE__*/_jsx(Alert,{message:\"N\\u1EE3 ph\\u1EA3i thu\",description:\"Danh s\\xE1ch kh\\xE1ch h\\xE0ng \\u0111ang c\\xF3 n\\u1EE3. H\\xE3y theo d\\xF5i v\\xE0 li\\xEAn h\\u1EC7 \\u0111\\u1EC3 thu h\\u1ED3i c\\xF4ng n\\u1EE3.\",type:\"warning\",showIcon:true,style:{marginBottom:16}})}),/*#__PURE__*/_jsx(Table,{columns:customerColumns,dataSource:customerDebts,rowKey:\"id\",loading:loading,pagination:{pageSize:20,showSizeChanger:true,showTotal:(total,range)=>\"\".concat(range[0],\"-\").concat(range[1],\" c\\u1EE7a \").concat(total,\" kh\\xE1ch h\\xE0ng\")}})]},\"customers\"),/*#__PURE__*/_jsxs(TabPane,{tab:/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(ShopOutlined,{}),\"N\\u1EE3 nh\\xE0 cung c\\u1EA5p (\",supplierDebts.length,\")\"]}),children:[/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:16},children:/*#__PURE__*/_jsx(Alert,{message:\"N\\u1EE3 ph\\u1EA3i tr\\u1EA3\",description:\"Danh s\\xE1ch c\\xE1c kho\\u1EA3n n\\u1EE3 c\\u1EA7n thanh to\\xE1n cho nh\\xE0 cung c\\u1EA5p.\",type:\"error\",showIcon:true,style:{marginBottom:16}})}),/*#__PURE__*/_jsx(Table,{columns:supplierColumns,dataSource:supplierDebts,rowKey:\"id\",loading:loading,pagination:{pageSize:20,showSizeChanger:true,showTotal:(total,range)=>\"\".concat(range[0],\"-\").concat(range[1],\" c\\u1EE7a \").concat(total,\" nh\\xE0 cung c\\u1EA5p\")}})]},\"suppliers\")]})}),/*#__PURE__*/_jsx(Modal,{title:activeTab==='customers'?'Thu nợ từ khách hàng':'Trả nợ cho nhà cung cấp',visible:modalVisible,onCancel:()=>{setModalVisible(false);form.resetFields();},footer:null,width:600,children:/*#__PURE__*/_jsxs(Form,{form:form,layout:\"vertical\",onFinish:handlePayDebt,initialValues:{payment_method:'cash',transaction_date:moment()},children:[/*#__PURE__*/_jsx(Form.Item,{name:\"entity_id\",style:{display:'none'},children:/*#__PURE__*/_jsx(Input,{})}),/*#__PURE__*/_jsx(Alert,{message:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:form.getFieldValue('entity_name')}),/*#__PURE__*/_jsx(\"br\",{}),\"N\\u1EE3 hi\\u1EC7n t\\u1EA1i: \",/*#__PURE__*/_jsxs(Text,{strong:true,children:[(_form$getFieldValue=form.getFieldValue('current_debt'))===null||_form$getFieldValue===void 0?void 0:_form$getFieldValue.toLocaleString('vi-VN'),\" \\u20AB\"]})]}),type:\"info\",style:{marginBottom:16}}),/*#__PURE__*/_jsxs(Row,{gutter:16,children:[/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(Form.Item,{name:\"amount\",label:\"S\\u1ED1 ti\\u1EC1n thanh to\\xE1n\",rules:[{required:true,message:'Vui lòng nhập số tiền'},{type:'number',max:form.getFieldValue('current_debt'),message:'Số tiền không được vượt quá số nợ hiện tại'}],children:/*#__PURE__*/_jsx(InputNumber,{style:{width:'100%'},placeholder:\"Nh\\u1EADp s\\u1ED1 ti\\u1EC1n\",formatter:value=>\"\".concat(value).replace(/\\B(?=(\\d{3})+(?!\\d))/g,','),parser:value=>value.replace(/\\$\\s?|(,*)/g,''),min:0,max:form.getFieldValue('current_debt')})})}),/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(Form.Item,{name:\"payment_method\",label:\"Ph\\u01B0\\u01A1ng th\\u1EE9c thanh to\\xE1n\",rules:[{required:true,message:'Vui lòng chọn phương thức'}],children:/*#__PURE__*/_jsxs(Select,{children:[/*#__PURE__*/_jsx(Option,{value:\"cash\",children:\"Ti\\u1EC1n m\\u1EB7t\"}),/*#__PURE__*/_jsx(Option,{value:\"card\",children:\"Th\\u1EBB\"}),/*#__PURE__*/_jsx(Option,{value:\"transfer\",children:\"Chuy\\u1EC3n kho\\u1EA3n\"}),/*#__PURE__*/_jsx(Option,{value:\"ewallet\",children:\"V\\xED \\u0111i\\u1EC7n t\\u1EED\"})]})})})]}),/*#__PURE__*/_jsx(Form.Item,{name:\"description\",label:\"Ghi ch\\xFA\",rules:[{required:true,message:'Vui lòng nhập ghi chú'}],children:/*#__PURE__*/_jsx(Input.TextArea,{rows:3,placeholder:activeTab==='customers'?'Thu nợ từ khách hàng...':'Thanh toán cho nhà cung cấp...'})}),/*#__PURE__*/_jsx(Form.Item,{name:\"transaction_date\",label:\"Ng\\xE0y thanh to\\xE1n\",rules:[{required:true,message:'Vui lòng chọn ngày'}],children:/*#__PURE__*/_jsx(DatePicker,{style:{width:'100%'},showTime:true,format:\"DD/MM/YYYY HH:mm\"})}),/*#__PURE__*/_jsx(\"div\",{style:{textAlign:'right'},children:/*#__PURE__*/_jsxs(Space,{children:[/*#__PURE__*/_jsx(Button,{onClick:()=>setModalVisible(false),children:\"H\\u1EE7y\"}),/*#__PURE__*/_jsxs(Button,{type:\"primary\",htmlType:\"submit\",children:[/*#__PURE__*/_jsx(CheckCircleOutlined,{}),\"X\\xE1c nh\\u1EADn thanh to\\xE1n\"]})]})})]})})]});};export default DebtPage;","map":{"version":3,"names":["React","useState","useEffect","Card","Table","Button","Modal","Form","Input","Select","DatePicker","Space","Tag","Row","Col","Statistic","Tabs","message","InputNumber","Alert","Badge","Typography","PlusOutlined","UserOutlined","ShopOutlined","DollarOutlined","ExclamationCircleOutlined","CheckCircleOutlined","customersAPI","suppliersAPI","financialAPI","moment","jsx","_jsx","jsxs","_jsxs","Option","TabPane","Text","DebtPage","_form$getFieldValue","customerDebts","setCustomerDebts","supplierDebts","setSupplierDebts","customers","setCustomers","suppliers","setSuppliers","loading","setLoading","modalVisible","setModalVisible","form","useForm","activeTab","setActiveTab","modalType","setModalType","debtStats","setDebtStats","totalCustomerDebt","totalSupplierDebt","overduCustomerDebt","overdueSupplierDebt","fetchData","Promise","all","fetchCustomerDebts","fetchSupplierDebts","fetchCustomers","fetchSuppliers","error","response","getAll","data","success","filter","c","current_debt","console","s","handlePayDebt","values","_values$transaction_d","transactionData","type","category","amount","description","customer_id","entity_id","supplier_id","payment_method","transaction_date","toISOString","Date","user_id","create","resetFields","customerColumns","title","dataIndex","key","width","render","name","record","children","phone","style","fontSize","colors","regular","vip","wholesale","labels","color","debt","strong","toLocaleString","sorter","a","b","concat","date","format","_","size","onClick","setFieldsValue","id","entity_name","supplierColumns","contact_person","limit","credit_limit","status","text","renderDebtSummary","reduce","sum","gutter","marginBottom","span","value","prefix","suffix","valueStyle","length","padding","activeKey","onChange","tab","showIcon","columns","dataSource","rowKey","pagination","pageSize","showSizeChanger","showTotal","total","range","visible","onCancel","footer","layout","onFinish","initialValues","Item","display","getFieldValue","label","rules","required","max","placeholder","formatter","replace","parser","min","TextArea","rows","showTime","textAlign","htmlType"],"sources":["C:/Users/ADMIN/Desktop/kho/client/src/pages/DebtPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport {\r\n  Card,\r\n  Table,\r\n  Button,\r\n  Modal,\r\n  Form,\r\n  Input,\r\n  Select,\r\n  DatePicker,\r\n  Space,\r\n  Tag,\r\n  Row,\r\n  Col,\r\n  Statistic,\r\n  Tabs,\r\n  message,\r\n  InputNumber,\r\n  Alert,\r\n  Badge,\r\n  Typography,\r\n} from 'antd';\r\nimport {\r\n  PlusOutlined,\r\n  UserOutlined,\r\n  ShopOutlined,\r\n  DollarOutlined,\r\n  ExclamationCircleOutlined,\r\n  CheckCircleOutlined,\r\n} from '@ant-design/icons';\r\nimport { customersAPI, suppliersAPI, financialAPI } from '../services/api';\r\nimport moment from 'moment';\r\n\r\nconst { Option } = Select;\r\nconst { TabPane } = Tabs;\r\nconst { Text } = Typography;\r\n\r\nconst DebtPage = () => {\r\n  const [customerDebts, setCustomerDebts] = useState([]);\r\n  const [supplierDebts, setSupplierDebts] = useState([]);\r\n  const [customers, setCustomers] = useState([]);\r\n  const [suppliers, setSuppliers] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [modalVisible, setModalVisible] = useState(false);\r\n  const [form] = Form.useForm();\r\n  const [activeTab, setActiveTab] = useState('customers');\r\n  const [modalType, setModalType] = useState('payment'); // 'payment' or 'debt'\r\n  const [debtStats, setDebtStats] = useState({\r\n    totalCustomerDebt: 0,\r\n    totalSupplierDebt: 0,\r\n    overduCustomerDebt: 0,\r\n    overdueSupplierDebt: 0,\r\n  });\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n  }, []);\r\n\r\n  const fetchData = async () => {\r\n    setLoading(true);\r\n    try {\r\n      await Promise.all([\r\n        fetchCustomerDebts(),\r\n        fetchSupplierDebts(),\r\n        fetchCustomers(),\r\n        fetchSuppliers(),\r\n      ]);\r\n    } catch (error) {\r\n      message.error('Lỗi khi tải dữ liệu');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const fetchCustomerDebts = async () => {\r\n    try {\r\n      const response = await customersAPI.getAll();\r\n      if (response.data.success) {\r\n        const customers = response.data.data.filter(c => c.current_debt > 0);\r\n        setCustomerDebts(customers);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching customer debts:', error);\r\n    }\r\n  };\r\n\r\n  const fetchSupplierDebts = async () => {\r\n    try {\r\n      const response = await suppliersAPI.getAll();\r\n      if (response.data.success) {\r\n        const suppliers = response.data.data.filter(s => s.current_debt > 0);\r\n        setSupplierDebts(suppliers);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching supplier debts:', error);\r\n    }\r\n  };\r\n\r\n  const fetchCustomers = async () => {\r\n    try {\r\n      const response = await customersAPI.getAll();\r\n      if (response.data.success) {\r\n        setCustomers(response.data.data);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching customers:', error);\r\n    }\r\n  };\r\n\r\n  const fetchSuppliers = async () => {\r\n    try {\r\n      const response = await suppliersAPI.getAll();\r\n      if (response.data.success) {\r\n        setSuppliers(response.data.data);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching suppliers:', error);\r\n    }\r\n  };\r\n\r\n  const handlePayDebt = async (values) => {\r\n    try {\r\n      const transactionData = {\r\n        type: activeTab === 'customers' ? 'income' : 'expense',\r\n        category: activeTab === 'customers' ? 'Thu nợ khách hàng' : 'Trả nợ nhà cung cấp',\r\n        amount: values.amount,\r\n        description: values.description,\r\n        customer_id: activeTab === 'customers' ? values.entity_id : null,\r\n        supplier_id: activeTab === 'suppliers' ? values.entity_id : null,\r\n        payment_method: values.payment_method,\r\n        transaction_date: values.transaction_date?.toISOString() || new Date().toISOString(),\r\n        user_id: 1,\r\n      };\r\n\r\n      const response = await financialAPI.create(transactionData);\r\n      if (response.data.success) {\r\n        message.success('Ghi nhận thanh toán thành công');\r\n        setModalVisible(false);\r\n        form.resetFields();\r\n        fetchData();\r\n      }\r\n    } catch (error) {\r\n      message.error('Lỗi khi ghi nhận thanh toán');\r\n    }\r\n  };\r\n\r\n  const customerColumns = [\r\n    {\r\n      title: 'Mã KH',\r\n      dataIndex: 'code',\r\n      key: 'code',\r\n      width: 100,\r\n    },\r\n    {\r\n      title: 'Tên khách hàng',\r\n      dataIndex: 'name',\r\n      key: 'name',\r\n      render: (name, record) => (\r\n        <div>\r\n          <div>{name}</div>\r\n          {record.phone && (\r\n            <Text type=\"secondary\" style={{ fontSize: 12 }}>\r\n              {record.phone}\r\n            </Text>\r\n          )}\r\n        </div>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Loại KH',\r\n      dataIndex: 'customer_type',\r\n      key: 'customer_type',\r\n      render: (type) => {\r\n        const colors = {\r\n          regular: 'default',\r\n          vip: 'gold',\r\n          wholesale: 'blue',\r\n        };\r\n        const labels = {\r\n          regular: 'Thường',\r\n          vip: 'VIP',\r\n          wholesale: 'Sỉ',\r\n        };\r\n        return <Tag color={colors[type]}>{labels[type]}</Tag>;\r\n      },\r\n    },\r\n    {\r\n      title: 'Số nợ',\r\n      dataIndex: 'current_debt',\r\n      key: 'current_debt',\r\n      render: (debt) => (\r\n        <Text strong style={{ color: debt > 0 ? '#ff4d4f' : '#52c41a' }}>\r\n          {debt.toLocaleString('vi-VN')} ₫\r\n        </Text>\r\n      ),\r\n      sorter: (a, b) => a.current_debt - b.current_debt,\r\n    },\r\n    {\r\n      title: 'Tổng chi tiêu',\r\n      dataIndex: 'total_spent',\r\n      key: 'total_spent',\r\n      render: (amount) => `${amount.toLocaleString('vi-VN')} ₫`,\r\n    },\r\n    {\r\n      title: 'Lần cuối mua',\r\n      dataIndex: 'last_visit',\r\n      key: 'last_visit',\r\n      render: (date) => date ? moment(date).format('DD/MM/YYYY') : 'Chưa có',\r\n    },\r\n    {\r\n      title: 'Thao tác',\r\n      key: 'action',\r\n      render: (_, record) => (\r\n        <Space>\r\n          <Button\r\n            type=\"primary\"\r\n            size=\"small\"\r\n            onClick={() => {\r\n              setModalType('payment');\r\n              setModalVisible(true);\r\n              form.setFieldsValue({\r\n                entity_id: record.id,\r\n                entity_name: record.name,\r\n                current_debt: record.current_debt,\r\n              });\r\n            }}\r\n          >\r\n            Thu nợ\r\n          </Button>\r\n        </Space>\r\n      ),\r\n    },\r\n  ];\r\n\r\n  const supplierColumns = [\r\n    {\r\n      title: 'Mã NCC',\r\n      dataIndex: 'code',\r\n      key: 'code',\r\n      width: 100,\r\n    },\r\n    {\r\n      title: 'Tên nhà cung cấp',\r\n      dataIndex: 'name',\r\n      key: 'name',\r\n      render: (name, record) => (\r\n        <div>\r\n          <div>{name}</div>\r\n          {record.contact_person && (\r\n            <Text type=\"secondary\" style={{ fontSize: 12 }}>\r\n              Liên hệ: {record.contact_person}\r\n            </Text>\r\n          )}\r\n        </div>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Điều khoản TT',\r\n      dataIndex: 'payment_terms',\r\n      key: 'payment_terms',\r\n    },\r\n    {\r\n      title: 'Hạn mức tín dụng',\r\n      dataIndex: 'credit_limit',\r\n      key: 'credit_limit',\r\n      render: (limit) => `${limit.toLocaleString('vi-VN')} ₫`,\r\n    },\r\n    {\r\n      title: 'Số nợ hiện tại',\r\n      dataIndex: 'current_debt',\r\n      key: 'current_debt',\r\n      render: (debt, record) => (\r\n        <div>\r\n          <Text strong style={{ color: debt > 0 ? '#ff4d4f' : '#52c41a' }}>\r\n            {debt.toLocaleString('vi-VN')} ₫\r\n          </Text>\r\n          {debt > record.credit_limit && (\r\n            <div>\r\n              <Badge status=\"error\" text=\"Vượt hạn mức\" />\r\n            </div>\r\n          )}\r\n        </div>\r\n      ),\r\n      sorter: (a, b) => a.current_debt - b.current_debt,\r\n    },\r\n    {\r\n      title: 'Thao tác',\r\n      key: 'action',\r\n      render: (_, record) => (\r\n        <Space>\r\n          <Button\r\n            type=\"primary\"\r\n            size=\"small\"\r\n            onClick={() => {\r\n              setModalType('payment');\r\n              setModalVisible(true);\r\n              form.setFieldsValue({\r\n                entity_id: record.id,\r\n                entity_name: record.name,\r\n                current_debt: record.current_debt,\r\n              });\r\n            }}\r\n          >\r\n            Trả nợ\r\n          </Button>\r\n        </Space>\r\n      ),\r\n    },\r\n  ];\r\n\r\n  const renderDebtSummary = () => {\r\n    const totalCustomerDebt = customerDebts.reduce((sum, c) => sum + (c.current_debt || 0), 0);\r\n    const totalSupplierDebt = supplierDebts.reduce((sum, s) => sum + (s.current_debt || 0), 0);\r\n\r\n    return (\r\n      <Row gutter={16} style={{ marginBottom: 24 }}>\r\n        <Col span={6}>\r\n          <Card>\r\n            <Statistic\r\n              title=\"Tổng nợ khách hàng\"\r\n              value={totalCustomerDebt}\r\n              prefix={<UserOutlined />}\r\n              suffix=\"₫\"\r\n              valueStyle={{ color: '#ff4d4f' }}\r\n            />\r\n          </Card>\r\n        </Col>\r\n        <Col span={6}>\r\n          <Card>\r\n            <Statistic\r\n              title=\"Tổng nợ nhà cung cấp\"\r\n              value={totalSupplierDebt}\r\n              prefix={<ShopOutlined />}\r\n              suffix=\"₫\"\r\n              valueStyle={{ color: '#fa8c16' }}\r\n            />\r\n          </Card>\r\n        </Col>\r\n        <Col span={6}>\r\n          <Card>\r\n            <Statistic\r\n              title=\"Khách hàng có nợ\"\r\n              value={customerDebts.length}\r\n              prefix={<ExclamationCircleOutlined />}\r\n              valueStyle={{ color: '#1890ff' }}\r\n            />\r\n          </Card>\r\n        </Col>\r\n        <Col span={6}>\r\n          <Card>\r\n            <Statistic\r\n              title=\"Nhà cung cấp có nợ\"\r\n              value={supplierDebts.length}\r\n              prefix={<ExclamationCircleOutlined />}\r\n              valueStyle={{ color: '#1890ff' }}\r\n            />\r\n          </Card>\r\n        </Col>\r\n      </Row>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div style={{ padding: '24px' }}>\r\n      <div style={{ marginBottom: 24 }}>\r\n        <h2>Quản lý công nợ</h2>\r\n        <p>Theo dõi và quản lý nợ phải thu từ khách hàng và nợ phải trả cho nhà cung cấp</p>\r\n      </div>\r\n\r\n      {renderDebtSummary()}\r\n\r\n      <Card>\r\n        <Tabs activeKey={activeTab} onChange={setActiveTab}>\r\n          <TabPane\r\n            tab={\r\n              <span>\r\n                <UserOutlined />\r\n                Nợ khách hàng ({customerDebts.length})\r\n              </span>\r\n            }\r\n            key=\"customers\"\r\n          >\r\n            <div style={{ marginBottom: 16 }}>\r\n              <Alert\r\n                message=\"Nợ phải thu\"\r\n                description=\"Danh sách khách hàng đang có nợ. Hãy theo dõi và liên hệ để thu hồi công nợ.\"\r\n                type=\"warning\"\r\n                showIcon\r\n                style={{ marginBottom: 16 }}\r\n              />\r\n            </div>\r\n            \r\n            <Table\r\n              columns={customerColumns}\r\n              dataSource={customerDebts}\r\n              rowKey=\"id\"\r\n              loading={loading}\r\n              pagination={{\r\n                pageSize: 20,\r\n                showSizeChanger: true,\r\n                showTotal: (total, range) =>\r\n                  `${range[0]}-${range[1]} của ${total} khách hàng`,\r\n              }}\r\n            />\r\n          </TabPane>\r\n\r\n          <TabPane\r\n            tab={\r\n              <span>\r\n                <ShopOutlined />\r\n                Nợ nhà cung cấp ({supplierDebts.length})\r\n              </span>\r\n            }\r\n            key=\"suppliers\"\r\n          >\r\n            <div style={{ marginBottom: 16 }}>\r\n              <Alert\r\n                message=\"Nợ phải trả\"\r\n                description=\"Danh sách các khoản nợ cần thanh toán cho nhà cung cấp.\"\r\n                type=\"error\"\r\n                showIcon\r\n                style={{ marginBottom: 16 }}\r\n              />\r\n            </div>\r\n            \r\n            <Table\r\n              columns={supplierColumns}\r\n              dataSource={supplierDebts}\r\n              rowKey=\"id\"\r\n              loading={loading}\r\n              pagination={{\r\n                pageSize: 20,\r\n                showSizeChanger: true,\r\n                showTotal: (total, range) =>\r\n                  `${range[0]}-${range[1]} của ${total} nhà cung cấp`,\r\n              }}\r\n            />\r\n          </TabPane>\r\n        </Tabs>\r\n      </Card>\r\n\r\n      <Modal\r\n        title={\r\n          activeTab === 'customers'\r\n            ? 'Thu nợ từ khách hàng'\r\n            : 'Trả nợ cho nhà cung cấp'\r\n        }\r\n        visible={modalVisible}\r\n        onCancel={() => {\r\n          setModalVisible(false);\r\n          form.resetFields();\r\n        }}\r\n        footer={null}\r\n        width={600}\r\n      >\r\n        <Form\r\n          form={form}\r\n          layout=\"vertical\"\r\n          onFinish={handlePayDebt}\r\n          initialValues={{\r\n            payment_method: 'cash',\r\n            transaction_date: moment(),\r\n          }}\r\n        >\r\n          <Form.Item name=\"entity_id\" style={{ display: 'none' }}>\r\n            <Input />\r\n          </Form.Item>\r\n\r\n          <Alert\r\n            message={\r\n              <div>\r\n                <strong>{form.getFieldValue('entity_name')}</strong>\r\n                <br />\r\n                Nợ hiện tại: <Text strong>{form.getFieldValue('current_debt')?.toLocaleString('vi-VN')} ₫</Text>\r\n              </div>\r\n            }\r\n            type=\"info\"\r\n            style={{ marginBottom: 16 }}\r\n          />\r\n\r\n          <Row gutter={16}>\r\n            <Col span={12}>\r\n              <Form.Item\r\n                name=\"amount\"\r\n                label=\"Số tiền thanh toán\"\r\n                rules={[\r\n                  { required: true, message: 'Vui lòng nhập số tiền' },\r\n                  {\r\n                    type: 'number',\r\n                    max: form.getFieldValue('current_debt'),\r\n                    message: 'Số tiền không được vượt quá số nợ hiện tại',\r\n                  },\r\n                ]}\r\n              >\r\n                <InputNumber\r\n                  style={{ width: '100%' }}\r\n                  placeholder=\"Nhập số tiền\"\r\n                  formatter={(value) => `${value}`.replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',')}\r\n                  parser={(value) => value.replace(/\\$\\s?|(,*)/g, '')}\r\n                  min={0}\r\n                  max={form.getFieldValue('current_debt')}\r\n                />\r\n              </Form.Item>\r\n            </Col>\r\n            <Col span={12}>\r\n              <Form.Item\r\n                name=\"payment_method\"\r\n                label=\"Phương thức thanh toán\"\r\n                rules={[{ required: true, message: 'Vui lòng chọn phương thức' }]}\r\n              >\r\n                <Select>\r\n                  <Option value=\"cash\">Tiền mặt</Option>\r\n                  <Option value=\"card\">Thẻ</Option>\r\n                  <Option value=\"transfer\">Chuyển khoản</Option>\r\n                  <Option value=\"ewallet\">Ví điện tử</Option>\r\n                </Select>\r\n              </Form.Item>\r\n            </Col>\r\n          </Row>\r\n\r\n          <Form.Item\r\n            name=\"description\"\r\n            label=\"Ghi chú\"\r\n            rules={[{ required: true, message: 'Vui lòng nhập ghi chú' }]}\r\n          >\r\n            <Input.TextArea\r\n              rows={3}\r\n              placeholder={\r\n                activeTab === 'customers'\r\n                  ? 'Thu nợ từ khách hàng...'\r\n                  : 'Thanh toán cho nhà cung cấp...'\r\n              }\r\n            />\r\n          </Form.Item>\r\n\r\n          <Form.Item\r\n            name=\"transaction_date\"\r\n            label=\"Ngày thanh toán\"\r\n            rules={[{ required: true, message: 'Vui lòng chọn ngày' }]}\r\n          >\r\n            <DatePicker\r\n              style={{ width: '100%' }}\r\n              showTime\r\n              format=\"DD/MM/YYYY HH:mm\"\r\n            />\r\n          </Form.Item>\r\n\r\n          <div style={{ textAlign: 'right' }}>\r\n            <Space>\r\n              <Button onClick={() => setModalVisible(false)}>\r\n                Hủy\r\n              </Button>\r\n              <Button type=\"primary\" htmlType=\"submit\">\r\n                <CheckCircleOutlined />\r\n                Xác nhận thanh toán\r\n              </Button>\r\n            </Space>\r\n          </div>\r\n        </Form>\r\n      </Modal>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DebtPage; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}