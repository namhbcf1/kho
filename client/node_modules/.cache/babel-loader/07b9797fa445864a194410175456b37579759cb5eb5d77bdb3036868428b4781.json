{"ast":null,"code":"import React,{useEffect,useRef,useState}from'react';import{Modal,Button,Space,message,Alert,Typography,Divider}from'antd';import{CameraOutlined,CloseOutlined,ReloadOutlined,ExclamationCircleOutlined,CheckCircleOutlined}from'@ant-design/icons';import{Html5QrcodeScanner,Html5Qrcode}from'html5-qrcode';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const{Text}=Typography;// Define supported formats manually to avoid import issues\nconst SUPPORTED_FORMATS={QR_CODE:0,AZTEC:1,CODABAR:2,CODE_39:3,CODE_93:4,CODE_128:5,DATA_MATRIX:6,MAXICODE:7,ITF:8,EAN_13:9,EAN_8:10,PDF_417:11,RSS_14:12,RSS_EXPANDED:13,UPC_A:14,UPC_E:15,UPC_EAN_EXTENSION:16};const QRScanner=_ref=>{let{visible,onClose,onScan,title=\"Quét Serial Number\",placeholder=\"Đưa camera vào mã QR hoặc Barcode\"}=_ref;const scannerRef=useRef(null);const[isScanning,setIsScanning]=useState(false);const[error,setError]=useState(null);const[scannerInstance,setScannerInstance]=useState(null);const[permissionState,setPermissionState]=useState('unknown');// 'granted', 'denied', 'prompt', 'unknown'\nconst[cameraDevices,setCameraDevices]=useState([]);const[selectedCameraId,setSelectedCameraId]=useState(null);useEffect(()=>{if(visible){checkCameraPermission();}else{stopScanner();}return()=>{stopScanner();};},[visible]);// Check camera permission\nconst checkCameraPermission=async()=>{try{// Check if getUserMedia is available\nif(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){setError('Trình duyệt không hỗ trợ truy cập camera. Vui lòng sử dụng trình duyệt hiện đại.');return;}// Check permission API if available\nif(navigator.permissions){try{const permission=await navigator.permissions.query({name:'camera'});setPermissionState(permission.state);permission.onchange=()=>{setPermissionState(permission.state);};}catch(err){console.log('Permission API not fully supported');}}// Get camera devices\nawait getCameraDevices();// Try to start scanner\nawait startScanner();}catch(err){console.error('Camera permission check failed:',err);handleCameraError(err);}};// Get available camera devices\nconst getCameraDevices=async()=>{try{const devices=await navigator.mediaDevices.enumerateDevices();const videoDevices=devices.filter(device=>device.kind==='videoinput');setCameraDevices(videoDevices);// Prefer back camera on mobile\nconst backCamera=videoDevices.find(device=>device.label.toLowerCase().includes('back')||device.label.toLowerCase().includes('rear')||device.label.toLowerCase().includes('environment'));if(backCamera){setSelectedCameraId(backCamera.deviceId);}else if(videoDevices.length>0){setSelectedCameraId(videoDevices[0].deviceId);}}catch(err){console.error('Error getting camera devices:',err);}};// Request camera permission explicitly\nconst requestCameraPermission=async()=>{try{setError(null);const stream=await navigator.mediaDevices.getUserMedia({video:{facingMode:'environment'// Prefer back camera\n}});// Stop the stream immediately as we just needed permission\nstream.getTracks().forEach(track=>track.stop());setPermissionState('granted');message.success('✅ Đã cấp quyền truy cập camera!');// Now start the scanner\nawait startScanner();}catch(err){console.error('Camera permission denied:',err);setPermissionState('denied');handleCameraError(err);}};const handleCameraError=err=>{if(err.name==='NotAllowedError'||err.name==='PermissionDeniedError'){setError('Quyền truy cập camera bị từ chối. Vui lòng cho phép truy cập camera trong cài đặt trình duyệt.');setPermissionState('denied');}else if(err.name==='NotFoundError'||err.name==='DevicesNotFoundError'){setError('Không tìm thấy camera. Vui lòng kiểm tra kết nối camera.');}else if(err.name==='NotSupportedError'){setError('Trình duyệt không hỗ trợ truy cập camera.');}else if(err.name==='NotReadableError'){setError('Camera đang được sử dụng bởi ứng dụng khác.');}else{setError(\"L\\u1ED7i camera: \".concat(err.message||'Không thể truy cập camera'));}};const startScanner=async()=>{try{setError(null);setIsScanning(true);// Clear any existing scanner\nif(scannerInstance){await scannerInstance.clear();}// Enhanced configuration for better mobile support\nconst config={fps:10,qrbox:function(viewfinderWidth,viewfinderHeight){// Make qrbox responsive\nconst minEdgePercentage=0.7;const minEdgeSize=Math.min(viewfinderWidth,viewfinderHeight);const qrboxSize=Math.floor(minEdgeSize*minEdgePercentage);return{width:qrboxSize,height:qrboxSize};},aspectRatio:1.0,disableFlip:false,// Camera constraints for mobile\nvideoConstraints:{facingMode:'environment',// Use back camera\nadvanced:[{focusMode:'continuous'},{exposureMode:'continuous'},{whiteBalanceMode:'continuous'}]},// Support multiple formats using our constants\nformatsToSupport:[SUPPORTED_FORMATS.QR_CODE,SUPPORTED_FORMATS.CODE_128,SUPPORTED_FORMATS.CODE_39,SUPPORTED_FORMATS.CODE_93,SUPPORTED_FORMATS.EAN_13,SUPPORTED_FORMATS.EAN_8,SUPPORTED_FORMATS.UPC_A,SUPPORTED_FORMATS.UPC_E]};const scanner=new Html5QrcodeScanner(\"qr-reader\",config,false// verbose logging\n);scanner.render((decodedText,decodedResult)=>{// Success callback\nmessage.success(\"\\uD83D\\uDCF1 \\u0110\\xE3 qu\\xE9t th\\xE0nh c\\xF4ng: \".concat(decodedText));onScan(decodedText);stopScanner();onClose();},error=>{// Error callback - only log, don't show to user\nif(error&&!error.includes('NotFoundException')){console.warn(\"QR scan error: \".concat(error));}});setScannerInstance(scanner);setPermissionState('granted');}catch(err){console.error('Scanner initialization error:',err);handleCameraError(err);setIsScanning(false);}};const stopScanner=async()=>{try{if(scannerInstance){await scannerInstance.clear();setScannerInstance(null);}setIsScanning(false);}catch(err){console.error('Error stopping scanner:',err);}};const handleClose=()=>{stopScanner();onClose();};const handleRestart=()=>{setError(null);stopScanner();setTimeout(()=>{checkCameraPermission();},500);};// Render permission request UI\nconst renderPermissionRequest=()=>/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center',padding:'40px 20px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'64px',marginBottom:'20px'},children:\"\\uD83D\\uDCF1\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'18px',fontWeight:'bold',marginBottom:'12px'},children:\"C\\u1EA7n quy\\u1EC1n truy c\\u1EADp Camera\"}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'14px',color:'#666',marginBottom:'24px',lineHeight:'1.5'},children:[\"\\u0110\\u1EC3 qu\\xE9t m\\xE3 QR/Barcode, \\u1EE9ng d\\u1EE5ng c\\u1EA7n quy\\u1EC1n truy c\\u1EADp camera c\\u1EE7a thi\\u1EBFt b\\u1ECB.\",/*#__PURE__*/_jsx(\"br\",{}),\"Vui l\\xF2ng b\\u1EA5m \\\"Cho ph\\xE9p\\\" khi tr\\xECnh duy\\u1EC7t h\\u1ECFi.\"]}),/*#__PURE__*/_jsx(Button,{type:\"primary\",size:\"large\",icon:/*#__PURE__*/_jsx(CameraOutlined,{}),onClick:requestCameraPermission,style:{background:'#52c41a',borderColor:'#52c41a',height:'48px',fontSize:'16px',fontWeight:'bold'},children:\"\\uD83D\\uDD13 C\\u1EA5p quy\\u1EC1n Camera\"}),/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'12px',color:'#999',textAlign:'left'},children:[/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:'8px',fontWeight:'bold'},children:\"\\uD83D\\uDCA1 L\\u01B0u \\xFD:\"}),/*#__PURE__*/_jsxs(\"div\",{children:[\"\\u2022 Tr\\xEAn \",/*#__PURE__*/_jsx(\"strong\",{children:\"iPhone/iPad\"}),\": B\\u1EA5m \\\"Cho ph\\xE9p\\\" khi Safari h\\u1ECFi\"]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"\\u2022 Tr\\xEAn \",/*#__PURE__*/_jsx(\"strong\",{children:\"Android\"}),\": B\\u1EA5m \\\"Allow\\\" khi Chrome h\\u1ECFi\"]}),/*#__PURE__*/_jsx(\"div\",{children:\"\\u2022 N\\u1EBFu \\u0111\\xE3 t\\u1EEB ch\\u1ED1i: V\\xE0o Settings \\u2192 Camera \\u2192 Cho ph\\xE9p trang web n\\xE0y\"})]})]});return/*#__PURE__*/_jsx(Modal,{title:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'8px'},children:[/*#__PURE__*/_jsx(CameraOutlined,{style:{color:'#1890ff'}}),/*#__PURE__*/_jsx(\"span\",{children:title}),permissionState==='granted'&&/*#__PURE__*/_jsx(CheckCircleOutlined,{style:{color:'#52c41a',marginLeft:'8px'}})]}),open:visible,onCancel:handleClose,width:Math.min(600,window.innerWidth-32),footer:/*#__PURE__*/_jsxs(Space,{children:[/*#__PURE__*/_jsx(Button,{onClick:handleRestart,icon:/*#__PURE__*/_jsx(ReloadOutlined,{}),children:\"Th\\u1EED l\\u1EA1i\"}),/*#__PURE__*/_jsx(Button,{onClick:handleClose,icon:/*#__PURE__*/_jsx(CloseOutlined,{}),children:\"\\u0110\\xF3ng\"})]}),destroyOnClose:true,centered:true,style:{top:20},children:/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center',padding:'20px 0'},children:[(permissionState==='denied'||permissionState==='prompt'||permissionState==='unknown')&&!scannerInstance&&renderPermissionRequest(),error&&/*#__PURE__*/_jsx(Alert,{message:\"L\\u1ED7i Camera\",description:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{children:error}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'12px',fontSize:'12px'},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"C\\xE1ch kh\\u1EAFc ph\\u1EE5c:\"}),/*#__PURE__*/_jsx(\"br\",{}),\"\\u2022 \\u0110\\u1EA3m b\\u1EA3o trang web \\u0111\\u01B0\\u1EE3c truy c\\u1EADp qua HTTPS\",/*#__PURE__*/_jsx(\"br\",{}),\"\\u2022 Ki\\u1EC3m tra c\\xE0i \\u0111\\u1EB7t quy\\u1EC1n camera trong tr\\xECnh duy\\u1EC7t\",/*#__PURE__*/_jsx(\"br\",{}),\"\\u2022 Th\\u1EED t\\u1EA3i l\\u1EA1i trang v\\xE0 c\\u1EA5p quy\\u1EC1n l\\u1EA1i\"]})]}),type:\"error\",showIcon:true,style:{marginBottom:16,textAlign:'left'},action:/*#__PURE__*/_jsx(Button,{size:\"small\",onClick:requestCameraPermission,children:\"Th\\u1EED l\\u1EA1i\"})}),permissionState==='granted'&&!error&&/*#__PURE__*/_jsx(Alert,{message:\"Camera \\u0111\\xE3 s\\u1EB5n s\\xE0ng\",description:placeholder,type:\"success\",showIcon:true,style:{marginBottom:16}}),permissionState==='granted'&&!error&&/*#__PURE__*/_jsx(\"div\",{id:\"qr-reader\",style:{width:'100%',maxWidth:'500px',margin:'0 auto',border:'2px dashed #52c41a',borderRadius:'8px',minHeight:'300px',display:'flex',alignItems:'center',justifyContent:'center'},children:!scannerInstance&&/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center',color:'#999'},children:[/*#__PURE__*/_jsx(CameraOutlined,{style:{fontSize:'48px',marginBottom:'16px'}}),/*#__PURE__*/_jsx(\"div\",{children:\"\\u0110ang kh\\u1EDFi t\\u1EA1o camera...\"})]})}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:16,fontSize:'12px',color:'#666'},children:/*#__PURE__*/_jsx(Text,{type:\"secondary\",children:\"\\uD83D\\uDCA1 H\\u1ED7 tr\\u1EE3 qu\\xE9t: QR Code, Code 128, Code 39, EAN-13, UPC-A v\\xE0 nhi\\u1EC1u \\u0111\\u1ECBnh d\\u1EA1ng kh\\xE1c\"})})]})});};export default QRScanner;","map":{"version":3,"names":["React","useEffect","useRef","useState","Modal","Button","Space","message","Alert","Typography","Divider","CameraOutlined","CloseOutlined","ReloadOutlined","ExclamationCircleOutlined","CheckCircleOutlined","Html5QrcodeScanner","Html5Qrcode","jsx","_jsx","jsxs","_jsxs","Text","SUPPORTED_FORMATS","QR_CODE","AZTEC","CODABAR","CODE_39","CODE_93","CODE_128","DATA_MATRIX","MAXICODE","ITF","EAN_13","EAN_8","PDF_417","RSS_14","RSS_EXPANDED","UPC_A","UPC_E","UPC_EAN_EXTENSION","QRScanner","_ref","visible","onClose","onScan","title","placeholder","scannerRef","isScanning","setIsScanning","error","setError","scannerInstance","setScannerInstance","permissionState","setPermissionState","cameraDevices","setCameraDevices","selectedCameraId","setSelectedCameraId","checkCameraPermission","stopScanner","navigator","mediaDevices","getUserMedia","permissions","permission","query","name","state","onchange","err","console","log","getCameraDevices","startScanner","handleCameraError","devices","enumerateDevices","videoDevices","filter","device","kind","backCamera","find","label","toLowerCase","includes","deviceId","length","requestCameraPermission","stream","video","facingMode","getTracks","forEach","track","stop","success","concat","clear","config","fps","qrbox","viewfinderWidth","viewfinderHeight","minEdgePercentage","minEdgeSize","Math","min","qrboxSize","floor","width","height","aspectRatio","disableFlip","videoConstraints","advanced","focusMode","exposureMode","whiteBalanceMode","formatsToSupport","scanner","render","decodedText","decodedResult","warn","handleClose","handleRestart","setTimeout","renderPermissionRequest","style","textAlign","padding","children","fontSize","marginBottom","fontWeight","color","lineHeight","type","size","icon","onClick","background","borderColor","display","alignItems","gap","marginLeft","open","onCancel","window","innerWidth","footer","destroyOnClose","centered","top","description","marginTop","showIcon","action","id","maxWidth","margin","border","borderRadius","minHeight","justifyContent"],"sources":["C:/Users/ADMIN/Desktop/kho/kho/client/src/components/QRScanner.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\r\nimport { Modal, Button, Space, message, Alert, Typography, Divider } from 'antd';\r\nimport { CameraOutlined, CloseOutlined, ReloadOutlined, ExclamationCircleOutlined, CheckCircleOutlined } from '@ant-design/icons';\r\nimport { Html5QrcodeScanner, Html5Qrcode } from 'html5-qrcode';\r\n\r\nconst { Text } = Typography;\r\n\r\n// Define supported formats manually to avoid import issues\r\nconst SUPPORTED_FORMATS = {\r\n  QR_CODE: 0,\r\n  AZTEC: 1,\r\n  CODABAR: 2,\r\n  CODE_39: 3,\r\n  CODE_93: 4,\r\n  CODE_128: 5,\r\n  DATA_MATRIX: 6,\r\n  MAXICODE: 7,\r\n  ITF: 8,\r\n  EAN_13: 9,\r\n  EAN_8: 10,\r\n  PDF_417: 11,\r\n  RSS_14: 12,\r\n  RSS_EXPANDED: 13,\r\n  UPC_A: 14,\r\n  UPC_E: 15,\r\n  UPC_EAN_EXTENSION: 16\r\n};\r\n\r\nconst QRScanner = ({ \r\n  visible, \r\n  onClose, \r\n  onScan, \r\n  title = \"Quét Serial Number\",\r\n  placeholder = \"Đưa camera vào mã QR hoặc Barcode\" \r\n}) => {\r\n  const scannerRef = useRef(null);\r\n  const [isScanning, setIsScanning] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [scannerInstance, setScannerInstance] = useState(null);\r\n  const [permissionState, setPermissionState] = useState('unknown'); // 'granted', 'denied', 'prompt', 'unknown'\r\n  const [cameraDevices, setCameraDevices] = useState([]);\r\n  const [selectedCameraId, setSelectedCameraId] = useState(null);\r\n\r\n  useEffect(() => {\r\n    if (visible) {\r\n      checkCameraPermission();\r\n    } else {\r\n      stopScanner();\r\n    }\r\n\r\n    return () => {\r\n      stopScanner();\r\n    };\r\n  }, [visible]);\r\n\r\n  // Check camera permission\r\n  const checkCameraPermission = async () => {\r\n    try {\r\n      // Check if getUserMedia is available\r\n      if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {\r\n        setError('Trình duyệt không hỗ trợ truy cập camera. Vui lòng sử dụng trình duyệt hiện đại.');\r\n        return;\r\n      }\r\n\r\n      // Check permission API if available\r\n      if (navigator.permissions) {\r\n        try {\r\n          const permission = await navigator.permissions.query({ name: 'camera' });\r\n          setPermissionState(permission.state);\r\n          \r\n          permission.onchange = () => {\r\n            setPermissionState(permission.state);\r\n          };\r\n        } catch (err) {\r\n          console.log('Permission API not fully supported');\r\n        }\r\n      }\r\n\r\n      // Get camera devices\r\n      await getCameraDevices();\r\n      \r\n      // Try to start scanner\r\n      await startScanner();\r\n      \r\n    } catch (err) {\r\n      console.error('Camera permission check failed:', err);\r\n      handleCameraError(err);\r\n    }\r\n  };\r\n\r\n  // Get available camera devices\r\n  const getCameraDevices = async () => {\r\n    try {\r\n      const devices = await navigator.mediaDevices.enumerateDevices();\r\n      const videoDevices = devices.filter(device => device.kind === 'videoinput');\r\n      setCameraDevices(videoDevices);\r\n      \r\n      // Prefer back camera on mobile\r\n      const backCamera = videoDevices.find(device => \r\n        device.label.toLowerCase().includes('back') || \r\n        device.label.toLowerCase().includes('rear') ||\r\n        device.label.toLowerCase().includes('environment')\r\n      );\r\n      \r\n      if (backCamera) {\r\n        setSelectedCameraId(backCamera.deviceId);\r\n      } else if (videoDevices.length > 0) {\r\n        setSelectedCameraId(videoDevices[0].deviceId);\r\n      }\r\n    } catch (err) {\r\n      console.error('Error getting camera devices:', err);\r\n    }\r\n  };\r\n\r\n  // Request camera permission explicitly\r\n  const requestCameraPermission = async () => {\r\n    try {\r\n      setError(null);\r\n      const stream = await navigator.mediaDevices.getUserMedia({ \r\n        video: { \r\n          facingMode: 'environment' // Prefer back camera\r\n        } \r\n      });\r\n      \r\n      // Stop the stream immediately as we just needed permission\r\n      stream.getTracks().forEach(track => track.stop());\r\n      \r\n      setPermissionState('granted');\r\n      message.success('✅ Đã cấp quyền truy cập camera!');\r\n      \r\n      // Now start the scanner\r\n      await startScanner();\r\n      \r\n    } catch (err) {\r\n      console.error('Camera permission denied:', err);\r\n      setPermissionState('denied');\r\n      handleCameraError(err);\r\n    }\r\n  };\r\n\r\n  const handleCameraError = (err) => {\r\n    if (err.name === 'NotAllowedError' || err.name === 'PermissionDeniedError') {\r\n      setError('Quyền truy cập camera bị từ chối. Vui lòng cho phép truy cập camera trong cài đặt trình duyệt.');\r\n      setPermissionState('denied');\r\n    } else if (err.name === 'NotFoundError' || err.name === 'DevicesNotFoundError') {\r\n      setError('Không tìm thấy camera. Vui lòng kiểm tra kết nối camera.');\r\n    } else if (err.name === 'NotSupportedError') {\r\n      setError('Trình duyệt không hỗ trợ truy cập camera.');\r\n    } else if (err.name === 'NotReadableError') {\r\n      setError('Camera đang được sử dụng bởi ứng dụng khác.');\r\n    } else {\r\n      setError(`Lỗi camera: ${err.message || 'Không thể truy cập camera'}`);\r\n    }\r\n  };\r\n\r\n  const startScanner = async () => {\r\n    try {\r\n      setError(null);\r\n      setIsScanning(true);\r\n\r\n      // Clear any existing scanner\r\n      if (scannerInstance) {\r\n        await scannerInstance.clear();\r\n      }\r\n\r\n      // Enhanced configuration for better mobile support\r\n      const config = {\r\n        fps: 10,\r\n        qrbox: function(viewfinderWidth, viewfinderHeight) {\r\n          // Make qrbox responsive\r\n          const minEdgePercentage = 0.7;\r\n          const minEdgeSize = Math.min(viewfinderWidth, viewfinderHeight);\r\n          const qrboxSize = Math.floor(minEdgeSize * minEdgePercentage);\r\n          return {\r\n            width: qrboxSize,\r\n            height: qrboxSize\r\n          };\r\n        },\r\n        aspectRatio: 1.0,\r\n        disableFlip: false,\r\n        // Camera constraints for mobile\r\n        videoConstraints: {\r\n          facingMode: 'environment', // Use back camera\r\n          advanced: [\r\n            { focusMode: 'continuous' },\r\n            { exposureMode: 'continuous' },\r\n            { whiteBalanceMode: 'continuous' }\r\n          ]\r\n        },\r\n        // Support multiple formats using our constants\r\n        formatsToSupport: [\r\n          SUPPORTED_FORMATS.QR_CODE,\r\n          SUPPORTED_FORMATS.CODE_128,\r\n          SUPPORTED_FORMATS.CODE_39,\r\n          SUPPORTED_FORMATS.CODE_93,\r\n          SUPPORTED_FORMATS.EAN_13,\r\n          SUPPORTED_FORMATS.EAN_8,\r\n          SUPPORTED_FORMATS.UPC_A,\r\n          SUPPORTED_FORMATS.UPC_E\r\n        ]\r\n      };\r\n\r\n      const scanner = new Html5QrcodeScanner(\r\n        \"qr-reader\",\r\n        config,\r\n        false // verbose logging\r\n      );\r\n\r\n      scanner.render(\r\n        (decodedText, decodedResult) => {\r\n          // Success callback\r\n          message.success(`📱 Đã quét thành công: ${decodedText}`);\r\n          onScan(decodedText);\r\n          stopScanner();\r\n          onClose();\r\n        },\r\n        (error) => {\r\n          // Error callback - only log, don't show to user\r\n          if (error && !error.includes('NotFoundException')) {\r\n            console.warn(`QR scan error: ${error}`);\r\n          }\r\n        }\r\n      );\r\n\r\n      setScannerInstance(scanner);\r\n      setPermissionState('granted');\r\n\r\n    } catch (err) {\r\n      console.error('Scanner initialization error:', err);\r\n      handleCameraError(err);\r\n      setIsScanning(false);\r\n    }\r\n  };\r\n\r\n  const stopScanner = async () => {\r\n    try {\r\n      if (scannerInstance) {\r\n        await scannerInstance.clear();\r\n        setScannerInstance(null);\r\n      }\r\n      setIsScanning(false);\r\n    } catch (err) {\r\n      console.error('Error stopping scanner:', err);\r\n    }\r\n  };\r\n\r\n  const handleClose = () => {\r\n    stopScanner();\r\n    onClose();\r\n  };\r\n\r\n  const handleRestart = () => {\r\n    setError(null);\r\n    stopScanner();\r\n    setTimeout(() => {\r\n      checkCameraPermission();\r\n    }, 500);\r\n  };\r\n\r\n  // Render permission request UI\r\n  const renderPermissionRequest = () => (\r\n    <div style={{ textAlign: 'center', padding: '40px 20px' }}>\r\n      <div style={{ fontSize: '64px', marginBottom: '20px' }}>📱</div>\r\n      <div style={{ fontSize: '18px', fontWeight: 'bold', marginBottom: '12px' }}>\r\n        Cần quyền truy cập Camera\r\n      </div>\r\n      <div style={{ fontSize: '14px', color: '#666', marginBottom: '24px', lineHeight: '1.5' }}>\r\n        Để quét mã QR/Barcode, ứng dụng cần quyền truy cập camera của thiết bị.\r\n        <br />\r\n        Vui lòng bấm \"Cho phép\" khi trình duyệt hỏi.\r\n      </div>\r\n      <Button \r\n        type=\"primary\" \r\n        size=\"large\"\r\n        icon={<CameraOutlined />}\r\n        onClick={requestCameraPermission}\r\n        style={{ \r\n          background: '#52c41a',\r\n          borderColor: '#52c41a',\r\n          height: '48px',\r\n          fontSize: '16px',\r\n          fontWeight: 'bold'\r\n        }}\r\n      >\r\n        🔓 Cấp quyền Camera\r\n      </Button>\r\n      \r\n      <Divider />\r\n      \r\n      <div style={{ fontSize: '12px', color: '#999', textAlign: 'left' }}>\r\n        <div style={{ marginBottom: '8px', fontWeight: 'bold' }}>💡 Lưu ý:</div>\r\n        <div>• Trên <strong>iPhone/iPad</strong>: Bấm \"Cho phép\" khi Safari hỏi</div>\r\n        <div>• Trên <strong>Android</strong>: Bấm \"Allow\" khi Chrome hỏi</div>\r\n        <div>• Nếu đã từ chối: Vào Settings → Camera → Cho phép trang web này</div>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <Modal\r\n      title={\r\n        <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\r\n          <CameraOutlined style={{ color: '#1890ff' }} />\r\n          <span>{title}</span>\r\n          {permissionState === 'granted' && (\r\n            <CheckCircleOutlined style={{ color: '#52c41a', marginLeft: '8px' }} />\r\n          )}\r\n        </div>\r\n      }\r\n      open={visible}\r\n      onCancel={handleClose}\r\n      width={Math.min(600, window.innerWidth - 32)}\r\n      footer={\r\n        <Space>\r\n          <Button onClick={handleRestart} icon={<ReloadOutlined />}>\r\n            Thử lại\r\n          </Button>\r\n          <Button onClick={handleClose} icon={<CloseOutlined />}>\r\n            Đóng\r\n          </Button>\r\n        </Space>\r\n      }\r\n      destroyOnClose={true}\r\n      centered\r\n      style={{ top: 20 }}\r\n    >\r\n      <div style={{ textAlign: 'center', padding: '20px 0' }}>\r\n        {/* Permission request UI */}\r\n        {(permissionState === 'denied' || permissionState === 'prompt' || permissionState === 'unknown') && !scannerInstance && (\r\n          renderPermissionRequest()\r\n        )}\r\n\r\n        {/* Error display */}\r\n        {error && (\r\n          <Alert\r\n            message=\"Lỗi Camera\"\r\n            description={\r\n              <div>\r\n                <div>{error}</div>\r\n                <div style={{ marginTop: '12px', fontSize: '12px' }}>\r\n                  <strong>Cách khắc phục:</strong>\r\n                  <br />• Đảm bảo trang web được truy cập qua HTTPS\r\n                  <br />• Kiểm tra cài đặt quyền camera trong trình duyệt\r\n                  <br />• Thử tải lại trang và cấp quyền lại\r\n                </div>\r\n              </div>\r\n            }\r\n            type=\"error\"\r\n            showIcon\r\n            style={{ marginBottom: 16, textAlign: 'left' }}\r\n            action={\r\n              <Button size=\"small\" onClick={requestCameraPermission}>\r\n                Thử lại\r\n              </Button>\r\n            }\r\n          />\r\n        )}\r\n\r\n        {/* Success message when camera is ready */}\r\n        {permissionState === 'granted' && !error && (\r\n          <Alert\r\n            message=\"Camera đã sẵn sàng\"\r\n            description={placeholder}\r\n            type=\"success\"\r\n            showIcon\r\n            style={{ marginBottom: 16 }}\r\n          />\r\n        )}\r\n\r\n        {/* Scanner container */}\r\n        {permissionState === 'granted' && !error && (\r\n          <div \r\n            id=\"qr-reader\" \r\n            style={{ \r\n              width: '100%',\r\n              maxWidth: '500px',\r\n              margin: '0 auto',\r\n              border: '2px dashed #52c41a',\r\n              borderRadius: '8px',\r\n              minHeight: '300px',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              justifyContent: 'center'\r\n            }}\r\n          >\r\n            {!scannerInstance && (\r\n              <div style={{ textAlign: 'center', color: '#999' }}>\r\n                <CameraOutlined style={{ fontSize: '48px', marginBottom: '16px' }} />\r\n                <div>Đang khởi tạo camera...</div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        <div style={{ marginTop: 16, fontSize: '12px', color: '#666' }}>\r\n          <Text type=\"secondary\">\r\n            💡 Hỗ trợ quét: QR Code, Code 128, Code 39, EAN-13, UPC-A và nhiều định dạng khác\r\n          </Text>\r\n        </div>\r\n      </div>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default QRScanner; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}