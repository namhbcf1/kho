{"ast":null,"code":"// QRScanner.js (ƒê√£ s·ª≠a ƒë·ªïi v√† c·∫£i ti·∫øn)\nimport React,{useEffect,useRef,useState,useCallback}from'react';import{Modal,Button,Space,message,Alert,Spin,Typography}from'antd';import{CameraOutlined,CloseOutlined,ReloadOutlined,CheckCircleOutlined}from'@ant-design/icons';import{Html5Qrcode,Html5QrcodeSupportedFormats}from'html5-qrcode';import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";const{Text}=Typography;const QRScanner=_ref=>{let{visible,onClose,onScan,title=\"Qu√©t Serial Number\",placeholder=\"ƒê∆∞a camera v√†o m√£ QR ho·∫∑c Barcode\"}=_ref;const scannerRef=useRef(null);// Ref cho instance c·ªßa Html5Qrcode\nconst readerRef=useRef(null);// Ref cho DOM element\nconst[isScanning,setIsScanning]=useState(false);const[error,setError]=useState(null);const[permissionState,setPermissionState]=useState('unknown');// H√†m d·ªçn d·∫πp an to√†n\nconst stopScanner=useCallback(async()=>{if(scannerRef.current&&scannerRef.current.isScanning){try{await scannerRef.current.stop();}catch(err){console.warn(\"L·ªói khi d·ª´ng scanner, c√≥ th·ªÉ b·ªè qua:\",err);}}scannerRef.current=null;setIsScanning(false);},[]);// H√†m x·ª≠ l√Ω l·ªói camera t·∫≠p trung\nconst handleCameraError=useCallback(err=>{let errorMessage=\"L\\u1ED7i kh\\xF4ng x\\xE1c \\u0111\\u1ECBnh: \".concat(err.message||err.name);if(err.name==='NotAllowedError'||err.name==='PermissionDeniedError'){errorMessage='Quy·ªÅn truy c·∫≠p camera ƒë√£ b·ªã t·ª´ ch·ªëi. Vui l√≤ng c·∫•p quy·ªÅn trong c√†i ƒë·∫∑t tr√¨nh duy·ªát.';setPermissionState('denied');}else if(err.name==='NotFoundError'||err.name==='DevicesNotFoundError'){errorMessage='Kh√¥ng t√¨m th·∫•y camera n√†o tr√™n thi·∫øt b·ªã c·ªßa b·∫°n.';}else if(err.name==='NotReadableError'){errorMessage='Camera ƒëang ƒë∆∞·ª£c s·ª≠ d·ª•ng b·ªüi m·ªôt ·ª©ng d·ª•ng kh√°c.';}setError(errorMessage);stopScanner();},[stopScanner]);// Lu·ªìng kh·ªüi t·∫°o scanner ch√≠nh\nconst startScannerFlow=useCallback(async()=>{if(isScanning||!readerRef.current)return;setError(null);setIsScanning(true);try{// 1. Ki·ªÉm tra quy·ªÅn (kh√¥ng c·∫ßn thi·∫øt v√¨ th∆∞ vi·ªán t·ª± x·ª≠ l√Ω, nh∆∞ng t·ªët ƒë·ªÉ c√≥ ph·∫£n h·ªìi UI)\nif(navigator.permissions){const perm=await navigator.permissions.query({name:'camera'});setPermissionState(perm.state);perm.onchange=()=>setPermissionState(perm.state);if(perm.state==='denied'){throw new Error('PermissionDeniedError');}}// 2. L·∫•y camera sau (n·∫øu c√≥)\nconst devices=await Html5Qrcode.getCameras();if(!devices||devices.length===0){throw new Error('NotFoundError');}const backCamera=devices.find(d=>d.label.toLowerCase().includes('back'))||devices[0];const cameraId=backCamera.id;// 3. Kh·ªüi t·∫°o v√† b·∫Øt ƒë·∫ßu scanner\nconst html5QrCode=new Html5Qrcode(readerRef.current.id,{formatsToSupport:[Html5QrcodeSupportedFormats.QR_CODE,Html5QrcodeSupportedFormats.AZTEC,Html5QrcodeSupportedFormats.CODABAR,Html5QrcodeSupportedFormats.CODE_39,Html5QrcodeSupportedFormats.CODE_93,Html5QrcodeSupportedFormats.CODE_128,Html5QrcodeSupportedFormats.DATA_MATRIX,Html5QrcodeSupportedFormats.MAXICODE,Html5QrcodeSupportedFormats.ITF,Html5QrcodeSupportedFormats.EAN_13,Html5QrcodeSupportedFormats.EAN_8,Html5QrcodeSupportedFormats.PDF_417,Html5QrcodeSupportedFormats.RSS_14,Html5QrcodeSupportedFormats.RSS_EXPANDED,Html5QrcodeSupportedFormats.UPC_A,Html5QrcodeSupportedFormats.UPC_E,Html5QrcodeSupportedFormats.UPC_EAN_EXTENSION]});scannerRef.current=html5QrCode;await html5QrCode.start(cameraId,// <-- S·ª≠a l·ªói quan tr·ªçng: S·ª≠ d·ª•ng deviceId thay v√¨ object\n{fps:10,qrbox:{width:250,height:250}},(decodedText,decodedResult)=>{// Th√†nh c√¥ng\nstopScanner();message.success(\"\\uD83D\\uDCF1 \\u0110\\xE3 qu\\xE9t th\\xE0nh c\\xF4ng: \".concat(decodedText));onScan(decodedText);onClose();},errorMessage=>{// B·ªè qua l·ªói kh√¥ng t√¨m th·∫•y QR\nif(!errorMessage.includes('NotFoundException')){console.warn(\"L\\u1ED7i qu\\xE9t QR: \".concat(errorMessage));}});setPermissionState('granted');}catch(err){handleCameraError(err);setIsScanning(false);}},[isScanning,onScan,onClose,handleCameraError,stopScanner]);// Effect ch√≠nh ƒë·ªÉ qu·∫£n l√Ω v√≤ng ƒë·ªùi scanner\nuseEffect(()=>{if(visible){// D√πng setTimeout ƒë·ªÉ ƒë·∫£m b·∫£o Modal ƒë√£ render v√† readerRef.current t·ªìn t·∫°i\nconst timer=setTimeout(()=>{startScannerFlow();},300);return()=>clearTimeout(timer);}else{stopScanner();}},[visible,startScannerFlow,stopScanner]);// H√†m x·ª≠ l√Ω ƒë√≥ng modal\nconst handleClose=()=>{stopScanner();onClose();};// Render UI\nconst renderContent=()=>{var _scannerRef$current;if(error){return/*#__PURE__*/_jsx(Alert,{message:\"L\\u1ED7i Camera\",description:error,type:\"error\",showIcon:true,action:/*#__PURE__*/_jsx(Button,{size:\"small\",type:\"primary\",onClick:startScannerFlow,children:\"Th\\u1EED l\\u1EA1i\"})});}if(permissionState==='prompt'){return/*#__PURE__*/_jsx(Alert,{message:\"Y\\xEAu c\\u1EA7u quy\\u1EC1n truy c\\u1EADp Camera\",description:\"\\u1EE8ng d\\u1EE5ng c\\u1EA7n quy\\u1EC1n truy c\\u1EADp camera \\u0111\\u1EC3 qu\\xE9t m\\xE3. Vui l\\xF2ng b\\u1EA5m 'Cho ph\\xE9p' tr\\xEAn tr\\xECnh duy\\u1EC7t.\",type:\"info\",showIcon:true});}if(!isScanning&&permissionState!=='granted'){return/*#__PURE__*/_jsx(\"div\",{style:{textAlign:'center',padding:'20px'},children:/*#__PURE__*/_jsx(Spin,{size:\"large\",tip:\"\\u0110ang ch\\u1EDD c\\u1EA5p quy\\u1EC1n camera...\"})});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Alert,{message:\"Camera \\u0111\\xE3 s\\u1EB5n s\\xE0ng\",description:placeholder,type:\"success\",showIcon:true,style:{marginBottom:16}}),isScanning&&!((_scannerRef$current=scannerRef.current)!==null&&_scannerRef$current!==void 0&&_scannerRef$current.isScanning)&&/*#__PURE__*/_jsx(\"div\",{style:{padding:'40px',textAlign:'center'},children:/*#__PURE__*/_jsx(Spin,{size:\"large\",tip:\"\\u0110ang kh\\u1EDFi t\\u1EA1o camera...\"})})]});};return/*#__PURE__*/_jsx(Modal,{title:/*#__PURE__*/_jsxs(Space,{children:[/*#__PURE__*/_jsx(CameraOutlined,{}),/*#__PURE__*/_jsx(\"span\",{children:title}),permissionState==='granted'&&/*#__PURE__*/_jsx(CheckCircleOutlined,{style:{color:'#52c41a'}})]}),open:visible,onCancel:handleClose,width:Math.min(600,window.innerWidth-32),footer:[/*#__PURE__*/_jsx(Button,{icon:/*#__PURE__*/_jsx(ReloadOutlined,{}),onClick:startScannerFlow,children:\"Th\\u1EED l\\u1EA1i\"},\"retry\"),/*#__PURE__*/_jsx(Button,{icon:/*#__PURE__*/_jsx(CloseOutlined,{}),onClick:handleClose,children:\"\\u0110\\xF3ng\"},\"close\")],centered:true,destroyOnClose:true// Quan tr·ªçng: H·ªßy component khi ƒë√≥ng ƒë·ªÉ d·ªçn d·∫πp tri·ªát ƒë·ªÉ\n,children:/*#__PURE__*/_jsxs(\"div\",{style:{padding:'20px 0'},children:[renderContent(),/*#__PURE__*/_jsx(\"div\",{id:\"qr-reader-container\",ref:readerRef,style:{width:'100%',minHeight:'250px',border:error?'2px dashed #ff4d4f':'2px dashed #d9d9d9',borderRadius:'8px',marginTop:'16px'}}),/*#__PURE__*/_jsx(Text,{type:\"secondary\",style:{display:'block',textAlign:'center',marginTop:'16px'},children:\"\\uD83D\\uDCA1 H\\u1ED7 tr\\u1EE3 qu\\xE9t: QR Code & Barcode\"})]})});};export default QRScanner;","map":{"version":3,"names":["React","useEffect","useRef","useState","useCallback","Modal","Button","Space","message","Alert","Spin","Typography","CameraOutlined","CloseOutlined","ReloadOutlined","CheckCircleOutlined","Html5Qrcode","Html5QrcodeSupportedFormats","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","Text","QRScanner","_ref","visible","onClose","onScan","title","placeholder","scannerRef","readerRef","isScanning","setIsScanning","error","setError","permissionState","setPermissionState","stopScanner","current","stop","err","console","warn","handleCameraError","errorMessage","concat","name","startScannerFlow","navigator","permissions","perm","query","state","onchange","Error","devices","getCameras","length","backCamera","find","d","label","toLowerCase","includes","cameraId","id","html5QrCode","formatsToSupport","QR_CODE","AZTEC","CODABAR","CODE_39","CODE_93","CODE_128","DATA_MATRIX","MAXICODE","ITF","EAN_13","EAN_8","PDF_417","RSS_14","RSS_EXPANDED","UPC_A","UPC_E","UPC_EAN_EXTENSION","start","fps","qrbox","width","height","decodedText","decodedResult","success","timer","setTimeout","clearTimeout","handleClose","renderContent","_scannerRef$current","description","type","showIcon","action","size","onClick","children","style","textAlign","padding","tip","marginBottom","color","open","onCancel","Math","min","window","innerWidth","footer","icon","centered","destroyOnClose","ref","minHeight","border","borderRadius","marginTop","display"],"sources":["C:/Users/ADMIN/Desktop/kho/kho/client/src/components/QRScanner.js"],"sourcesContent":["// QRScanner.js (ƒê√£ s·ª≠a ƒë·ªïi v√† c·∫£i ti·∫øn)\r\nimport React, { useEffect, useRef, useState, useCallback } from 'react';\r\nimport { Modal, Button, Space, message, Alert, Spin, Typography } from 'antd';\r\nimport { CameraOutlined, CloseOutlined, ReloadOutlined, CheckCircleOutlined } from '@ant-design/icons';\r\nimport { Html5Qrcode, Html5QrcodeSupportedFormats } from 'html5-qrcode';\r\n\r\nconst { Text } = Typography;\r\n\r\nconst QRScanner = ({\r\n  visible,\r\n  onClose,\r\n  onScan,\r\n  title = \"Qu√©t Serial Number\",\r\n  placeholder = \"ƒê∆∞a camera v√†o m√£ QR ho·∫∑c Barcode\"\r\n}) => {\r\n  const scannerRef = useRef(null); // Ref cho instance c·ªßa Html5Qrcode\r\n  const readerRef = useRef(null); // Ref cho DOM element\r\n  const [isScanning, setIsScanning] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [permissionState, setPermissionState] = useState('unknown');\r\n\r\n  // H√†m d·ªçn d·∫πp an to√†n\r\n  const stopScanner = useCallback(async () => {\r\n    if (scannerRef.current && scannerRef.current.isScanning) {\r\n      try {\r\n        await scannerRef.current.stop();\r\n      } catch (err) {\r\n        console.warn(\"L·ªói khi d·ª´ng scanner, c√≥ th·ªÉ b·ªè qua:\", err);\r\n      }\r\n    }\r\n    scannerRef.current = null;\r\n    setIsScanning(false);\r\n  }, []);\r\n\r\n  // H√†m x·ª≠ l√Ω l·ªói camera t·∫≠p trung\r\n  const handleCameraError = useCallback((err) => {\r\n    let errorMessage = `L·ªói kh√¥ng x√°c ƒë·ªãnh: ${err.message || err.name}`;\r\n    if (err.name === 'NotAllowedError' || err.name === 'PermissionDeniedError') {\r\n      errorMessage = 'Quy·ªÅn truy c·∫≠p camera ƒë√£ b·ªã t·ª´ ch·ªëi. Vui l√≤ng c·∫•p quy·ªÅn trong c√†i ƒë·∫∑t tr√¨nh duy·ªát.';\r\n      setPermissionState('denied');\r\n    } else if (err.name === 'NotFoundError' || err.name === 'DevicesNotFoundError') {\r\n      errorMessage = 'Kh√¥ng t√¨m th·∫•y camera n√†o tr√™n thi·∫øt b·ªã c·ªßa b·∫°n.';\r\n    } else if (err.name === 'NotReadableError') {\r\n      errorMessage = 'Camera ƒëang ƒë∆∞·ª£c s·ª≠ d·ª•ng b·ªüi m·ªôt ·ª©ng d·ª•ng kh√°c.';\r\n    }\r\n    setError(errorMessage);\r\n    stopScanner();\r\n  }, [stopScanner]);\r\n\r\n  // Lu·ªìng kh·ªüi t·∫°o scanner ch√≠nh\r\n  const startScannerFlow = useCallback(async () => {\r\n    if (isScanning || !readerRef.current) return;\r\n    setError(null);\r\n    setIsScanning(true);\r\n\r\n    try {\r\n      // 1. Ki·ªÉm tra quy·ªÅn (kh√¥ng c·∫ßn thi·∫øt v√¨ th∆∞ vi·ªán t·ª± x·ª≠ l√Ω, nh∆∞ng t·ªët ƒë·ªÉ c√≥ ph·∫£n h·ªìi UI)\r\n      if (navigator.permissions) {\r\n        const perm = await navigator.permissions.query({ name: 'camera' });\r\n        setPermissionState(perm.state);\r\n        perm.onchange = () => setPermissionState(perm.state);\r\n        if (perm.state === 'denied') {\r\n            throw new Error('PermissionDeniedError');\r\n        }\r\n      }\r\n      \r\n      // 2. L·∫•y camera sau (n·∫øu c√≥)\r\n      const devices = await Html5Qrcode.getCameras();\r\n      if (!devices || devices.length === 0) {\r\n        throw new Error('NotFoundError');\r\n      }\r\n      \r\n      const backCamera = devices.find(d => d.label.toLowerCase().includes('back')) || devices[0];\r\n      const cameraId = backCamera.id;\r\n      \r\n      // 3. Kh·ªüi t·∫°o v√† b·∫Øt ƒë·∫ßu scanner\r\n      const html5QrCode = new Html5Qrcode(readerRef.current.id, {\r\n        formatsToSupport: [\r\n          Html5QrcodeSupportedFormats.QR_CODE,\r\n          Html5QrcodeSupportedFormats.AZTEC,\r\n          Html5QrcodeSupportedFormats.CODABAR,\r\n          Html5QrcodeSupportedFormats.CODE_39,\r\n          Html5QrcodeSupportedFormats.CODE_93,\r\n          Html5QrcodeSupportedFormats.CODE_128,\r\n          Html5QrcodeSupportedFormats.DATA_MATRIX,\r\n          Html5QrcodeSupportedFormats.MAXICODE,\r\n          Html5QrcodeSupportedFormats.ITF,\r\n          Html5QrcodeSupportedFormats.EAN_13,\r\n          Html5QrcodeSupportedFormats.EAN_8,\r\n          Html5QrcodeSupportedFormats.PDF_417,\r\n          Html5QrcodeSupportedFormats.RSS_14,\r\n          Html5QrcodeSupportedFormats.RSS_EXPANDED,\r\n          Html5QrcodeSupportedFormats.UPC_A,\r\n          Html5QrcodeSupportedFormats.UPC_E,\r\n          Html5QrcodeSupportedFormats.UPC_EAN_EXTENSION,\r\n        ]\r\n      });\r\n      scannerRef.current = html5QrCode;\r\n\r\n      await html5QrCode.start(\r\n        cameraId, // <-- S·ª≠a l·ªói quan tr·ªçng: S·ª≠ d·ª•ng deviceId thay v√¨ object\r\n        {\r\n          fps: 10,\r\n          qrbox: { width: 250, height: 250 },\r\n        },\r\n        (decodedText, decodedResult) => {\r\n          // Th√†nh c√¥ng\r\n          stopScanner();\r\n          message.success(`üì± ƒê√£ qu√©t th√†nh c√¥ng: ${decodedText}`);\r\n          onScan(decodedText);\r\n          onClose();\r\n        },\r\n        (errorMessage) => {\r\n          // B·ªè qua l·ªói kh√¥ng t√¨m th·∫•y QR\r\n          if (!errorMessage.includes('NotFoundException')) {\r\n            console.warn(`L·ªói qu√©t QR: ${errorMessage}`);\r\n          }\r\n        }\r\n      );\r\n      setPermissionState('granted');\r\n\r\n    } catch (err) {\r\n      handleCameraError(err);\r\n      setIsScanning(false);\r\n    }\r\n  }, [isScanning, onScan, onClose, handleCameraError, stopScanner]);\r\n\r\n  // Effect ch√≠nh ƒë·ªÉ qu·∫£n l√Ω v√≤ng ƒë·ªùi scanner\r\n  useEffect(() => {\r\n    if (visible) {\r\n      // D√πng setTimeout ƒë·ªÉ ƒë·∫£m b·∫£o Modal ƒë√£ render v√† readerRef.current t·ªìn t·∫°i\r\n      const timer = setTimeout(() => {\r\n        startScannerFlow();\r\n      }, 300);\r\n      return () => clearTimeout(timer);\r\n    } else {\r\n      stopScanner();\r\n    }\r\n  }, [visible, startScannerFlow, stopScanner]);\r\n  \r\n  // H√†m x·ª≠ l√Ω ƒë√≥ng modal\r\n  const handleClose = () => {\r\n    stopScanner();\r\n    onClose();\r\n  };\r\n\r\n  // Render UI\r\n  const renderContent = () => {\r\n    if (error) {\r\n      return (\r\n        <Alert\r\n          message=\"L·ªói Camera\"\r\n          description={error}\r\n          type=\"error\"\r\n          showIcon\r\n          action={\r\n            <Button size=\"small\" type=\"primary\" onClick={startScannerFlow}>\r\n              Th·ª≠ l·∫°i\r\n            </Button>\r\n          }\r\n        />\r\n      );\r\n    }\r\n\r\n    if (permissionState === 'prompt') {\r\n        return (\r\n            <Alert\r\n              message=\"Y√™u c·∫ßu quy·ªÅn truy c·∫≠p Camera\"\r\n              description=\"·ª®ng d·ª•ng c·∫ßn quy·ªÅn truy c·∫≠p camera ƒë·ªÉ qu√©t m√£. Vui l√≤ng b·∫•m 'Cho ph√©p' tr√™n tr√¨nh duy·ªát.\"\r\n              type=\"info\"\r\n              showIcon\r\n            />\r\n        );\r\n    }\r\n\r\n    if (!isScanning && permissionState !== 'granted') {\r\n        return (\r\n            <div style={{ textAlign: 'center', padding: '20px' }}>\r\n                <Spin size=\"large\" tip=\"ƒêang ch·ªù c·∫•p quy·ªÅn camera...\" />\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n      <>\r\n        <Alert\r\n          message=\"Camera ƒë√£ s·∫µn s√†ng\"\r\n          description={placeholder}\r\n          type=\"success\"\r\n          showIcon\r\n          style={{ marginBottom: 16 }}\r\n        />\r\n        {/* Spinner khi ƒëang kh·ªüi t·∫°o */}\r\n        {isScanning && !scannerRef.current?.isScanning && (\r\n            <div style={{ padding: '40px', textAlign: 'center' }}>\r\n                <Spin size=\"large\" tip=\"ƒêang kh·ªüi t·∫°o camera...\" />\r\n            </div>\r\n        )}\r\n      </>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <Modal\r\n      title={\r\n        <Space>\r\n          <CameraOutlined />\r\n          <span>{title}</span>\r\n          {permissionState === 'granted' && <CheckCircleOutlined style={{ color: '#52c41a' }} />}\r\n        </Space>\r\n      }\r\n      open={visible}\r\n      onCancel={handleClose}\r\n      width={Math.min(600, window.innerWidth - 32)}\r\n      footer={[\r\n        <Button key=\"retry\" icon={<ReloadOutlined />} onClick={startScannerFlow}>\r\n          Th·ª≠ l·∫°i\r\n        </Button>,\r\n        <Button key=\"close\" icon={<CloseOutlined />} onClick={handleClose}>\r\n          ƒê√≥ng\r\n        </Button>,\r\n      ]}\r\n      centered\r\n      destroyOnClose // Quan tr·ªçng: H·ªßy component khi ƒë√≥ng ƒë·ªÉ d·ªçn d·∫πp tri·ªát ƒë·ªÉ\r\n    >\r\n      <div style={{ padding: '20px 0' }}>\r\n        {renderContent()}\r\n        <div\r\n          id=\"qr-reader-container\"\r\n          ref={readerRef}\r\n          style={{ \r\n            width: '100%', \r\n            minHeight: '250px', \r\n            border: (error) ? '2px dashed #ff4d4f' : '2px dashed #d9d9d9',\r\n            borderRadius: '8px',\r\n            marginTop: '16px'\r\n        }}\r\n        />\r\n        <Text type=\"secondary\" style={{ display: 'block', textAlign: 'center', marginTop: '16px' }}>\r\n            üí° H·ªó tr·ª£ qu√©t: QR Code & Barcode\r\n        </Text>\r\n      </div>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default QRScanner;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}