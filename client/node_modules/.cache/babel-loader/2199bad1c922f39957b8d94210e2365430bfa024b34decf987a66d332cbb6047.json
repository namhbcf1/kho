{"ast":null,"code":"import React,{Component}from'react';import{Result,Button,Alert,Typography,Space}from'antd';import{BugOutlined,ReloadOutlined,RobotOutlined}from'@ant-design/icons';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const{Text,Paragraph}=Typography;class ErrorBoundary extends Component{constructor(props){super(props);this.analyzeWithAI=async(error,errorInfo)=>{this.setState({aiAnalyzing:true});try{// Try to use the AI error monitor if available\nif(window.aiErrorMonitor){const analysis=await window.aiErrorMonitor.analyzeError({type:'react_error',message:error.message,stack:error.stack,componentStack:errorInfo.componentStack,url:window.location.href,userAgent:navigator.userAgent,timestamp:new Date().toISOString()});if(analysis&&analysis.suggestion){this.setState({aiSuggestion:analysis.suggestion});}}}catch(aiError){console.error('AI Error Analysis failed:',aiError);}finally{this.setState({aiAnalyzing:false});}};this.handleReload=()=>{window.location.reload();};this.handleGoHome=()=>{window.location.href='/pos';};this.state={hasError:false,error:null,errorInfo:null,aiAnalyzing:false,aiSuggestion:null};}static getDerivedStateFromError(error){return{hasError:true};}componentDidCatch(error,errorInfo){console.error('üö® Error Boundary caught an error:',error,errorInfo);this.setState({error:error,errorInfo:errorInfo});// Send to AI Error Monitor for analysis\nthis.analyzeWithAI(error,errorInfo);}render(){if(this.state.hasError){return/*#__PURE__*/_jsx(\"div\",{style:{padding:'50px',textAlign:'center'},children:/*#__PURE__*/_jsx(Result,{status:\"error\",title:\"Oops! C\\xF3 l\\u1ED7i x\\u1EA3y ra\",subTitle:\"\\u1EE8ng d\\u1EE5ng \\u0111\\xE3 g\\u1EB7p l\\u1ED7i kh\\xF4ng mong mu\\u1ED1n. Vui l\\xF2ng th\\u1EED l\\u1EA1i ho\\u1EB7c li\\xEAn h\\u1EC7 h\\u1ED7 tr\\u1EE3.\",icon:/*#__PURE__*/_jsx(BugOutlined,{}),extra:/*#__PURE__*/_jsxs(Space,{direction:\"vertical\",size:\"large\",children:[/*#__PURE__*/_jsxs(Space,{children:[/*#__PURE__*/_jsx(Button,{type:\"primary\",icon:/*#__PURE__*/_jsx(ReloadOutlined,{}),onClick:this.handleReload,children:\"T\\u1EA3i l\\u1EA1i trang\"}),/*#__PURE__*/_jsx(Button,{onClick:this.handleGoHome,children:\"V\\u1EC1 trang ch\\xEDnh\"})]}),this.state.aiAnalyzing&&/*#__PURE__*/_jsx(Alert,{message:\"\\uD83E\\uDD16 AI \\u0111ang ph\\xE2n t\\xEDch l\\u1ED7i...\",type:\"info\",showIcon:true,icon:/*#__PURE__*/_jsx(RobotOutlined,{spin:true})}),this.state.aiSuggestion&&/*#__PURE__*/_jsx(Alert,{message:\"AI Suggestion\",description:this.state.aiSuggestion,type:\"success\",showIcon:true,icon:/*#__PURE__*/_jsx(RobotOutlined,{})}),process.env.NODE_ENV==='development'&&/*#__PURE__*/_jsxs(\"details\",{style:{textAlign:'left',marginTop:'20px'},children:[/*#__PURE__*/_jsx(\"summary\",{children:\"Chi ti\\u1EBFt l\\u1ED7i (Development Mode)\"}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'10px'},children:[/*#__PURE__*/_jsxs(Paragraph,{children:[/*#__PURE__*/_jsx(Text,{strong:true,children:\"Error:\"}),\" \",this.state.error&&this.state.error.message]}),/*#__PURE__*/_jsxs(Paragraph,{children:[/*#__PURE__*/_jsx(Text,{strong:true,children:\"Stack trace:\"}),/*#__PURE__*/_jsx(\"pre\",{style:{fontSize:'12px',background:'#f5f5f5',padding:'10px',borderRadius:'4px'},children:this.state.error&&this.state.error.stack})]})]})]})]})})});}return this.props.children;}}export default ErrorBoundary;","map":{"version":3,"names":["React","Component","Result","Button","Alert","Typography","Space","BugOutlined","ReloadOutlined","RobotOutlined","jsx","_jsx","jsxs","_jsxs","Text","Paragraph","ErrorBoundary","constructor","props","analyzeWithAI","error","errorInfo","setState","aiAnalyzing","window","aiErrorMonitor","analysis","analyzeError","type","message","stack","componentStack","url","location","href","userAgent","navigator","timestamp","Date","toISOString","suggestion","aiSuggestion","aiError","console","handleReload","reload","handleGoHome","state","hasError","getDerivedStateFromError","componentDidCatch","render","style","padding","textAlign","children","status","title","subTitle","icon","extra","direction","size","onClick","showIcon","spin","description","process","env","NODE_ENV","marginTop","strong","fontSize","background","borderRadius"],"sources":["C:/Users/ADMIN/Desktop/kho/kho/client/src/components/ErrorBoundary.js"],"sourcesContent":["import React, { Component } from 'react';\r\nimport { Result, Button, Alert, Typography, Space } from 'antd';\r\nimport { BugOutlined, ReloadOutlined, RobotOutlined } from '@ant-design/icons';\r\n\r\nconst { Text, Paragraph } = Typography;\r\n\r\nclass ErrorBoundary extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      hasError: false,\r\n      error: null,\r\n      errorInfo: null,\r\n      aiAnalyzing: false,\r\n      aiSuggestion: null\r\n    };\r\n  }\r\n\r\n  static getDerivedStateFromError(error) {\r\n    return { hasError: true };\r\n  }\r\n\r\n  componentDidCatch(error, errorInfo) {\r\n    console.error('üö® Error Boundary caught an error:', error, errorInfo);\r\n    \r\n    this.setState({\r\n      error: error,\r\n      errorInfo: errorInfo\r\n    });\r\n\r\n    // Send to AI Error Monitor for analysis\r\n    this.analyzeWithAI(error, errorInfo);\r\n  }\r\n\r\n  analyzeWithAI = async (error, errorInfo) => {\r\n    this.setState({ aiAnalyzing: true });\r\n    \r\n    try {\r\n      // Try to use the AI error monitor if available\r\n      if (window.aiErrorMonitor) {\r\n        const analysis = await window.aiErrorMonitor.analyzeError({\r\n          type: 'react_error',\r\n          message: error.message,\r\n          stack: error.stack,\r\n          componentStack: errorInfo.componentStack,\r\n          url: window.location.href,\r\n          userAgent: navigator.userAgent,\r\n          timestamp: new Date().toISOString()\r\n        });\r\n\r\n        if (analysis && analysis.suggestion) {\r\n          this.setState({ aiSuggestion: analysis.suggestion });\r\n        }\r\n      }\r\n    } catch (aiError) {\r\n      console.error('AI Error Analysis failed:', aiError);\r\n    } finally {\r\n      this.setState({ aiAnalyzing: false });\r\n    }\r\n  };\r\n\r\n  handleReload = () => {\r\n    window.location.reload();\r\n  };\r\n\r\n  handleGoHome = () => {\r\n    window.location.href = '/pos';\r\n  };\r\n\r\n  render() {\r\n    if (this.state.hasError) {\r\n      return (\r\n        <div style={{ padding: '50px', textAlign: 'center' }}>\r\n          <Result\r\n            status=\"error\"\r\n            title=\"Oops! C√≥ l·ªói x·∫£y ra\"\r\n            subTitle=\"·ª®ng d·ª•ng ƒë√£ g·∫∑p l·ªói kh√¥ng mong mu·ªën. Vui l√≤ng th·ª≠ l·∫°i ho·∫∑c li√™n h·ªá h·ªó tr·ª£.\"\r\n            icon={<BugOutlined />}\r\n            extra={\r\n              <Space direction=\"vertical\" size=\"large\">\r\n                <Space>\r\n                  <Button type=\"primary\" icon={<ReloadOutlined />} onClick={this.handleReload}>\r\n                    T·∫£i l·∫°i trang\r\n                  </Button>\r\n                  <Button onClick={this.handleGoHome}>\r\n                    V·ªÅ trang ch√≠nh\r\n                  </Button>\r\n                </Space>\r\n\r\n                {/* AI Analysis Section */}\r\n                {this.state.aiAnalyzing && (\r\n                  <Alert\r\n                    message=\"ü§ñ AI ƒëang ph√¢n t√≠ch l·ªói...\"\r\n                    type=\"info\"\r\n                    showIcon\r\n                    icon={<RobotOutlined spin />}\r\n                  />\r\n                )}\r\n\r\n                {this.state.aiSuggestion && (\r\n                  <Alert\r\n                    message=\"AI Suggestion\"\r\n                    description={this.state.aiSuggestion}\r\n                    type=\"success\"\r\n                    showIcon\r\n                    icon={<RobotOutlined />}\r\n                  />\r\n                )}\r\n\r\n                {/* Error Details (for development) */}\r\n                {process.env.NODE_ENV === 'development' && (\r\n                  <details style={{ textAlign: 'left', marginTop: '20px' }}>\r\n                    <summary>Chi ti·∫øt l·ªói (Development Mode)</summary>\r\n                    <div style={{ marginTop: '10px' }}>\r\n                      <Paragraph>\r\n                        <Text strong>Error:</Text> {this.state.error && this.state.error.message}\r\n                      </Paragraph>\r\n                      <Paragraph>\r\n                        <Text strong>Stack trace:</Text>\r\n                        <pre style={{ fontSize: '12px', background: '#f5f5f5', padding: '10px', borderRadius: '4px' }}>\r\n                          {this.state.error && this.state.error.stack}\r\n                        </pre>\r\n                      </Paragraph>\r\n                    </div>\r\n                  </details>\r\n                )}\r\n              </Space>\r\n            }\r\n          />\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return this.props.children;\r\n  }\r\n}\r\n\r\nexport default ErrorBoundary; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}